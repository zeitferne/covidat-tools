<!DOCTYPE html>

<html lang="en">
<head><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>

<meta name="robots" content="noindex">
<style>
        html, body { max-width: 1000px; margin: auto; }
</style>
<title>covidat-old</title><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<style type="text/css">
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
  </style>
<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
 * Mozilla scrollbar styling
 */

/* use standard opaque scrollbars for most nodes */
[data-jp-theme-scrollbars='true'] {
  scrollbar-color: rgb(var(--jp-scrollbar-thumb-color))
    var(--jp-scrollbar-background-color);
}

/* for code nodes, use a transparent style of scrollbar. These selectors
 * will match lower in the tree, and so will override the above */
[data-jp-theme-scrollbars='true'] .CodeMirror-hscrollbar,
[data-jp-theme-scrollbars='true'] .CodeMirror-vscrollbar {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
}

/* tiny scrollbar */

.jp-scrollbar-tiny {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
  scrollbar-width: thin;
}

/* tiny scrollbar */

.jp-scrollbar-tiny::-webkit-scrollbar,
.jp-scrollbar-tiny::-webkit-scrollbar-corner {
  background-color: transparent;
  height: 4px;
  width: 4px;
}

.jp-scrollbar-tiny::-webkit-scrollbar-thumb {
  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:horizontal {
  border-left: 0 solid transparent;
  border-right: 0 solid transparent;
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:vertical {
  border-top: 0 solid transparent;
  border-bottom: 0 solid transparent;
}

/*
 * Lumino
 */

.lm-ScrollBar[data-orientation='horizontal'] {
  min-height: 16px;
  max-height: 16px;
  min-width: 45px;
  border-top: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] {
  min-width: 16px;
  max-width: 16px;
  min-height: 45px;
  border-left: 1px solid #a0a0a0;
}

.lm-ScrollBar-button {
  background-color: #f0f0f0;
  background-position: center center;
  min-height: 15px;
  max-height: 15px;
  min-width: 15px;
  max-width: 15px;
}

.lm-ScrollBar-button:hover {
  background-color: #dadada;
}

.lm-ScrollBar-button.lm-mod-active {
  background-color: #cdcdcd;
}

.lm-ScrollBar-track {
  background: #f0f0f0;
}

.lm-ScrollBar-thumb {
  background: #cdcdcd;
}

.lm-ScrollBar-thumb:hover {
  background: #bababa;
}

.lm-ScrollBar-thumb.lm-mod-active {
  background: #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal'] .lm-ScrollBar-thumb {
  height: 100%;
  min-width: 15px;
  border-left: 1px solid #a0a0a0;
  border-right: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] .lm-ScrollBar-thumb {
  width: 100%;
  min-height: 15px;
  border-top: 1px solid #a0a0a0;
  border-bottom: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-left);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-right);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-up);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-down);
  background-size: 17px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-Widget {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
}

.lm-Widget.lm-mod-hidden {
  display: none !important;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.lm-AccordionPanel[data-orientation='horizontal'] > .lm-AccordionPanel-title {
  /* Title is rotated for horizontal accordion panel using CSS */
  display: block;
  transform-origin: top left;
  transform: rotate(-90deg) translate(-100%);
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  display: flex;
  flex-direction: column;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-CommandPalette-search {
  flex: 0 0 auto;
}

.lm-CommandPalette-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  min-height: 0;
  overflow: auto;
  list-style-type: none;
}

.lm-CommandPalette-header {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-CommandPalette-item {
  display: flex;
  flex-direction: row;
}

.lm-CommandPalette-itemIcon {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemContent {
  flex: 1 1 auto;
  overflow: hidden;
}

.lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemLabel {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-close-icon {
  border: 1px solid transparent;
  background-color: transparent;
  position: absolute;
  z-index: 1;
  right: 3%;
  top: 0;
  bottom: 0;
  margin: auto;
  padding: 7px 0;
  display: none;
  vertical-align: middle;
  outline: 0;
  cursor: pointer;
}
.lm-close-icon:after {
  content: 'X';
  display: block;
  width: 15px;
  height: 15px;
  text-align: center;
  color: #000;
  font-weight: normal;
  font-size: 12px;
  cursor: pointer;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-DockPanel {
  z-index: 0;
}

.lm-DockPanel-widget {
  z-index: 0;
}

.lm-DockPanel-tabBar {
  z-index: 1;
}

.lm-DockPanel-handle {
  z-index: 2;
}

.lm-DockPanel-handle.lm-mod-hidden {
  display: none !important;
}

.lm-DockPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}

.lm-DockPanel-handle[data-orientation='horizontal'] {
  cursor: ew-resize;
}

.lm-DockPanel-handle[data-orientation='vertical'] {
  cursor: ns-resize;
}

.lm-DockPanel-handle[data-orientation='horizontal']:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}

.lm-DockPanel-handle[data-orientation='vertical']:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

.lm-DockPanel-overlay {
  z-index: 3;
  box-sizing: border-box;
  pointer-events: none;
}

.lm-DockPanel-overlay.lm-mod-hidden {
  display: none !important;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-Menu {
  z-index: 10000;
  position: absolute;
  white-space: nowrap;
  overflow-x: hidden;
  overflow-y: auto;
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-Menu-content {
  margin: 0;
  padding: 0;
  display: table;
  list-style-type: none;
}

.lm-Menu-item {
  display: table-row;
}

.lm-Menu-item.lm-mod-hidden,
.lm-Menu-item.lm-mod-collapsed {
  display: none !important;
}

.lm-Menu-itemIcon,
.lm-Menu-itemSubmenuIcon {
  display: table-cell;
  text-align: center;
}

.lm-Menu-itemLabel {
  display: table-cell;
  text-align: left;
}

.lm-Menu-itemShortcut {
  display: table-cell;
  text-align: right;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-MenuBar {
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-MenuBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: row;
  list-style-type: none;
}

.lm-MenuBar-item {
  box-sizing: border-box;
}

.lm-MenuBar-itemIcon,
.lm-MenuBar-itemLabel {
  display: inline-block;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-ScrollBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-ScrollBar[data-orientation='horizontal'] {
  flex-direction: row;
}

.lm-ScrollBar[data-orientation='vertical'] {
  flex-direction: column;
}

.lm-ScrollBar-button {
  box-sizing: border-box;
  flex: 0 0 auto;
}

.lm-ScrollBar-track {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  flex: 1 1 auto;
}

.lm-ScrollBar-thumb {
  box-sizing: border-box;
  position: absolute;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-SplitPanel-child {
  z-index: 0;
}

.lm-SplitPanel-handle {
  z-index: 1;
}

.lm-SplitPanel-handle.lm-mod-hidden {
  display: none !important;
}

.lm-SplitPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}

.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle {
  cursor: ew-resize;
}

.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle {
  cursor: ns-resize;
}

.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}

.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-TabBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.lm-TabBar[data-orientation='horizontal'] {
  flex-direction: row;
  align-items: flex-end;
}

.lm-TabBar[data-orientation='vertical'] {
  flex-direction: column;
  align-items: flex-end;
}

.lm-TabBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex: 1 1 auto;
  list-style-type: none;
}

.lm-TabBar[data-orientation='horizontal'] > .lm-TabBar-content {
  flex-direction: row;
}

.lm-TabBar[data-orientation='vertical'] > .lm-TabBar-content {
  flex-direction: column;
}

.lm-TabBar-tab {
  display: flex;
  flex-direction: row;
  box-sizing: border-box;
  overflow: hidden;
  touch-action: none; /* Disable native Drag/Drop */
}

.lm-TabBar-tabIcon,
.lm-TabBar-tabCloseIcon {
  flex: 0 0 auto;
}

.lm-TabBar-tabLabel {
  flex: 1 1 auto;
  overflow: hidden;
  white-space: nowrap;
}

.lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing: border-box;
}

.lm-TabBar-tab.lm-mod-hidden {
  display: none !important;
}

.lm-TabBar-addButton.lm-mod-hidden {
  display: none !important;
}

.lm-TabBar.lm-mod-dragging .lm-TabBar-tab {
  position: relative;
}

.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab {
  left: 0;
  transition: left 150ms ease;
}

.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab {
  top: 0;
  transition: top 150ms ease;
}

.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging {
  transition: none;
}

.lm-TabBar-tabLabel .lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing: border-box;
  background: inherit;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-TabPanel-tabBar {
  z-index: 1;
}

.lm-TabPanel-stackedPanel {
  z-index: 0;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapse {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

.jp-Collapse-header {
  padding: 1px 12px;
  background-color: var(--jp-layout-color1);
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  align-items: center;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  text-transform: uppercase;
  user-select: none;
}

.jp-Collapser-icon {
  height: 16px;
}

.jp-Collapse-header-collapsed .jp-Collapser-icon {
  transform: rotate(-90deg);
  margin: auto 0;
}

.jp-Collapser-title {
  line-height: 25px;
}

.jp-Collapse-contents {
  padding: 0 12px;
  background-color: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* This file was auto-generated by ensureUiComponents() in @jupyterlab/buildutils */

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

/* Icons urls */

:root {
  --jp-icon-add-above: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzN18xOTQ5MikiPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGQ9Ik00Ljc1IDQuOTMwNjZINi42MjVWNi44MDU2NkM2LjYyNSA3LjAxMTkxIDYuNzkzNzUgNy4xODA2NiA3IDcuMTgwNjZDNy4yMDYyNSA3LjE4MDY2IDcuMzc1IDcuMDExOTEgNy4zNzUgNi44MDU2NlY0LjkzMDY2SDkuMjVDOS40NTYyNSA0LjkzMDY2IDkuNjI1IDQuNzYxOTEgOS42MjUgNC41NTU2NkM5LjYyNSA0LjM0OTQxIDkuNDU2MjUgNC4xODA2NiA5LjI1IDQuMTgwNjZINy4zNzVWMi4zMDU2NkM3LjM3NSAyLjA5OTQxIDcuMjA2MjUgMS45MzA2NiA3IDEuOTMwNjZDNi43OTM3NSAxLjkzMDY2IDYuNjI1IDIuMDk5NDEgNi42MjUgMi4zMDU2NlY0LjE4MDY2SDQuNzVDNC41NDM3NSA0LjE4MDY2IDQuMzc1IDQuMzQ5NDEgNC4zNzUgNC41NTU2NkM0LjM3NSA0Ljc2MTkxIDQuNTQzNzUgNC45MzA2NiA0Ljc1IDQuOTMwNjZaIiBmaWxsPSIjNjE2MTYxIiBzdHJva2U9IiM2MTYxNjEiIHN0cm9rZS13aWR0aD0iMC43Ii8+CjwvZz4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjUgOS41VjExLjVMMi41IDExLjVWOS41TDExLjUgOS41Wk0xMiA4QzEyLjU1MjMgOCAxMyA4LjQ0NzcyIDEzIDlWMTJDMTMgMTIuNTUyMyAxMi41NTIzIDEzIDEyIDEzTDIgMTNDMS40NDc3MiAxMyAxIDEyLjU1MjMgMSAxMlY5QzEgOC40NDc3MiAxLjQ0NzcxIDggMiA4TDEyIDhaIiBmaWxsPSIjNjE2MTYxIi8+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzN18xOTQ5MiI+CjxyZWN0IGNsYXNzPSJqcC1pY29uMyIgd2lkdGg9IjYiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0ibWF0cml4KC0xIDAgMCAxIDEwIDEuNTU1NjYpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==);
  --jp-icon-add-below: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzN18xOTQ5OCkiPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGQ9Ik05LjI1IDEwLjA2OTNMNy4zNzUgMTAuMDY5M0w3LjM3NSA4LjE5NDM0QzcuMzc1IDcuOTg4MDkgNy4yMDYyNSA3LjgxOTM0IDcgNy44MTkzNEM2Ljc5Mzc1IDcuODE5MzQgNi42MjUgNy45ODgwOSA2LjYyNSA4LjE5NDM0TDYuNjI1IDEwLjA2OTNMNC43NSAxMC4wNjkzQzQuNTQzNzUgMTAuMDY5MyA0LjM3NSAxMC4yMzgxIDQuMzc1IDEwLjQ0NDNDNC4zNzUgMTAuNjUwNiA0LjU0Mzc1IDEwLjgxOTMgNC43NSAxMC44MTkzTDYuNjI1IDEwLjgxOTNMNi42MjUgMTIuNjk0M0M2LjYyNSAxMi45MDA2IDYuNzkzNzUgMTMuMDY5MyA3IDEzLjA2OTNDNy4yMDYyNSAxMy4wNjkzIDcuMzc1IDEyLjkwMDYgNy4zNzUgMTIuNjk0M0w3LjM3NSAxMC44MTkzTDkuMjUgMTAuODE5M0M5LjQ1NjI1IDEwLjgxOTMgOS42MjUgMTAuNjUwNiA5LjYyNSAxMC40NDQzQzkuNjI1IDEwLjIzODEgOS40NTYyNSAxMC4wNjkzIDkuMjUgMTAuMDY5M1oiIGZpbGw9IiM2MTYxNjEiIHN0cm9rZT0iIzYxNjE2MSIgc3Ryb2tlLXdpZHRoPSIwLjciLz4KPC9nPgo8cGF0aCBjbGFzcz0ianAtaWNvbjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMi41IDUuNUwyLjUgMy41TDExLjUgMy41TDExLjUgNS41TDIuNSA1LjVaTTIgN0MxLjQ0NzcyIDcgMSA2LjU1MjI4IDEgNkwxIDNDMSAyLjQ0NzcyIDEuNDQ3NzIgMiAyIDJMMTIgMkMxMi41NTIzIDIgMTMgMi40NDc3MiAxMyAzTDEzIDZDMTMgNi41NTIyOSAxMi41NTIzIDcgMTIgN0wyIDdaIiBmaWxsPSIjNjE2MTYxIi8+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzN18xOTQ5OCI+CjxyZWN0IGNsYXNzPSJqcC1pY29uMyIgd2lkdGg9IjYiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0ibWF0cml4KDEgMS43NDg0NmUtMDcgMS43NDg0NmUtMDcgLTEgNCAxMy40NDQzKSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=);
  --jp-icon-add: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bell: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiPgogICA8cGF0aCBjbGFzcz0ianAtaWNvbjIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMzMzMzMzIgogICAgICBkPSJtOCAwLjI5Yy0xLjQgMC0yLjcgMC43My0zLjYgMS44LTEuMiAxLjUtMS40IDMuNC0xLjUgNS4yLTAuMTggMi4yLTAuNDQgNC0yLjMgNS4zbDAuMjggMS4zaDVjMC4wMjYgMC42NiAwLjMyIDEuMSAwLjcxIDEuNSAwLjg0IDAuNjEgMiAwLjYxIDIuOCAwIDAuNTItMC40IDAuNi0xIDAuNzEtMS41aDVsMC4yOC0xLjNjLTEuOS0wLjk3LTIuMi0zLjMtMi4zLTUuMy0wLjEzLTEuOC0wLjI2LTMuNy0xLjUtNS4yLTAuODUtMS0yLjItMS44LTMuNi0xLjh6bTAgMS40YzAuODggMCAxLjkgMC41NSAyLjUgMS4zIDAuODggMS4xIDEuMSAyLjcgMS4yIDQuNCAwLjEzIDEuNyAwLjIzIDMuNiAxLjMgNS4yaC0xMGMxLjEtMS42IDEuMi0zLjQgMS4zLTUuMiAwLjEzLTEuNyAwLjMtMy4zIDEuMi00LjQgMC41OS0wLjcyIDEuNi0xLjMgMi41LTEuM3ptLTAuNzQgMTJoMS41Yy0wLjAwMTUgMC4yOCAwLjAxNSAwLjc5LTAuNzQgMC43OS0wLjczIDAuMDAxNi0wLjcyLTAuNTMtMC43NC0wLjc5eiIgLz4KPC9zdmc+Cg==);
  --jp-icon-bug-dot: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiPgogICAgICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTcuMTkgOEgyMFYxMEgxNy45MUMxNy45NiAxMC4zMyAxOCAxMC42NiAxOCAxMVYxMkgyMFYxNEgxOC41SDE4VjE0LjAyNzVDMTUuNzUgMTQuMjc2MiAxNCAxNi4xODM3IDE0IDE4LjVDMTQgMTkuMjA4IDE0LjE2MzUgMTkuODc3OSAxNC40NTQ5IDIwLjQ3MzlDMTMuNzA2MyAyMC44MTE3IDEyLjg3NTcgMjEgMTIgMjFDOS43OCAyMSA3Ljg1IDE5Ljc5IDYuODEgMThINFYxNkg2LjA5QzYuMDQgMTUuNjcgNiAxNS4zNCA2IDE1VjE0SDRWMTJINlYxMUM2IDEwLjY2IDYuMDQgMTAuMzMgNi4wOSAxMEg0VjhINi44MUM3LjI2IDcuMjIgNy44OCA2LjU1IDguNjIgNi4wNEw3IDQuNDFMOC40MSAzTDEwLjU5IDUuMTdDMTEuMDQgNS4wNiAxMS41MSA1IDEyIDVDMTIuNDkgNSAxMi45NiA1LjA2IDEzLjQyIDUuMTdMMTUuNTkgM0wxNyA0LjQxTDE1LjM3IDYuMDRDMTYuMTIgNi41NSAxNi43NCA3LjIyIDE3LjE5IDhaTTEwIDE2SDE0VjE0SDEwVjE2Wk0xMCAxMkgxNFYxMEgxMFYxMloiIGZpbGw9IiM2MTYxNjEiLz4KICAgICAgICA8cGF0aCBkPSJNMjIgMTguNUMyMiAyMC40MzMgMjAuNDMzIDIyIDE4LjUgMjJDMTYuNTY3IDIyIDE1IDIwLjQzMyAxNSAxOC41QzE1IDE2LjU2NyAxNi41NjcgMTUgMTguNSAxNUMyMC40MzMgMTUgMjIgMTYuNTY3IDIyIDE4LjVaIiBmaWxsPSIjNjE2MTYxIi8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bug: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yMCA4aC0yLjgxYy0uNDUtLjc4LTEuMDctMS40NS0xLjgyLTEuOTZMMTcgNC40MSAxNS41OSAzbC0yLjE3IDIuMTdDMTIuOTYgNS4wNiAxMi40OSA1IDEyIDVjLS40OSAwLS45Ni4wNi0xLjQxLjE3TDguNDEgMyA3IDQuNDFsMS42MiAxLjYzQzcuODggNi41NSA3LjI2IDcuMjIgNi44MSA4SDR2MmgyLjA5Yy0uMDUuMzMtLjA5LjY2LS4wOSAxdjFINHYyaDJ2MWMwIC4zNC4wNC42Ny4wOSAxSDR2MmgyLjgxYzEuMDQgMS43OSAyLjk3IDMgNS4xOSAzczQuMTUtMS4yMSA1LjE5LTNIMjB2LTJoLTIuMDljLjA1LS4zMy4wOS0uNjYuMDktMXYtMWgydi0yaC0ydi0xYzAtLjM0LS4wNC0uNjctLjA5LTFIMjBWOHptLTYgOGgtNHYtMmg0djJ6bTAtNGgtNHYtMmg0djJ6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-build: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE0LjkgMTcuNDVDMTYuMjUgMTcuNDUgMTcuMzUgMTYuMzUgMTcuMzUgMTVDMTcuMzUgMTMuNjUgMTYuMjUgMTIuNTUgMTQuOSAxMi41NUMxMy41NCAxMi41NSAxMi40NSAxMy42NSAxMi40NSAxNUMxMi40NSAxNi4zNSAxMy41NCAxNy40NSAxNC45IDE3LjQ1Wk0yMC4xIDE1LjY4TDIxLjU4IDE2Ljg0QzIxLjcxIDE2Ljk1IDIxLjc1IDE3LjEzIDIxLjY2IDE3LjI5TDIwLjI2IDE5LjcxQzIwLjE3IDE5Ljg2IDIwIDE5LjkyIDE5LjgzIDE5Ljg2TDE4LjA5IDE5LjE2QzE3LjczIDE5LjQ0IDE3LjMzIDE5LjY3IDE2LjkxIDE5Ljg1TDE2LjY0IDIxLjdDMTYuNjIgMjEuODcgMTYuNDcgMjIgMTYuMyAyMkgxMy41QzEzLjMyIDIyIDEzLjE4IDIxLjg3IDEzLjE1IDIxLjdMMTIuODkgMTkuODVDMTIuNDYgMTkuNjcgMTIuMDcgMTkuNDQgMTEuNzEgMTkuMTZMOS45NjAwMiAxOS44NkM5LjgxMDAyIDE5LjkyIDkuNjIwMDIgMTkuODYgOS41NDAwMiAxOS43MUw4LjE0MDAyIDE3LjI5QzguMDUwMDIgMTcuMTMgOC4wOTAwMiAxNi45NSA4LjIyMDAyIDE2Ljg0TDkuNzAwMDIgMTUuNjhMOS42NTAwMSAxNUw5LjcwMDAyIDE0LjMxTDguMjIwMDIgMTMuMTZDOC4wOTAwMiAxMy4wNSA4LjA1MDAyIDEyLjg2IDguMTQwMDIgMTIuNzFMOS41NDAwMiAxMC4yOUM5LjYyMDAyIDEwLjEzIDkuODEwMDIgMTAuMDcgOS45NjAwMiAxMC4xM0wxMS43MSAxMC44NEMxMi4wNyAxMC41NiAxMi40NiAxMC4zMiAxMi44OSAxMC4xNUwxMy4xNSA4LjI4OTk4QzEzLjE4IDguMTI5OTggMTMuMzIgNy45OTk5OCAxMy41IDcuOTk5OThIMTYuM0MxNi40NyA3Ljk5OTk4IDE2LjYyIDguMTI5OTggMTYuNjQgOC4yODk5OEwxNi45MSAxMC4xNUMxNy4zMyAxMC4zMiAxNy43MyAxMC41NiAxOC4wOSAxMC44NEwxOS44MyAxMC4xM0MyMCAxMC4wNyAyMC4xNyAxMC4xMyAyMC4yNiAxMC4yOUwyMS42NiAxMi43MUMyMS43NSAxMi44NiAyMS43MSAxMy4wNSAyMS41OCAxMy4xNkwyMC4xIDE0LjMxTDIwLjE1IDE1TDIwLjEgMTUuNjhaIi8+CiAgICA8cGF0aCBkPSJNNy4zMjk2NiA3LjQ0NDU0QzguMDgzMSA3LjAwOTU0IDguMzM5MzIgNi4wNTMzMiA3LjkwNDMyIDUuMjk5ODhDNy40NjkzMiA0LjU0NjQzIDYuNTA4MSA0LjI4MTU2IDUuNzU0NjYgNC43MTY1NkM1LjM5MTc2IDQuOTI2MDggNS4xMjY5NSA1LjI3MTE4IDUuMDE4NDkgNS42NzU5NEM0LjkxMDA0IDYuMDgwNzEgNC45NjY4MiA2LjUxMTk4IDUuMTc2MzQgNi44NzQ4OEM1LjYxMTM0IDcuNjI4MzIgNi41NzYyMiA3Ljg3OTU0IDcuMzI5NjYgNy40NDQ1NFpNOS42NTcxOCA0Ljc5NTkzTDEwLjg2NzIgNC45NTE3OUMxMC45NjI4IDQuOTc3NDEgMTEuMDQwMiA1LjA3MTMzIDExLjAzODIgNS4xODc5M0wxMS4wMzg4IDYuOTg4OTNDMTEuMDQ1NSA3LjEwMDU0IDEwLjk2MTYgNy4xOTUxOCAxMC44NTUgNy4yMTA1NEw5LjY2MDAxIDcuMzgwODNMOS4yMzkxNSA4LjEzMTg4TDkuNjY5NjEgOS4yNTc0NUM5LjcwNzI5IDkuMzYyNzEgOS42NjkzNCA5LjQ3Njk5IDkuNTc0MDggOS41MzE5OUw4LjAxNTIzIDEwLjQzMkM3LjkxMTMxIDEwLjQ5MiA3Ljc5MzM3IDEwLjQ2NzcgNy43MjEwNSAxMC4zODI0TDYuOTg3NDggOS40MzE4OEw2LjEwOTMxIDkuNDMwODNMNS4zNDcwNCAxMC4zOTA1QzUuMjg5MDkgMTAuNDcwMiA1LjE3MzgzIDEwLjQ5MDUgNS4wNzE4NyAxMC40MzM5TDMuNTEyNDUgOS41MzI5M0MzLjQxMDQ5IDkuNDc2MzMgMy4zNzY0NyA5LjM1NzQxIDMuNDEwNzUgOS4yNTY3OUwzLjg2MzQ3IDguMTQwOTNMMy42MTc0OSA3Ljc3NDg4TDMuNDIzNDcgNy4zNzg4M0wyLjIzMDc1IDcuMjEyOTdDMi4xMjY0NyA3LjE5MjM1IDIuMDQwNDkgNy4xMDM0MiAyLjA0MjQ1IDYuOTg2ODJMMi4wNDE4NyA1LjE4NTgyQzIuMDQzODMgNS4wNjkyMiAyLjExOTA5IDQuOTc5NTggMi4yMTcwNCA0Ljk2OTIyTDMuNDIwNjUgNC43OTM5M0wzLjg2NzQ5IDQuMDI3ODhMMy40MTEwNSAyLjkxNzMxQzMuMzczMzcgMi44MTIwNCAzLjQxMTMxIDIuNjk3NzYgMy41MTUyMyAyLjYzNzc2TDUuMDc0MDggMS43Mzc3NkM1LjE2OTM0IDEuNjgyNzYgNS4yODcyOSAxLjcwNzA0IDUuMzU5NjEgMS43OTIzMUw2LjExOTE1IDIuNzI3ODhMNi45ODAwMSAyLjczODkzTDcuNzI0OTYgMS43ODkyMkM3Ljc5MTU2IDEuNzA0NTggNy45MTU0OCAxLjY3OTIyIDguMDA4NzkgMS43NDA4Mkw5LjU2ODIxIDIuNjQxODJDOS42NzAxNyAyLjY5ODQyIDkuNzEyODUgMi44MTIzNCA5LjY4NzIzIDIuOTA3OTdMOS4yMTcxOCA0LjAzMzgzTDkuNDYzMTYgNC4zOTk4OEw5LjY1NzE4IDQuNzk1OTNaIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iOS45LDEzLjYgMy42LDcuNCA0LjQsNi42IDkuOSwxMi4yIDE1LjQsNi43IDE2LjEsNy40ICIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNS45TDksOS43bDMuOC0zLjhsMS4yLDEuMmwtNC45LDVsLTQuOS01TDUuMiw1Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNy41TDksMTEuMmwzLjgtMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-left: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik0xMC44LDEyLjhMNy4xLDlsMy44LTMuOGwwLDcuNkgxMC44eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-right: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik03LjIsNS4yTDEwLjksOWwtMy44LDMuOFY1LjJINy4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-up-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMTUuNCwxMy4zIDkuOSw3LjcgNC40LDEzLjIgMy42LDEyLjUgOS45LDYuMyAxNi4xLDEyLjYgIi8+Cgk8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-up: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik01LjIsMTAuNUw5LDYuOGwzLjgsMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-case-sensitive: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWFjY2VudDIiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTcuNiw4aDAuOWwzLjUsOGgtMS4xTDEwLDE0SDZsLTAuOSwySDRMNy42LDh6IE04LDkuMUw2LjQsMTNoMy4yTDgsOS4xeiIvPgogICAgPHBhdGggZD0iTTE2LjYsOS44Yy0wLjIsMC4xLTAuNCwwLjEtMC43LDAuMWMtMC4yLDAtMC40LTAuMS0wLjYtMC4yYy0wLjEtMC4xLTAuMi0wLjQtMC4yLTAuNyBjLTAuMywwLjMtMC42LDAuNS0wLjksMC43Yy0wLjMsMC4xLTAuNywwLjItMS4xLDAuMmMtMC4zLDAtMC41LDAtMC43LTAuMWMtMC4yLTAuMS0wLjQtMC4yLTAuNi0wLjNjLTAuMi0wLjEtMC4zLTAuMy0wLjQtMC41IGMtMC4xLTAuMi0wLjEtMC40LTAuMS0wLjdjMC0wLjMsMC4xLTAuNiwwLjItMC44YzAuMS0wLjIsMC4zLTAuNCwwLjQtMC41QzEyLDcsMTIuMiw2LjksMTIuNSw2LjhjMC4yLTAuMSwwLjUtMC4xLDAuNy0wLjIgYzAuMy0wLjEsMC41LTAuMSwwLjctMC4xYzAuMiwwLDAuNC0wLjEsMC42LTAuMWMwLjIsMCwwLjMtMC4xLDAuNC0wLjJjMC4xLTAuMSwwLjItMC4yLDAuMi0wLjRjMC0xLTEuMS0xLTEuMy0xIGMtMC40LDAtMS40LDAtMS40LDEuMmgtMC45YzAtMC40LDAuMS0wLjcsMC4yLTFjMC4xLTAuMiwwLjMtMC40LDAuNS0wLjZjMC4yLTAuMiwwLjUtMC4zLDAuOC0wLjNDMTMuMyw0LDEzLjYsNCwxMy45LDQgYzAuMywwLDAuNSwwLDAuOCwwLjFjMC4zLDAsMC41LDAuMSwwLjcsMC4yYzAuMiwwLjEsMC40LDAuMywwLjUsMC41QzE2LDUsMTYsNS4yLDE2LDUuNnYyLjljMCwwLjIsMCwwLjQsMCwwLjUgYzAsMC4xLDAuMSwwLjIsMC4zLDAuMmMwLjEsMCwwLjIsMCwwLjMsMFY5Ljh6IE0xNS4yLDYuOWMtMS4yLDAuNi0zLjEsMC4yLTMuMSwxLjRjMCwxLjQsMy4xLDEsMy4xLTAuNVY2Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-circle-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDJDNi40NyAyIDIgNi40NyAyIDEyczQuNDcgMTAgMTAgMTAgMTAtNC40NyAxMC0xMFMxNy41MyAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-circle: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-clear: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8bWFzayBpZD0iZG9udXRIb2xlIj4KICAgIDxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiIC8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI4IiBmaWxsPSJibGFjayIvPgogIDwvbWFzaz4KCiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxyZWN0IGhlaWdodD0iMTgiIHdpZHRoPSIyIiB4PSIxMSIgeT0iMyIgdHJhbnNmb3JtPSJyb3RhdGUoMzE1LCAxMiwgMTIpIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgbWFzaz0idXJsKCNkb251dEhvbGUpIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-close: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1ub25lIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIGpwLWljb24zLWhvdmVyIiBmaWxsPSJub25lIj4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjExIi8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIGpwLWljb24tYWNjZW50Mi1ob3ZlciIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPgogIDwvZz4KCiAgPGcgY2xhc3M9ImpwLWljb24tbm9uZSBqcC1pY29uLWJ1c3kiIGZpbGw9Im5vbmUiPgogICAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICA8cGF0aCBkPSJNNi41OSwzLjQxTDIsOEw2LjU5LDEyLjZMOCwxMS4xOEw0LjgyLDhMOCw0LjgyTDYuNTksMy40MU0xMi40MSwzLjQxTDExLDQuODJMMTQuMTgsOEwxMSwxMS4xOEwxMi40MSwxMi42TDE3LDhMMTIuNDEsMy40MU0yMS41OSwxMS41OUwxMy41LDE5LjY4TDkuODMsMTZMOC40MiwxNy40MUwxMy41LDIyLjVMMjMsMTNMMjEuNTksMTEuNTlaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTExLjQgMTguNkw2LjggMTRMMTEuNCA5LjRMMTAgOEw0IDE0TDEwIDIwTDExLjQgMTguNlpNMTYuNiAxOC42TDIxLjIgMTRMMTYuNiA5LjRMMTggOEwyNCAxNEwxOCAyMEwxNi42IDE4LjZWMTguNloiLz4KCTwvZz4KPC9zdmc+Cg==);
  --jp-icon-collapse-all: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTggMmMxIDAgMTEgMCAxMiAwczIgMSAyIDJjMCAxIDAgMTEgMCAxMnMwIDItMiAyQzIwIDE0IDIwIDQgMjAgNFMxMCA0IDYgNGMwLTIgMS0yIDItMnoiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTE4IDhjMC0xLTEtMi0yLTJTNSA2IDQgNnMtMiAxLTIgMmMwIDEgMCAxMSAwIDEyczEgMiAyIDJjMSAwIDExIDAgMTIgMHMyLTEgMi0yYzAtMSAwLTExIDAtMTJ6bS0yIDB2MTJINFY4eiIgLz4KICAgICAgICA8cGF0aCBkPSJNNiAxM3YyaDh2LTJ6IiAvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-console: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwMCAyMDAiPgogIDxnIGNsYXNzPSJqcC1jb25zb2xlLWljb24tYmFja2dyb3VuZC1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMjg4RDEiPgogICAgPHBhdGggZD0iTTIwIDE5LjhoMTYwdjE1OS45SDIweiIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtY29uc29sZS1pY29uLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIj4KICAgIDxwYXRoIGQ9Ik0xMDUgMTI3LjNoNDB2MTIuOGgtNDB6TTUxLjEgNzdMNzQgOTkuOWwtMjMuMyAyMy4zIDEwLjUgMTAuNSAyMy4zLTIzLjNMOTUgOTkuOSA4NC41IDg5LjQgNjEuNiA2Ni41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copy: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTExLjksMUgzLjJDMi40LDEsMS43LDEuNywxLjcsMi41djEwLjJoMS41VjIuNWg4LjdWMXogTTE0LjEsMy45aC04Yy0wLjgsMC0xLjUsMC43LTEuNSwxLjV2MTAuMmMwLDAuOCwwLjcsMS41LDEuNSwxLjVoOCBjMC44LDAsMS41LTAuNywxLjUtMS41VjUuNEMxNS41LDQuNiwxNC45LDMuOSwxNC4xLDMuOXogTTE0LjEsMTUuNWgtOFY1LjRoOFYxNS41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copyright: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCI+CiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0xMS44OCw5LjE0YzEuMjgsMC4wNiwxLjYxLDEuMTUsMS42MywxLjY2aDEuNzljLTAuMDgtMS45OC0xLjQ5LTMuMTktMy40NS0zLjE5QzkuNjQsNy42MSw4LDksOCwxMi4xNCBjMCwxLjk0LDAuOTMsNC4yNCwzLjg0LDQuMjRjMi4yMiwwLDMuNDEtMS42NSwzLjQ0LTIuOTVoLTEuNzljLTAuMDMsMC41OS0wLjQ1LDEuMzgtMS42MywxLjQ0QzEwLjU1LDE0LjgzLDEwLDEzLjgxLDEwLDEyLjE0IEMxMCw5LjI1LDExLjI4LDkuMTYsMTEuODgsOS4xNHogTTEyLDJDNi40OCwyLDIsNi40OCwyLDEyczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMFMxNy41MiwyLDEyLDJ6IE0xMiwyMGMtNC40MSwwLTgtMy41OS04LTggczMuNTktOCw4LThzOCwzLjU5LDgsOFMxNi40MSwyMCwxMiwyMHoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-cut: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkuNjQgNy42NGMuMjMtLjUuMzYtMS4wNS4zNi0xLjY0IDAtMi4yMS0xLjc5LTQtNC00UzIgMy43OSAyIDZzMS43OSA0IDQgNGMuNTkgMCAxLjE0LS4xMyAxLjY0LS4zNkwxMCAxMmwtMi4zNiAyLjM2QzcuMTQgMTQuMTMgNi41OSAxNCA2IDE0Yy0yLjIxIDAtNCAxLjc5LTQgNHMxLjc5IDQgNCA0IDQtMS43OSA0LTRjMC0uNTktLjEzLTEuMTQtLjM2LTEuNjRMMTIgMTRsNyA3aDN2LTFMOS42NCA3LjY0ek02IDhjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTAgMTJjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTYtNy41Yy0uMjggMC0uNS0uMjItLjUtLjVzLjIyLS41LjUtLjUuNS4yMi41LjUtLjIyLjUtLjUuNXpNMTkgM2wtNiA2IDIgMiA3LTdWM3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-delete: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiAvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjI2MjYyIiBkPSJNNiAxOWMwIDEuMS45IDIgMiAyaDhjMS4xIDAgMi0uOSAyLTJWN0g2djEyek0xOSA0aC0zLjVsLTEtMWgtNWwtMSAxSDV2MmgxNFY0eiIgLz4KPC9zdmc+Cg==);
  --jp-icon-download: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDloLTRWM0g5djZINWw3IDcgNy03ek01IDE4djJoMTR2LTJINXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-duplicate: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIuNzk5OTggMC44NzVIOC44OTU4MkM5LjIwMDYxIDAuODc1IDkuNDQ5OTggMS4xMzkxNCA5LjQ0OTk4IDEuNDYxOThDOS40NDk5OCAxLjc4NDgyIDkuMjAwNjEgMi4wNDg5NiA4Ljg5NTgyIDIuMDQ4OTZIMy4zNTQxNUMzLjA0OTM2IDIuMDQ4OTYgMi43OTk5OCAyLjMxMzEgMi43OTk5OCAyLjYzNTk0VjkuNjc5NjlDMi43OTk5OCAxMC4wMDI1IDIuNTUwNjEgMTAuMjY2NyAyLjI0NTgyIDEwLjI2NjdDMS45NDEwMyAxMC4yNjY3IDEuNjkxNjUgMTAuMDAyNSAxLjY5MTY1IDkuNjc5NjlWMi4wNDg5NkMxLjY5MTY1IDEuNDAzMjggMi4xOTA0IDAuODc1IDIuNzk5OTggMC44NzVaTTUuMzY2NjUgMTEuOVY0LjU1SDExLjA4MzNWMTEuOUg1LjM2NjY1Wk00LjE0MTY1IDQuMTQxNjdDNC4xNDE2NSAzLjY5MDYzIDQuNTA3MjggMy4zMjUgNC45NTgzMiAzLjMyNUgxMS40OTE3QzExLjk0MjcgMy4zMjUgMTIuMzA4MyAzLjY5MDYzIDEyLjMwODMgNC4xNDE2N1YxMi4zMDgzQzEyLjMwODMgMTIuNzU5NCAxMS45NDI3IDEzLjEyNSAxMS40OTE3IDEzLjEyNUg0Ljk1ODMyQzQuNTA3MjggMTMuMTI1IDQuMTQxNjUgMTIuNzU5NCA0LjE0MTY1IDEyLjMwODNWNC4xNDE2N1oiIGZpbGw9IiM2MTYxNjEiLz4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNOS40MzU3NCA4LjI2NTA3SDguMzY0MzFWOS4zMzY1QzguMzY0MzEgOS40NTQzNSA4LjI2Nzg4IDkuNTUwNzggOC4xNTAwMiA5LjU1MDc4QzguMDMyMTcgOS41NTA3OCA3LjkzNTc0IDkuNDU0MzUgNy45MzU3NCA5LjMzNjVWOC4yNjUwN0g2Ljg2NDMxQzYuNzQ2NDUgOC4yNjUwNyA2LjY1MDAyIDguMTY4NjQgNi42NTAwMiA4LjA1MDc4QzYuNjUwMDIgNy45MzI5MiA2Ljc0NjQ1IDcuODM2NSA2Ljg2NDMxIDcuODM2NUg3LjkzNTc0VjYuNzY1MDdDNy45MzU3NCA2LjY0NzIxIDguMDMyMTcgNi41NTA3OCA4LjE1MDAyIDYuNTUwNzhDOC4yNjc4OCA2LjU1MDc4IDguMzY0MzEgNi42NDcyMSA4LjM2NDMxIDYuNzY1MDdWNy44MzY1SDkuNDM1NzRDOS41NTM2IDcuODM2NSA5LjY1MDAyIDcuOTMyOTIgOS42NTAwMiA4LjA1MDc4QzkuNjUwMDIgOC4xNjg2NCA5LjU1MzYgOC4yNjUwNyA5LjQzNTc0IDguMjY1MDdaIiBmaWxsPSIjNjE2MTYxIiBzdHJva2U9IiM2MTYxNjEiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=);
  --jp-icon-edit: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMgMTcuMjVWMjFoMy43NUwxNy44MSA5Ljk0bC0zLjc1LTMuNzVMMyAxNy4yNXpNMjAuNzEgNy4wNGMuMzktLjM5LjM5LTEuMDIgMC0xLjQxbC0yLjM0LTIuMzRjLS4zOS0uMzktMS4wMi0uMzktMS40MSAwbC0xLjgzIDEuODMgMy43NSAzLjc1IDEuODMtMS44M3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-ellipses: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iNSIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxOSIgY3k9IjEyIiByPSIyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-error: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjE5IiByPSIyIi8+PHBhdGggZD0iTTEwIDNoNHYxMmgtNHoiLz48L2c+CjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiLz4KPC9zdmc+Cg==);
  --jp-icon-expand-all: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTggMmMxIDAgMTEgMCAxMiAwczIgMSAyIDJjMCAxIDAgMTEgMCAxMnMwIDItMiAyQzIwIDE0IDIwIDQgMjAgNFMxMCA0IDYgNGMwLTIgMS0yIDItMnoiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICAgZD0iTTE4IDhjMC0xLTEtMi0yLTJTNSA2IDQgNnMtMiAxLTIgMmMwIDEgMCAxMSAwIDEyczEgMiAyIDJjMSAwIDExIDAgMTIgMHMyLTEgMi0yYzAtMSAwLTExIDAtMTJ6bS0yIDB2MTJINFY4eiIgLz4KICAgICAgICA8cGF0aCBkPSJNMTEgMTBIOXYzSDZ2MmgzdjNoMnYtM2gzdi0yaC0zeiIgLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-extension: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwLjUgMTFIMTlWN2MwLTEuMS0uOS0yLTItMmgtNFYzLjVDMTMgMi4xMiAxMS44OCAxIDEwLjUgMVM4IDIuMTIgOCAzLjVWNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAydjMuOEgzLjVjMS40OSAwIDIuNyAxLjIxIDIuNyAyLjdzLTEuMjEgMi43LTIuNyAyLjdIMlYyMGMwIDEuMS45IDIgMiAyaDMuOHYtMS41YzAtMS40OSAxLjIxLTIuNyAyLjctMi43IDEuNDkgMCAyLjcgMS4yMSAyLjcgMi43VjIySDE3YzEuMSAwIDItLjkgMi0ydi00aDEuNWMxLjM4IDAgMi41LTEuMTIgMi41LTIuNVMyMS44OCAxMSAyMC41IDExeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-fast-forward: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTQgMThsOC41LTZMNCA2djEyem05LTEydjEybDguNS02TDEzIDZ6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-file-upload: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkgMTZoNnYtNmg0bC03LTctNyA3aDR6bS00IDJoMTR2Mkg1eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-file: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuMyA4LjJsLTUuNS01LjVjLS4zLS4zLS43LS41LTEuMi0uNUgzLjljLS44LjEtMS42LjktMS42IDEuOHYxNC4xYzAgLjkuNyAxLjYgMS42IDEuNmgxNC4yYy45IDAgMS42LS43IDEuNi0xLjZWOS40Yy4xLS41LS4xLS45LS40LTEuMnptLTUuOC0zLjNsMy40IDMuNmgtMy40VjQuOXptMy45IDEyLjdINC43Yy0uMSAwLS4yIDAtLjItLjJWNC43YzAtLjIuMS0uMy4yLS4zaDcuMnY0LjRzMCAuOC4zIDEuMWMuMy4zIDEuMS4zIDEuMS4zaDQuM3Y3LjJzLS4xLjItLjIuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-filter-dot: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTE0LDEyVjE5Ljg4QzE0LjA0LDIwLjE4IDEzLjk0LDIwLjUgMTMuNzEsMjAuNzFDMTMuMzIsMjEuMSAxMi42OSwyMS4xIDEyLjMsMjAuNzFMMTAuMjksMTguN0MxMC4wNiwxOC40NyA5Ljk2LDE4LjE2IDEwLDE3Ljg3VjEySDkuOTdMNC4yMSw0LjYyQzMuODcsNC4xOSAzLjk1LDMuNTYgNC4zOCwzLjIyQzQuNTcsMy4wOCA0Ljc4LDMgNSwzVjNIMTlWM0MxOS4yMiwzIDE5LjQzLDMuMDggMTkuNjIsMy4yMkMyMC4wNSwzLjU2IDIwLjEzLDQuMTkgMTkuNzksNC42MkwxNC4wMywxMkgxNFoiIC8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWRvdCIgZmlsbD0iI0ZGRiI+CiAgICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE3IiByPSIzIj48L2NpcmNsZT4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-filter-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEwIDE4aDR2LTJoLTR2MnpNMyA2djJoMThWNkgzem0zIDdoMTJ2LTJINnYyeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-filter: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTE0LDEyVjE5Ljg4QzE0LjA0LDIwLjE4IDEzLjk0LDIwLjUgMTMuNzEsMjAuNzFDMTMuMzIsMjEuMSAxMi42OSwyMS4xIDEyLjMsMjAuNzFMMTAuMjksMTguN0MxMC4wNiwxOC40NyA5Ljk2LDE4LjE2IDEwLDE3Ljg3VjEySDkuOTdMNC4yMSw0LjYyQzMuODcsNC4xOSAzLjk1LDMuNTYgNC4zOCwzLjIyQzQuNTcsMy4wOCA0Ljc4LDMgNSwzVjNIMTlWM0MxOS4yMiwzIDE5LjQzLDMuMDggMTkuNjIsMy4yMkMyMC4wNSwzLjU2IDIwLjEzLDQuMTkgMTkuNzksNC42MkwxNC4wMywxMkgxNFoiIC8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-folder-favorite: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggY2xhc3M9ImpwLWljb24zIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxNjE2MSIgZD0iTTIwIDZoLThsLTItMkg0Yy0xLjEgMC0yIC45LTIgMnYxMmMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjhjMC0xLjEtLjktMi0yLTJ6bS0yLjA2IDExTDE1IDE1LjI4IDEyLjA2IDE3bC43OC0zLjMzLTIuNTktMi4yNCAzLjQxLS4yOUwxNSA4bDEuMzQgMy4xNCAzLjQxLjI5LTIuNTkgMi4yNC43OCAzLjMzeiIvPgo8L3N2Zz4K);
  --jp-icon-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY4YzAtMS4xLS45LTItMi0yaC04bC0yLTJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-home: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGNsYXNzPSJqcC1pY29uMyBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xMCAyMHYtNmg0djZoNXYtOGgzTDEyIDMgMiAxMmgzdjh6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-html5: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uMCBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMDAiIGQ9Ik0xMDguNCAwaDIzdjIyLjhoMjEuMlYwaDIzdjY5aC0yM1Y0NmgtMjF2MjNoLTIzLjJNMjA2IDIzaC0yMC4zVjBoNjMuN3YyM0gyMjl2NDZoLTIzbTUzLjUtNjloMjQuMWwxNC44IDI0LjNMMzEzLjIgMGgyNC4xdjY5aC0yM1YzNC44bC0xNi4xIDI0LjgtMTYuMS0yNC44VjY5aC0yMi42bTg5LjItNjloMjN2NDYuMmgzMi42VjY5aC01NS42Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2U0NGQyNiIgZD0iTTEwNy42IDQ3MWwtMzMtMzcwLjRoMzYyLjhsLTMzIDM3MC4yTDI1NS43IDUxMiIvPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNmMTY1MjkiIGQ9Ik0yNTYgNDgwLjVWMTMxaDE0OC4zTDM3NiA0NDciLz4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNlYmViZWIiIGQ9Ik0xNDIgMTc2LjNoMTE0djQ1LjRoLTY0LjJsNC4yIDQ2LjVoNjB2NDUuM0gxNTQuNG0yIDIyLjhIMjAybDMuMiAzNi4zIDUwLjggMTMuNnY0Ny40bC05My4yLTI2Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIiBkPSJNMzY5LjYgMTc2LjNIMjU1Ljh2NDUuNGgxMDkuNm0tNC4xIDQ2LjVIMjU1Ljh2NDUuNGg1NmwtNS4zIDU5LTUwLjcgMTMuNnY0Ny4ybDkzLTI1LjgiLz4KPC9zdmc+Cg==);
  --jp-icon-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1icmFuZDQganAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNGRkYiIGQ9Ik0yLjIgMi4yaDE3LjV2MTcuNUgyLjJ6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzNGNTFCNSIgZD0iTTIuMiAyLjJ2MTcuNWgxNy41bC4xLTE3LjVIMi4yem0xMi4xIDIuMmMxLjIgMCAyLjIgMSAyLjIgMi4ycy0xIDIuMi0yLjIgMi4yLTIuMi0xLTIuMi0yLjIgMS0yLjIgMi4yLTIuMnpNNC40IDE3LjZsMy4zLTguOCAzLjMgNi42IDIuMi0zLjIgNC40IDUuNEg0LjR6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-info: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUwLjk3OCA1MC45NzgiPgoJPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KCQk8cGF0aCBkPSJNNDMuNTIsNy40NThDMzguNzExLDIuNjQ4LDMyLjMwNywwLDI1LjQ4OSwwQzE4LjY3LDAsMTIuMjY2LDIuNjQ4LDcuNDU4LDcuNDU4CgkJCWMtOS45NDMsOS45NDEtOS45NDMsMjYuMTE5LDAsMzYuMDYyYzQuODA5LDQuODA5LDExLjIxMiw3LjQ1NiwxOC4wMzEsNy40NThjMCwwLDAuMDAxLDAsMC4wMDIsMAoJCQljNi44MTYsMCwxMy4yMjEtMi42NDgsMTguMDI5LTcuNDU4YzQuODA5LTQuODA5LDcuNDU3LTExLjIxMiw3LjQ1Ny0xOC4wM0M1MC45NzcsMTguNjcsNDguMzI4LDEyLjI2Niw0My41Miw3LjQ1OHoKCQkJIE00Mi4xMDYsNDIuMTA1Yy00LjQzMiw0LjQzMS0xMC4zMzIsNi44NzItMTYuNjE1LDYuODcyaC0wLjAwMmMtNi4yODUtMC4wMDEtMTIuMTg3LTIuNDQxLTE2LjYxNy02Ljg3MgoJCQljLTkuMTYyLTkuMTYzLTkuMTYyLTI0LjA3MSwwLTMzLjIzM0MxMy4zMDMsNC40NCwxOS4yMDQsMiwyNS40ODksMmM2LjI4NCwwLDEyLjE4NiwyLjQ0LDE2LjYxNyw2Ljg3MgoJCQljNC40MzEsNC40MzEsNi44NzEsMTAuMzMyLDYuODcxLDE2LjYxN0M0OC45NzcsMzEuNzcyLDQ2LjUzNiwzNy42NzUsNDIuMTA2LDQyLjEwNXoiLz4KCQk8cGF0aCBkPSJNMjMuNTc4LDMyLjIxOGMtMC4wMjMtMS43MzQsMC4xNDMtMy4wNTksMC40OTYtMy45NzJjMC4zNTMtMC45MTMsMS4xMS0xLjk5NywyLjI3Mi0zLjI1MwoJCQljMC40NjgtMC41MzYsMC45MjMtMS4wNjIsMS4zNjctMS41NzVjMC42MjYtMC43NTMsMS4xMDQtMS40NzgsMS40MzYtMi4xNzVjMC4zMzEtMC43MDcsMC40OTUtMS41NDEsMC40OTUtMi41CgkJCWMwLTEuMDk2LTAuMjYtMi4wODgtMC43NzktMi45NzljLTAuNTY1LTAuODc5LTEuNTAxLTEuMzM2LTIuODA2LTEuMzY5Yy0xLjgwMiwwLjA1Ny0yLjk4NSwwLjY2Ny0zLjU1LDEuODMyCgkJCWMtMC4zMDEsMC41MzUtMC41MDMsMS4xNDEtMC42MDcsMS44MTRjLTAuMTM5LDAuNzA3LTAuMjA3LDEuNDMyLTAuMjA3LDIuMTc0aC0yLjkzN2MtMC4wOTEtMi4yMDgsMC40MDctNC4xMTQsMS40OTMtNS43MTkKCQkJYzEuMDYyLTEuNjQsMi44NTUtMi40ODEsNS4zNzgtMi41MjdjMi4xNiwwLjAyMywzLjg3NCwwLjYwOCw1LjE0MSwxLjc1OGMxLjI3OCwxLjE2LDEuOTI5LDIuNzY0LDEuOTUsNC44MTEKCQkJYzAsMS4xNDItMC4xMzcsMi4xMTEtMC40MSwyLjkxMWMtMC4zMDksMC44NDUtMC43MzEsMS41OTMtMS4yNjgsMi4yNDNjLTAuNDkyLDAuNjUtMS4wNjgsMS4zMTgtMS43MywyLjAwMgoJCQljLTAuNjUsMC42OTctMS4zMTMsMS40NzktMS45ODcsMi4zNDZjLTAuMjM5LDAuMzc3LTAuNDI5LDAuNzc3LTAuNTY1LDEuMTk5Yy0wLjE2LDAuOTU5LTAuMjE3LDEuOTUxLTAuMTcxLDIuOTc5CgkJCUMyNi41ODksMzIuMjE4LDIzLjU3OCwzMi4yMTgsMjMuNTc4LDMyLjIxOHogTTIzLjU3OCwzOC4yMnYtMy40ODRoMy4wNzZ2My40ODRIMjMuNTc4eiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-inspector: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaW5zcGVjdG9yLWljb24tY29sb3IganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0tNSAxNEg0di00aDExdjR6bTAtNUg0VjloMTF2NHptNSA1aC00VjloNHY5eiIvPgo8L3N2Zz4K);
  --jp-icon-json: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtanNvbi1pY29uLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0Y5QTgyNSI+CiAgICA8cGF0aCBkPSJNMjAuMiAxMS44Yy0xLjYgMC0xLjcuNS0xLjcgMSAwIC40LjEuOS4xIDEuMy4xLjUuMS45LjEgMS4zIDAgMS43LTEuNCAyLjMtMy41IDIuM2gtLjl2LTEuOWguNWMxLjEgMCAxLjQgMCAxLjQtLjggMC0uMyAwLS42LS4xLTEgMC0uNC0uMS0uOC0uMS0xLjIgMC0xLjMgMC0xLjggMS4zLTItMS4zLS4yLTEuMy0uNy0xLjMtMiAwLS40LjEtLjguMS0xLjIuMS0uNC4xLS43LjEtMSAwLS44LS40LS43LTEuNC0uOGgtLjVWNC4xaC45YzIuMiAwIDMuNS43IDMuNSAyLjMgMCAuNC0uMS45LS4xIDEuMy0uMS41LS4xLjktLjEgMS4zIDAgLjUuMiAxIDEuNyAxdjEuOHpNMS44IDEwLjFjMS42IDAgMS43LS41IDEuNy0xIDAtLjQtLjEtLjktLjEtMS4zLS4xLS41LS4xLS45LS4xLTEuMyAwLTEuNiAxLjQtMi4zIDMuNS0yLjNoLjl2MS45aC0uNWMtMSAwLTEuNCAwLTEuNC44IDAgLjMgMCAuNi4xIDEgMCAuMi4xLjYuMSAxIDAgMS4zIDAgMS44LTEuMyAyQzYgMTEuMiA2IDExLjcgNiAxM2MwIC40LS4xLjgtLjEgMS4yLS4xLjMtLjEuNy0uMSAxIDAgLjguMy44IDEuNC44aC41djEuOWgtLjljLTIuMSAwLTMuNS0uNi0zLjUtMi4zIDAtLjQuMS0uOS4xLTEuMy4xLS41LjEtLjkuMS0xLjMgMC0uNS0uMi0xLTEuNy0xdi0xLjl6Ii8+CiAgICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjEzLjgiIHI9IjIuMSIvPgogICAgPGNpcmNsZSBjeD0iMTEiIGN5PSI4LjIiIHI9IjIuMSIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-julia: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDMyNSAzMDAiPgogIDxnIGNsYXNzPSJqcC1icmFuZDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjY2IzYzMzIj4KICAgIDxwYXRoIGQ9Ik0gMTUwLjg5ODQzOCAyMjUgQyAxNTAuODk4NDM4IDI2Ni40MjE4NzUgMTE3LjMyMDMxMiAzMDAgNzUuODk4NDM4IDMwMCBDIDM0LjQ3NjU2MiAzMDAgMC44OTg0MzggMjY2LjQyMTg3NSAwLjg5ODQzOCAyMjUgQyAwLjg5ODQzOCAxODMuNTc4MTI1IDM0LjQ3NjU2MiAxNTAgNzUuODk4NDM4IDE1MCBDIDExNy4zMjAzMTIgMTUwIDE1MC44OTg0MzggMTgzLjU3ODEyNSAxNTAuODk4NDM4IDIyNSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzM4OTgyNiI+CiAgICA8cGF0aCBkPSJNIDIzNy41IDc1IEMgMjM3LjUgMTE2LjQyMTg3NSAyMDMuOTIxODc1IDE1MCAxNjIuNSAxNTAgQyAxMjEuMDc4MTI1IDE1MCA4Ny41IDExNi40MjE4NzUgODcuNSA3NSBDIDg3LjUgMzMuNTc4MTI1IDEyMS4wNzgxMjUgMCAxNjIuNSAwIEMgMjAzLjkyMTg3NSAwIDIzNy41IDMzLjU3ODEyNSAyMzcuNSA3NSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzk1NThiMiI+CiAgICA8cGF0aCBkPSJNIDMyNC4xMDE1NjIgMjI1IEMgMzI0LjEwMTU2MiAyNjYuNDIxODc1IDI5MC41MjM0MzggMzAwIDI0OS4xMDE1NjIgMzAwIEMgMjA3LjY3OTY4OCAzMDAgMTc0LjEwMTU2MiAyNjYuNDIxODc1IDE3NC4xMDE1NjIgMjI1IEMgMTc0LjEwMTU2MiAxODMuNTc4MTI1IDIwNy42Nzk2ODggMTUwIDI0OS4xMDE1NjIgMTUwIEMgMjkwLjUyMzQzOCAxNTAgMzI0LjEwMTU2MiAxODMuNTc4MTI1IDMyNC4xMDE1NjIgMjI1Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-jupyter-favicon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUyIiBoZWlnaHQ9IjE2NSIgdmlld0JveD0iMCAwIDE1MiAxNjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgPGcgY2xhc3M9ImpwLWp1cHl0ZXItaWNvbi1jb2xvciIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA3ODk0NywgMTEwLjU4MjkyNykiIGQ9Ik03NS45NDIyODQyLDI5LjU4MDQ1NjEgQzQzLjMwMjM5NDcsMjkuNTgwNDU2MSAxNC43OTY3ODMyLDE3LjY1MzQ2MzQgMCwwIEM1LjUxMDgzMjExLDE1Ljg0MDY4MjkgMTUuNzgxNTM4OSwyOS41NjY3NzMyIDI5LjM5MDQ5NDcsMzkuMjc4NDE3MSBDNDIuOTk5Nyw0OC45ODk4NTM3IDU5LjI3MzcsNTQuMjA2NzgwNSA3NS45NjA1Nzg5LDU0LjIwNjc4MDUgQzkyLjY0NzQ1NzksNTQuMjA2NzgwNSAxMDguOTIxNDU4LDQ4Ljk4OTg1MzcgMTIyLjUzMDY2MywzOS4yNzg0MTcxIEMxMzYuMTM5NDUzLDI5LjU2Njc3MzIgMTQ2LjQxMDI4NCwxNS44NDA2ODI5IDE1MS45MjExNTgsMCBDMTM3LjA4Nzg2OCwxNy42NTM0NjM0IDEwOC41ODI1ODksMjkuNTgwNDU2MSA3NS45NDIyODQyLDI5LjU4MDQ1NjEgTDc1Ljk0MjI4NDIsMjkuNTgwNDU2MSBaIiAvPgogICAgPHBhdGggdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMzczNjgsIDAuNzA0ODc4KSIgZD0iTTc1Ljk3ODQ1NzksMjQuNjI2NDA3MyBDMTA4LjYxODc2MywyNC42MjY0MDczIDEzNy4xMjQ0NTgsMzYuNTUzNDQxNSAxNTEuOTIxMTU4LDU0LjIwNjc4MDUgQzE0Ni40MTAyODQsMzguMzY2MjIyIDEzNi4xMzk0NTMsMjQuNjQwMTMxNyAxMjIuNTMwNjYzLDE0LjkyODQ4NzggQzEwOC45MjE0NTgsNS4yMTY4NDM5IDkyLjY0NzQ1NzksMCA3NS45NjA1Nzg5LDAgQzU5LjI3MzcsMCA0Mi45OTk3LDUuMjE2ODQzOSAyOS4zOTA0OTQ3LDE0LjkyODQ4NzggQzE1Ljc4MTUzODksMjQuNjQwMTMxNyA1LjUxMDgzMjExLDM4LjM2NjIyMiAwLDU0LjIwNjc4MDUgQzE0LjgzMzA4MTYsMzYuNTg5OTI5MyA0My4zMzg1Njg0LDI0LjYyNjQwNzMgNzUuOTc4NDU3OSwyNC42MjY0MDczIEw3NS45Nzg0NTc5LDI0LjYyNjQwNzMgWiIgLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-jupyter: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzkiIGhlaWdodD0iNTEiIHZpZXdCb3g9IjAgMCAzOSA1MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTYzOCAtMjI4MSkiPgogICAgIDxnIGNsYXNzPSJqcC1qdXB5dGVyLWljb24tY29sb3IiIGZpbGw9IiNGMzc3MjYiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5Ljc0IDIzMTEuOTgpIiBkPSJNIDE4LjI2NDYgNy4xMzQxMUMgMTAuNDE0NSA3LjEzNDExIDMuNTU4NzIgNC4yNTc2IDAgMEMgMS4zMjUzOSAzLjgyMDQgMy43OTU1NiA3LjEzMDgxIDcuMDY4NiA5LjQ3MzAzQyAxMC4zNDE3IDExLjgxNTIgMTQuMjU1NyAxMy4wNzM0IDE4LjI2OSAxMy4wNzM0QyAyMi4yODIzIDEzLjA3MzQgMjYuMTk2MyAxMS44MTUyIDI5LjQ2OTQgOS40NzMwM0MgMzIuNzQyNCA3LjEzMDgxIDM1LjIxMjYgMy44MjA0IDM2LjUzOCAwQyAzMi45NzA1IDQuMjU3NiAyNi4xMTQ4IDcuMTM0MTEgMTguMjY0NiA3LjEzNDExWiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5LjczIDIyODUuNDgpIiBkPSJNIDE4LjI3MzMgNS45MzkzMUMgMjYuMTIzNSA1LjkzOTMxIDMyLjk3OTMgOC44MTU4MyAzNi41MzggMTMuMDczNEMgMzUuMjEyNiA5LjI1MzAzIDMyLjc0MjQgNS45NDI2MiAyOS40Njk0IDMuNjAwNEMgMjYuMTk2MyAxLjI1ODE4IDIyLjI4MjMgMCAxOC4yNjkgMEMgMTQuMjU1NyAwIDEwLjM0MTcgMS4yNTgxOCA3LjA2ODYgMy42MDA0QyAzLjc5NTU2IDUuOTQyNjIgMS4zMjUzOSA5LjI1MzAzIDAgMTMuMDczNEMgMy41Njc0NSA4LjgyNDYzIDEwLjQyMzIgNS45MzkzMSAxOC4yNzMzIDUuOTM5MzFaIi8+CiAgICA8L2c+CiAgICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjY5LjMgMjI4MS4zMSkiIGQ9Ik0gNS44OTM1MyAyLjg0NEMgNS45MTg4OSAzLjQzMTY1IDUuNzcwODUgNC4wMTM2NyA1LjQ2ODE1IDQuNTE2NDVDIDUuMTY1NDUgNS4wMTkyMiA0LjcyMTY4IDUuNDIwMTUgNC4xOTI5OSA1LjY2ODUxQyAzLjY2NDMgNS45MTY4OCAzLjA3NDQ0IDYuMDAxNTEgMi40OTgwNSA1LjkxMTcxQyAxLjkyMTY2IDUuODIxOSAxLjM4NDYzIDUuNTYxNyAwLjk1NDg5OCA1LjE2NDAxQyAwLjUyNTE3IDQuNzY2MzMgMC4yMjIwNTYgNC4yNDkwMyAwLjA4MzkwMzcgMy42Nzc1N0MgLTAuMDU0MjQ4MyAzLjEwNjExIC0wLjAyMTIzIDIuNTA2MTcgMC4xNzg3ODEgMS45NTM2NEMgMC4zNzg3OTMgMS40MDExIDAuNzM2ODA5IDAuOTIwODE3IDEuMjA3NTQgMC41NzM1MzhDIDEuNjc4MjYgMC4yMjYyNTkgMi4yNDA1NSAwLjAyNzU5MTkgMi44MjMyNiAwLjAwMjY3MjI5QyAzLjYwMzg5IC0wLjAzMDcxMTUgNC4zNjU3MyAwLjI0OTc4OSA0Ljk0MTQyIDAuNzgyNTUxQyA1LjUxNzExIDEuMzE1MzEgNS44NTk1NiAyLjA1Njc2IDUuODkzNTMgMi44NDRaIi8+CiAgICAgIDxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MzkuOCAyMzIzLjgxKSIgZD0iTSA3LjQyNzg5IDMuNTgzMzhDIDcuNDYwMDggNC4zMjQzIDcuMjczNTUgNS4wNTgxOSA2Ljg5MTkzIDUuNjkyMTNDIDYuNTEwMzEgNi4zMjYwNyA1Ljk1MDc1IDYuODMxNTYgNS4yODQxMSA3LjE0NDZDIDQuNjE3NDcgNy40NTc2MyAzLjg3MzcxIDcuNTY0MTQgMy4xNDcwMiA3LjQ1MDYzQyAyLjQyMDMyIDcuMzM3MTIgMS43NDMzNiA3LjAwODcgMS4yMDE4NCA2LjUwNjk1QyAwLjY2MDMyOCA2LjAwNTIgMC4yNzg2MSA1LjM1MjY4IDAuMTA1MDE3IDQuNjMyMDJDIC0wLjA2ODU3NTcgMy45MTEzNSAtMC4wMjYyMzYxIDMuMTU0OTQgMC4yMjY2NzUgMi40NTg1NkMgMC40Nzk1ODcgMS43NjIxNyAwLjkzMTY5NyAxLjE1NzEzIDEuNTI1NzYgMC43MjAwMzNDIDIuMTE5ODMgMC4yODI5MzUgMi44MjkxNCAwLjAzMzQzOTUgMy41NjM4OSAwLjAwMzEzMzQ0QyA0LjU0NjY3IC0wLjAzNzQwMzMgNS41MDUyOSAwLjMxNjcwNiA2LjIyOTYxIDAuOTg3ODM1QyA2Ljk1MzkzIDEuNjU4OTYgNy4zODQ4NCAyLjU5MjM1IDcuNDI3ODkgMy41ODMzOEwgNy40Mjc4OSAzLjU4MzM4WiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM4LjM2IDIyODYuMDYpIiBkPSJNIDIuMjc0NzEgNC4zOTYyOUMgMS44NDM2MyA0LjQxNTA4IDEuNDE2NzEgNC4zMDQ0NSAxLjA0Nzk5IDQuMDc4NDNDIDAuNjc5MjY4IDMuODUyNCAwLjM4NTMyOCAzLjUyMTE0IDAuMjAzMzcxIDMuMTI2NTZDIDAuMDIxNDEzNiAyLjczMTk4IC0wLjA0MDM3OTggMi4yOTE4MyAwLjAyNTgxMTYgMS44NjE4MUMgMC4wOTIwMDMxIDEuNDMxOCAwLjI4MzIwNCAxLjAzMTI2IDAuNTc1MjEzIDAuNzEwODgzQyAwLjg2NzIyMiAwLjM5MDUxIDEuMjQ2OTEgMC4xNjQ3MDggMS42NjYyMiAwLjA2MjA1OTJDIDIuMDg1NTMgLTAuMDQwNTg5NyAyLjUyNTYxIC0wLjAxNTQ3MTQgMi45MzA3NiAwLjEzNDIzNUMgMy4zMzU5MSAwLjI4Mzk0MSAzLjY4NzkyIDAuNTUxNTA1IDMuOTQyMjIgMC45MDMwNkMgNC4xOTY1MiAxLjI1NDYyIDQuMzQxNjkgMS42NzQzNiA0LjM1OTM1IDIuMTA5MTZDIDQuMzgyOTkgMi42OTEwNyA0LjE3Njc4IDMuMjU4NjkgMy43ODU5NyAzLjY4NzQ2QyAzLjM5NTE2IDQuMTE2MjQgMi44NTE2NiA0LjM3MTE2IDIuMjc0NzEgNC4zOTYyOUwgMi4yNzQ3MSA0LjM5NjI5WiIvPgogICAgPC9nPgogIDwvZz4+Cjwvc3ZnPgo=);
  --jp-icon-jupyterlab-wordmark: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIHZpZXdCb3g9IjAgMCAxODYwLjggNDc1Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0RTRFNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4MC4xMzY0MDEsIDY0LjI3MTQ5MykiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDU4Ljg3NTU2NikiPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA4NzYwMywgMC4xNDAyOTQpIj4KICAgICAgICA8cGF0aCBkPSJNLTQyNi45LDE2OS44YzAsNDguNy0zLjcsNjQuNy0xMy42LDc2LjRjLTEwLjgsMTAtMjUsMTUuNS0zOS43LDE1LjVsMy43LDI5IGMyMi44LDAuMyw0NC44LTcuOSw2MS45LTIzLjFjMTcuOC0xOC41LDI0LTQ0LjEsMjQtODMuM1YwSC00Mjd2MTcwLjFMLTQyNi45LDE2OS44TC00MjYuOSwxNjkuOHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU1LjA0NTI5NiwgNTYuODM3MTA0KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuNTYyNDUzLCAxLjc5OTg0MikiPgogICAgICAgIDxwYXRoIGQ9Ik0tMzEyLDE0OGMwLDIxLDAsMzkuNSwxLjcsNTUuNGgtMzEuOGwtMi4xLTMzLjNoLTAuOGMtNi43LDExLjYtMTYuNCwyMS4zLTI4LDI3LjkgYy0xMS42LDYuNi0yNC44LDEwLTM4LjIsOS44Yy0zMS40LDAtNjktMTcuNy02OS04OVYwaDM2LjR2MTEyLjdjMCwzOC43LDExLjYsNjQuNyw0NC42LDY0LjdjMTAuMy0wLjIsMjAuNC0zLjUsMjguOS05LjQgYzguNS01LjksMTUuMS0xNC4zLDE4LjktMjMuOWMyLjItNi4xLDMuMy0xMi41LDMuMy0xOC45VjAuMmgzNi40VjE0OEgtMzEyTC0zMTIsMTQ4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzOTAuMDEzMzIyLCA1My40Nzk2MzgpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS43MDY0NTgsIDAuMjMxNDI1KSI+CiAgICAgICAgPHBhdGggZD0iTS00NzguNiw3MS40YzAtMjYtMC44LTQ3LTEuNy02Ni43aDMyLjdsMS43LDM0LjhoMC44YzcuMS0xMi41LDE3LjUtMjIuOCwzMC4xLTI5LjcgYzEyLjUtNywyNi43LTEwLjMsNDEtOS44YzQ4LjMsMCw4NC43LDQxLjcsODQuNywxMDMuM2MwLDczLjEtNDMuNywxMDkuMi05MSwxMDkuMmMtMTIuMSwwLjUtMjQuMi0yLjItMzUtNy44IGMtMTAuOC01LjYtMTkuOS0xMy45LTI2LjYtMjQuMmgtMC44VjI5MWgtMzZ2LTIyMEwtNDc4LjYsNzEuNEwtNDc4LjYsNzEuNHogTS00NDIuNiwxMjUuNmMwLjEsNS4xLDAuNiwxMC4xLDEuNywxNS4xIGMzLDEyLjMsOS45LDIzLjMsMTkuOCwzMS4xYzkuOSw3LjgsMjIuMSwxMi4xLDM0LjcsMTIuMWMzOC41LDAsNjAuNy0zMS45LDYwLjctNzguNWMwLTQwLjctMjEuMS03NS42LTU5LjUtNzUuNiBjLTEyLjksMC40LTI1LjMsNS4xLTM1LjMsMTMuNGMtOS45LDguMy0xNi45LDE5LjctMTkuNiwzMi40Yy0xLjUsNC45LTIuMywxMC0yLjUsMTUuMVYxMjUuNkwtNDQyLjYsMTI1LjZMLTQ0Mi42LDEyNS42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDYuNzQwNzI2LCA1Ni44MzcxMDQpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43NTEyMjYsIDEuOTg5Mjk5KSI+CiAgICAgICAgPHBhdGggZD0iTS00NDAuOCwwbDQzLjcsMTIwLjFjNC41LDEzLjQsOS41LDI5LjQsMTIuOCw0MS43aDAuOGMzLjctMTIuMiw3LjktMjcuNywxMi44LTQyLjQgbDM5LjctMTE5LjJoMzguNUwtMzQ2LjksMTQ1Yy0yNiw2OS43LTQzLjcsMTA1LjQtNjguNiwxMjcuMmMtMTIuNSwxMS43LTI3LjksMjAtNDQuNiwyMy45bC05LjEtMzEuMSBjMTEuNy0zLjksMjIuNS0xMC4xLDMxLjgtMTguMWMxMy4yLTExLjEsMjMuNy0yNS4yLDMwLjYtNDEuMmMxLjUtMi44LDIuNS01LjcsMi45LTguOGMtMC4zLTMuMy0xLjItNi42LTIuNS05LjdMLTQ4MC4yLDAuMSBoMzkuN0wtNDQwLjgsMEwtNDQwLjgsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODIyLjc0ODEwNCwgMC4wMDAwMDApIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS40NjQwNTAsIDAuMzc4OTE0KSI+CiAgICAgICAgPHBhdGggZD0iTS00MTMuNywwdjU4LjNoNTJ2MjguMmgtNTJWMTk2YzAsMjUsNywzOS41LDI3LjMsMzkuNWM3LjEsMC4xLDE0LjItMC43LDIxLjEtMi41IGwxLjcsMjcuN2MtMTAuMywzLjctMjEuMyw1LjQtMzIuMiw1Yy03LjMsMC40LTE0LjYtMC43LTIxLjMtMy40Yy02LjgtMi43LTEyLjktNi44LTE3LjktMTIuMWMtMTAuMy0xMC45LTE0LjEtMjktMTQuMS01Mi45IFY4Ni41aC0zMVY1OC4zaDMxVjkuNkwtNDEzLjcsMEwtNDEzLjcsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTc0LjQzMzI4NiwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuOTkwMDM0LCAwLjYxMDMzOSkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDQ1LjgsMTEzYzAuOCw1MCwzMi4yLDcwLjYsNjguNiw3MC42YzE5LDAuNiwzNy45LTMsNTUuMy0xMC41bDYuMiwyNi40IGMtMjAuOSw4LjktNDMuNSwxMy4xLTY2LjIsMTIuNmMtNjEuNSwwLTk4LjMtNDEuMi05OC4zLTEwMi41Qy00ODAuMiw0OC4yLTQ0NC43LDAtMzg2LjUsMGM2NS4yLDAsODIuNyw1OC4zLDgyLjcsOTUuNyBjLTAuMSw1LjgtMC41LDExLjUtMS4yLDE3LjJoLTE0MC42SC00NDUuOEwtNDQ1LjgsMTEzeiBNLTMzOS4yLDg2LjZjMC40LTIzLjUtOS41LTYwLjEtNTAuNC02MC4xIGMtMzYuOCwwLTUyLjgsMzQuNC01NS43LDYwLjFILTMzOS4yTC0zMzkuMiw4Ni42TC0zMzkuMiw4Ni42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAxLjk2MTA1OCwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMTc5NjQwLCAwLjcwNTA2OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDc4LjYsNjhjMC0yMy45LTAuNC00NC41LTEuNy02My40aDMxLjhsMS4yLDM5LjloMS43YzkuMS0yNy4zLDMxLTQ0LjUsNTUuMy00NC41IGMzLjUtMC4xLDcsMC40LDEwLjMsMS4ydjM0LjhjLTQuMS0wLjktOC4yLTEuMy0xMi40LTEuMmMtMjUuNiwwLTQzLjcsMTkuNy00OC43LDQ3LjRjLTEsNS43LTEuNiwxMS41LTEuNywxNy4ydjEwOC4zaC0zNlY2OCBMLTQ3OC42LDY4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCBkPSJNMTM1Mi4zLDMyNi4yaDM3VjI4aC0zN1YzMjYuMnogTTE2MDQuOCwzMjYuMmMtMi41LTEzLjktMy40LTMxLjEtMy40LTQ4Ljd2LTc2IGMwLTQwLjctMTUuMS04My4xLTc3LjMtODMuMWMtMjUuNiwwLTUwLDcuMS02Ni44LDE4LjFsOC40LDI0LjRjMTQuMy05LjIsMzQtMTUuMSw1My0xNS4xYzQxLjYsMCw0Ni4yLDMwLjIsNDYuMiw0N3Y0LjIgYy03OC42LTAuNC0xMjIuMywyNi41LTEyMi4zLDc1LjZjMCwyOS40LDIxLDU4LjQsNjIuMiw1OC40YzI5LDAsNTAuOS0xNC4zLDYyLjItMzAuMmgxLjNsMi45LDI1LjZIMTYwNC44eiBNMTU2NS43LDI1Ny43IGMwLDMuOC0wLjgsOC0yLjEsMTEuOGMtNS45LDE3LjItMjIuNywzNC00OS4yLDM0Yy0xOC45LDAtMzQuOS0xMS4zLTM0LjktMzUuM2MwLTM5LjUsNDUuOC00Ni42LDg2LjItNDUuOFYyNTcuN3ogTTE2OTguNSwzMjYuMiBsMS43LTMzLjZoMS4zYzE1LjEsMjYuOSwzOC43LDM4LjIsNjguMSwzOC4yYzQ1LjQsMCw5MS4yLTM2LjEsOTEuMi0xMDguOGMwLjQtNjEuNy0zNS4zLTEwMy43LTg1LjctMTAzLjcgYy0zMi44LDAtNTYuMywxNC43LTY5LjMsMzcuNGgtMC44VjI4aC0zNi42djI0NS43YzAsMTguMS0wLjgsMzguNi0xLjcsNTIuNUgxNjk4LjV6IE0xNzA0LjgsMjA4LjJjMC01LjksMS4zLTEwLjksMi4xLTE1LjEgYzcuNi0yOC4xLDMxLjEtNDUuNCw1Ni4zLTQ1LjRjMzkuNSwwLDYwLjUsMzQuOSw2MC41LDc1LjZjMCw0Ni42LTIzLjEsNzguMS02MS44LDc4LjFjLTI2LjksMC00OC4zLTE3LjYtNTUuNS00My4zIGMtMC44LTQuMi0xLjctOC44LTEuNy0xMy40VjIwOC4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzYxNjE2MSIgZD0iTTE1IDlIOXY2aDZWOXptLTIgNGgtMnYtMmgydjJ6bTgtMlY5aC0yVjdjMC0xLjEtLjktMi0yLTJoLTJWM2gtMnYyaC0yVjNIOXYySDdjLTEuMSAwLTIgLjktMiAydjJIM3YyaDJ2MkgzdjJoMnYyYzAgMS4xLjkgMiAyIDJoMnYyaDJ2LTJoMnYyaDJ2LTJoMmMxLjEgMCAyLS45IDItMnYtMmgydi0yaC0ydi0yaDJ6bS00IDZIN1Y3aDEwdjEweiIvPgo8L3N2Zz4K);
  --jp-icon-keyboard: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMTdjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY3YzAtMS4xLS45LTItMi0yem0tOSAzaDJ2MmgtMlY4em0wIDNoMnYyaC0ydi0yek04IDhoMnYySDhWOHptMCAzaDJ2Mkg4di0yem0tMSAySDV2LTJoMnYyem0wLTNINVY4aDJ2MnptOSA3SDh2LTJoOHYyem0wLTRoLTJ2LTJoMnYyem0wLTNoLTJWOGgydjJ6bTMgM2gtMnYtMmgydjJ6bTAtM2gtMlY4aDJ2MnoiLz4KPC9zdmc+Cg==);
  --jp-icon-launch: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzIgMzIiIHdpZHRoPSIzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yNiwyOEg2YTIuMDAyNywyLjAwMjcsMCwwLDEtMi0yVjZBMi4wMDI3LDIuMDAyNywwLDAsMSw2LDRIMTZWNkg2VjI2SDI2VjE2aDJWMjZBMi4wMDI3LDIuMDAyNywwLDAsMSwyNiwyOFoiLz4KICAgIDxwb2x5Z29uIHBvaW50cz0iMjAgMiAyMCA0IDI2LjU4NiA0IDE4IDEyLjU4NiAxOS40MTQgMTQgMjggNS40MTQgMjggMTIgMzAgMTIgMzAgMiAyMCAyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-launcher: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkgMTlINVY1aDdWM0g1YTIgMiAwIDAwLTIgMnYxNGEyIDIgMCAwMDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnY3ek0xNCAzdjJoMy41OWwtOS44MyA5LjgzIDEuNDEgMS40MUwxOSA2LjQxVjEwaDJWM2gtN3oiLz4KPC9zdmc+Cg==);
  --jp-icon-line-form: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IndoaXRlIiBkPSJNNS44OCA0LjEyTDEzLjc2IDEybC03Ljg4IDcuODhMOCAyMmwxMC0xMEw4IDJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-link: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMuOSAxMmMwLTEuNzEgMS4zOS0zLjEgMy4xLTMuMWg0VjdIN2MtMi43NiAwLTUgMi4yNC01IDVzMi4yNCA1IDUgNWg0di0xLjlIN2MtMS43MSAwLTMuMS0xLjM5LTMuMS0zLjF6TTggMTNoOHYtMkg4djJ6bTktNmgtNHYxLjloNGMxLjcxIDAgMy4xIDEuMzkgMy4xIDMuMXMtMS4zOSAzLjEtMy4xIDMuMWgtNFYxN2g0YzIuNzYgMCA1LTIuMjQgNS01cy0yLjI0LTUtNS01eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xOSA1djE0SDVWNWgxNG0xLjEtMkgzLjljLS41IDAtLjkuNC0uOS45djE2LjJjMCAuNC40LjkuOS45aDE2LjJjLjQgMCAuOS0uNS45LS45VjMuOWMwLS41LS41LS45LS45LS45ek0xMSA3aDZ2MmgtNlY3em0wIDRoNnYyaC02di0yem0wIDRoNnYyaC02ek03IDdoMnYySDd6bTAgNGgydjJIN3ptMCA0aDJ2Mkg3eiIvPgo8L3N2Zz4K);
  --jp-icon-markdown: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjN0IxRkEyIiBkPSJNNSAxNC45aDEybC02LjEgNnptOS40LTYuOGMwLTEuMy0uMS0yLjktLjEtNC41LS40IDEuNC0uOSAyLjktMS4zIDQuM2wtMS4zIDQuM2gtMkw4LjUgNy45Yy0uNC0xLjMtLjctMi45LTEtNC4zLS4xIDEuNi0uMSAzLjItLjIgNC42TDcgMTIuNEg0LjhsLjctMTFoMy4zTDEwIDVjLjQgMS4yLjcgMi43IDEgMy45LjMtMS4yLjctMi42IDEtMy45bDEuMi0zLjdoMy4zbC42IDExaC0yLjRsLS4zLTQuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-move-down: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNMTIuNDcxIDcuNTI4OTlDMTIuNzYzMiA3LjIzNjg0IDEyLjc2MzIgNi43NjMxNiAxMi40NzEgNi40NzEwMVY2LjQ3MTAxQzEyLjE3OSA2LjE3OTA1IDExLjcwNTcgNi4xNzg4NCAxMS40MTM1IDYuNDcwNTRMNy43NSAxMC4xMjc1VjEuNzVDNy43NSAxLjMzNTc5IDcuNDE0MjEgMSA3IDFWMUM2LjU4NTc5IDEgNi4yNSAxLjMzNTc5IDYuMjUgMS43NVYxMC4xMjc1TDIuNTk3MjYgNi40NjgyMkMyLjMwMzM4IDYuMTczODEgMS44MjY0MSA2LjE3MzU5IDEuNTMyMjYgNi40Njc3NFY2LjQ2Nzc0QzEuMjM4MyA2Ljc2MTcgMS4yMzgzIDcuMjM4MyAxLjUzMjI2IDcuNTMyMjZMNi4yOTI4OSAxMi4yOTI5QzYuNjgzNDIgMTIuNjgzNCA3LjMxNjU4IDEyLjY4MzQgNy43MDcxMSAxMi4yOTI5TDEyLjQ3MSA3LjUyODk5WiIgZmlsbD0iIzYxNjE2MSIvPgo8L3N2Zz4K);
  --jp-icon-move-up: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggY2xhc3M9ImpwLWljb24zIiBkPSJNMS41Mjg5OSA2LjQ3MTAxQzEuMjM2ODQgNi43NjMxNiAxLjIzNjg0IDcuMjM2ODQgMS41Mjg5OSA3LjUyODk5VjcuNTI4OTlDMS44MjA5NSA3LjgyMDk1IDIuMjk0MjYgNy44MjExNiAyLjU4NjQ5IDcuNTI5NDZMNi4yNSAzLjg3MjVWMTIuMjVDNi4yNSAxMi42NjQyIDYuNTg1NzkgMTMgNyAxM1YxM0M3LjQxNDIxIDEzIDcuNzUgMTIuNjY0MiA3Ljc1IDEyLjI1VjMuODcyNUwxMS40MDI3IDcuNTMxNzhDMTEuNjk2NiA3LjgyNjE5IDEyLjE3MzYgNy44MjY0MSAxMi40Njc3IDcuNTMyMjZWNy41MzIyNkMxMi43NjE3IDcuMjM4MyAxMi43NjE3IDYuNzYxNyAxMi40Njc3IDYuNDY3NzRMNy43MDcxMSAxLjcwNzExQzcuMzE2NTggMS4zMTY1OCA2LjY4MzQyIDEuMzE2NTggNi4yOTI4OSAxLjcwNzExTDEuNTI4OTkgNi40NzEwMVoiIGZpbGw9IiM2MTYxNjEiLz4KPC9zdmc+Cg==);
  --jp-icon-new-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwIDZoLThsLTItMkg0Yy0xLjExIDAtMS45OS44OS0xLjk5IDJMMiAxOGMwIDEuMTEuODkgMiAyIDJoMTZjMS4xMSAwIDItLjg5IDItMlY4YzAtMS4xMS0uODktMi0yLTJ6bS0xIDhoLTN2M2gtMnYtM2gtM3YtMmgzVjloMnYzaDN2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-not-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI1IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMTkgMTcuMTg0NCAyLjk2OTY4IDE0LjMwMzIgMS44NjA5NCAxMS40NDA5WiIvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24yIiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4zMTU5MiA5LjMyMDMxKSIgZD0iTTcuMzY4NDIgMEwwIDcuMzY0NzkiLz4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMzE1OTIgMTYuNjgzNikgc2NhbGUoMSAtMSkiIGQ9Ik03LjM2ODQyIDBMMCA3LjM2NDc5Ii8+Cjwvc3ZnPgo=);
  --jp-icon-notebook: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtbm90ZWJvb2staWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNFRjZDMDAiPgogICAgPHBhdGggZD0iTTE4LjcgMy4zdjE1LjRIMy4zVjMuM2gxNS40bTEuNS0xLjVIMS44djE4LjNoMTguM2wuMS0xOC4zeiIvPgogICAgPHBhdGggZD0iTTE2LjUgMTYuNWwtNS40LTQuMy01LjYgNC4zdi0xMWgxMXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-numbering: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTQgMTlINlYxOS41SDVWMjAuNUg2VjIxSDRWMjJIN1YxOEg0VjE5Wk01IDEwSDZWNkg0VjdINVYxMFpNNCAxM0g1LjhMNCAxNS4xVjE2SDdWMTVINS4yTDcgMTIuOVYxMkg0VjEzWk05IDdWOUgyM1Y3SDlaTTkgMjFIMjNWMTlIOVYyMVpNOSAxNUgyM1YxM0g5VjE1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-offline-bolt: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDIuMDJjLTUuNTEgMC05Ljk4IDQuNDctOS45OCA5Ljk4czQuNDcgOS45OCA5Ljk4IDkuOTggOS45OC00LjQ3IDkuOTgtOS45OFMxNy41MSAyLjAyIDEyIDIuMDJ6TTExLjQ4IDIwdi02LjI2SDhMMTMgNHY2LjI2aDMuMzVMMTEuNDggMjB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-palette: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE4IDEzVjIwSDRWNkg5LjAyQzkuMDcgNS4yOSA5LjI0IDQuNjIgOS41IDRINEMyLjkgNCAyIDQuOSAyIDZWMjBDMiAyMS4xIDIuOSAyMiA0IDIySDE4QzE5LjEgMjIgMjAgMjEuMSAyMCAyMFYxNUwxOCAxM1pNMTkuMyA4Ljg5QzE5Ljc0IDguMTkgMjAgNy4zOCAyMCA2LjVDMjAgNC4wMSAxNy45OSAyIDE1LjUgMkMxMy4wMSAyIDExIDQuMDEgMTEgNi41QzExIDguOTkgMTMuMDEgMTEgMTUuNDkgMTFDMTYuMzcgMTEgMTcuMTkgMTAuNzQgMTcuODggMTAuM0wyMSAxMy40MkwyMi40MiAxMkwxOS4zIDguODlaTTE1LjUgOUMxNC4xMiA5IDEzIDcuODggMTMgNi41QzEzIDUuMTIgMTQuMTIgNCAxNS41IDRDMTYuODggNCAxOCA1LjEyIDE4IDYuNUMxOCA3Ljg4IDE2Ljg4IDkgMTUuNSA5WiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDZIOS4wMTg5NEM5LjAwNjM5IDYuMTY1MDIgOSA2LjMzMTc2IDkgNi41QzkgOC44MTU3NyAxMC4yMTEgMTAuODQ4NyAxMi4wMzQzIDEySDlWMTRIMTZWMTIuOTgxMUMxNi41NzAzIDEyLjkzNzcgMTcuMTIgMTIuODIwNyAxNy42Mzk2IDEyLjYzOTZMMTggMTNWMjBINFY2Wk04IDhINlYxMEg4VjhaTTYgMTJIOFYxNEg2VjEyWk04IDE2SDZWMThIOFYxNlpNOSAxNkgxNlYxOEg5VjE2WiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-paste: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE5IDJoLTQuMThDMTQuNC44NCAxMy4zIDAgMTIgMGMtMS4zIDAtMi40Ljg0LTIuODIgMkg1Yy0xLjEgMC0yIC45LTIgMnYxNmMwIDEuMS45IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6bS03IDBjLjU1IDAgMSAuNDUgMSAxcy0uNDUgMS0xIDEtMS0uNDUtMS0xIC40NS0xIDEtMXptNyAxOEg1VjRoMnYzaDEwVjRoMnYxNnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-pdf: url(data:image/svg+xml;base64,PHN2ZwogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyMiIgd2lkdGg9IjE2Ij4KICAgIDxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDQ1KSIgY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0ZGMkEyQSIKICAgICAgIGQ9Im0gMjIuMzQ0MzY5LC0zLjAxNjM2NDIgaCA1LjYzODYwNCB2IDEuNTc5MjQzMyBoIC0zLjU0OTIyNyB2IDEuNTA4NjkyOTkgaCAzLjMzNzU3NiBWIDEuNjUwODE1NCBoIC0zLjMzNzU3NiB2IDMuNDM1MjYxMyBoIC0yLjA4OTM3NyB6IG0gLTcuMTM2NDQ0LDEuNTc5MjQzMyB2IDQuOTQzOTU0MyBoIDAuNzQ4OTIgcSAxLjI4MDc2MSwwIDEuOTUzNzAzLC0wLjYzNDk1MzUgMC42NzgzNjksLTAuNjM0OTUzNSAwLjY3ODM2OSwtMS44NDUxNjQxIDAsLTEuMjA0NzgzNTUgLTAuNjcyOTQyLC0xLjgzNDMxMDExIC0wLjY3Mjk0MiwtMC42Mjk1MjY1OSAtMS45NTkxMywtMC42Mjk1MjY1OSB6IG0gLTIuMDg5Mzc3LC0xLjU3OTI0MzMgaCAyLjIwMzM0MyBxIDEuODQ1MTY0LDAgMi43NDYwMzksMC4yNjU5MjA3IDAuOTA2MzAxLDAuMjYwNDkzNyAxLjU1MjEwOCwwLjg5MDAyMDMgMC41Njk4MywwLjU0ODEyMjMgMC44NDY2MDUsMS4yNjQ0ODAwNiAwLjI3Njc3NCwwLjcxNjM1NzgxIDAuMjc2Nzc0LDEuNjIyNjU4OTQgMCwwLjkxNzE1NTEgLTAuMjc2Nzc0LDEuNjM4OTM5OSAtMC4yNzY3NzUsMC43MTYzNTc4IC0wLjg0NjYwNSwxLjI2NDQ4IC0wLjY1MTIzNCwwLjYyOTUyNjYgLTEuNTYyOTYyLDAuODk1NDQ3MyAtMC45MTE3MjgsMC4yNjA0OTM3IC0yLjczNTE4NSwwLjI2MDQ5MzcgaCAtMi4yMDMzNDMgeiBtIC04LjE0NTg1NjUsMCBoIDMuNDY3ODIzIHEgMS41NDY2ODE2LDAgMi4zNzE1Nzg1LDAuNjg5MjIzIDAuODMwMzI0LDAuNjgzNzk2MSAwLjgzMDMyNCwxLjk1MzcwMzE0IDAsMS4yNzUzMzM5NyAtMC44MzAzMjQsMS45NjQ1NTcwNiBRIDkuOTg3MTk2MSwyLjI3NDkxNSA4LjQ0MDUxNDUsMi4yNzQ5MTUgSCA3LjA2MjA2ODQgViA1LjA4NjA3NjcgSCA0Ljk3MjY5MTUgWiBtIDIuMDg5Mzc2OSwxLjUxNDExOTkgdiAyLjI2MzAzOTQzIGggMS4xNTU5NDEgcSAwLjYwNzgxODgsMCAwLjkzODg2MjksLTAuMjkzMDU1NDcgMC4zMzEwNDQxLC0wLjI5ODQ4MjQxIDAuMzMxMDQ0MSwtMC44NDExNzc3MiAwLC0wLjU0MjY5NTMxIC0wLjMzMTA0NDEsLTAuODM1NzUwNzQgLTAuMzMxMDQ0MSwtMC4yOTMwNTU1IC0wLjkzODg2MjksLTAuMjkzMDU1NSB6IgovPgo8L3N2Zz4K);
  --jp-icon-python: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iLTEwIC0xMCAxMzEuMTYxMzYxNjk0MzM1OTQgMTMyLjM4ODk5OTkzODk2NDg0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMzA2OTk4IiBkPSJNIDU0LjkxODc4NSw5LjE5Mjc0MjFlLTQgQyA1MC4zMzUxMzIsMC4wMjIyMTcyNyA0NS45NTc4NDYsMC40MTMxMzY5NyA0Mi4xMDYyODUsMS4wOTQ2NjkzIDMwLjc2MDA2OSwzLjA5OTE3MzEgMjguNzAwMDM2LDcuMjk0NzcxNCAyOC43MDAwMzUsMTUuMDMyMTY5IHYgMTAuMjE4NzUgaCAyNi44MTI1IHYgMy40MDYyNSBoIC0yNi44MTI1IC0xMC4wNjI1IGMgLTcuNzkyNDU5LDAgLTE0LjYxNTc1ODgsNC42ODM3MTcgLTE2Ljc0OTk5OTgsMTMuNTkzNzUgLTIuNDYxODE5OTgsMTAuMjEyOTY2IC0yLjU3MTAxNTA4LDE2LjU4NjAyMyAwLDI3LjI1IDEuOTA1OTI4Myw3LjkzNzg1MiA2LjQ1NzU0MzIsMTMuNTkzNzQ4IDE0LjI0OTk5OTgsMTMuNTkzNzUgaCA5LjIxODc1IHYgLTEyLjI1IGMgMCwtOC44NDk5MDIgNy42NTcxNDQsLTE2LjY1NjI0OCAxNi43NSwtMTYuNjU2MjUgaCAyNi43ODEyNSBjIDcuNDU0OTUxLDAgMTMuNDA2MjUzLC02LjEzODE2NCAxMy40MDYyNSwtMTMuNjI1IHYgLTI1LjUzMTI1IGMgMCwtNy4yNjYzMzg2IC02LjEyOTk4LC0xMi43MjQ3NzcxIC0xMy40MDYyNSwtMTMuOTM3NDk5NyBDIDY0LjI4MTU0OCwwLjMyNzk0Mzk3IDU5LjUwMjQzOCwtMC4wMjAzNzkwMyA1NC45MTg3ODUsOS4xOTI3NDIxZS00IFogbSAtMTQuNSw4LjIxODc1MDEyNTc5IGMgMi43Njk1NDcsMCA1LjAzMTI1LDIuMjk4NjQ1NiA1LjAzMTI1LDUuMTI0OTk5NiAtMmUtNiwyLjgxNjMzNiAtMi4yNjE3MDMsNS4wOTM3NSAtNS4wMzEyNSw1LjA5Mzc1IC0yLjc3OTQ3NiwtMWUtNiAtNS4wMzEyNSwtMi4yNzc0MTUgLTUuMDMxMjUsLTUuMDkzNzUgLTEwZS03LC0yLjgyNjM1MyAyLjI1MTc3NCwtNS4xMjQ5OTk2IDUuMDMxMjUsLTUuMTI0OTk5NiB6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2ZmZDQzYiIgZD0ibSA4NS42Mzc1MzUsMjguNjU3MTY5IHYgMTEuOTA2MjUgYyAwLDkuMjMwNzU1IC03LjgyNTg5NSwxNi45OTk5OTkgLTE2Ljc1LDE3IGggLTI2Ljc4MTI1IGMgLTcuMzM1ODMzLDAgLTEzLjQwNjI0OSw2LjI3ODQ4MyAtMTMuNDA2MjUsMTMuNjI1IHYgMjUuNTMxMjQ3IGMgMCw3LjI2NjM0NCA2LjMxODU4OCwxMS41NDAzMjQgMTMuNDA2MjUsMTMuNjI1MDA0IDguNDg3MzMxLDIuNDk1NjEgMTYuNjI2MjM3LDIuOTQ2NjMgMjYuNzgxMjUsMCA2Ljc1MDE1NSwtMS45NTQzOSAxMy40MDYyNTMsLTUuODg3NjEgMTMuNDA2MjUsLTEzLjYyNTAwNCBWIDg2LjUwMDkxOSBoIC0yNi43ODEyNSB2IC0zLjQwNjI1IGggMjYuNzgxMjUgMTMuNDA2MjU0IGMgNy43OTI0NjEsMCAxMC42OTYyNTEsLTUuNDM1NDA4IDEzLjQwNjI0MSwtMTMuNTkzNzUgMi43OTkzMywtOC4zOTg4ODYgMi42ODAyMiwtMTYuNDc1Nzc2IDAsLTI3LjI1IC0xLjkyNTc4LC03Ljc1NzQ0MSAtNS42MDM4NywtMTMuNTkzNzUgLTEzLjQwNjI0MSwtMTMuNTkzNzUgeiBtIC0xNS4wNjI1LDY0LjY1NjI1IGMgMi43Nzk0NzgsM2UtNiA1LjAzMTI1LDIuMjc3NDE3IDUuMDMxMjUsNS4wOTM3NDcgLTJlLTYsMi44MjYzNTQgLTIuMjUxNzc1LDUuMTI1MDA0IC01LjAzMTI1LDUuMTI1MDA0IC0yLjc2OTU1LDAgLTUuMDMxMjUsLTIuMjk4NjUgLTUuMDMxMjUsLTUuMTI1MDA0IDJlLTYsLTIuODE2MzMgMi4yNjE2OTcsLTUuMDkzNzQ3IDUuMDMxMjUsLTUuMDkzNzQ3IHoiLz4KPC9zdmc+Cg==);
  --jp-icon-r-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjE5NkYzIiBkPSJNNC40IDIuNWMxLjItLjEgMi45LS4zIDQuOS0uMyAyLjUgMCA0LjEuNCA1LjIgMS4zIDEgLjcgMS41IDEuOSAxLjUgMy41IDAgMi0xLjQgMy41LTIuOSA0LjEgMS4yLjQgMS43IDEuNiAyLjIgMyAuNiAxLjkgMSAzLjkgMS4zIDQuNmgtMy44Yy0uMy0uNC0uOC0xLjctMS4yLTMuN3MtMS4yLTIuNi0yLjYtMi42aC0uOXY2LjRINC40VjIuNXptMy43IDYuOWgxLjRjMS45IDAgMi45LS45IDIuOS0yLjNzLTEtMi4zLTIuOC0yLjNjLS43IDAtMS4zIDAtMS42LjJ2NC41aC4xdi0uMXoiLz4KPC9zdmc+Cg==);
  --jp-icon-react: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMTUwIDE1MCA1NDEuOSAyOTUuMyI+CiAgPGcgY2xhc3M9ImpwLWljb24tYnJhbmQyIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxREFGQiI+CiAgICA8cGF0aCBkPSJNNjY2LjMgMjk2LjVjMC0zMi41LTQwLjctNjMuMy0xMDMuMS04Mi40IDE0LjQtNjMuNiA4LTExNC4yLTIwLjItMTMwLjQtNi41LTMuOC0xNC4xLTUuNi0yMi40LTUuNnYyMi4zYzQuNiAwIDguMy45IDExLjQgMi42IDEzLjYgNy44IDE5LjUgMzcuNSAxNC45IDc1LjctMS4xIDkuNC0yLjkgMTkuMy01LjEgMjkuNC0xOS42LTQuOC00MS04LjUtNjMuNS0xMC45LTEzLjUtMTguNS0yNy41LTM1LjMtNDEuNi01MCAzMi42LTMwLjMgNjMuMi00Ni45IDg0LTQ2LjlWNzhjLTI3LjUgMC02My41IDE5LjYtOTkuOSA1My42LTM2LjQtMzMuOC03Mi40LTUzLjItOTkuOS01My4ydjIyLjNjMjAuNyAwIDUxLjQgMTYuNSA4NCA0Ni42LTE0IDE0LjctMjggMzEuNC00MS4zIDQ5LjktMjIuNiAyLjQtNDQgNi4xLTYzLjYgMTEtMi4zLTEwLTQtMTkuNy01LjItMjktNC43LTM4LjIgMS4xLTY3LjkgMTQuNi03NS44IDMtMS44IDYuOS0yLjYgMTEuNS0yLjZWNzguNWMtOC40IDAtMTYgMS44LTIyLjYgNS42LTI4LjEgMTYuMi0zNC40IDY2LjctMTkuOSAxMzAuMS02Mi4yIDE5LjItMTAyLjcgNDkuOS0xMDIuNyA4Mi4zIDAgMzIuNSA0MC43IDYzLjMgMTAzLjEgODIuNC0xNC40IDYzLjYtOCAxMTQuMiAyMC4yIDEzMC40IDYuNSAzLjggMTQuMSA1LjYgMjIuNSA1LjYgMjcuNSAwIDYzLjUtMTkuNiA5OS45LTUzLjYgMzYuNCAzMy44IDcyLjQgNTMuMiA5OS45IDUzLjIgOC40IDAgMTYtMS44IDIyLjYtNS42IDI4LjEtMTYuMiAzNC40LTY2LjcgMTkuOS0xMzAuMSA2Mi0xOS4xIDEwMi41LTQ5LjkgMTAyLjUtODIuM3ptLTEzMC4yLTY2LjdjLTMuNyAxMi45LTguMyAyNi4yLTEzLjUgMzkuNS00LjEtOC04LjQtMTYtMTMuMS0yNC00LjYtOC05LjUtMTUuOC0xNC40LTIzLjQgMTQuMiAyLjEgMjcuOSA0LjcgNDEgNy45em0tNDUuOCAxMDYuNWMtNy44IDEzLjUtMTUuOCAyNi4zLTI0LjEgMzguMi0xNC45IDEuMy0zMCAyLTQ1LjIgMi0xNS4xIDAtMzAuMi0uNy00NS0xLjktOC4zLTExLjktMTYuNC0yNC42LTI0LjItMzgtNy42LTEzLjEtMTQuNS0yNi40LTIwLjgtMzkuOCA2LjItMTMuNCAxMy4yLTI2LjggMjAuNy0zOS45IDcuOC0xMy41IDE1LjgtMjYuMyAyNC4xLTM4LjIgMTQuOS0xLjMgMzAtMiA0NS4yLTIgMTUuMSAwIDMwLjIuNyA0NSAxLjkgOC4zIDExLjkgMTYuNCAyNC42IDI0LjIgMzggNy42IDEzLjEgMTQuNSAyNi40IDIwLjggMzkuOC02LjMgMTMuNC0xMy4yIDI2LjgtMjAuNyAzOS45em0zMi4zLTEzYzUuNCAxMy40IDEwIDI2LjggMTMuOCAzOS44LTEzLjEgMy4yLTI2LjkgNS45LTQxLjIgOCA0LjktNy43IDkuOC0xNS42IDE0LjQtMjMuNyA0LjYtOCA4LjktMTYuMSAxMy0yNC4xek00MjEuMiA0MzBjLTkuMy05LjYtMTguNi0yMC4zLTI3LjgtMzIgOSAuNCAxOC4yLjcgMjcuNS43IDkuNCAwIDE4LjctLjIgMjcuOC0uNy05IDExLjctMTguMyAyMi40LTI3LjUgMzJ6bS03NC40LTU4LjljLTE0LjItMi4xLTI3LjktNC43LTQxLTcuOSAzLjctMTIuOSA4LjMtMjYuMiAxMy41LTM5LjUgNC4xIDggOC40IDE2IDEzLjEgMjQgNC43IDggOS41IDE1LjggMTQuNCAyMy40ek00MjAuNyAxNjNjOS4zIDkuNiAxOC42IDIwLjMgMjcuOCAzMi05LS40LTE4LjItLjctMjcuNS0uNy05LjQgMC0xOC43LjItMjcuOC43IDktMTEuNyAxOC4zLTIyLjQgMjcuNS0zMnptLTc0IDU4LjljLTQuOSA3LjctOS44IDE1LjYtMTQuNCAyMy43LTQuNiA4LTguOSAxNi0xMyAyNC01LjQtMTMuNC0xMC0yNi44LTEzLjgtMzkuOCAxMy4xLTMuMSAyNi45LTUuOCA0MS4yLTcuOXptLTkwLjUgMTI1LjJjLTM1LjQtMTUuMS01OC4zLTM0LjktNTguMy01MC42IDAtMTUuNyAyMi45LTM1LjYgNTguMy01MC42IDguNi0zLjcgMTgtNyAyNy43LTEwLjEgNS43IDE5LjYgMTMuMiA0MCAyMi41IDYwLjktOS4yIDIwLjgtMTYuNiA0MS4xLTIyLjIgNjAuNi05LjktMy4xLTE5LjMtNi41LTI4LTEwLjJ6TTMxMCA0OTBjLTEzLjYtNy44LTE5LjUtMzcuNS0xNC45LTc1LjcgMS4xLTkuNCAyLjktMTkuMyA1LjEtMjkuNCAxOS42IDQuOCA0MSA4LjUgNjMuNSAxMC45IDEzLjUgMTguNSAyNy41IDM1LjMgNDEuNiA1MC0zMi42IDMwLjMtNjMuMiA0Ni45LTg0IDQ2LjktNC41LS4xLTguMy0xLTExLjMtMi43em0yMzcuMi03Ni4yYzQuNyAzOC4yLTEuMSA2Ny45LTE0LjYgNzUuOC0zIDEuOC02LjkgMi42LTExLjUgMi42LTIwLjcgMC01MS40LTE2LjUtODQtNDYuNiAxNC0xNC43IDI4LTMxLjQgNDEuMy00OS45IDIyLjYtMi40IDQ0LTYuMSA2My42LTExIDIuMyAxMC4xIDQuMSAxOS44IDUuMiAyOS4xem0zOC41LTY2LjdjLTguNiAzLjctMTggNy0yNy43IDEwLjEtNS43LTE5LjYtMTMuMi00MC0yMi41LTYwLjkgOS4yLTIwLjggMTYuNi00MS4xIDIyLjItNjAuNiA5LjkgMy4xIDE5LjMgNi41IDI4LjEgMTAuMiAzNS40IDE1LjEgNTguMyAzNC45IDU4LjMgNTAuNi0uMSAxNS43LTIzIDM1LjYtNTguNCA1MC42ek0zMjAuOCA3OC40eiIvPgogICAgPGNpcmNsZSBjeD0iNDIwLjkiIGN5PSIyOTYuNSIgcj0iNDUuNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-redo: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE4LjQgMTAuNkMxNi41NSA4Ljk5IDE0LjE1IDggMTEuNSA4Yy00LjY1IDAtOC41OCAzLjAzLTkuOTYgNy4yMkwzLjkgMTZjMS4wNS0zLjE5IDQuMDUtNS41IDcuNi01LjUgMS45NSAwIDMuNzMuNzIgNS4xMiAxLjg4TDEzIDE2aDlWN2wtMy42IDMuNnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-refresh: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTkgMTMuNWMtMi40OSAwLTQuNS0yLjAxLTQuNS00LjVTNi41MSA0LjUgOSA0LjVjMS4yNCAwIDIuMzYuNTIgMy4xNyAxLjMzTDEwIDhoNVYzbC0xLjc2IDEuNzZDMTIuMTUgMy42OCAxMC42NiAzIDkgMyA1LjY5IDMgMy4wMSA1LjY5IDMuMDEgOVM1LjY5IDE1IDkgMTVjMi45NyAwIDUuNDMtMi4xNiA1LjktNWgtMS41MmMtLjQ2IDItMi4yNCAzLjUtNC4zOCAzLjV6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-regex: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiBmaWxsPSIjRkZGIj4KICAgIDxjaXJjbGUgY2xhc3M9InN0MiIgY3g9IjUuNSIgY3k9IjE0LjUiIHI9IjEuNSIvPgogICAgPHJlY3QgeD0iMTIiIHk9IjQiIGNsYXNzPSJzdDIiIHdpZHRoPSIxIiBoZWlnaHQ9IjgiLz4KICAgIDxyZWN0IHg9IjguNSIgeT0iNy41IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiAtMC41IDAuNSAwLjg2NiAtMi4zMjU1IDcuMzIxOSkiIGNsYXNzPSJzdDIiIHdpZHRoPSI4IiBoZWlnaHQ9IjEiLz4KICAgIDxyZWN0IHg9IjEyIiB5PSI0IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjUgLTAuODY2IDAuODY2IDAuNSAtMC42Nzc5IDE0LjgyNTIpIiBjbGFzcz0ic3QyIiB3aWR0aD0iMSIgaGVpZ2h0PSI4Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-run: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTggNXYxNGwxMS03eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-running: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHptOTYgMzI4YzAgOC44LTcuMiAxNi0xNiAxNkgxNzZjLTguOCAwLTE2LTcuMi0xNi0xNlYxNzZjMC04LjggNy4yLTE2IDE2LTE2aDE2MGM4LjggMCAxNiA3LjIgMTYgMTZ2MTYweiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-save: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE3IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjdsLTQtNHptLTUgMTZjLTEuNjYgMC0zLTEuMzQtMy0zczEuMzQtMyAzLTMgMyAxLjM0IDMgMy0xLjM0IDMtMyAzem0zLTEwSDVWNWgxMHY0eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-search: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjEsMTAuOWgtMC43bC0wLjItMC4yYzAuOC0wLjksMS4zLTIuMiwxLjMtMy41YzAtMy0yLjQtNS40LTUuNC01LjRTMS44LDQuMiwxLjgsNy4xczIuNCw1LjQsNS40LDUuNCBjMS4zLDAsMi41LTAuNSwzLjUtMS4zbDAuMiwwLjJ2MC43bDQuMSw0LjFsMS4yLTEuMkwxMi4xLDEwLjl6IE03LjEsMTAuOWMtMi4xLDAtMy43LTEuNy0zLjctMy43czEuNy0zLjcsMy43LTMuN3MzLjcsMS43LDMuNywzLjcgUzkuMiwxMC45LDcuMSwxMC45eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-settings: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVBLjQ4OC40ODggMCAwMDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==);
  --jp-icon-share: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTSAxOCAyIEMgMTYuMzU0OTkgMiAxNSAzLjM1NDk5MDQgMTUgNSBDIDE1IDUuMTkwOTUyOSAxNS4wMjE3OTEgNS4zNzcxMjI0IDE1LjA1NjY0MSA1LjU1ODU5MzggTCA3LjkyMTg3NSA5LjcyMDcwMzEgQyA3LjM5ODUzOTkgOS4yNzc4NTM5IDYuNzMyMDc3MSA5IDYgOSBDIDQuMzU0OTkwNCA5IDMgMTAuMzU0OTkgMyAxMiBDIDMgMTMuNjQ1MDEgNC4zNTQ5OTA0IDE1IDYgMTUgQyA2LjczMjA3NzEgMTUgNy4zOTg1Mzk5IDE0LjcyMjE0NiA3LjkyMTg3NSAxNC4yNzkyOTcgTCAxNS4wNTY2NDEgMTguNDM5NDUzIEMgMTUuMDIxNTU1IDE4LjYyMTUxNCAxNSAxOC44MDgzODYgMTUgMTkgQyAxNSAyMC42NDUwMSAxNi4zNTQ5OSAyMiAxOCAyMiBDIDE5LjY0NTAxIDIyIDIxIDIwLjY0NTAxIDIxIDE5IEMgMjEgMTcuMzU0OTkgMTkuNjQ1MDEgMTYgMTggMTYgQyAxNy4yNjc0OCAxNiAxNi42MDE1OTMgMTYuMjc5MzI4IDE2LjA3ODEyNSAxNi43MjI2NTYgTCA4Ljk0MzM1OTQgMTIuNTU4NTk0IEMgOC45NzgyMDk1IDEyLjM3NzEyMiA5IDEyLjE5MDk1MyA5IDEyIEMgOSAxMS44MDkwNDcgOC45NzgyMDk1IDExLjYyMjg3OCA4Ljk0MzM1OTQgMTEuNDQxNDA2IEwgMTYuMDc4MTI1IDcuMjc5Mjk2OSBDIDE2LjYwMTQ2IDcuNzIyMTQ2MSAxNy4yNjc5MjMgOCAxOCA4IEMgMTkuNjQ1MDEgOCAyMSA2LjY0NTAwOTYgMjEgNSBDIDIxIDMuMzU0OTkwNCAxOS42NDUwMSAyIDE4IDIgeiBNIDE4IDQgQyAxOC41NjQxMjkgNCAxOSA0LjQzNTg3MDYgMTkgNSBDIDE5IDUuNTY0MTI5NCAxOC41NjQxMjkgNiAxOCA2IEMgMTcuNDM1ODcxIDYgMTcgNS41NjQxMjk0IDE3IDUgQyAxNyA0LjQzNTg3MDYgMTcuNDM1ODcxIDQgMTggNCB6IE0gNiAxMSBDIDYuNTY0MTI5NCAxMSA3IDExLjQzNTg3MSA3IDEyIEMgNyAxMi41NjQxMjkgNi41NjQxMjk0IDEzIDYgMTMgQyA1LjQzNTg3MDYgMTMgNSAxMi41NjQxMjkgNSAxMiBDIDUgMTEuNDM1ODcxIDUuNDM1ODcwNiAxMSA2IDExIHogTSAxOCAxOCBDIDE4LjU2NDEyOSAxOCAxOSAxOC40MzU4NzEgMTkgMTkgQyAxOSAxOS41NjQxMjkgMTguNTY0MTI5IDIwIDE4IDIwIEMgMTcuNDM1ODcxIDIwIDE3IDE5LjU2NDEyOSAxNyAxOSBDIDE3IDE4LjQzNTg3MSAxNy40MzU4NzEgMTggMTggMTggeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-spreadsheet: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNENBRjUwIiBkPSJNMi4yIDIuMnYxNy42aDE3LjZWMi4ySDIuMnptMTUuNCA3LjdoLTUuNVY0LjRoNS41djUuNXpNOS45IDQuNHY1LjVINC40VjQuNGg1LjV6bS01LjUgNy43aDUuNXY1LjVINC40di01LjV6bTcuNyA1LjV2LTUuNWg1LjV2NS41aC01LjV6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-stop: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik02IDZoMTJ2MTJINnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tab: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIxIDNIM2MtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxOGMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yem0wIDE2SDNWNWgxMHY0aDh2MTB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-table-rows: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMSw4SDNWNGgxOFY4eiBNMjEsMTBIM3Y0aDE4VjEweiBNMjEsMTZIM3Y0aDE4VjE2eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-tag: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCA0MyAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTI4LjgzMzIgMTIuMzM0TDMyLjk5OTggMTYuNTAwN0wzNy4xNjY1IDEyLjMzNEgyOC44MzMyWiIvPgoJCTxwYXRoIGQ9Ik0xNi4yMDk1IDIxLjYxMDRDMTUuNjg3MyAyMi4xMjk5IDE0Ljg0NDMgMjIuMTI5OSAxNC4zMjQ4IDIxLjYxMDRMNi45ODI5IDE0LjcyNDVDNi41NzI0IDE0LjMzOTQgNi4wODMxMyAxMy42MDk4IDYuMDQ3ODYgMTMuMDQ4MkM1Ljk1MzQ3IDExLjUyODggNi4wMjAwMiA4LjYxOTQ0IDYuMDY2MjEgNy4wNzY5NUM2LjA4MjgxIDYuNTE0NzcgNi41NTU0OCA2LjA0MzQ3IDcuMTE4MDQgNi4wMzA1NUM5LjA4ODYzIDUuOTg0NzMgMTMuMjYzOCA1LjkzNTc5IDEzLjY1MTggNi4zMjQyNUwyMS43MzY5IDEzLjYzOUMyMi4yNTYgMTQuMTU4NSAyMS43ODUxIDE1LjQ3MjQgMjEuMjYyIDE1Ljk5NDZMMTYuMjA5NSAyMS42MTA0Wk05Ljc3NTg1IDguMjY1QzkuMzM1NTEgNy44MjU2NiA4LjYyMzUxIDcuODI1NjYgOC4xODI4IDguMjY1QzcuNzQzNDYgOC43MDU3MSA3Ljc0MzQ2IDkuNDE3MzMgOC4xODI4IDkuODU2NjdDOC42MjM4MiAxMC4yOTY0IDkuMzM1ODIgMTAuMjk2NCA5Ljc3NTg1IDkuODU2NjdDMTAuMjE1NiA5LjQxNzMzIDEwLjIxNTYgOC43MDUzMyA5Ljc3NTg1IDguMjY1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-terminal: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiA+CiAgICA8cmVjdCBjbGFzcz0ianAtdGVybWluYWwtaWNvbi1iYWNrZ3JvdW5kLWNvbG9yIGpwLWljb24tc2VsZWN0YWJsZSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyIDIpIiBmaWxsPSIjMzMzMzMzIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtdGVybWluYWwtaWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUtaW52ZXJzZSIgZD0iTTUuMDU2NjQgOC43NjE3MkM1LjA1NjY0IDguNTk3NjYgNS4wMzEyNSA4LjQ1MzEyIDQuOTgwNDcgOC4zMjgxMkM0LjkzMzU5IDguMTk5MjIgNC44NTU0NyA4LjA4MjAzIDQuNzQ2MDkgNy45NzY1NkM0LjY0MDYyIDcuODcxMDkgNC41IDcuNzc1MzkgNC4zMjQyMiA3LjY4OTQ1QzQuMTUyMzQgNy41OTk2MSAzLjk0MzM2IDcuNTExNzIgMy42OTcyNyA3LjQyNTc4QzMuMzAyNzMgNy4yODUxNiAyLjk0MzM2IDcuMTM2NzIgMi42MTkxNCA2Ljk4MDQ3QzIuMjk0OTIgNi44MjQyMiAyLjAxNzU4IDYuNjQyNTggMS43ODcxMSA2LjQzNTU1QzEuNTYwNTUgNi4yMjg1MiAxLjM4NDc3IDUuOTg4MjggMS4yNTk3NyA1LjcxNDg0QzEuMTM0NzcgNS40Mzc1IDEuMDcyMjcgNS4xMDkzOCAxLjA3MjI3IDQuNzMwNDdDMS4wNzIyNyA0LjM5ODQ0IDEuMTI4OTEgNC4wOTU3IDEuMjQyMTkgMy44MjIyN0MxLjM1NTQ3IDMuNTQ0OTIgMS41MTU2MiAzLjMwNDY5IDEuNzIyNjYgMy4xMDE1NkMxLjkyOTY5IDIuODk4NDQgMi4xNzk2OSAyLjczNDM3IDIuNDcyNjYgMi42MDkzOEMyLjc2NTYyIDIuNDg0MzggMy4wOTE4IDIuNDA0MyAzLjQ1MTE3IDIuMzY5MTRWMS4xMDkzOEg0LjM4ODY3VjIuMzgwODZDNC43NDAyMyAyLjQyNzczIDUuMDU2NjQgMi41MjM0NCA1LjMzNzg5IDIuNjY3OTdDNS42MTkxNCAyLjgxMjUgNS44NTc0MiAzLjAwMTk1IDYuMDUyNzMgMy4yMzYzM0M2LjI1MTk1IDMuNDY2OCA2LjQwNDMgMy43NDAyMyA2LjUwOTc3IDQuMDU2NjRDNi42MTkxNCA0LjM2OTE0IDYuNjczODMgNC43MjA3IDYuNjczODMgNS4xMTEzM0g1LjA0NDkyQzUuMDQ0OTIgNC42Mzg2NyA0LjkzNzUgNC4yODEyNSA0LjcyMjY2IDQuMDM5MDZDNC41MDc4MSAzLjc5Mjk3IDQuMjE2OCAzLjY2OTkyIDMuODQ5NjEgMy42Njk5MkMzLjY1MDM5IDMuNjY5OTIgMy40NzY1NiAzLjY5NzI3IDMuMzI4MTIgMy43NTE5NUMzLjE4MzU5IDMuODAyNzMgMy4wNjQ0NSAzLjg3Njk1IDIuOTcwNyAzLjk3NDYxQzIuODc2OTUgNC4wNjgzNiAyLjgwNjY0IDQuMTc5NjkgMi43NTk3NyA0LjMwODU5QzIuNzE2OCA0LjQzNzUgMi42OTUzMSA0LjU3ODEyIDIuNjk1MzEgNC43MzA0N0MyLjY5NTMxIDQuODgyODEgMi43MTY4IDUuMDE5NTMgMi43NTk3NyA1LjE0MDYyQzIuODA2NjQgNS4yNTc4MSAyLjg4MjgxIDUuMzY3MTkgMi45ODgyOCA1LjQ2ODc1QzMuMDk3NjYgNS41NzAzMSAzLjI0MDIzIDUuNjY3OTcgMy40MTYwMiA1Ljc2MTcyQzMuNTkxOCA1Ljg1MTU2IDMuODEwNTUgNS45NDMzNiA0LjA3MjI3IDYuMDM3MTFDNC40NjY4IDYuMTg1NTUgNC44MjQyMiA2LjMzOTg0IDUuMTQ0NTMgNi41QzUuNDY0ODQgNi42NTYyNSA1LjczODI4IDYuODM5ODQgNS45NjQ4NCA3LjA1MDc4QzYuMTk1MzEgNy4yNTc4MSA2LjM3MTA5IDcuNSA2LjQ5MjE5IDcuNzc3MzRDNi42MTcxOSA4LjA1MDc4IDYuNjc5NjkgOC4zNzUgNi42Nzk2OSA4Ljc1QzYuNjc5NjkgOS4wOTM3NSA2LjYyMzA1IDkuNDA0MyA2LjUwOTc3IDkuNjgxNjRDNi4zOTY0OCA5Ljk1NTA4IDYuMjM0MzggMTAuMTkxNCA2LjAyMzQ0IDEwLjM5MDZDNS44MTI1IDEwLjU4OTggNS41NTg1OSAxMC43NSA1LjI2MTcyIDEwLjg3MTFDNC45NjQ4NCAxMC45ODgzIDQuNjMyODEgMTEuMDY0NSA0LjI2NTYyIDExLjA5OTZWMTIuMjQ4SDMuMzMzOThWMTEuMDk5NkMzLjAwMTk1IDExLjA2ODQgMi42Nzk2OSAxMC45OTYxIDIuMzY3MTkgMTAuODgyOEMyLjA1NDY5IDEwLjc2NTYgMS43NzczNCAxMC41OTc3IDEuNTM1MTYgMTAuMzc4OUMxLjI5Njg4IDEwLjE2MDIgMS4xMDU0NyA5Ljg4NDc3IDAuOTYwOTM4IDkuNTUyNzNDMC44MTY0MDYgOS4yMTY4IDAuNzQ0MTQxIDguODE0NDUgMC43NDQxNDEgOC4zNDU3SDIuMzc4OTFDMi4zNzg5MSA4LjYyNjk1IDIuNDE5OTIgOC44NjMyOCAyLjUwMTk1IDkuMDU0NjlDMi41ODM5OCA5LjI0MjE5IDIuNjg5NDUgOS4zOTI1OCAyLjgxODM2IDkuNTA1ODZDMi45NTExNyA5LjYxNTIzIDMuMTAxNTYgOS42OTMzNiAzLjI2OTUzIDkuNzQwMjNDMy40Mzc1IDkuNzg3MTEgMy42MDkzOCA5LjgxMDU1IDMuNzg1MTYgOS44MTA1NUM0LjIwMzEyIDkuODEwNTUgNC41MTk1MyA5LjcxMjg5IDQuNzM0MzggOS41MTc1OEM0Ljk0OTIyIDkuMzIyMjcgNS4wNTY2NCA5LjA3MDMxIDUuMDU2NjQgOC43NjE3MlpNMTMuNDE4IDEyLjI3MTVIOC4wNzQyMlYxMUgxMy40MThWMTIuMjcxNVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMuOTUyNjQgNikiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=);
  --jp-icon-text-editor: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtdGV4dC1lZGl0b3ItaWNvbi1jb2xvciBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xNSAxNUgzdjJoMTJ2LTJ6bTAtOEgzdjJoMTJWN3pNMyAxM2gxOHYtMkgzdjJ6bTAgOGgxOHYtMkgzdjJ6TTMgM3YyaDE4VjNIM3oiLz4KPC9zdmc+Cg==);
  --jp-icon-toc: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik03LDVIMjFWN0g3VjVNNywxM1YxMUgyMVYxM0g3TTQsNC41QTEuNSwxLjUgMCAwLDEgNS41LDZBMS41LDEuNSAwIDAsMSA0LDcuNUExLjUsMS41IDAgMCwxIDIuNSw2QTEuNSwxLjUgMCAwLDEgNCw0LjVNNCwxMC41QTEuNSwxLjUgMCAwLDEgNS41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMy41QTEuNSwxLjUgMCAwLDEgMi41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMC41TTcsMTlWMTdIMjFWMTlIN000LDE2LjVBMS41LDEuNSAwIDAsMSA1LjUsMThBMS41LDEuNSAwIDAsMSA0LDE5LjVBMS41LDEuNSAwIDAsMSAyLjUsMThBMS41LDEuNSAwIDAsMSA0LDE2LjVaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tree-view: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMiAxMVYzaC03djNIOVYzSDJ2OGg3VjhoMnYxMGg0djNoN3YtOGgtN3YzaC0yVjhoMnYzeiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMiAxNy4xODQ0IDIuOTY5NjggMTQuMzAzMiAxLjg2MDk0IDExLjQ0MDlaIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiMzMzMzMzMiIHN0cm9rZT0iIzMzMzMzMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCA5Ljg2NzE5KSIgZD0iTTIuODYwMTUgNC44NjUzNUwwLjcyNjU0OSAyLjk5OTU5TDAgMy42MzA0NUwyLjg2MDE1IDYuMTMxNTdMOCAwLjYzMDg3Mkw3LjI3ODU3IDBMMi44NjAxNSA0Ljg2NTM1WiIvPgo8L3N2Zz4K);
  --jp-icon-undo: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjUgOGMtMi42NSAwLTUuMDUuOTktNi45IDIuNkwyIDd2OWg5bC0zLjYyLTMuNjJjMS4zOS0xLjE2IDMuMTYtMS44OCA1LjEyLTEuODggMy41NCAwIDYuNTUgMi4zMSA3LjYgNS41bDIuMzctLjc4QzIxLjA4IDExLjAzIDE3LjE1IDggMTIuNSA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-user: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE2IDdhNCA0IDAgMTEtOCAwIDQgNCAwIDAxOCAwek0xMiAxNGE3IDcgMCAwMC03IDdoMTRhNyA3IDAgMDAtNy03eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-users: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM2IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGcgY2xhc3M9ImpwLWljb24zIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjczMjcgMCAwIDEuNzMyNyAtMy42MjgyIC4wOTk1NzcpIiBmaWxsPSIjNjE2MTYxIj4KICA8cGF0aCB0cmFuc2Zvcm09Im1hdHJpeCgxLjUsMCwwLDEuNSwwLC02KSIgZD0ibTEyLjE4NiA3LjUwOThjLTEuMDUzNSAwLTEuOTc1NyAwLjU2NjUtMi40Nzg1IDEuNDEwMiAwLjc1MDYxIDAuMzEyNzcgMS4zOTc0IDAuODI2NDggMS44NzMgMS40NzI3aDMuNDg2M2MwLTEuNTkyLTEuMjg4OS0yLjg4MjgtMi44ODA5LTIuODgyOHoiLz4KICA8cGF0aCBkPSJtMjAuNDY1IDIuMzg5NWEyLjE4ODUgMi4xODg1IDAgMCAxLTIuMTg4NCAyLjE4ODUgMi4xODg1IDIuMTg4NSAwIDAgMS0yLjE4ODUtMi4xODg1IDIuMTg4NSAyLjE4ODUgMCAwIDEgMi4xODg1LTIuMTg4NSAyLjE4ODUgMi4xODg1IDAgMCAxIDIuMTg4NCAyLjE4ODV6Ii8+CiAgPHBhdGggdHJhbnNmb3JtPSJtYXRyaXgoMS41LDAsMCwxLjUsMCwtNikiIGQ9Im0zLjU4OTggOC40MjE5Yy0xLjExMjYgMC0yLjAxMzcgMC45MDExMS0yLjAxMzcgMi4wMTM3aDIuODE0NWMwLjI2Nzk3LTAuMzczMDkgMC41OTA3LTAuNzA0MzUgMC45NTg5OC0wLjk3ODUyLTAuMzQ0MzMtMC42MTY4OC0xLjAwMzEtMS4wMzUyLTEuNzU5OC0xLjAzNTJ6Ii8+CiAgPHBhdGggZD0ibTYuOTE1NCA0LjYyM2ExLjUyOTQgMS41Mjk0IDAgMCAxLTEuNTI5NCAxLjUyOTQgMS41Mjk0IDEuNTI5NCAwIDAgMS0xLjUyOTQtMS41Mjk0IDEuNTI5NCAxLjUyOTQgMCAwIDEgMS41Mjk0LTEuNTI5NCAxLjUyOTQgMS41Mjk0IDAgMCAxIDEuNTI5NCAxLjUyOTR6Ii8+CiAgPHBhdGggZD0ibTYuMTM1IDEzLjUzNWMwLTMuMjM5MiAyLjYyNTktNS44NjUgNS44NjUtNS44NjUgMy4yMzkyIDAgNS44NjUgMi42MjU5IDUuODY1IDUuODY1eiIvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMy43Njg1IiByPSIyLjk2ODUiLz4KIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-vega: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbjEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjEyMTIxIj4KICAgIDxwYXRoIGQ9Ik0xMC42IDUuNGwyLjItMy4ySDIuMnY3LjNsNC02LjZ6Ii8+CiAgICA8cGF0aCBkPSJNMTUuOCAyLjJsLTQuNCA2LjZMNyA2LjNsLTQuOCA4djUuNWgxNy42VjIuMmgtNHptLTcgMTUuNEg1LjV2LTQuNGgzLjN2NC40em00LjQgMEg5LjhWOS44aDMuNHY3Ljh6bTQuNCAwaC0zLjRWNi41aDMuNHYxMS4xeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-word: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KIDxnIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzQxNDE0MSI+CiAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiA8L2c+CiA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSguNDMgLjA0MDEpIiBmaWxsPSIjZmZmIj4KICA8cGF0aCBkPSJtNC4xNCA4Ljc2cTAuMDY4Mi0xLjg5IDIuNDItMS44OSAxLjE2IDAgMS42OCAwLjQyIDAuNTY3IDAuNDEgMC41NjcgMS4xNnYzLjQ3cTAgMC40NjIgMC41MTQgMC40NjIgMC4xMDMgMCAwLjItMC4wMjMxdjAuNzE0cS0wLjM5OSAwLjEwMy0wLjY1MSAwLjEwMy0wLjQ1MiAwLTAuNjkzLTAuMjItMC4yMzEtMC4yLTAuMjg0LTAuNjYyLTAuOTU2IDAuODcyLTIgMC44NzItMC45MDMgMC0xLjQ3LTAuNDcyLTAuNTI1LTAuNDcyLTAuNTI1LTEuMjYgMC0wLjI2MiAwLjA0NTItMC40NzIgMC4wNTY3LTAuMjIgMC4xMTYtMC4zNzggMC4wNjgyLTAuMTY4IDAuMjMxLTAuMzA0IDAuMTU4LTAuMTQ3IDAuMjYyLTAuMjQyIDAuMTE2LTAuMDkxNCAwLjM2OC0wLjE2OCAwLjI2Mi0wLjA5MTQgMC4zOTktMC4xMjYgMC4xMzYtMC4wNDUyIDAuNDcyLTAuMTAzIDAuMzM2LTAuMDU3OCAwLjUwNC0wLjA3OTggMC4xNTgtMC4wMjMxIDAuNTY3LTAuMDc5OCAwLjU1Ni0wLjA2ODIgMC43NzctMC4yMjEgMC4yMi0wLjE1MiAwLjIyLTAuNDQxdi0wLjI1MnEwLTAuNDMtMC4zNTctMC42NjItMC4zMzYtMC4yMzEtMC45NzYtMC4yMzEtMC42NjIgMC0wLjk5OCAwLjI2Mi0wLjMzNiAwLjI1Mi0wLjM5OSAwLjc5OHptMS44OSAzLjY4cTAuNzg4IDAgMS4yNi0wLjQxIDAuNTA0LTAuNDIgMC41MDQtMC45MDN2LTEuMDVxLTAuMjg0IDAuMTM2LTAuODYxIDAuMjMxLTAuNTY3IDAuMDkxNC0wLjk4NyAwLjE1OC0wLjQyIDAuMDY4Mi0wLjc2NiAwLjMyNi0wLjMzNiAwLjI1Mi0wLjMzNiAwLjcwNHQwLjMwNCAwLjcwNCAwLjg2MSAwLjI1MnoiIHN0cm9rZS13aWR0aD0iMS4wNSIvPgogIDxwYXRoIGQ9Im0xMCA0LjU2aDAuOTQ1djMuMTVxMC42NTEtMC45NzYgMS44OS0wLjk3NiAxLjE2IDAgMS44OSAwLjg0IDAuNjgyIDAuODQgMC42ODIgMi4zMSAwIDEuNDctMC43MDQgMi40Mi0wLjcwNCAwLjg4Mi0xLjg5IDAuODgyLTEuMjYgMC0xLjg5LTEuMDJ2MC43NjZoLTAuODV6bTIuNjIgMy4wNHEtMC43NDYgMC0xLjE2IDAuNjQtMC40NTIgMC42My0wLjQ1MiAxLjY4IDAgMS4wNSAwLjQ1MiAxLjY4dDEuMTYgMC42M3EwLjc3NyAwIDEuMjYtMC42MyAwLjQ5NC0wLjY0IDAuNDk0LTEuNjggMC0xLjA1LTAuNDcyLTEuNjgtMC40NjItMC42NC0xLjI2LTAuNjR6IiBzdHJva2Utd2lkdGg9IjEuMDUiLz4KICA8cGF0aCBkPSJtMi43MyAxNS44IDEzLjYgMC4wMDgxYzAuMDA2OSAwIDAtMi42IDAtMi42IDAtMC4wMDc4LTEuMTUgMC0xLjE1IDAtMC4wMDY5IDAtMC4wMDgzIDEuNS0wLjAwODMgMS41LTJlLTMgLTAuMDAxNC0xMS4zLTAuMDAxNC0xMS4zLTAuMDAxNGwtMC4wMDU5Mi0xLjVjMC0wLjAwNzgtMS4xNyAwLjAwMTMtMS4xNyAwLjAwMTN6IiBzdHJva2Utd2lkdGg9Ii45NzUiLz4KIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-yaml: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1jb250cmFzdDIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjRDgxQjYwIj4KICAgIDxwYXRoIGQ9Ik03LjIgMTguNnYtNS40TDMgNS42aDMuM2wxLjQgMy4xYy4zLjkuNiAxLjYgMSAyLjUuMy0uOC42LTEuNiAxLTIuNWwxLjQtMy4xaDMuNGwtNC40IDcuNnY1LjVsLTIuOS0uMXoiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxNi41IiByPSIyLjEiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxMSIgcj0iMi4xIi8+CiAgPC9nPgo8L3N2Zz4K);
}

/* Icon CSS class declarations */

.jp-AddAboveIcon {
  background-image: var(--jp-icon-add-above);
}

.jp-AddBelowIcon {
  background-image: var(--jp-icon-add-below);
}

.jp-AddIcon {
  background-image: var(--jp-icon-add);
}

.jp-BellIcon {
  background-image: var(--jp-icon-bell);
}

.jp-BugDotIcon {
  background-image: var(--jp-icon-bug-dot);
}

.jp-BugIcon {
  background-image: var(--jp-icon-bug);
}

.jp-BuildIcon {
  background-image: var(--jp-icon-build);
}

.jp-CaretDownEmptyIcon {
  background-image: var(--jp-icon-caret-down-empty);
}

.jp-CaretDownEmptyThinIcon {
  background-image: var(--jp-icon-caret-down-empty-thin);
}

.jp-CaretDownIcon {
  background-image: var(--jp-icon-caret-down);
}

.jp-CaretLeftIcon {
  background-image: var(--jp-icon-caret-left);
}

.jp-CaretRightIcon {
  background-image: var(--jp-icon-caret-right);
}

.jp-CaretUpEmptyThinIcon {
  background-image: var(--jp-icon-caret-up-empty-thin);
}

.jp-CaretUpIcon {
  background-image: var(--jp-icon-caret-up);
}

.jp-CaseSensitiveIcon {
  background-image: var(--jp-icon-case-sensitive);
}

.jp-CheckIcon {
  background-image: var(--jp-icon-check);
}

.jp-CircleEmptyIcon {
  background-image: var(--jp-icon-circle-empty);
}

.jp-CircleIcon {
  background-image: var(--jp-icon-circle);
}

.jp-ClearIcon {
  background-image: var(--jp-icon-clear);
}

.jp-CloseIcon {
  background-image: var(--jp-icon-close);
}

.jp-CodeCheckIcon {
  background-image: var(--jp-icon-code-check);
}

.jp-CodeIcon {
  background-image: var(--jp-icon-code);
}

.jp-CollapseAllIcon {
  background-image: var(--jp-icon-collapse-all);
}

.jp-ConsoleIcon {
  background-image: var(--jp-icon-console);
}

.jp-CopyIcon {
  background-image: var(--jp-icon-copy);
}

.jp-CopyrightIcon {
  background-image: var(--jp-icon-copyright);
}

.jp-CutIcon {
  background-image: var(--jp-icon-cut);
}

.jp-DeleteIcon {
  background-image: var(--jp-icon-delete);
}

.jp-DownloadIcon {
  background-image: var(--jp-icon-download);
}

.jp-DuplicateIcon {
  background-image: var(--jp-icon-duplicate);
}

.jp-EditIcon {
  background-image: var(--jp-icon-edit);
}

.jp-EllipsesIcon {
  background-image: var(--jp-icon-ellipses);
}

.jp-ErrorIcon {
  background-image: var(--jp-icon-error);
}

.jp-ExpandAllIcon {
  background-image: var(--jp-icon-expand-all);
}

.jp-ExtensionIcon {
  background-image: var(--jp-icon-extension);
}

.jp-FastForwardIcon {
  background-image: var(--jp-icon-fast-forward);
}

.jp-FileIcon {
  background-image: var(--jp-icon-file);
}

.jp-FileUploadIcon {
  background-image: var(--jp-icon-file-upload);
}

.jp-FilterDotIcon {
  background-image: var(--jp-icon-filter-dot);
}

.jp-FilterIcon {
  background-image: var(--jp-icon-filter);
}

.jp-FilterListIcon {
  background-image: var(--jp-icon-filter-list);
}

.jp-FolderFavoriteIcon {
  background-image: var(--jp-icon-folder-favorite);
}

.jp-FolderIcon {
  background-image: var(--jp-icon-folder);
}

.jp-HomeIcon {
  background-image: var(--jp-icon-home);
}

.jp-Html5Icon {
  background-image: var(--jp-icon-html5);
}

.jp-ImageIcon {
  background-image: var(--jp-icon-image);
}

.jp-InfoIcon {
  background-image: var(--jp-icon-info);
}

.jp-InspectorIcon {
  background-image: var(--jp-icon-inspector);
}

.jp-JsonIcon {
  background-image: var(--jp-icon-json);
}

.jp-JuliaIcon {
  background-image: var(--jp-icon-julia);
}

.jp-JupyterFaviconIcon {
  background-image: var(--jp-icon-jupyter-favicon);
}

.jp-JupyterIcon {
  background-image: var(--jp-icon-jupyter);
}

.jp-JupyterlabWordmarkIcon {
  background-image: var(--jp-icon-jupyterlab-wordmark);
}

.jp-KernelIcon {
  background-image: var(--jp-icon-kernel);
}

.jp-KeyboardIcon {
  background-image: var(--jp-icon-keyboard);
}

.jp-LaunchIcon {
  background-image: var(--jp-icon-launch);
}

.jp-LauncherIcon {
  background-image: var(--jp-icon-launcher);
}

.jp-LineFormIcon {
  background-image: var(--jp-icon-line-form);
}

.jp-LinkIcon {
  background-image: var(--jp-icon-link);
}

.jp-ListIcon {
  background-image: var(--jp-icon-list);
}

.jp-MarkdownIcon {
  background-image: var(--jp-icon-markdown);
}

.jp-MoveDownIcon {
  background-image: var(--jp-icon-move-down);
}

.jp-MoveUpIcon {
  background-image: var(--jp-icon-move-up);
}

.jp-NewFolderIcon {
  background-image: var(--jp-icon-new-folder);
}

.jp-NotTrustedIcon {
  background-image: var(--jp-icon-not-trusted);
}

.jp-NotebookIcon {
  background-image: var(--jp-icon-notebook);
}

.jp-NumberingIcon {
  background-image: var(--jp-icon-numbering);
}

.jp-OfflineBoltIcon {
  background-image: var(--jp-icon-offline-bolt);
}

.jp-PaletteIcon {
  background-image: var(--jp-icon-palette);
}

.jp-PasteIcon {
  background-image: var(--jp-icon-paste);
}

.jp-PdfIcon {
  background-image: var(--jp-icon-pdf);
}

.jp-PythonIcon {
  background-image: var(--jp-icon-python);
}

.jp-RKernelIcon {
  background-image: var(--jp-icon-r-kernel);
}

.jp-ReactIcon {
  background-image: var(--jp-icon-react);
}

.jp-RedoIcon {
  background-image: var(--jp-icon-redo);
}

.jp-RefreshIcon {
  background-image: var(--jp-icon-refresh);
}

.jp-RegexIcon {
  background-image: var(--jp-icon-regex);
}

.jp-RunIcon {
  background-image: var(--jp-icon-run);
}

.jp-RunningIcon {
  background-image: var(--jp-icon-running);
}

.jp-SaveIcon {
  background-image: var(--jp-icon-save);
}

.jp-SearchIcon {
  background-image: var(--jp-icon-search);
}

.jp-SettingsIcon {
  background-image: var(--jp-icon-settings);
}

.jp-ShareIcon {
  background-image: var(--jp-icon-share);
}

.jp-SpreadsheetIcon {
  background-image: var(--jp-icon-spreadsheet);
}

.jp-StopIcon {
  background-image: var(--jp-icon-stop);
}

.jp-TabIcon {
  background-image: var(--jp-icon-tab);
}

.jp-TableRowsIcon {
  background-image: var(--jp-icon-table-rows);
}

.jp-TagIcon {
  background-image: var(--jp-icon-tag);
}

.jp-TerminalIcon {
  background-image: var(--jp-icon-terminal);
}

.jp-TextEditorIcon {
  background-image: var(--jp-icon-text-editor);
}

.jp-TocIcon {
  background-image: var(--jp-icon-toc);
}

.jp-TreeViewIcon {
  background-image: var(--jp-icon-tree-view);
}

.jp-TrustedIcon {
  background-image: var(--jp-icon-trusted);
}

.jp-UndoIcon {
  background-image: var(--jp-icon-undo);
}

.jp-UserIcon {
  background-image: var(--jp-icon-user);
}

.jp-UsersIcon {
  background-image: var(--jp-icon-users);
}

.jp-VegaIcon {
  background-image: var(--jp-icon-vega);
}

.jp-WordIcon {
  background-image: var(--jp-icon-word);
}

.jp-YamlIcon {
  background-image: var(--jp-icon-yaml);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

.jp-Icon,
.jp-MaterialIcon {
  background-position: center;
  background-repeat: no-repeat;
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-cover {
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

/**
 * (DEPRECATED) Support for specific CSS icon sizes
 */

.jp-Icon-16 {
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-18 {
  background-size: 18px;
  min-width: 18px;
  min-height: 18px;
}

.jp-Icon-20 {
  background-size: 20px;
  min-width: 20px;
  min-height: 20px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.lm-TabBar .lm-TabBar-addButton {
  align-items: center;
  display: flex;
  padding: 4px;
  padding-bottom: 5px;
  margin-right: 1px;
  background-color: var(--jp-layout-color2);
}

.lm-TabBar .lm-TabBar-addButton:hover {
  background-color: var(--jp-layout-color1);
}

.lm-DockPanel-tabBar .lm-TabBar-tab {
  width: var(--jp-private-horizontal-tab-width);
}

.lm-DockPanel-tabBar .lm-TabBar-content {
  flex: unset;
}

.lm-DockPanel-tabBar[data-orientation='horizontal'] {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for icons as inline SVG HTMLElements
 */

/* recolor the primary elements of an icon */
.jp-icon0[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon1[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon2[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon3[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-accent0[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-accent1[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-accent2[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-accent3[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-accent4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-accent0[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-accent1[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-accent2[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-accent3[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-accent4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-none[fill] {
  fill: none;
}

.jp-icon-none[stroke] {
  stroke: none;
}

/* brand icon colors. Same for light and dark */
.jp-icon-brand0[fill] {
  fill: var(--jp-brand-color0);
}

.jp-icon-brand1[fill] {
  fill: var(--jp-brand-color1);
}

.jp-icon-brand2[fill] {
  fill: var(--jp-brand-color2);
}

.jp-icon-brand3[fill] {
  fill: var(--jp-brand-color3);
}

.jp-icon-brand4[fill] {
  fill: var(--jp-brand-color4);
}

.jp-icon-brand0[stroke] {
  stroke: var(--jp-brand-color0);
}

.jp-icon-brand1[stroke] {
  stroke: var(--jp-brand-color1);
}

.jp-icon-brand2[stroke] {
  stroke: var(--jp-brand-color2);
}

.jp-icon-brand3[stroke] {
  stroke: var(--jp-brand-color3);
}

.jp-icon-brand4[stroke] {
  stroke: var(--jp-brand-color4);
}

/* warn icon colors. Same for light and dark */
.jp-icon-warn0[fill] {
  fill: var(--jp-warn-color0);
}

.jp-icon-warn1[fill] {
  fill: var(--jp-warn-color1);
}

.jp-icon-warn2[fill] {
  fill: var(--jp-warn-color2);
}

.jp-icon-warn3[fill] {
  fill: var(--jp-warn-color3);
}

.jp-icon-warn0[stroke] {
  stroke: var(--jp-warn-color0);
}

.jp-icon-warn1[stroke] {
  stroke: var(--jp-warn-color1);
}

.jp-icon-warn2[stroke] {
  stroke: var(--jp-warn-color2);
}

.jp-icon-warn3[stroke] {
  stroke: var(--jp-warn-color3);
}

/* icon colors that contrast well with each other and most backgrounds */
.jp-icon-contrast0[fill] {
  fill: var(--jp-icon-contrast-color0);
}

.jp-icon-contrast1[fill] {
  fill: var(--jp-icon-contrast-color1);
}

.jp-icon-contrast2[fill] {
  fill: var(--jp-icon-contrast-color2);
}

.jp-icon-contrast3[fill] {
  fill: var(--jp-icon-contrast-color3);
}

.jp-icon-contrast0[stroke] {
  stroke: var(--jp-icon-contrast-color0);
}

.jp-icon-contrast1[stroke] {
  stroke: var(--jp-icon-contrast-color1);
}

.jp-icon-contrast2[stroke] {
  stroke: var(--jp-icon-contrast-color2);
}

.jp-icon-contrast3[stroke] {
  stroke: var(--jp-icon-contrast-color3);
}

.jp-icon-dot[fill] {
  fill: var(--jp-warn-color0);
}

.jp-jupyter-icon-color[fill] {
  fill: var(--jp-jupyter-icon-color, var(--jp-warn-color0));
}

.jp-notebook-icon-color[fill] {
  fill: var(--jp-notebook-icon-color, var(--jp-warn-color0));
}

.jp-json-icon-color[fill] {
  fill: var(--jp-json-icon-color, var(--jp-warn-color1));
}

.jp-console-icon-color[fill] {
  fill: var(--jp-console-icon-color, white);
}

.jp-console-icon-background-color[fill] {
  fill: var(--jp-console-icon-background-color, var(--jp-brand-color1));
}

.jp-terminal-icon-color[fill] {
  fill: var(--jp-terminal-icon-color, var(--jp-layout-color2));
}

.jp-terminal-icon-background-color[fill] {
  fill: var(
    --jp-terminal-icon-background-color,
    var(--jp-inverse-layout-color2)
  );
}

.jp-text-editor-icon-color[fill] {
  fill: var(--jp-text-editor-icon-color, var(--jp-inverse-layout-color3));
}

.jp-inspector-icon-color[fill] {
  fill: var(--jp-inspector-icon-color, var(--jp-inverse-layout-color3));
}

/* CSS for icons in selected filebrowser listing items */
.jp-DirListing-item.jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

.jp-DirListing-item.jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* stylelint-disable selector-max-class, selector-max-compound-selectors */

/**
* TODO: come up with non css-hack solution for showing the busy icon on top
*  of the close icon
* CSS for complex behavior of close icon of tabs in the main area tabbar
*/
.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon3[fill] {
  fill: none;
}

.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon-busy[fill] {
  fill: var(--jp-inverse-layout-color3);
}

/* stylelint-enable selector-max-class, selector-max-compound-selectors */

/* CSS for icons in status bar */
#jp-main-statusbar .jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

#jp-main-statusbar .jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* special handling for splash icon CSS. While the theme CSS reloads during
   splash, the splash icon can loose theming. To prevent that, we set a
   default for its color variable */
:root {
  --jp-warn-color0: var(--md-orange-700);
}

/* not sure what to do with this one, used in filebrowser listing */
.jp-DragIcon {
  margin-right: 4px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for alt colors for icons as inline SVG HTMLElements
 */

/* alt recolor the primary elements of an icon */
.jp-icon-alt .jp-icon0[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-alt .jp-icon1[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-alt .jp-icon2[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-alt .jp-icon3[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-alt .jp-icon4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-alt .jp-icon0[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-alt .jp-icon1[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-alt .jp-icon2[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-alt .jp-icon3[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-alt .jp-icon4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* alt recolor the accent elements of an icon */
.jp-icon-alt .jp-icon-accent0[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-alt .jp-icon-accent1[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-alt .jp-icon-accent2[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-alt .jp-icon-accent3[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-alt .jp-icon-accent4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-alt .jp-icon-accent0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-alt .jp-icon-accent1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-alt .jp-icon-accent2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-alt .jp-icon-accent3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-alt .jp-icon-accent4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-icon-hoverShow:not(:hover) .jp-icon-hoverShow-content {
  display: none !important;
}

/**
 * Support for hover colors for icons as inline SVG HTMLElements
 */

/**
 * regular colors
 */

/* recolor the primary elements of an icon */
.jp-icon-hover :hover .jp-icon0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-hover :hover .jp-icon1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-hover :hover .jp-icon2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-hover :hover .jp-icon3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-hover :hover .jp-icon4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-hover :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-hover :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-hover :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-hover :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-hover :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-hover :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-hover :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-hover :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-hover :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-hover :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-hover :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-hover :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-hover :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-hover :hover .jp-icon-none-hover[fill] {
  fill: none;
}

.jp-icon-hover :hover .jp-icon-none-hover[stroke] {
  stroke: none;
}

/**
 * inverse colors
 */

/* inverse recolor the primary elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[fill] {
  fill: var(--jp-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[fill] {
  fill: var(--jp-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[fill] {
  fill: var(--jp-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[fill] {
  fill: var(--jp-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* inverse recolor the accent elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-IFrame {
  width: 100%;
  height: 100%;
}

.jp-IFrame > iframe {
  border: none;
}

/*
When drag events occur, `lm-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-IFrame {
  position: relative;
}

body.lm-mod-override-cursor .jp-IFrame::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-HoverBox {
  position: fixed;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FormGroup-content fieldset {
  border: none;
  padding: 0;
  min-width: 0;
  width: 100%;
}

/* stylelint-disable selector-max-type */

.jp-FormGroup-content fieldset .jp-inputFieldWrapper input,
.jp-FormGroup-content fieldset .jp-inputFieldWrapper select,
.jp-FormGroup-content fieldset .jp-inputFieldWrapper textarea {
  font-size: var(--jp-content-font-size2);
  border-color: var(--jp-input-border-color);
  border-style: solid;
  border-radius: var(--jp-border-radius);
  border-width: 1px;
  padding: 6px 8px;
  background: none;
  color: var(--jp-ui-font-color0);
  height: inherit;
}

.jp-FormGroup-content fieldset input[type='checkbox'] {
  position: relative;
  top: 2px;
  margin-left: 0;
}

.jp-FormGroup-content button.jp-mod-styled {
  cursor: pointer;
}

.jp-FormGroup-content .checkbox label {
  cursor: pointer;
  font-size: var(--jp-content-font-size1);
}

.jp-FormGroup-content .jp-root > fieldset > legend {
  display: none;
}

.jp-FormGroup-content .jp-root > fieldset > p {
  display: none;
}

/** copy of `input.jp-mod-styled:focus` style */
.jp-FormGroup-content fieldset input:focus,
.jp-FormGroup-content fieldset select:focus {
  -moz-outline-radius: unset;
  outline: var(--jp-border-width) solid var(--md-blue-500);
  outline-offset: -1px;
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-FormGroup-content fieldset input:hover:not(:focus),
.jp-FormGroup-content fieldset select:hover:not(:focus) {
  background-color: var(--jp-border-color2);
}

/* stylelint-enable selector-max-type */

.jp-FormGroup-content .checkbox .field-description {
  /* Disable default description field for checkbox:
   because other widgets do not have description fields,
   we add descriptions to each widget on the field level.
  */
  display: none;
}

.jp-FormGroup-content #root__description {
  display: none;
}

.jp-FormGroup-content .jp-modifiedIndicator {
  width: 5px;
  background-color: var(--jp-brand-color2);
  margin-top: 0;
  margin-left: calc(var(--jp-private-settingeditor-modifier-indent) * -1);
  flex-shrink: 0;
}

.jp-FormGroup-content .jp-modifiedIndicator.jp-errorIndicator {
  background-color: var(--jp-error-color0);
  margin-right: 0.5em;
}

/* RJSF ARRAY style */

.jp-arrayFieldWrapper legend {
  font-size: var(--jp-content-font-size2);
  color: var(--jp-ui-font-color0);
  flex-basis: 100%;
  padding: 4px 0;
  font-weight: var(--jp-content-heading-font-weight);
  border-bottom: 1px solid var(--jp-border-color2);
}

.jp-arrayFieldWrapper .field-description {
  padding: 4px 0;
  white-space: pre-wrap;
}

.jp-arrayFieldWrapper .array-item {
  width: 100%;
  border: 1px solid var(--jp-border-color2);
  border-radius: 4px;
  margin: 4px;
}

.jp-ArrayOperations {
  display: flex;
  margin-left: 8px;
}

.jp-ArrayOperationsButton {
  margin: 2px;
}

.jp-ArrayOperationsButton .jp-icon3[fill] {
  fill: var(--jp-ui-font-color0);
}

button.jp-ArrayOperationsButton.jp-mod-styled:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* RJSF form validation error */

.jp-FormGroup-content .validationErrors {
  color: var(--jp-error-color0);
}

/* Hide panel level error as duplicated the field level error */
.jp-FormGroup-content .panel.errors {
  display: none;
}

/* RJSF normal content (settings-editor) */

.jp-FormGroup-contentNormal {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.jp-FormGroup-contentNormal .jp-FormGroup-contentItem {
  margin-left: 7px;
  color: var(--jp-ui-font-color0);
}

.jp-FormGroup-contentNormal .jp-FormGroup-description {
  flex-basis: 100%;
  padding: 4px 7px;
}

.jp-FormGroup-contentNormal .jp-FormGroup-default {
  flex-basis: 100%;
  padding: 4px 7px;
}

.jp-FormGroup-contentNormal .jp-FormGroup-fieldLabel {
  font-size: var(--jp-content-font-size1);
  font-weight: normal;
  min-width: 120px;
}

.jp-FormGroup-contentNormal fieldset:not(:first-child) {
  margin-left: 7px;
}

.jp-FormGroup-contentNormal .field-array-of-string .array-item {
  /* Display `jp-ArrayOperations` buttons side-by-side with content except
    for small screens where flex-wrap will place them one below the other.
  */
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.jp-FormGroup-contentNormal .jp-objectFieldWrapper .form-group {
  padding: 2px 8px 2px var(--jp-private-settingeditor-modifier-indent);
  margin-top: 2px;
}

/* RJSF compact content (metadata-form) */

.jp-FormGroup-content.jp-FormGroup-contentCompact {
  width: 100%;
}

.jp-FormGroup-contentCompact .form-group {
  display: flex;
  padding: 0.5em 0.2em 0.5em 0;
}

.jp-FormGroup-contentCompact
  .jp-FormGroup-compactTitle
  .jp-FormGroup-description {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color2);
}

.jp-FormGroup-contentCompact .jp-FormGroup-fieldLabel {
  padding-bottom: 0.3em;
}

.jp-FormGroup-contentCompact .jp-inputFieldWrapper .form-control {
  width: 100%;
  box-sizing: border-box;
}

.jp-FormGroup-contentCompact .jp-arrayFieldWrapper .jp-FormGroup-compactTitle {
  padding-bottom: 7px;
}

.jp-FormGroup-contentCompact
  .jp-objectFieldWrapper
  .jp-objectFieldWrapper
  .form-group {
  padding: 2px 8px 2px var(--jp-private-settingeditor-modifier-indent);
  margin-top: 2px;
}

.jp-FormGroup-contentCompact ul.error-detail {
  margin-block-start: 0.5em;
  margin-block-end: 0.5em;
  padding-inline-start: 1em;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-SidePanel {
  display: flex;
  flex-direction: column;
  min-width: var(--jp-sidebar-min-width);
  overflow-y: auto;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);
  font-size: var(--jp-ui-font-size1);
}

.jp-SidePanel-header {
  flex: 0 0 auto;
  display: flex;
  border-bottom: var(--jp-border-width) solid var(--jp-border-color2);
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin: 0;
  padding: 2px;
  text-transform: uppercase;
}

.jp-SidePanel-toolbar {
  flex: 0 0 auto;
}

.jp-SidePanel-content {
  flex: 1 1 auto;
}

.jp-SidePanel-toolbar,
.jp-AccordionPanel-toolbar {
  height: var(--jp-private-toolbar-height);
}

.jp-SidePanel-toolbar.jp-Toolbar-micro {
  display: none;
}

.lm-AccordionPanel .jp-AccordionPanel-title {
  box-sizing: border-box;
  line-height: 25px;
  margin: 0;
  display: flex;
  align-items: center;
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  font-size: var(--jp-ui-font-size0);
}

.jp-AccordionPanel-title {
  cursor: pointer;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  text-transform: uppercase;
}

.lm-AccordionPanel[data-orientation='horizontal'] > .jp-AccordionPanel-title {
  /* Title is rotated for horizontal accordion panel using CSS */
  display: block;
  transform-origin: top left;
  transform: rotate(-90deg) translate(-100%);
}

.jp-AccordionPanel-title .lm-AccordionPanel-titleLabel {
  user-select: none;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

.jp-AccordionPanel-title .lm-AccordionPanel-titleCollapser {
  transform: rotate(-90deg);
  margin: auto 0;
  height: 16px;
}

.jp-AccordionPanel-title.lm-mod-expanded .lm-AccordionPanel-titleCollapser {
  transform: rotate(0deg);
}

.lm-AccordionPanel .jp-AccordionPanel-toolbar {
  background: none;
  box-shadow: none;
  border: none;
  margin-left: auto;
}

.lm-AccordionPanel .lm-SplitPanel-handle:hover {
  background: var(--jp-layout-color3);
}

.jp-text-truncated {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Spinner {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-layout-color0);
  outline: none;
}

.jp-SpinnerContent {
  font-size: 10px;
  margin: 50px auto;
  text-indent: -9999em;
  width: 3em;
  height: 3em;
  border-radius: 50%;
  background: var(--jp-brand-color3);
  background: linear-gradient(
    to right,
    #f37626 10%,
    rgba(255, 255, 255, 0) 42%
  );
  position: relative;
  animation: load3 1s infinite linear, fadeIn 1s;
}

.jp-SpinnerContent::before {
  width: 50%;
  height: 50%;
  background: #f37626;
  border-radius: 100% 0 0;
  position: absolute;
  top: 0;
  left: 0;
  content: '';
}

.jp-SpinnerContent::after {
  background: var(--jp-layout-color0);
  width: 75%;
  height: 75%;
  border-radius: 50%;
  content: '';
  margin: auto;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@keyframes load3 {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

button.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: none;
  box-sizing: border-box;
  text-align: center;
  line-height: 32px;
  height: 32px;
  padding: 0 12px;
  letter-spacing: 0.8px;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input.jp-mod-styled {
  background: var(--jp-input-background);
  height: 28px;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color1);
  padding-left: 7px;
  padding-right: 7px;
  font-size: var(--jp-ui-font-size2);
  color: var(--jp-ui-font-color0);
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input[type='checkbox'].jp-mod-styled {
  appearance: checkbox;
  -webkit-appearance: checkbox;
  -moz-appearance: checkbox;
  height: auto;
}

input.jp-mod-styled:focus {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-select-wrapper {
  display: flex;
  position: relative;
  flex-direction: column;
  padding: 1px;
  background-color: var(--jp-layout-color1);
  box-sizing: border-box;
  margin-bottom: 12px;
}

.jp-select-wrapper:not(.multiple) {
  height: 28px;
}

.jp-select-wrapper.jp-mod-focused select.jp-mod-styled {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-input-active-background);
}

select.jp-mod-styled:hover {
  cursor: pointer;
  color: var(--jp-ui-font-color0);
  background-color: var(--jp-input-hover-background);
  box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.5);
}

select.jp-mod-styled {
  flex: 1 1 auto;
  width: 100%;
  font-size: var(--jp-ui-font-size2);
  background: var(--jp-input-background);
  color: var(--jp-ui-font-color0);
  padding: 0 25px 0 8px;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

select.jp-mod-styled:not([multiple]) {
  height: 32px;
}

select.jp-mod-styled[multiple] {
  max-height: 200px;
  overflow-y: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-switch {
  display: flex;
  align-items: center;
  padding-left: 4px;
  padding-right: 4px;
  font-size: var(--jp-ui-font-size1);
  background-color: transparent;
  color: var(--jp-ui-font-color1);
  border: none;
  height: 20px;
}

.jp-switch:hover {
  background-color: var(--jp-layout-color2);
}

.jp-switch-label {
  margin-right: 5px;
  font-family: var(--jp-ui-font-family);
}

.jp-switch-track {
  cursor: pointer;
  background-color: var(--jp-switch-color, var(--jp-border-color1));
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 34px;
  height: 16px;
  width: 35px;
  position: relative;
}

.jp-switch-track::before {
  content: '';
  position: absolute;
  height: 10px;
  width: 10px;
  margin: 3px;
  left: 0;
  background-color: var(--jp-ui-inverse-font-color1);
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 50%;
}

.jp-switch[aria-checked='true'] .jp-switch-track {
  background-color: var(--jp-switch-true-position-color, var(--jp-warn-color0));
}

.jp-switch[aria-checked='true'] .jp-switch-track::before {
  /* track width (35) - margins (3 + 3) - thumb width (10) */
  left: 19px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toolbar-height: calc(
    28px + var(--jp-border-width)
  ); /* leave 28px for content */
}

.jp-Toolbar {
  color: var(--jp-ui-font-color1);
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: 2px;
  z-index: 8;
  overflow-x: hidden;
}

/* Toolbar items */

.jp-Toolbar > .jp-Toolbar-item.jp-Toolbar-spacer {
  flex-grow: 1;
  flex-shrink: 1;
}

.jp-Toolbar-item.jp-Toolbar-kernelStatus {
  display: inline-block;
  width: 32px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 16px;
}

.jp-Toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  display: flex;
  padding-left: 1px;
  padding-right: 1px;
  font-size: var(--jp-ui-font-size1);
  line-height: var(--jp-private-toolbar-height);
  height: 100%;
}

/* Toolbar buttons */

/* This is the div we use to wrap the react component into a Widget */
div.jp-ToolbarButton {
  color: transparent;
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0;
  margin: 0;
}

button.jp-ToolbarButtonComponent {
  background: var(--jp-layout-color1);
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0 6px;
  margin: 0;
  height: 24px;
  border-radius: var(--jp-border-radius);
  display: flex;
  align-items: center;
  text-align: center;
  font-size: 14px;
  min-width: unset;
  min-height: unset;
}

button.jp-ToolbarButtonComponent:disabled {
  opacity: 0.4;
}

button.jp-ToolbarButtonComponent > span {
  padding: 0;
  flex: 0 0 auto;
}

button.jp-ToolbarButtonComponent .jp-ToolbarButtonComponent-label {
  font-size: var(--jp-ui-font-size1);
  line-height: 100%;
  padding-left: 2px;
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar.jp-Toolbar-micro {
  padding: 0;
  min-height: 0;
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar {
  border: none;
  box-shadow: none;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-WindowedPanel-outer {
  position: relative;
  overflow-y: auto;
}

.jp-WindowedPanel-inner {
  position: relative;
}

.jp-WindowedPanel-window {
  position: absolute;
  left: 0;
  right: 0;
  overflow: visible;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* Sibling imports */

body {
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
}

/* Disable native link decoration styles everywhere outside of dialog boxes */
a {
  text-decoration: unset;
  color: unset;
}

a:hover {
  text-decoration: unset;
  color: unset;
}

/* Accessibility for links inside dialog box text */
.jp-Dialog-content a {
  text-decoration: revert;
  color: var(--jp-content-link-color);
}

.jp-Dialog-content a:hover {
  text-decoration: revert;
}

/* Styles for ui-components */
.jp-Button {
  color: var(--jp-ui-font-color2);
  border-radius: var(--jp-border-radius);
  padding: 0 12px;
  font-size: var(--jp-ui-font-size1);

  /* Copy from blueprint 3 */
  display: inline-flex;
  flex-direction: row;
  border: none;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  text-align: left;
  vertical-align: middle;
  min-height: 30px;
  min-width: 30px;
}

.jp-Button:disabled {
  cursor: not-allowed;
}

.jp-Button:empty {
  padding: 0 !important;
}

.jp-Button.jp-mod-small {
  min-height: 24px;
  min-width: 24px;
  font-size: 12px;
  padding: 0 7px;
}

/* Use our own theme for hover styles */
.jp-Button.jp-mod-minimal:hover {
  background-color: var(--jp-layout-color2);
}

.jp-Button.jp-mod-minimal {
  background: none;
}

.jp-InputGroup {
  display: block;
  position: relative;
}

.jp-InputGroup input {
  box-sizing: border-box;
  border: none;
  border-radius: 0;
  background-color: transparent;
  color: var(--jp-ui-font-color0);
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
  padding-bottom: 0;
  padding-top: 0;
  padding-left: 10px;
  padding-right: 28px;
  position: relative;
  width: 100%;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  font-size: 14px;
  font-weight: 400;
  height: 30px;
  line-height: 30px;
  outline: none;
  vertical-align: middle;
}

.jp-InputGroup input:focus {
  box-shadow: inset 0 0 0 var(--jp-border-width)
      var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-InputGroup input:disabled {
  cursor: not-allowed;
  resize: block;
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color2);
}

.jp-InputGroup input:disabled ~ span {
  cursor: not-allowed;
  color: var(--jp-ui-font-color2);
}

.jp-InputGroup input::placeholder,
input::placeholder {
  color: var(--jp-ui-font-color2);
}

.jp-InputGroupAction {
  position: absolute;
  bottom: 1px;
  right: 0;
  padding: 6px;
}

.jp-HTMLSelect.jp-DefaultStyle select {
  background-color: initial;
  border: none;
  border-radius: 0;
  box-shadow: none;
  color: var(--jp-ui-font-color0);
  display: block;
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  height: 24px;
  line-height: 14px;
  padding: 0 25px 0 10px;
  text-align: left;
  -moz-appearance: none;
  -webkit-appearance: none;
}

.jp-HTMLSelect.jp-DefaultStyle select:disabled {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color2);
  cursor: not-allowed;
  resize: block;
}

.jp-HTMLSelect.jp-DefaultStyle select:disabled ~ span {
  cursor: not-allowed;
}

/* Use our own theme for hover and option styles */
/* stylelint-disable-next-line selector-max-type */
.jp-HTMLSelect.jp-DefaultStyle select:hover,
.jp-HTMLSelect.jp-DefaultStyle select > option {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color0);
}

select {
  box-sizing: border-box;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-StatusBar-Widget {
  display: flex;
  align-items: center;
  background: var(--jp-layout-color2);
  min-height: var(--jp-statusbar-height);
  justify-content: space-between;
  padding: 0 10px;
}

.jp-StatusBar-Left {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.jp-StatusBar-Middle {
  display: flex;
  align-items: center;
}

.jp-StatusBar-Right {
  display: flex;
  align-items: center;
  flex-direction: row-reverse;
}

.jp-StatusBar-Item {
  max-height: var(--jp-statusbar-height);
  margin: 0 2px;
  height: var(--jp-statusbar-height);
  white-space: nowrap;
  text-overflow: ellipsis;
  color: var(--jp-ui-font-color1);
  padding: 0 6px;
}

.jp-mod-highlighted:hover {
  background-color: var(--jp-layout-color3);
}

.jp-mod-clicked {
  background-color: var(--jp-brand-color1);
}

.jp-mod-clicked:hover {
  background-color: var(--jp-brand-color0);
}

.jp-mod-clicked .jp-StatusBar-TextItem {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-StatusBar-HoverItem {
  box-shadow: '0px 4px 4px rgba(0, 0, 0, 0.25)';
}

.jp-StatusBar-TextItem {
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  line-height: 24px;
  color: var(--jp-ui-font-color1);
}

.jp-StatusBar-GroupItem {
  display: flex;
  align-items: center;
  flex-direction: row;
}

.jp-Statusbar-ProgressCircle svg {
  display: block;
  margin: 0 auto;
  width: 16px;
  height: 24px;
  align-self: normal;
}

.jp-Statusbar-ProgressCircle path {
  fill: var(--jp-inverse-layout-color3);
}

.jp-Statusbar-ProgressBar-progress-bar {
  height: 10px;
  width: 100px;
  border: solid 0.25px var(--jp-brand-color2);
  border-radius: 3px;
  overflow: hidden;
  align-self: center;
}

.jp-Statusbar-ProgressBar-progress-bar > div {
  background-color: var(--jp-brand-color2);
  background-image: linear-gradient(
    -45deg,
    rgba(255, 255, 255, 0.2) 25%,
    transparent 25%,
    transparent 50%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.2) 75%,
    transparent 75%,
    transparent
  );
  background-size: 40px 40px;
  float: left;
  width: 0%;
  height: 100%;
  font-size: 12px;
  line-height: 14px;
  color: #fff;
  text-align: center;
  animation: jp-Statusbar-ExecutionTime-progress-bar 2s linear infinite;
}

.jp-Statusbar-ProgressBar-progress-bar p {
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  line-height: 10px;
  width: 100px;
}

@keyframes jp-Statusbar-ExecutionTime-progress-bar {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 40px 40px;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-commandpalette-search-height: 28px;
}

/*-----------------------------------------------------------------------------
| Overall styles
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  padding-bottom: 0;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);

  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Modal variant
|----------------------------------------------------------------------------*/

.jp-ModalCommandPalette {
  position: absolute;
  z-index: 10000;
  top: 38px;
  left: 30%;
  margin: 0;
  padding: 4px;
  width: 40%;
  box-shadow: var(--jp-elevation-z4);
  border-radius: 4px;
  background: var(--jp-layout-color0);
}

.jp-ModalCommandPalette .lm-CommandPalette {
  max-height: 40vh;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-close-icon::after {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-header {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-item {
  margin-left: 4px;
  margin-right: 4px;
}

.jp-ModalCommandPalette
  .lm-CommandPalette
  .lm-CommandPalette-item.lm-mod-disabled {
  display: none;
}

/*-----------------------------------------------------------------------------
| Search
|----------------------------------------------------------------------------*/

.lm-CommandPalette-search {
  padding: 4px;
  background-color: var(--jp-layout-color1);
  z-index: 2;
}

.lm-CommandPalette-wrapper {
  overflow: overlay;
  padding: 0 9px;
  background-color: var(--jp-input-active-background);
  height: 30px;
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
}

.lm-CommandPalette.lm-mod-focused .lm-CommandPalette-wrapper {
  box-shadow: inset 0 0 0 1px var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-SearchIconGroup {
  color: white;
  background-color: var(--jp-brand-color1);
  position: absolute;
  top: 4px;
  right: 4px;
  padding: 5px 5px 1px;
}

.jp-SearchIconGroup svg {
  height: 20px;
  width: 20px;
}

.jp-SearchIconGroup .jp-icon3[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-input {
  background: transparent;
  width: calc(100% - 18px);
  float: left;
  border: none;
  outline: none;
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  line-height: var(--jp-private-commandpalette-search-height);
}

.lm-CommandPalette-input::-webkit-input-placeholder,
.lm-CommandPalette-input::-moz-placeholder,
.lm-CommandPalette-input:-ms-input-placeholder {
  color: var(--jp-ui-font-color2);
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Results
|----------------------------------------------------------------------------*/

.lm-CommandPalette-header:first-child {
  margin-top: 0;
}

.lm-CommandPalette-header {
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin-top: 8px;
  padding: 8px 0 8px 12px;
  text-transform: uppercase;
}

.lm-CommandPalette-header.lm-mod-active {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-header > mark {
  background-color: transparent;
  font-weight: bold;
  color: var(--jp-ui-font-color1);
}

.lm-CommandPalette-item {
  padding: 4px 12px 4px 4px;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  font-weight: 400;
  display: flex;
}

.lm-CommandPalette-item.lm-mod-disabled {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item.lm-mod-active {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item.lm-mod-active .lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-inverse-font-color0);
}

.lm-CommandPalette-item.lm-mod-active .jp-icon-selectable[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-item.lm-mod-active:hover:not(.lm-mod-disabled) {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item:hover:not(.lm-mod-active):not(.lm-mod-disabled) {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-itemContent {
  overflow: hidden;
}

.lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.lm-CommandPalette-item.lm-mod-disabled mark {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item .lm-CommandPalette-itemIcon {
  margin: 0 4px 0 0;
  position: relative;
  width: 16px;
  top: 2px;
  flex: 0 0 auto;
}

.lm-CommandPalette-item.lm-mod-disabled .lm-CommandPalette-itemIcon {
  opacity: 0.6;
}

.lm-CommandPalette-item .lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemCaption {
  display: none;
}

.lm-CommandPalette-content {
  background-color: var(--jp-layout-color1);
}

.lm-CommandPalette-content:empty::after {
  content: 'No results';
  margin: auto;
  margin-top: 20px;
  width: 100px;
  display: block;
  font-size: var(--jp-ui-font-size2);
  font-family: var(--jp-ui-font-family);
  font-weight: lighter;
}

.lm-CommandPalette-emptyMessage {
  text-align: center;
  margin-top: 24px;
  line-height: 1.32;
  padding: 0 8px;
  color: var(--jp-content-font-color3);
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Dialog {
  position: absolute;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-dialog-background);
}

.jp-Dialog-content {
  display: flex;
  flex-direction: column;
  margin-left: auto;
  margin-right: auto;
  background: var(--jp-layout-color1);
  padding: 24px 24px 12px;
  min-width: 300px;
  min-height: 150px;
  max-width: 1000px;
  max-height: 500px;
  box-sizing: border-box;
  box-shadow: var(--jp-elevation-z20);
  word-wrap: break-word;
  border-radius: var(--jp-border-radius);

  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color1);
  resize: both;
}

.jp-Dialog-content.jp-Dialog-content-small {
  max-width: 500px;
}

.jp-Dialog-button {
  overflow: visible;
}

button.jp-Dialog-button:focus {
  outline: 1px solid var(--jp-brand-color1);
  outline-offset: 4px;
  -moz-outline-radius: 0;
}

button.jp-Dialog-button:focus::-moz-focus-inner {
  border: 0;
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-accept:focus,
button.jp-Dialog-button.jp-mod-styled.jp-mod-warn:focus,
button.jp-Dialog-button.jp-mod-styled.jp-mod-reject:focus {
  outline-offset: 4px;
  -moz-outline-radius: 0;
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-accept:focus {
  outline: 1px solid var(--jp-accept-color-normal, var(--jp-brand-color1));
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-warn:focus {
  outline: 1px solid var(--jp-warn-color-normal, var(--jp-error-color1));
}

button.jp-Dialog-button.jp-mod-styled.jp-mod-reject:focus {
  outline: 1px solid var(--jp-reject-color-normal, var(--md-grey-600));
}

button.jp-Dialog-close-button {
  padding: 0;
  height: 100%;
  min-width: unset;
  min-height: unset;
}

.jp-Dialog-header {
  display: flex;
  justify-content: space-between;
  flex: 0 0 auto;
  padding-bottom: 12px;
  font-size: var(--jp-ui-font-size3);
  font-weight: 400;
  color: var(--jp-ui-font-color1);
}

.jp-Dialog-body {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  font-size: var(--jp-ui-font-size1);
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

.jp-Dialog-footer {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  align-items: center;
  flex: 0 0 auto;
  margin-left: -12px;
  margin-right: -12px;
  padding: 12px;
}

.jp-Dialog-checkbox {
  padding-right: 5px;
}

.jp-Dialog-checkbox > input:focus-visible {
  outline: 1px solid var(--jp-input-active-border-color);
  outline-offset: 1px;
}

.jp-Dialog-spacer {
  flex: 1 1 auto;
}

.jp-Dialog-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.jp-Dialog-body > .jp-select-wrapper {
  width: 100%;
}

.jp-Dialog-body > button {
  padding: 0 16px;
}

.jp-Dialog-body > label {
  line-height: 1.4;
  color: var(--jp-ui-font-color0);
}

.jp-Dialog-button.jp-mod-styled:not(:last-child) {
  margin-right: 12px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-Input-Boolean-Dialog {
  flex-direction: row-reverse;
  align-items: end;
  width: 100%;
}

.jp-Input-Boolean-Dialog > label {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MainAreaWidget > :focus {
  outline: none;
}

.jp-MainAreaWidget .jp-MainAreaWidget-error {
  padding: 6px;
}

.jp-MainAreaWidget .jp-MainAreaWidget-error > pre {
  width: auto;
  padding: 10px;
  background: var(--jp-error-color3);
  border: var(--jp-border-width) solid var(--jp-error-color1);
  border-radius: var(--jp-border-radius);
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  white-space: pre-wrap;
  word-wrap: break-word;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/**
 * google-material-color v1.2.6
 * https://github.com/danlevan/google-material-color
 */
:root {
  --md-red-50: #ffebee;
  --md-red-100: #ffcdd2;
  --md-red-200: #ef9a9a;
  --md-red-300: #e57373;
  --md-red-400: #ef5350;
  --md-red-500: #f44336;
  --md-red-600: #e53935;
  --md-red-700: #d32f2f;
  --md-red-800: #c62828;
  --md-red-900: #b71c1c;
  --md-red-A100: #ff8a80;
  --md-red-A200: #ff5252;
  --md-red-A400: #ff1744;
  --md-red-A700: #d50000;
  --md-pink-50: #fce4ec;
  --md-pink-100: #f8bbd0;
  --md-pink-200: #f48fb1;
  --md-pink-300: #f06292;
  --md-pink-400: #ec407a;
  --md-pink-500: #e91e63;
  --md-pink-600: #d81b60;
  --md-pink-700: #c2185b;
  --md-pink-800: #ad1457;
  --md-pink-900: #880e4f;
  --md-pink-A100: #ff80ab;
  --md-pink-A200: #ff4081;
  --md-pink-A400: #f50057;
  --md-pink-A700: #c51162;
  --md-purple-50: #f3e5f5;
  --md-purple-100: #e1bee7;
  --md-purple-200: #ce93d8;
  --md-purple-300: #ba68c8;
  --md-purple-400: #ab47bc;
  --md-purple-500: #9c27b0;
  --md-purple-600: #8e24aa;
  --md-purple-700: #7b1fa2;
  --md-purple-800: #6a1b9a;
  --md-purple-900: #4a148c;
  --md-purple-A100: #ea80fc;
  --md-purple-A200: #e040fb;
  --md-purple-A400: #d500f9;
  --md-purple-A700: #a0f;
  --md-deep-purple-50: #ede7f6;
  --md-deep-purple-100: #d1c4e9;
  --md-deep-purple-200: #b39ddb;
  --md-deep-purple-300: #9575cd;
  --md-deep-purple-400: #7e57c2;
  --md-deep-purple-500: #673ab7;
  --md-deep-purple-600: #5e35b1;
  --md-deep-purple-700: #512da8;
  --md-deep-purple-800: #4527a0;
  --md-deep-purple-900: #311b92;
  --md-deep-purple-A100: #b388ff;
  --md-deep-purple-A200: #7c4dff;
  --md-deep-purple-A400: #651fff;
  --md-deep-purple-A700: #6200ea;
  --md-indigo-50: #e8eaf6;
  --md-indigo-100: #c5cae9;
  --md-indigo-200: #9fa8da;
  --md-indigo-300: #7986cb;
  --md-indigo-400: #5c6bc0;
  --md-indigo-500: #3f51b5;
  --md-indigo-600: #3949ab;
  --md-indigo-700: #303f9f;
  --md-indigo-800: #283593;
  --md-indigo-900: #1a237e;
  --md-indigo-A100: #8c9eff;
  --md-indigo-A200: #536dfe;
  --md-indigo-A400: #3d5afe;
  --md-indigo-A700: #304ffe;
  --md-blue-50: #e3f2fd;
  --md-blue-100: #bbdefb;
  --md-blue-200: #90caf9;
  --md-blue-300: #64b5f6;
  --md-blue-400: #42a5f5;
  --md-blue-500: #2196f3;
  --md-blue-600: #1e88e5;
  --md-blue-700: #1976d2;
  --md-blue-800: #1565c0;
  --md-blue-900: #0d47a1;
  --md-blue-A100: #82b1ff;
  --md-blue-A200: #448aff;
  --md-blue-A400: #2979ff;
  --md-blue-A700: #2962ff;
  --md-light-blue-50: #e1f5fe;
  --md-light-blue-100: #b3e5fc;
  --md-light-blue-200: #81d4fa;
  --md-light-blue-300: #4fc3f7;
  --md-light-blue-400: #29b6f6;
  --md-light-blue-500: #03a9f4;
  --md-light-blue-600: #039be5;
  --md-light-blue-700: #0288d1;
  --md-light-blue-800: #0277bd;
  --md-light-blue-900: #01579b;
  --md-light-blue-A100: #80d8ff;
  --md-light-blue-A200: #40c4ff;
  --md-light-blue-A400: #00b0ff;
  --md-light-blue-A700: #0091ea;
  --md-cyan-50: #e0f7fa;
  --md-cyan-100: #b2ebf2;
  --md-cyan-200: #80deea;
  --md-cyan-300: #4dd0e1;
  --md-cyan-400: #26c6da;
  --md-cyan-500: #00bcd4;
  --md-cyan-600: #00acc1;
  --md-cyan-700: #0097a7;
  --md-cyan-800: #00838f;
  --md-cyan-900: #006064;
  --md-cyan-A100: #84ffff;
  --md-cyan-A200: #18ffff;
  --md-cyan-A400: #00e5ff;
  --md-cyan-A700: #00b8d4;
  --md-teal-50: #e0f2f1;
  --md-teal-100: #b2dfdb;
  --md-teal-200: #80cbc4;
  --md-teal-300: #4db6ac;
  --md-teal-400: #26a69a;
  --md-teal-500: #009688;
  --md-teal-600: #00897b;
  --md-teal-700: #00796b;
  --md-teal-800: #00695c;
  --md-teal-900: #004d40;
  --md-teal-A100: #a7ffeb;
  --md-teal-A200: #64ffda;
  --md-teal-A400: #1de9b6;
  --md-teal-A700: #00bfa5;
  --md-green-50: #e8f5e9;
  --md-green-100: #c8e6c9;
  --md-green-200: #a5d6a7;
  --md-green-300: #81c784;
  --md-green-400: #66bb6a;
  --md-green-500: #4caf50;
  --md-green-600: #43a047;
  --md-green-700: #388e3c;
  --md-green-800: #2e7d32;
  --md-green-900: #1b5e20;
  --md-green-A100: #b9f6ca;
  --md-green-A200: #69f0ae;
  --md-green-A400: #00e676;
  --md-green-A700: #00c853;
  --md-light-green-50: #f1f8e9;
  --md-light-green-100: #dcedc8;
  --md-light-green-200: #c5e1a5;
  --md-light-green-300: #aed581;
  --md-light-green-400: #9ccc65;
  --md-light-green-500: #8bc34a;
  --md-light-green-600: #7cb342;
  --md-light-green-700: #689f38;
  --md-light-green-800: #558b2f;
  --md-light-green-900: #33691e;
  --md-light-green-A100: #ccff90;
  --md-light-green-A200: #b2ff59;
  --md-light-green-A400: #76ff03;
  --md-light-green-A700: #64dd17;
  --md-lime-50: #f9fbe7;
  --md-lime-100: #f0f4c3;
  --md-lime-200: #e6ee9c;
  --md-lime-300: #dce775;
  --md-lime-400: #d4e157;
  --md-lime-500: #cddc39;
  --md-lime-600: #c0ca33;
  --md-lime-700: #afb42b;
  --md-lime-800: #9e9d24;
  --md-lime-900: #827717;
  --md-lime-A100: #f4ff81;
  --md-lime-A200: #eeff41;
  --md-lime-A400: #c6ff00;
  --md-lime-A700: #aeea00;
  --md-yellow-50: #fffde7;
  --md-yellow-100: #fff9c4;
  --md-yellow-200: #fff59d;
  --md-yellow-300: #fff176;
  --md-yellow-400: #ffee58;
  --md-yellow-500: #ffeb3b;
  --md-yellow-600: #fdd835;
  --md-yellow-700: #fbc02d;
  --md-yellow-800: #f9a825;
  --md-yellow-900: #f57f17;
  --md-yellow-A100: #ffff8d;
  --md-yellow-A200: #ff0;
  --md-yellow-A400: #ffea00;
  --md-yellow-A700: #ffd600;
  --md-amber-50: #fff8e1;
  --md-amber-100: #ffecb3;
  --md-amber-200: #ffe082;
  --md-amber-300: #ffd54f;
  --md-amber-400: #ffca28;
  --md-amber-500: #ffc107;
  --md-amber-600: #ffb300;
  --md-amber-700: #ffa000;
  --md-amber-800: #ff8f00;
  --md-amber-900: #ff6f00;
  --md-amber-A100: #ffe57f;
  --md-amber-A200: #ffd740;
  --md-amber-A400: #ffc400;
  --md-amber-A700: #ffab00;
  --md-orange-50: #fff3e0;
  --md-orange-100: #ffe0b2;
  --md-orange-200: #ffcc80;
  --md-orange-300: #ffb74d;
  --md-orange-400: #ffa726;
  --md-orange-500: #ff9800;
  --md-orange-600: #fb8c00;
  --md-orange-700: #f57c00;
  --md-orange-800: #ef6c00;
  --md-orange-900: #e65100;
  --md-orange-A100: #ffd180;
  --md-orange-A200: #ffab40;
  --md-orange-A400: #ff9100;
  --md-orange-A700: #ff6d00;
  --md-deep-orange-50: #fbe9e7;
  --md-deep-orange-100: #ffccbc;
  --md-deep-orange-200: #ffab91;
  --md-deep-orange-300: #ff8a65;
  --md-deep-orange-400: #ff7043;
  --md-deep-orange-500: #ff5722;
  --md-deep-orange-600: #f4511e;
  --md-deep-orange-700: #e64a19;
  --md-deep-orange-800: #d84315;
  --md-deep-orange-900: #bf360c;
  --md-deep-orange-A100: #ff9e80;
  --md-deep-orange-A200: #ff6e40;
  --md-deep-orange-A400: #ff3d00;
  --md-deep-orange-A700: #dd2c00;
  --md-brown-50: #efebe9;
  --md-brown-100: #d7ccc8;
  --md-brown-200: #bcaaa4;
  --md-brown-300: #a1887f;
  --md-brown-400: #8d6e63;
  --md-brown-500: #795548;
  --md-brown-600: #6d4c41;
  --md-brown-700: #5d4037;
  --md-brown-800: #4e342e;
  --md-brown-900: #3e2723;
  --md-grey-50: #fafafa;
  --md-grey-100: #f5f5f5;
  --md-grey-200: #eee;
  --md-grey-300: #e0e0e0;
  --md-grey-400: #bdbdbd;
  --md-grey-500: #9e9e9e;
  --md-grey-600: #757575;
  --md-grey-700: #616161;
  --md-grey-800: #424242;
  --md-grey-900: #212121;
  --md-blue-grey-50: #eceff1;
  --md-blue-grey-100: #cfd8dc;
  --md-blue-grey-200: #b0bec5;
  --md-blue-grey-300: #90a4ae;
  --md-blue-grey-400: #78909c;
  --md-blue-grey-500: #607d8b;
  --md-blue-grey-600: #546e7a;
  --md-blue-grey-700: #455a64;
  --md-blue-grey-800: #37474f;
  --md-blue-grey-900: #263238;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| RenderedText
|----------------------------------------------------------------------------*/

:root {
  /* This is the padding value to fill the gaps between lines containing spans with background color. */
  --jp-private-code-span-padding: calc(
    (var(--jp-code-line-height) - 1) * var(--jp-code-font-size) / 2
  );
}

.jp-RenderedText {
  text-align: left;
  padding-left: var(--jp-code-padding);
  line-height: var(--jp-code-line-height);
  font-family: var(--jp-code-font-family);
}

.jp-RenderedText pre,
.jp-RenderedJavaScript pre,
.jp-RenderedHTMLCommon pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
  border: none;
  margin: 0;
  padding: 0;
}

.jp-RenderedText pre a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedText pre a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedText pre a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* console foregrounds and backgrounds */
.jp-RenderedText pre .ansi-black-fg {
  color: #3e424d;
}

.jp-RenderedText pre .ansi-red-fg {
  color: #e75c58;
}

.jp-RenderedText pre .ansi-green-fg {
  color: #00a250;
}

.jp-RenderedText pre .ansi-yellow-fg {
  color: #ddb62b;
}

.jp-RenderedText pre .ansi-blue-fg {
  color: #208ffb;
}

.jp-RenderedText pre .ansi-magenta-fg {
  color: #d160c4;
}

.jp-RenderedText pre .ansi-cyan-fg {
  color: #60c6c8;
}

.jp-RenderedText pre .ansi-white-fg {
  color: #c5c1b4;
}

.jp-RenderedText pre .ansi-black-bg {
  background-color: #3e424d;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-red-bg {
  background-color: #e75c58;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-green-bg {
  background-color: #00a250;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-yellow-bg {
  background-color: #ddb62b;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-blue-bg {
  background-color: #208ffb;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-magenta-bg {
  background-color: #d160c4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-cyan-bg {
  background-color: #60c6c8;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-white-bg {
  background-color: #c5c1b4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-black-intense-fg {
  color: #282c36;
}

.jp-RenderedText pre .ansi-red-intense-fg {
  color: #b22b31;
}

.jp-RenderedText pre .ansi-green-intense-fg {
  color: #007427;
}

.jp-RenderedText pre .ansi-yellow-intense-fg {
  color: #b27d12;
}

.jp-RenderedText pre .ansi-blue-intense-fg {
  color: #0065ca;
}

.jp-RenderedText pre .ansi-magenta-intense-fg {
  color: #a03196;
}

.jp-RenderedText pre .ansi-cyan-intense-fg {
  color: #258f8f;
}

.jp-RenderedText pre .ansi-white-intense-fg {
  color: #a1a6b2;
}

.jp-RenderedText pre .ansi-black-intense-bg {
  background-color: #282c36;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-red-intense-bg {
  background-color: #b22b31;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-green-intense-bg {
  background-color: #007427;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-yellow-intense-bg {
  background-color: #b27d12;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-blue-intense-bg {
  background-color: #0065ca;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-magenta-intense-bg {
  background-color: #a03196;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-cyan-intense-bg {
  background-color: #258f8f;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-white-intense-bg {
  background-color: #a1a6b2;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-default-inverse-fg {
  color: var(--jp-ui-inverse-font-color0);
}

.jp-RenderedText pre .ansi-default-inverse-bg {
  background-color: var(--jp-inverse-layout-color0);
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-bold {
  font-weight: bold;
}

.jp-RenderedText pre .ansi-underline {
  text-decoration: underline;
}

.jp-RenderedText[data-mime-type='application/vnd.jupyter.stderr'] {
  background: var(--jp-rendermime-error-background);
  padding-top: var(--jp-code-padding);
}

/*-----------------------------------------------------------------------------
| RenderedLatex
|----------------------------------------------------------------------------*/

.jp-RenderedLatex {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);
}

/* Left-justify outputs.*/
.jp-OutputArea-output.jp-RenderedLatex {
  padding: var(--jp-code-padding);
  text-align: left;
}

/*-----------------------------------------------------------------------------
| RenderedHTML
|----------------------------------------------------------------------------*/

.jp-RenderedHTMLCommon {
  color: var(--jp-content-font-color1);
  font-family: var(--jp-content-font-family);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);

  /* Give a bit more R padding on Markdown text to keep line lengths reasonable */
  padding-right: 20px;
}

.jp-RenderedHTMLCommon em {
  font-style: italic;
}

.jp-RenderedHTMLCommon strong {
  font-weight: bold;
}

.jp-RenderedHTMLCommon u {
  text-decoration: underline;
}

.jp-RenderedHTMLCommon a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* Headings */

.jp-RenderedHTMLCommon h1,
.jp-RenderedHTMLCommon h2,
.jp-RenderedHTMLCommon h3,
.jp-RenderedHTMLCommon h4,
.jp-RenderedHTMLCommon h5,
.jp-RenderedHTMLCommon h6 {
  line-height: var(--jp-content-heading-line-height);
  font-weight: var(--jp-content-heading-font-weight);
  font-style: normal;
  margin: var(--jp-content-heading-margin-top) 0
    var(--jp-content-heading-margin-bottom) 0;
}

.jp-RenderedHTMLCommon h1:first-child,
.jp-RenderedHTMLCommon h2:first-child,
.jp-RenderedHTMLCommon h3:first-child,
.jp-RenderedHTMLCommon h4:first-child,
.jp-RenderedHTMLCommon h5:first-child,
.jp-RenderedHTMLCommon h6:first-child {
  margin-top: calc(0.5 * var(--jp-content-heading-margin-top));
}

.jp-RenderedHTMLCommon h1:last-child,
.jp-RenderedHTMLCommon h2:last-child,
.jp-RenderedHTMLCommon h3:last-child,
.jp-RenderedHTMLCommon h4:last-child,
.jp-RenderedHTMLCommon h5:last-child,
.jp-RenderedHTMLCommon h6:last-child {
  margin-bottom: calc(0.5 * var(--jp-content-heading-margin-bottom));
}

.jp-RenderedHTMLCommon h1 {
  font-size: var(--jp-content-font-size5);
}

.jp-RenderedHTMLCommon h2 {
  font-size: var(--jp-content-font-size4);
}

.jp-RenderedHTMLCommon h3 {
  font-size: var(--jp-content-font-size3);
}

.jp-RenderedHTMLCommon h4 {
  font-size: var(--jp-content-font-size2);
}

.jp-RenderedHTMLCommon h5 {
  font-size: var(--jp-content-font-size1);
}

.jp-RenderedHTMLCommon h6 {
  font-size: var(--jp-content-font-size0);
}

/* Lists */

/* stylelint-disable selector-max-type, selector-max-compound-selectors */

.jp-RenderedHTMLCommon ul:not(.list-inline),
.jp-RenderedHTMLCommon ol:not(.list-inline) {
  padding-left: 2em;
}

.jp-RenderedHTMLCommon ul {
  list-style: disc;
}

.jp-RenderedHTMLCommon ul ul {
  list-style: square;
}

.jp-RenderedHTMLCommon ul ul ul {
  list-style: circle;
}

.jp-RenderedHTMLCommon ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol ol {
  list-style: upper-alpha;
}

.jp-RenderedHTMLCommon ol ol ol {
  list-style: lower-alpha;
}

.jp-RenderedHTMLCommon ol ol ol ol {
  list-style: lower-roman;
}

.jp-RenderedHTMLCommon ol ol ol ol ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol,
.jp-RenderedHTMLCommon ul {
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon ul ul,
.jp-RenderedHTMLCommon ul ol,
.jp-RenderedHTMLCommon ol ul,
.jp-RenderedHTMLCommon ol ol {
  margin-bottom: 0;
}

/* stylelint-enable selector-max-type, selector-max-compound-selectors */

.jp-RenderedHTMLCommon hr {
  color: var(--jp-border-color2);
  background-color: var(--jp-border-color1);
  margin-top: 1em;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon > pre {
  margin: 1.5em 2em;
}

.jp-RenderedHTMLCommon pre,
.jp-RenderedHTMLCommon code {
  border: 0;
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  line-height: var(--jp-code-line-height);
  padding: 0;
  white-space: pre-wrap;
}

.jp-RenderedHTMLCommon :not(pre) > code {
  background-color: var(--jp-layout-color2);
  padding: 1px 5px;
}

/* Tables */

.jp-RenderedHTMLCommon table {
  border-collapse: collapse;
  border-spacing: 0;
  border: none;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  table-layout: fixed;
  margin-left: auto;
  margin-bottom: 1em;
  margin-right: auto;
}

.jp-RenderedHTMLCommon thead {
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  vertical-align: bottom;
}

.jp-RenderedHTMLCommon td,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon tr {
  vertical-align: middle;
  padding: 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}

.jp-RenderedMarkdown.jp-RenderedHTMLCommon td,
.jp-RenderedMarkdown.jp-RenderedHTMLCommon th {
  max-width: none;
}

:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon td,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon th,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon tr {
  text-align: right;
}

.jp-RenderedHTMLCommon th {
  font-weight: bold;
}

.jp-RenderedHTMLCommon tbody tr:nth-child(odd) {
  background: var(--jp-layout-color0);
}

.jp-RenderedHTMLCommon tbody tr:nth-child(even) {
  background: var(--jp-rendermime-table-row-background);
}

.jp-RenderedHTMLCommon tbody tr:hover {
  background: var(--jp-rendermime-table-row-hover-background);
}

.jp-RenderedHTMLCommon p {
  text-align: left;
  margin: 0;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon img {
  -moz-force-broken-image-icon: 1;
}

/* Restrict to direct children as other images could be nested in other content. */
.jp-RenderedHTMLCommon > img {
  display: block;
  margin-left: 0;
  margin-right: 0;
  margin-bottom: 1em;
}

/* Change color behind transparent images if they need it... */
[data-jp-theme-light='false'] .jp-RenderedImage img.jp-needs-light-background {
  background-color: var(--jp-inverse-layout-color1);
}

[data-jp-theme-light='true'] .jp-RenderedImage img.jp-needs-dark-background {
  background-color: var(--jp-inverse-layout-color1);
}

.jp-RenderedHTMLCommon img,
.jp-RenderedImage img,
.jp-RenderedHTMLCommon svg,
.jp-RenderedSVG svg {
  max-width: 100%;
  height: auto;
}

.jp-RenderedHTMLCommon img.jp-mod-unconfined,
.jp-RenderedImage img.jp-mod-unconfined,
.jp-RenderedHTMLCommon svg.jp-mod-unconfined,
.jp-RenderedSVG svg.jp-mod-unconfined {
  max-width: none;
}

.jp-RenderedHTMLCommon .alert {
  padding: var(--jp-notebook-padding);
  border: var(--jp-border-width) solid transparent;
  border-radius: var(--jp-border-radius);
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon .alert-info {
  color: var(--jp-info-color0);
  background-color: var(--jp-info-color3);
  border-color: var(--jp-info-color2);
}

.jp-RenderedHTMLCommon .alert-info hr {
  border-color: var(--jp-info-color3);
}

.jp-RenderedHTMLCommon .alert-info > p:last-child,
.jp-RenderedHTMLCommon .alert-info > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-warning {
  color: var(--jp-warn-color0);
  background-color: var(--jp-warn-color3);
  border-color: var(--jp-warn-color2);
}

.jp-RenderedHTMLCommon .alert-warning hr {
  border-color: var(--jp-warn-color3);
}

.jp-RenderedHTMLCommon .alert-warning > p:last-child,
.jp-RenderedHTMLCommon .alert-warning > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-success {
  color: var(--jp-success-color0);
  background-color: var(--jp-success-color3);
  border-color: var(--jp-success-color2);
}

.jp-RenderedHTMLCommon .alert-success hr {
  border-color: var(--jp-success-color3);
}

.jp-RenderedHTMLCommon .alert-success > p:last-child,
.jp-RenderedHTMLCommon .alert-success > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-danger {
  color: var(--jp-error-color0);
  background-color: var(--jp-error-color3);
  border-color: var(--jp-error-color2);
}

.jp-RenderedHTMLCommon .alert-danger hr {
  border-color: var(--jp-error-color3);
}

.jp-RenderedHTMLCommon .alert-danger > p:last-child,
.jp-RenderedHTMLCommon .alert-danger > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon blockquote {
  margin: 1em 2em;
  padding: 0 1em;
  border-left: 5px solid var(--jp-border-color2);
}

a.jp-InternalAnchorLink {
  visibility: hidden;
  margin-left: 8px;
  color: var(--md-blue-800);
}

h1:hover .jp-InternalAnchorLink,
h2:hover .jp-InternalAnchorLink,
h3:hover .jp-InternalAnchorLink,
h4:hover .jp-InternalAnchorLink,
h5:hover .jp-InternalAnchorLink,
h6:hover .jp-InternalAnchorLink {
  visibility: visible;
}

.jp-RenderedHTMLCommon kbd {
  background-color: var(--jp-rendermime-table-row-background);
  border: 1px solid var(--jp-border-color0);
  border-bottom-color: var(--jp-border-color2);
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
  display: inline-block;
  font-size: var(--jp-ui-font-size0);
  line-height: 1em;
  padding: 0.2em 0.5em;
}

/* Most direct children of .jp-RenderedHTMLCommon have a margin-bottom of 1.0.
 * At the bottom of cells this is a bit too much as there is also spacing
 * between cells. Going all the way to 0 gets too tight between markdown and
 * code cells.
 */
.jp-RenderedHTMLCommon > *:last-child {
  margin-bottom: 0.5em;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

.lm-cursor-backdrop {
  position: fixed;
  width: 200px;
  height: 200px;
  margin-top: -100px;
  margin-left: -100px;
  will-change: transform;
  z-index: 100;
}

.lm-mod-drag-image {
  will-change: transform;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-lineFormSearch {
  padding: 4px 12px;
  background-color: var(--jp-layout-color2);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
  font-size: var(--jp-ui-font-size1);
}

.jp-lineFormCaption {
  font-size: var(--jp-ui-font-size0);
  line-height: var(--jp-ui-font-size1);
  margin-top: 4px;
  color: var(--jp-ui-font-color0);
}

.jp-baseLineForm {
  border: none;
  border-radius: 0;
  position: absolute;
  background-size: 16px;
  background-repeat: no-repeat;
  background-position: center;
  outline: none;
}

.jp-lineFormButtonContainer {
  top: 4px;
  right: 8px;
  height: 24px;
  padding: 0 12px;
  width: 12px;
}

.jp-lineFormButtonIcon {
  top: 0;
  right: 0;
  background-color: var(--jp-brand-color1);
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  padding: 4px 6px;
}

.jp-lineFormButton {
  top: 0;
  right: 0;
  background-color: transparent;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
}

.jp-lineFormWrapper {
  overflow: hidden;
  padding: 0 8px;
  border: 1px solid var(--jp-border-color0);
  background-color: var(--jp-input-active-background);
  height: 22px;
}

.jp-lineFormWrapperFocusWithin {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-lineFormInput {
  background: transparent;
  width: 200px;
  height: 100%;
  border: none;
  outline: none;
  color: var(--jp-ui-font-color0);
  line-height: 28px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-JSONEditor {
  display: flex;
  flex-direction: column;
  width: 100%;
}

.jp-JSONEditor-host {
  flex: 1 1 auto;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0;
  background: var(--jp-layout-color0);
  min-height: 50px;
  padding: 1px;
}

.jp-JSONEditor.jp-mod-error .jp-JSONEditor-host {
  border-color: red;
  outline-color: red;
}

.jp-JSONEditor-header {
  display: flex;
  flex: 1 0 auto;
  padding: 0 0 0 12px;
}

.jp-JSONEditor-header label {
  flex: 0 0 auto;
}

.jp-JSONEditor-commitButton {
  height: 16px;
  width: 16px;
  background-size: 18px;
  background-repeat: no-repeat;
  background-position: center;
}

.jp-JSONEditor-host.jp-mod-focused {
  background-color: var(--jp-input-active-background);
  border: 1px solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

.jp-Editor.jp-mod-dropTarget {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/
.jp-DocumentSearch-input {
  border: none;
  outline: none;
  color: var(--jp-ui-font-color0);
  font-size: var(--jp-ui-font-size1);
  background-color: var(--jp-layout-color0);
  font-family: var(--jp-ui-font-family);
  padding: 2px 1px;
  resize: none;
}

.jp-DocumentSearch-overlay {
  position: absolute;
  background-color: var(--jp-toolbar-background);
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  border-left: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  top: 0;
  right: 0;
  z-index: 7;
  min-width: 405px;
  padding: 2px;
  font-size: var(--jp-ui-font-size1);

  --jp-private-document-search-button-height: 20px;
}

.jp-DocumentSearch-overlay button {
  background-color: var(--jp-toolbar-background);
  outline: 0;
}

.jp-DocumentSearch-overlay button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-overlay button:active {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-overlay-row {
  display: flex;
  align-items: center;
  margin-bottom: 2px;
}

.jp-DocumentSearch-button-content {
  display: inline-block;
  cursor: pointer;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-button-content svg {
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-input-wrapper {
  border: var(--jp-border-width) solid var(--jp-border-color0);
  display: flex;
  background-color: var(--jp-layout-color0);
  margin: 2px;
}

.jp-DocumentSearch-input-wrapper:focus-within {
  border-color: var(--jp-cell-editor-active-border-color);
}

.jp-DocumentSearch-toggle-wrapper,
.jp-DocumentSearch-button-wrapper {
  all: initial;
  overflow: hidden;
  display: inline-block;
  border: none;
  box-sizing: border-box;
}

.jp-DocumentSearch-toggle-wrapper {
  width: 14px;
  height: 14px;
}

.jp-DocumentSearch-button-wrapper {
  width: var(--jp-private-document-search-button-height);
  height: var(--jp-private-document-search-button-height);
}

.jp-DocumentSearch-toggle-wrapper:focus,
.jp-DocumentSearch-button-wrapper:focus {
  outline: var(--jp-border-width) solid
    var(--jp-cell-editor-active-border-color);
  outline-offset: -1px;
}

.jp-DocumentSearch-toggle-wrapper,
.jp-DocumentSearch-button-wrapper,
.jp-DocumentSearch-button-content:focus {
  outline: none;
}

.jp-DocumentSearch-toggle-placeholder {
  width: 5px;
}

.jp-DocumentSearch-input-button::before {
  display: block;
  padding-top: 100%;
}

.jp-DocumentSearch-input-button-off {
  opacity: var(--jp-search-toggle-off-opacity);
}

.jp-DocumentSearch-input-button-off:hover {
  opacity: var(--jp-search-toggle-hover-opacity);
}

.jp-DocumentSearch-input-button-on {
  opacity: var(--jp-search-toggle-on-opacity);
}

.jp-DocumentSearch-index-counter {
  padding-left: 10px;
  padding-right: 10px;
  user-select: none;
  min-width: 35px;
  display: inline-block;
}

.jp-DocumentSearch-up-down-wrapper {
  display: inline-block;
  padding-right: 2px;
  margin-left: auto;
  white-space: nowrap;
}

.jp-DocumentSearch-spacer {
  margin-left: auto;
}

.jp-DocumentSearch-up-down-wrapper button {
  outline: 0;
  border: none;
  width: var(--jp-private-document-search-button-height);
  height: var(--jp-private-document-search-button-height);
  vertical-align: middle;
  margin: 1px 5px 2px;
}

.jp-DocumentSearch-up-down-button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-up-down-button:active {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-filter-button {
  border-radius: var(--jp-border-radius);
}

.jp-DocumentSearch-filter-button:hover {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-filter-button-enabled {
  background-color: var(--jp-layout-color2);
}

.jp-DocumentSearch-filter-button-enabled:hover {
  background-color: var(--jp-layout-color3);
}

.jp-DocumentSearch-search-options {
  padding: 0 8px;
  margin-left: 3px;
  width: 100%;
  display: grid;
  justify-content: start;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  justify-items: stretch;
}

.jp-DocumentSearch-search-filter-disabled {
  color: var(--jp-ui-font-color2);
}

.jp-DocumentSearch-search-filter {
  display: flex;
  align-items: center;
  user-select: none;
}

.jp-DocumentSearch-regex-error {
  color: var(--jp-error-color0);
}

.jp-DocumentSearch-replace-button-wrapper {
  overflow: hidden;
  display: inline-block;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color0);
  margin: auto 2px;
  padding: 1px 4px;
  height: calc(var(--jp-private-document-search-button-height) + 2px);
}

.jp-DocumentSearch-replace-button-wrapper:focus {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
}

.jp-DocumentSearch-replace-button {
  display: inline-block;
  text-align: center;
  cursor: pointer;
  box-sizing: border-box;
  color: var(--jp-ui-font-color1);

  /* height - 2 * (padding of wrapper) */
  line-height: calc(var(--jp-private-document-search-button-height) - 2px);
  width: 100%;
  height: 100%;
}

.jp-DocumentSearch-replace-button:focus {
  outline: none;
}

.jp-DocumentSearch-replace-wrapper-class {
  margin-left: 14px;
  display: flex;
}

.jp-DocumentSearch-replace-toggle {
  border: none;
  background-color: var(--jp-toolbar-background);
  border-radius: var(--jp-border-radius);
}

.jp-DocumentSearch-replace-toggle:hover {
  background-color: var(--jp-layout-color2);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.cm-editor {
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  border: 0;
  border-radius: 0;
  height: auto;

  /* Changed to auto to autogrow */
}

.cm-editor pre {
  padding: 0 var(--jp-code-padding);
}

.jp-CodeMirrorEditor[data-type='inline'] .cm-dialog {
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
}

.jp-CodeMirrorEditor {
  cursor: text;
}

/* When zoomed out 67% and 33% on a screen of 1440 width x 900 height */
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .jp-CodeMirrorEditor[data-type='inline'] .cm-cursor {
    border-left: var(--jp-code-cursor-width1) solid
      var(--jp-editor-cursor-color);
  }
}

/* When zoomed out less than 33% */
@media screen and (min-width: 4320px) {
  .jp-CodeMirrorEditor[data-type='inline'] .cm-cursor {
    border-left: var(--jp-code-cursor-width2) solid
      var(--jp-editor-cursor-color);
  }
}

.cm-editor.jp-mod-readOnly .cm-cursor {
  display: none;
}

.jp-CollaboratorCursor {
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: none;
  border-bottom: 3px solid;
  background-clip: content-box;
  margin-left: -5px;
  margin-right: -5px;
}

.cm-searching,
.cm-searching span {
  /* `.cm-searching span`: we need to override syntax highlighting */
  background-color: var(--jp-search-unselected-match-background-color);
  color: var(--jp-search-unselected-match-color);
}

.cm-searching::selection,
.cm-searching span::selection {
  background-color: var(--jp-search-unselected-match-background-color);
  color: var(--jp-search-unselected-match-color);
}

.jp-current-match > .cm-searching,
.jp-current-match > .cm-searching span,
.cm-searching > .jp-current-match,
.cm-searching > .jp-current-match span {
  background-color: var(--jp-search-selected-match-background-color);
  color: var(--jp-search-selected-match-color);
}

.jp-current-match > .cm-searching::selection,
.cm-searching > .jp-current-match::selection,
.jp-current-match > .cm-searching span::selection {
  background-color: var(--jp-search-selected-match-background-color);
  color: var(--jp-search-selected-match-color);
}

.cm-trailingspace {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAsElEQVQIHQGlAFr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7+r3zKmT0/+pk9P/7+r3zAAAAAAAAAAABAAAAAAAAAAA6OPzM+/q9wAAAAAA6OPzMwAAAAAAAAAAAgAAAAAAAAAAGR8NiRQaCgAZIA0AGR8NiQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQyoYJ/SY80UAAAAASUVORK5CYII=);
  background-position: center left;
  background-repeat: repeat-x;
}

.jp-CollaboratorCursor-hover {
  position: absolute;
  z-index: 1;
  transform: translateX(-50%);
  color: white;
  border-radius: 3px;
  padding-left: 4px;
  padding-right: 4px;
  padding-top: 1px;
  padding-bottom: 1px;
  text-align: center;
  font-size: var(--jp-ui-font-size1);
  white-space: nowrap;
}

.jp-CodeMirror-ruler {
  border-left: 1px dashed var(--jp-border-color2);
}

/* Styles for shared cursors (remote cursor locations and selected ranges) */
.jp-CodeMirrorEditor .cm-ySelectionCaret {
  position: relative;
  border-left: 1px solid black;
  margin-left: -1px;
  margin-right: -1px;
  box-sizing: border-box;
}

.jp-CodeMirrorEditor .cm-ySelectionCaret > .cm-ySelectionInfo {
  white-space: nowrap;
  position: absolute;
  top: -1.15em;
  padding-bottom: 0.05em;
  left: -1px;
  font-size: 0.95em;
  font-family: var(--jp-ui-font-family);
  font-weight: bold;
  line-height: normal;
  user-select: none;
  color: white;
  padding-left: 2px;
  padding-right: 2px;
  z-index: 101;
  transition: opacity 0.3s ease-in-out;
}

.jp-CodeMirrorEditor .cm-ySelectionInfo {
  transition-delay: 0.7s;
  opacity: 0;
}

.jp-CodeMirrorEditor .cm-ySelectionCaret:hover > .cm-ySelectionInfo {
  opacity: 1;
  transition-delay: 0s;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MimeDocument {
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-filebrowser-button-height: 28px;
  --jp-private-filebrowser-button-width: 48px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FileBrowser .jp-SidePanel-content {
  display: flex;
  flex-direction: column;
}

.jp-FileBrowser-toolbar.jp-Toolbar {
  flex-wrap: wrap;
  row-gap: 12px;
  border-bottom: none;
  height: auto;
  margin: 8px 12px 0;
  box-shadow: none;
  padding: 0;
  justify-content: flex-start;
}

.jp-FileBrowser-Panel {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
}

.jp-BreadCrumbs {
  flex: 0 0 auto;
  margin: 8px 12px;
}

.jp-BreadCrumbs-item {
  margin: 0 2px;
  padding: 0 2px;
  border-radius: var(--jp-border-radius);
  cursor: pointer;
}

.jp-BreadCrumbs-item:hover {
  background-color: var(--jp-layout-color2);
}

.jp-BreadCrumbs-item:first-child {
  margin-left: 0;
}

.jp-BreadCrumbs-item.jp-mod-dropTarget {
  background-color: var(--jp-brand-color2);
  opacity: 0.7;
}

/*-----------------------------------------------------------------------------
| Buttons
|----------------------------------------------------------------------------*/

.jp-FileBrowser-toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  padding-left: 0;
  padding-right: 2px;
  align-items: center;
  height: unset;
}

.jp-FileBrowser-toolbar > .jp-Toolbar-item .jp-ToolbarButtonComponent {
  width: 40px;
}

/*-----------------------------------------------------------------------------
| Other styles
|----------------------------------------------------------------------------*/

.jp-FileDialog.jp-mod-conflict input {
  color: var(--jp-error-color1);
}

.jp-FileDialog .jp-new-name-title {
  margin-top: 12px;
}

.jp-LastModified-hidden {
  display: none;
}

.jp-FileSize-hidden {
  display: none;
}

.jp-FileBrowser .lm-AccordionPanel > h3:first-child {
  display: none;
}

/*-----------------------------------------------------------------------------
| DirListing
|----------------------------------------------------------------------------*/

.jp-DirListing {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  outline: 0;
}

.jp-DirListing-header {
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  border-top: var(--jp-border-width) solid var(--jp-border-color2);
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
}

.jp-DirListing-headerItem {
  padding: 4px 12px 2px;
  font-weight: 500;
}

.jp-DirListing-headerItem:hover {
  background: var(--jp-layout-color2);
}

.jp-DirListing-headerItem.jp-id-name {
  flex: 1 0 84px;
}

.jp-DirListing-headerItem.jp-id-modified {
  flex: 0 0 112px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-DirListing-headerItem.jp-id-filesize {
  flex: 0 0 75px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-id-narrow {
  display: none;
  flex: 0 0 5px;
  padding: 4px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
  color: var(--jp-border-color2);
}

.jp-DirListing-narrow .jp-id-narrow {
  display: block;
}

.jp-DirListing-narrow .jp-id-modified,
.jp-DirListing-narrow .jp-DirListing-itemModified {
  display: none;
}

.jp-DirListing-headerItem.jp-mod-selected {
  font-weight: 600;
}

/* increase specificity to override bundled default */
.jp-DirListing-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  list-style-type: none;
  overflow: auto;
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-content mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.jp-DirListing-content .jp-DirListing-item.jp-mod-selected mark {
  color: var(--jp-ui-inverse-font-color0);
}

/* Style the directory listing content when a user drops a file to upload */
.jp-DirListing.jp-mod-native-drop .jp-DirListing-content {
  outline: 5px dashed rgba(128, 128, 128, 0.5);
  outline-offset: -10px;
  cursor: copy;
}

.jp-DirListing-item {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 4px 12px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-DirListing-checkboxWrapper {
  /* Increases hit area of checkbox. */
  padding: 4px;
}

.jp-DirListing-header
  .jp-DirListing-checkboxWrapper
  + .jp-DirListing-headerItem {
  padding-left: 4px;
}

.jp-DirListing-content .jp-DirListing-checkboxWrapper {
  position: relative;
  left: -4px;
  margin: -4px 0 -4px -8px;
}

.jp-DirListing-checkboxWrapper.jp-mod-visible {
  visibility: visible;
}

/* For devices that support hovering, hide checkboxes until hovered, selected...
*/
@media (hover: hover) {
  .jp-DirListing-checkboxWrapper {
    visibility: hidden;
  }

  .jp-DirListing-item:hover .jp-DirListing-checkboxWrapper,
  .jp-DirListing-item.jp-mod-selected .jp-DirListing-checkboxWrapper {
    visibility: visible;
  }
}

.jp-DirListing-item[data-is-dot] {
  opacity: 75%;
}

.jp-DirListing-item.jp-mod-selected {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.jp-DirListing-item.jp-mod-dropTarget {
  background: var(--jp-brand-color3);
}

.jp-DirListing-item:hover:not(.jp-mod-selected) {
  background: var(--jp-layout-color2);
}

.jp-DirListing-itemIcon {
  flex: 0 0 20px;
  margin-right: 4px;
}

.jp-DirListing-itemText {
  flex: 1 0 64px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
}

.jp-DirListing-itemText:focus {
  outline-width: 2px;
  outline-color: var(--jp-inverse-layout-color1);
  outline-style: solid;
  outline-offset: 1px;
}

.jp-DirListing-item.jp-mod-selected .jp-DirListing-itemText:focus {
  outline-color: var(--jp-layout-color1);
}

.jp-DirListing-itemModified {
  flex: 0 0 125px;
  text-align: right;
}

.jp-DirListing-itemFileSize {
  flex: 0 0 90px;
  text-align: right;
}

.jp-DirListing-editor {
  flex: 1 0 64px;
  outline: none;
  border: none;
  color: var(--jp-ui-font-color1);
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-item.jp-mod-running .jp-DirListing-itemIcon::before {
  color: var(--jp-success-color1);
  content: '\25CF';
  font-size: 8px;
  position: absolute;
  left: -8px;
}

.jp-DirListing-item.jp-mod-running.jp-mod-selected
  .jp-DirListing-itemIcon::before {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-DirListing-item.lm-mod-drag-image,
.jp-DirListing-item.jp-mod-selected.lm-mod-drag-image {
  font-size: var(--jp-ui-font-size1);
  padding-left: 4px;
  margin-left: 4px;
  width: 160px;
  background-color: var(--jp-ui-inverse-font-color2);
  box-shadow: var(--jp-elevation-z2);
  border-radius: 0;
  color: var(--jp-ui-font-color1);
  transform: translateX(-40%) translateY(-58%);
}

.jp-Document {
  min-width: 120px;
  min-height: 120px;
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Main OutputArea
| OutputArea has a list of Outputs
|----------------------------------------------------------------------------*/

.jp-OutputArea {
  overflow-y: auto;
}

.jp-OutputArea-child {
  display: table;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.jp-OutputPrompt {
  width: var(--jp-cell-prompt-width);
  color: var(--jp-cell-outprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
  opacity: var(--jp-cell-prompt-opacity);

  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-OutputArea-prompt {
  display: table-cell;
  vertical-align: top;
}

.jp-OutputArea-output {
  display: table-cell;
  width: 100%;
  height: auto;
  overflow: auto;
  user-select: text;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
}

.jp-OutputArea .jp-RenderedText {
  padding-left: 1ch;
}

/**
 * Prompt overlay.
 */

.jp-OutputArea-promptOverlay {
  position: absolute;
  top: 0;
  width: var(--jp-cell-prompt-width);
  height: 100%;
  opacity: 0.5;
}

.jp-OutputArea-promptOverlay:hover {
  background: var(--jp-layout-color2);
  box-shadow: inset 0 0 1px var(--jp-inverse-layout-color0);
  cursor: zoom-out;
}

.jp-mod-outputsScrolled .jp-OutputArea-promptOverlay:hover {
  cursor: zoom-in;
}

/**
 * Isolated output.
 */
.jp-OutputArea-output.jp-mod-isolated {
  width: 100%;
  display: block;
}

/*
When drag events occur, `lm-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated {
  position: relative;
}

body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/* pre */

.jp-OutputArea-output pre {
  border: none;
  margin: 0;
  padding: 0;
  overflow-x: auto;
  overflow-y: auto;
  word-break: break-all;
  word-wrap: break-word;
  white-space: pre-wrap;
}

/* tables */

.jp-OutputArea-output.jp-RenderedHTMLCommon table {
  margin-left: 0;
  margin-right: 0;
}

/* description lists */

.jp-OutputArea-output dl,
.jp-OutputArea-output dt,
.jp-OutputArea-output dd {
  display: block;
}

.jp-OutputArea-output dl {
  width: 100%;
  overflow: hidden;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dt {
  font-weight: bold;
  float: left;
  width: 20%;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dd {
  float: left;
  width: 80%;
  padding: 0;
  margin: 0;
}

.jp-TrimmedOutputs pre {
  background: var(--jp-layout-color3);
  font-size: calc(var(--jp-code-font-size) * 1.4);
  text-align: center;
  text-transform: uppercase;
}

/* Hide the gutter in case of
 *  - nested output areas (e.g. in the case of output widgets)
 *  - mirrored output areas
 */
.jp-OutputArea .jp-OutputArea .jp-OutputArea-prompt {
  display: none;
}

/* Hide empty lines in the output area, for instance due to cleared widgets */
.jp-OutputArea-prompt:empty {
  padding: 0;
  border: 0;
}

/*-----------------------------------------------------------------------------
| executeResult is added to any Output-result for the display of the object
| returned by a cell
|----------------------------------------------------------------------------*/

.jp-OutputArea-output.jp-OutputArea-executeResult {
  margin-left: 0;
  width: 100%;
}

/* Text output with the Out[] prompt needs a top padding to match the
 * alignment of the Out[] prompt itself.
 */
.jp-OutputArea-executeResult .jp-RenderedText.jp-OutputArea-output {
  padding-top: var(--jp-code-padding);
  border-top: var(--jp-border-width) solid transparent;
}

/*-----------------------------------------------------------------------------
| The Stdin output
|----------------------------------------------------------------------------*/

.jp-Stdin-prompt {
  color: var(--jp-content-font-color0);
  padding-right: var(--jp-code-padding);
  vertical-align: baseline;
  flex: 0 0 auto;
}

.jp-Stdin-input {
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  color: inherit;
  background-color: inherit;
  width: 42%;
  min-width: 200px;

  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;

  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0 0.25em;
  margin: 0 0.25em;
  flex: 0 0 70%;
}

.jp-Stdin-input::placeholder {
  opacity: 0;
}

.jp-Stdin-input:focus {
  box-shadow: none;
}

.jp-Stdin-input:focus::placeholder {
  opacity: 1;
}

/*-----------------------------------------------------------------------------
| Output Area View
|----------------------------------------------------------------------------*/

.jp-LinkedOutputView .jp-OutputArea {
  height: 100%;
  display: block;
}

.jp-LinkedOutputView .jp-OutputArea-output:only-child {
  height: 100%;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

@media print {
  .jp-OutputArea-child {
    break-inside: avoid-page;
  }
}

/*-----------------------------------------------------------------------------
| Mobile
|----------------------------------------------------------------------------*/
@media only screen and (max-width: 760px) {
  .jp-OutputPrompt {
    display: table-row;
    text-align: left;
  }

  .jp-OutputArea-child .jp-OutputArea-output {
    display: table-row;
    margin-left: var(--jp-notebook-padding);
  }
}

/* Trimmed outputs warning */
.jp-TrimmedOutputs > a {
  margin: 10px;
  text-decoration: none;
  cursor: pointer;
}

.jp-TrimmedOutputs > a:hover {
  text-decoration: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Table of Contents
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toc-active-width: 4px;
}

.jp-TableOfContents {
  display: flex;
  flex-direction: column;
  background: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  height: 100%;
}

.jp-TableOfContents-placeholder {
  text-align: center;
}

.jp-TableOfContents-placeholderContent {
  color: var(--jp-content-font-color2);
  padding: 8px;
}

.jp-TableOfContents-placeholderContent > h3 {
  margin-bottom: var(--jp-content-heading-margin-bottom);
}

.jp-TableOfContents .jp-SidePanel-content {
  overflow-y: auto;
}

.jp-TableOfContents-tree {
  margin: 4px;
}

.jp-TableOfContents ol {
  list-style-type: none;
}

/* stylelint-disable-next-line selector-max-type */
.jp-TableOfContents li > ol {
  /* Align left border with triangle icon center */
  padding-left: 11px;
}

.jp-TableOfContents-content {
  /* left margin for the active heading indicator */
  margin: 0 0 0 var(--jp-private-toc-active-width);
  padding: 0;
  background-color: var(--jp-layout-color1);
}

.jp-tocItem {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-tocItem-heading {
  display: flex;
  cursor: pointer;
}

.jp-tocItem-heading:hover {
  background-color: var(--jp-layout-color2);
}

.jp-tocItem-content {
  display: block;
  padding: 4px 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow-x: hidden;
}

.jp-tocItem-collapser {
  height: 20px;
  margin: 2px 2px 0;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
}

.jp-tocItem-collapser:hover {
  background-color: var(--jp-layout-color3);
}

/* Active heading indicator */

.jp-tocItem-heading::before {
  content: ' ';
  background: transparent;
  width: var(--jp-private-toc-active-width);
  height: 24px;
  position: absolute;
  left: 0;
  border-radius: var(--jp-border-radius);
}

.jp-tocItem-heading.jp-tocItem-active::before {
  background-color: var(--jp-brand-color1);
}

.jp-tocItem-heading:hover.jp-tocItem-active::before {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapser {
  flex: 0 0 var(--jp-cell-collapser-width);
  padding: 0;
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
  border-radius: var(--jp-border-radius);
  opacity: 1;
}

.jp-Collapser-child {
  display: block;
  width: 100%;
  box-sizing: border-box;

  /* height: 100% doesn't work because the height of its parent is computed from content */
  position: absolute;
  top: 0;
  bottom: 0;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

/*
Hiding collapsers in print mode.

Note: input and output wrappers have "display: block" propery in print mode.
*/

@media print {
  .jp-Collapser {
    display: none;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Header/Footer
|----------------------------------------------------------------------------*/

/* Hidden by zero height by default */
.jp-CellHeader,
.jp-CellFooter {
  height: 0;
  width: 100%;
  padding: 0;
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Input
|----------------------------------------------------------------------------*/

/* All input areas */
.jp-InputArea {
  display: table;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.jp-InputArea-editor {
  display: table-cell;
  overflow: hidden;
  vertical-align: top;

  /* This is the non-active, default styling */
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0;
  background: var(--jp-cell-editor-background);
}

.jp-InputPrompt {
  display: table-cell;
  vertical-align: top;
  width: var(--jp-cell-prompt-width);
  color: var(--jp-cell-inprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  opacity: var(--jp-cell-prompt-opacity);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;

  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/*-----------------------------------------------------------------------------
| Mobile
|----------------------------------------------------------------------------*/
@media only screen and (max-width: 760px) {
  .jp-InputArea-editor {
    display: table-row;
    margin-left: var(--jp-notebook-padding);
  }

  .jp-InputPrompt {
    display: table-row;
    text-align: left;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Placeholder {
  display: table;
  table-layout: fixed;
  width: 100%;
}

.jp-Placeholder-prompt {
  display: table-cell;
  box-sizing: border-box;
}

.jp-Placeholder-content {
  display: table-cell;
  padding: 4px 6px;
  border: 1px solid transparent;
  border-radius: 0;
  background: none;
  box-sizing: border-box;
  cursor: pointer;
}

.jp-Placeholder-contentContainer {
  display: flex;
}

.jp-Placeholder-content:hover,
.jp-InputPlaceholder > .jp-Placeholder-content:hover {
  border-color: var(--jp-layout-color3);
}

.jp-Placeholder-content .jp-MoreHorizIcon {
  width: 32px;
  height: 16px;
  border: 1px solid transparent;
  border-radius: var(--jp-border-radius);
}

.jp-Placeholder-content .jp-MoreHorizIcon:hover {
  border: 1px solid var(--jp-border-color1);
  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.25);
  background-color: var(--jp-layout-color0);
}

.jp-PlaceholderText {
  white-space: nowrap;
  overflow-x: hidden;
  color: var(--jp-inverse-layout-color3);
  font-family: var(--jp-code-font-family);
}

.jp-InputPlaceholder > .jp-Placeholder-content {
  border-color: var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Private CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-cell-scrolling-output-offset: 5px;
}

/*-----------------------------------------------------------------------------
| Cell
|----------------------------------------------------------------------------*/

.jp-Cell {
  padding: var(--jp-cell-padding);
  margin: 0;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Common input/output
|----------------------------------------------------------------------------*/

.jp-Cell-inputWrapper,
.jp-Cell-outputWrapper {
  display: flex;
  flex-direction: row;
  padding: 0;
  margin: 0;

  /* Added to reveal the box-shadow on the input and output collapsers. */
  overflow: visible;
}

/* Only input/output areas inside cells */
.jp-Cell-inputArea,
.jp-Cell-outputArea {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Collapser
|----------------------------------------------------------------------------*/

/* Make the output collapser disappear when there is not output, but do so
 * in a manner that leaves it in the layout and preserves its width.
 */
.jp-Cell.jp-mod-noOutputs .jp-Cell-outputCollapser {
  border: none !important;
  background: transparent !important;
}

.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputCollapser {
  min-height: var(--jp-cell-collapser-min-height);
}

/*-----------------------------------------------------------------------------
| Output
|----------------------------------------------------------------------------*/

/* Put a space between input and output when there IS output */
.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputWrapper {
  margin-top: 5px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea {
  overflow-y: auto;
  max-height: 24em;
  margin-left: var(--jp-private-cell-scrolling-output-offset);
  resize: vertical;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea[style*='height'] {
  max-height: unset;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea::after {
  content: ' ';
  box-shadow: inset 0 0 6px 2px rgb(0 0 0 / 30%);
  width: 100%;
  height: 100%;
  position: sticky;
  bottom: 0;
  top: 0;
  margin-top: -50%;
  float: left;
  display: block;
  pointer-events: none;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-child {
  padding-top: 6px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-prompt {
  width: calc(
    var(--jp-cell-prompt-width) - var(--jp-private-cell-scrolling-output-offset)
  );
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-promptOverlay {
  left: calc(-1 * var(--jp-private-cell-scrolling-output-offset));
}

/*-----------------------------------------------------------------------------
| CodeCell
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| MarkdownCell
|----------------------------------------------------------------------------*/

.jp-MarkdownOutput {
  display: table-cell;
  width: 100%;
  margin-top: 0;
  margin-bottom: 0;
  padding-left: var(--jp-code-padding);
}

.jp-MarkdownOutput.jp-RenderedHTMLCommon {
  overflow: auto;
}

/* collapseHeadingButton (show always if hiddenCellsButton is _not_ shown) */
.jp-collapseHeadingButton {
  display: flex;
  min-height: var(--jp-cell-collapser-min-height);
  font-size: var(--jp-code-font-size);
  position: absolute;
  background-color: transparent;
  background-size: 25px;
  background-repeat: no-repeat;
  background-position-x: center;
  background-position-y: top;
  background-image: var(--jp-icon-caret-down);
  right: 0;
  top: 0;
  bottom: 0;
}

.jp-collapseHeadingButton.jp-mod-collapsed {
  background-image: var(--jp-icon-caret-right);
}

/*
 set the container font size to match that of content
 so that the nested collapse buttons have the right size
*/
.jp-MarkdownCell .jp-InputPrompt {
  font-size: var(--jp-content-font-size1);
}

/*
  Align collapseHeadingButton with cell top header
  The font sizes are identical to the ones in packages/rendermime/style/base.css
*/
.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='1'] {
  font-size: var(--jp-content-font-size5);
  background-position-y: calc(0.3 * var(--jp-content-font-size5));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='2'] {
  font-size: var(--jp-content-font-size4);
  background-position-y: calc(0.3 * var(--jp-content-font-size4));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='3'] {
  font-size: var(--jp-content-font-size3);
  background-position-y: calc(0.3 * var(--jp-content-font-size3));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='4'] {
  font-size: var(--jp-content-font-size2);
  background-position-y: calc(0.3 * var(--jp-content-font-size2));
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='5'] {
  font-size: var(--jp-content-font-size1);
  background-position-y: top;
}

.jp-mod-rendered .jp-collapseHeadingButton[data-heading-level='6'] {
  font-size: var(--jp-content-font-size0);
  background-position-y: top;
}

/* collapseHeadingButton (show only on (hover,active) if hiddenCellsButton is shown) */
.jp-Notebook.jp-mod-showHiddenCellsButton .jp-collapseHeadingButton {
  display: none;
}

.jp-Notebook.jp-mod-showHiddenCellsButton
  :is(.jp-MarkdownCell:hover, .jp-mod-active)
  .jp-collapseHeadingButton {
  display: flex;
}

/* showHiddenCellsButton (only show if jp-mod-showHiddenCellsButton is set, which
is a consequence of the showHiddenCellsButton option in Notebook Settings)*/
.jp-Notebook.jp-mod-showHiddenCellsButton .jp-showHiddenCellsButton {
  margin-left: calc(var(--jp-cell-prompt-width) + 2 * var(--jp-code-padding));
  margin-top: var(--jp-code-padding);
  border: 1px solid var(--jp-border-color2);
  background-color: var(--jp-border-color3) !important;
  color: var(--jp-content-font-color0) !important;
  display: flex;
}

.jp-Notebook.jp-mod-showHiddenCellsButton .jp-showHiddenCellsButton:hover {
  background-color: var(--jp-border-color2) !important;
}

.jp-showHiddenCellsButton {
  display: none;
}

/*-----------------------------------------------------------------------------
| Printing
|----------------------------------------------------------------------------*/

/*
Using block instead of flex to allow the use of the break-inside CSS property for
cell outputs.
*/

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-notebook-toolbar-padding: 2px 5px 2px 2px;
}

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-NotebookPanel-toolbar {
  padding: var(--jp-notebook-toolbar-padding);

  /* disable paint containment from lumino 2.0 default strict CSS containment */
  contain: style size !important;
}

.jp-Toolbar-item.jp-Notebook-toolbarCellType .jp-select-wrapper.jp-mod-focused {
  border: none;
  box-shadow: none;
}

.jp-Notebook-toolbarCellTypeDropdown select {
  height: 24px;
  font-size: var(--jp-ui-font-size1);
  line-height: 14px;
  border-radius: 0;
  display: block;
}

.jp-Notebook-toolbarCellTypeDropdown span {
  top: 5px !important;
}

.jp-Toolbar-responsive-popup {
  position: absolute;
  height: fit-content;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-end;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: var(--jp-notebook-toolbar-padding);
  z-index: 1;
  right: 0;
  top: 0;
}

.jp-Toolbar > .jp-Toolbar-responsive-opener {
  margin-left: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-Notebook-ExecutionIndicator {
  position: relative;
  display: inline-block;
  height: 100%;
  z-index: 9997;
}

.jp-Notebook-ExecutionIndicator-tooltip {
  visibility: hidden;
  height: auto;
  width: max-content;
  width: -moz-max-content;
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color1);
  text-align: justify;
  border-radius: 6px;
  padding: 0 5px;
  position: fixed;
  display: table;
}

.jp-Notebook-ExecutionIndicator-tooltip.up {
  transform: translateX(-50%) translateY(-100%) translateY(-32px);
}

.jp-Notebook-ExecutionIndicator-tooltip.down {
  transform: translateX(calc(-100% + 16px)) translateY(5px);
}

.jp-Notebook-ExecutionIndicator-tooltip.hidden {
  display: none;
}

.jp-Notebook-ExecutionIndicator:hover .jp-Notebook-ExecutionIndicator-tooltip {
  visibility: visible;
}

.jp-Notebook-ExecutionIndicator span {
  font-size: var(--jp-ui-font-size1);
  font-family: var(--jp-ui-font-family);
  color: var(--jp-ui-font-color1);
  line-height: 24px;
  display: block;
}

.jp-Notebook-ExecutionIndicator-progress-bar {
  display: flex;
  justify-content: center;
  height: 100%;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

/*
 * Execution indicator
 */
.jp-tocItem-content::after {
  content: '';

  /* Must be identical to form a circle */
  width: 12px;
  height: 12px;
  background: none;
  border: none;
  position: absolute;
  right: 0;
}

.jp-tocItem-content[data-running='0']::after {
  border-radius: 50%;
  border: var(--jp-border-width) solid var(--jp-inverse-layout-color3);
  background: none;
}

.jp-tocItem-content[data-running='1']::after {
  border-radius: 50%;
  border: var(--jp-border-width) solid var(--jp-inverse-layout-color3);
  background-color: var(--jp-inverse-layout-color3);
}

.jp-tocItem-content[data-running='0'],
.jp-tocItem-content[data-running='1'] {
  margin-right: 12px;
}

/*
 * Copyright (c) Jupyter Development Team.
 * Distributed under the terms of the Modified BSD License.
 */

.jp-Notebook-footer {
  height: 27px;
  margin-left: calc(
    var(--jp-cell-prompt-width) + var(--jp-cell-collapser-width) +
      var(--jp-cell-padding)
  );
  width: calc(
    100% -
      (
        var(--jp-cell-prompt-width) + var(--jp-cell-collapser-width) +
          var(--jp-cell-padding) + var(--jp-cell-padding)
      )
  );
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  color: var(--jp-ui-font-color3);
  margin-top: 6px;
  background: none;
  cursor: pointer;
}

.jp-Notebook-footer:focus {
  border-color: var(--jp-cell-editor-active-border-color);
}

/* For devices that support hovering, hide footer until hover */
@media (hover: hover) {
  .jp-Notebook-footer {
    opacity: 0;
  }

  .jp-Notebook-footer:focus,
  .jp-Notebook-footer:hover {
    opacity: 1;
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Imports
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-side-by-side-output-size: 1fr;
  --jp-side-by-side-resized-cell: var(--jp-side-by-side-output-size);
  --jp-private-notebook-dragImage-width: 304px;
  --jp-private-notebook-dragImage-height: 36px;
  --jp-private-notebook-selected-color: var(--md-blue-400);
  --jp-private-notebook-active-color: var(--md-green-400);
}

/*-----------------------------------------------------------------------------
| Notebook
|----------------------------------------------------------------------------*/

/* stylelint-disable selector-max-class */

.jp-NotebookPanel {
  display: block;
  height: 100%;
}

.jp-NotebookPanel.jp-Document {
  min-width: 240px;
  min-height: 120px;
}

.jp-Notebook {
  padding: var(--jp-notebook-padding);
  outline: none;
  overflow: auto;
  background: var(--jp-layout-color0);
}

.jp-Notebook.jp-mod-scrollPastEnd::after {
  display: block;
  content: '';
  min-height: var(--jp-notebook-scroll-padding);
}

.jp-MainAreaWidget-ContainStrict .jp-Notebook * {
  contain: strict;
}

.jp-Notebook .jp-Cell {
  overflow: visible;
}

.jp-Notebook .jp-Cell .jp-InputPrompt {
  cursor: move;
}

/*-----------------------------------------------------------------------------
| Notebook state related styling
|
| The notebook and cells each have states, here are the possibilities:
|
| - Notebook
|   - Command
|   - Edit
| - Cell
|   - None
|   - Active (only one can be active)
|   - Selected (the cells actions are applied to)
|   - Multiselected (when multiple selected, the cursor)
|   - No outputs
|----------------------------------------------------------------------------*/

/* Command or edit modes */

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-InputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-OutputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

/* cell is active */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser {
  background: var(--jp-brand-color1);
}

/* cell is dirty */
.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt {
  color: var(--jp-warn-color1);
}

.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt::before {
  color: var(--jp-warn-color1);
  content: '•';
}

.jp-Notebook .jp-Cell.jp-mod-active.jp-mod-dirty .jp-Collapser {
  background: var(--jp-warn-color1);
}

/* collapser is hovered */
.jp-Notebook .jp-Cell .jp-Collapser:hover {
  box-shadow: var(--jp-elevation-z2);
  background: var(--jp-brand-color1);
  opacity: var(--jp-cell-collapser-not-active-hover-opacity);
}

/* cell is active and collapser is hovered */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser:hover {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/* Command mode */

.jp-Notebook.jp-mod-commandMode .jp-Cell.jp-mod-selected {
  background: var(--jp-notebook-multiselected-color);
}

.jp-Notebook.jp-mod-commandMode
  .jp-Cell.jp-mod-active.jp-mod-selected:not(.jp-mod-multiSelected) {
  background: transparent;
}

/* Edit mode */

.jp-Notebook.jp-mod-editMode .jp-Cell.jp-mod-active .jp-InputArea-editor {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-cell-editor-active-background);
}

/*-----------------------------------------------------------------------------
| Notebook drag and drop
|----------------------------------------------------------------------------*/

.jp-Notebook-cell.jp-mod-dropSource {
  opacity: 0.5;
}

.jp-Notebook-cell.jp-mod-dropTarget,
.jp-Notebook.jp-mod-commandMode
  .jp-Notebook-cell.jp-mod-active.jp-mod-selected.jp-mod-dropTarget {
  border-top-color: var(--jp-private-notebook-selected-color);
  border-top-style: solid;
  border-top-width: 2px;
}

.jp-dragImage {
  display: block;
  flex-direction: row;
  width: var(--jp-private-notebook-dragImage-width);
  height: var(--jp-private-notebook-dragImage-height);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
  overflow: visible;
}

.jp-dragImage-singlePrompt {
  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.12);
}

.jp-dragImage .jp-dragImage-content {
  flex: 1 1 auto;
  z-index: 2;
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  line-height: var(--jp-code-line-height);
  padding: var(--jp-code-padding);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background-color);
  color: var(--jp-content-font-color3);
  text-align: left;
  margin: 4px 4px 4px 0;
}

.jp-dragImage .jp-dragImage-prompt {
  flex: 0 0 auto;
  min-width: 36px;
  color: var(--jp-cell-inprompt-font-color);
  padding: var(--jp-code-padding);
  padding-left: 12px;
  font-family: var(--jp-cell-prompt-font-family);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: 1.9;
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
}

.jp-dragImage-multipleBack {
  z-index: -1;
  position: absolute;
  height: 32px;
  width: 300px;
  top: 8px;
  left: 8px;
  background: var(--jp-layout-color2);
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.12);
}

/*-----------------------------------------------------------------------------
| Cell toolbar
|----------------------------------------------------------------------------*/

.jp-NotebookTools {
  display: block;
  min-width: var(--jp-sidebar-min-width);
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);

  /* This is needed so that all font sizing of children done in ems is
    * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  overflow: auto;
}

.jp-ActiveCellTool {
  padding: 12px 0;
  display: flex;
}

.jp-ActiveCellTool-Content {
  flex: 1 1 auto;
}

.jp-ActiveCellTool .jp-ActiveCellTool-CellContent {
  background: var(--jp-cell-editor-background);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0;
  min-height: 29px;
}

.jp-ActiveCellTool .jp-InputPrompt {
  min-width: calc(var(--jp-cell-prompt-width) * 0.75);
}

.jp-ActiveCellTool-CellContent > pre {
  padding: 5px 4px;
  margin: 0;
  white-space: normal;
}

.jp-MetadataEditorTool {
  flex-direction: column;
  padding: 12px 0;
}

.jp-RankedPanel > :not(:first-child) {
  margin-top: 12px;
}

.jp-KeySelector select.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: var(--jp-border-width) solid var(--jp-border-color1);
}

.jp-KeySelector label,
.jp-MetadataEditorTool label,
.jp-NumberSetter label {
  line-height: 1.4;
}

.jp-NotebookTools .jp-select-wrapper {
  margin-top: 4px;
  margin-bottom: 0;
}

.jp-NumberSetter input {
  width: 100%;
  margin-top: 4px;
}

.jp-NotebookTools .jp-Collapse {
  margin-top: 16px;
}

/*-----------------------------------------------------------------------------
| Presentation Mode (.jp-mod-presentationMode)
|----------------------------------------------------------------------------*/

.jp-mod-presentationMode .jp-Notebook {
  --jp-content-font-size1: var(--jp-content-presentation-font-size1);
  --jp-code-font-size: var(--jp-code-presentation-font-size);
}

.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-InputPrompt,
.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-OutputPrompt {
  flex: 0 0 110px;
}

/*-----------------------------------------------------------------------------
| Side-by-side Mode (.jp-mod-sideBySide)
|----------------------------------------------------------------------------*/
.jp-mod-sideBySide.jp-Notebook .jp-Notebook-cell {
  margin-top: 3em;
  margin-bottom: 3em;
  margin-left: 5%;
  margin-right: 5%;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell {
  display: grid;
  grid-template-columns: minmax(0, 1fr) min-content minmax(
      0,
      var(--jp-side-by-side-output-size)
    );
  grid-template-rows: auto minmax(0, 1fr) auto;
  grid-template-areas:
    'header header header'
    'input handle output'
    'footer footer footer';
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell.jp-mod-resizedCell {
  grid-template-columns: minmax(0, 1fr) min-content minmax(
      0,
      var(--jp-side-by-side-resized-cell)
    );
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellHeader {
  grid-area: header;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-Cell-inputWrapper {
  grid-area: input;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-Cell-outputWrapper {
  /* overwrite the default margin (no vertical separation needed in side by side move */
  margin-top: 0;
  grid-area: output;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellFooter {
  grid-area: footer;
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellResizeHandle {
  grid-area: handle;
  user-select: none;
  display: block;
  height: 100%;
  cursor: ew-resize;
  padding: 0 var(--jp-cell-padding);
}

.jp-mod-sideBySide.jp-Notebook .jp-CodeCell .jp-CellResizeHandle::after {
  content: '';
  display: block;
  background: var(--jp-border-color2);
  height: 100%;
  width: 5px;
}

.jp-mod-sideBySide.jp-Notebook
  .jp-CodeCell.jp-mod-resizedCell
  .jp-CellResizeHandle::after {
  background: var(--jp-border-color0);
}

.jp-CellResizeHandle {
  display: none;
}

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Cell-Placeholder {
  padding-left: 55px;
}

.jp-Cell-Placeholder-wrapper {
  background: #fff;
  border: 1px solid;
  border-color: #e5e6e9 #dfe0e4 #d0d1d5;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  margin: 10px 15px;
}

.jp-Cell-Placeholder-wrapper-inner {
  padding: 15px;
  position: relative;
}

.jp-Cell-Placeholder-wrapper-body {
  background-repeat: repeat;
  background-size: 50% auto;
}

.jp-Cell-Placeholder-wrapper-body div {
  background: #f6f7f8;
  background-image: -webkit-linear-gradient(
    left,
    #f6f7f8 0%,
    #edeef1 20%,
    #f6f7f8 40%,
    #f6f7f8 100%
  );
  background-repeat: no-repeat;
  background-size: 800px 104px;
  height: 104px;
  position: absolute;
  right: 15px;
  left: 15px;
  top: 15px;
}

div.jp-Cell-Placeholder-h1 {
  top: 20px;
  height: 20px;
  left: 15px;
  width: 150px;
}

div.jp-Cell-Placeholder-h2 {
  left: 15px;
  top: 50px;
  height: 10px;
  width: 100px;
}

div.jp-Cell-Placeholder-content-1,
div.jp-Cell-Placeholder-content-2,
div.jp-Cell-Placeholder-content-3 {
  left: 15px;
  right: 15px;
  height: 10px;
}

div.jp-Cell-Placeholder-content-1 {
  top: 100px;
}

div.jp-Cell-Placeholder-content-2 {
  top: 120px;
}

div.jp-Cell-Placeholder-content-3 {
  top: 140px;
}

</style>
<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
The following CSS variables define the main, public API for styling JupyterLab.
These variables should be used by all plugins wherever possible. In other
words, plugins should not define custom colors, sizes, etc unless absolutely
necessary. This enables users to change the visual theme of JupyterLab
by changing these variables.

Many variables appear in an ordered sequence (0,1,2,3). These sequences
are designed to work well together, so for example, `--jp-border-color1` should
be used with `--jp-layout-color1`. The numbers have the following meanings:

* 0: super-primary, reserved for special emphasis
* 1: primary, most important under normal situations
* 2: secondary, next most important under normal situations
* 3: tertiary, next most important under normal situations

Throughout JupyterLab, we are mostly following principles from Google's
Material Design when selecting colors. We are not, however, following
all of MD as it is not optimized for dense, information rich UIs.
*/

:root {
  /* Elevation
   *
   * We style box-shadows using Material Design's idea of elevation. These particular numbers are taken from here:
   *
   * https://github.com/material-components/material-components-web
   * https://material-components-web.appspot.com/elevation.html
   */

  --jp-shadow-base-lightness: 0;
  --jp-shadow-umbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.2
  );
  --jp-shadow-penumbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.14
  );
  --jp-shadow-ambient-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.12
  );
  --jp-elevation-z0: none;
  --jp-elevation-z1: 0 2px 1px -1px var(--jp-shadow-umbra-color),
    0 1px 1px 0 var(--jp-shadow-penumbra-color),
    0 1px 3px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z2: 0 3px 1px -2px var(--jp-shadow-umbra-color),
    0 2px 2px 0 var(--jp-shadow-penumbra-color),
    0 1px 5px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z4: 0 2px 4px -1px var(--jp-shadow-umbra-color),
    0 4px 5px 0 var(--jp-shadow-penumbra-color),
    0 1px 10px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z6: 0 3px 5px -1px var(--jp-shadow-umbra-color),
    0 6px 10px 0 var(--jp-shadow-penumbra-color),
    0 1px 18px 0 var(--jp-shadow-ambient-color);
  --jp-elevation-z8: 0 5px 5px -3px var(--jp-shadow-umbra-color),
    0 8px 10px 1px var(--jp-shadow-penumbra-color),
    0 3px 14px 2px var(--jp-shadow-ambient-color);
  --jp-elevation-z12: 0 7px 8px -4px var(--jp-shadow-umbra-color),
    0 12px 17px 2px var(--jp-shadow-penumbra-color),
    0 5px 22px 4px var(--jp-shadow-ambient-color);
  --jp-elevation-z16: 0 8px 10px -5px var(--jp-shadow-umbra-color),
    0 16px 24px 2px var(--jp-shadow-penumbra-color),
    0 6px 30px 5px var(--jp-shadow-ambient-color);
  --jp-elevation-z20: 0 10px 13px -6px var(--jp-shadow-umbra-color),
    0 20px 31px 3px var(--jp-shadow-penumbra-color),
    0 8px 38px 7px var(--jp-shadow-ambient-color);
  --jp-elevation-z24: 0 11px 15px -7px var(--jp-shadow-umbra-color),
    0 24px 38px 3px var(--jp-shadow-penumbra-color),
    0 9px 46px 8px var(--jp-shadow-ambient-color);

  /* Borders
   *
   * The following variables, specify the visual styling of borders in JupyterLab.
   */

  --jp-border-width: 1px;
  --jp-border-color0: var(--md-grey-400);
  --jp-border-color1: var(--md-grey-400);
  --jp-border-color2: var(--md-grey-300);
  --jp-border-color3: var(--md-grey-200);
  --jp-inverse-border-color: var(--md-grey-600);
  --jp-border-radius: 2px;

  /* UI Fonts
   *
   * The UI font CSS variables are used for the typography all of the JupyterLab
   * user interface elements that are not directly user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-ui-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-ui-font-scale-factor: 1.2;
  --jp-ui-font-size0: 0.83333em;
  --jp-ui-font-size1: 13px; /* Base font size */
  --jp-ui-font-size2: 1.2em;
  --jp-ui-font-size3: 1.44em;
  --jp-ui-font-family: system-ui, -apple-system, blinkmacsystemfont, 'Segoe UI',
    helvetica, arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol';

  /*
   * Use these font colors against the corresponding main layout colors.
   * In a light theme, these go from dark to light.
   */

  /* Defaults use Material Design specification */
  --jp-ui-font-color0: rgba(0, 0, 0, 1);
  --jp-ui-font-color1: rgba(0, 0, 0, 0.87);
  --jp-ui-font-color2: rgba(0, 0, 0, 0.54);
  --jp-ui-font-color3: rgba(0, 0, 0, 0.38);

  /*
   * Use these against the brand/accent/warn/error colors.
   * These will typically go from light to darker, in both a dark and light theme.
   */

  --jp-ui-inverse-font-color0: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color1: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color2: rgba(255, 255, 255, 0.7);
  --jp-ui-inverse-font-color3: rgba(255, 255, 255, 0.5);

  /* Content Fonts
   *
   * Content font variables are used for typography of user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-content-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-content-line-height: 1.6;
  --jp-content-font-scale-factor: 1.2;
  --jp-content-font-size0: 0.83333em;
  --jp-content-font-size1: 14px; /* Base font size */
  --jp-content-font-size2: 1.2em;
  --jp-content-font-size3: 1.44em;
  --jp-content-font-size4: 1.728em;
  --jp-content-font-size5: 2.0736em;

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-content-presentation-font-size1: 17px;
  --jp-content-heading-line-height: 1;
  --jp-content-heading-margin-top: 1.2em;
  --jp-content-heading-margin-bottom: 0.8em;
  --jp-content-heading-font-weight: 500;

  /* Defaults use Material Design specification */
  --jp-content-font-color0: rgba(0, 0, 0, 1);
  --jp-content-font-color1: rgba(0, 0, 0, 0.87);
  --jp-content-font-color2: rgba(0, 0, 0, 0.54);
  --jp-content-font-color3: rgba(0, 0, 0, 0.38);
  --jp-content-link-color: var(--md-blue-900);
  --jp-content-font-family: system-ui, -apple-system, blinkmacsystemfont,
    'Segoe UI', helvetica, arial, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol';

  /*
   * Code Fonts
   *
   * Code font variables are used for typography of code and other monospaces content.
   */

  --jp-code-font-size: 13px;
  --jp-code-line-height: 1.3077; /* 17px for 13px base */
  --jp-code-padding: 5px; /* 5px for 13px base, codemirror highlighting needs integer px value */
  --jp-code-font-family-default: menlo, consolas, 'DejaVu Sans Mono', monospace;
  --jp-code-font-family: var(--jp-code-font-family-default);

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-code-presentation-font-size: 16px;

  /* may need to tweak cursor width if you change font size */
  --jp-code-cursor-width0: 1.4px;
  --jp-code-cursor-width1: 2px;
  --jp-code-cursor-width2: 4px;

  /* Layout
   *
   * The following are the main layout colors use in JupyterLab. In a light
   * theme these would go from light to dark.
   */

  --jp-layout-color0: white;
  --jp-layout-color1: white;
  --jp-layout-color2: var(--md-grey-200);
  --jp-layout-color3: var(--md-grey-400);
  --jp-layout-color4: var(--md-grey-600);

  /* Inverse Layout
   *
   * The following are the inverse layout colors use in JupyterLab. In a light
   * theme these would go from dark to light.
   */

  --jp-inverse-layout-color0: #111;
  --jp-inverse-layout-color1: var(--md-grey-900);
  --jp-inverse-layout-color2: var(--md-grey-800);
  --jp-inverse-layout-color3: var(--md-grey-700);
  --jp-inverse-layout-color4: var(--md-grey-600);

  /* Brand/accent */

  --jp-brand-color0: var(--md-blue-900);
  --jp-brand-color1: var(--md-blue-700);
  --jp-brand-color2: var(--md-blue-300);
  --jp-brand-color3: var(--md-blue-100);
  --jp-brand-color4: var(--md-blue-50);
  --jp-accent-color0: var(--md-green-900);
  --jp-accent-color1: var(--md-green-700);
  --jp-accent-color2: var(--md-green-300);
  --jp-accent-color3: var(--md-green-100);

  /* State colors (warn, error, success, info) */

  --jp-warn-color0: var(--md-orange-900);
  --jp-warn-color1: var(--md-orange-700);
  --jp-warn-color2: var(--md-orange-300);
  --jp-warn-color3: var(--md-orange-100);
  --jp-error-color0: var(--md-red-900);
  --jp-error-color1: var(--md-red-700);
  --jp-error-color2: var(--md-red-300);
  --jp-error-color3: var(--md-red-100);
  --jp-success-color0: var(--md-green-900);
  --jp-success-color1: var(--md-green-700);
  --jp-success-color2: var(--md-green-300);
  --jp-success-color3: var(--md-green-100);
  --jp-info-color0: var(--md-cyan-900);
  --jp-info-color1: var(--md-cyan-700);
  --jp-info-color2: var(--md-cyan-300);
  --jp-info-color3: var(--md-cyan-100);

  /* Cell specific styles */

  --jp-cell-padding: 5px;
  --jp-cell-collapser-width: 8px;
  --jp-cell-collapser-min-height: 20px;
  --jp-cell-collapser-not-active-hover-opacity: 0.6;
  --jp-cell-editor-background: var(--md-grey-100);
  --jp-cell-editor-border-color: var(--md-grey-300);
  --jp-cell-editor-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-cell-editor-active-background: var(--jp-layout-color0);
  --jp-cell-editor-active-border-color: var(--jp-brand-color1);
  --jp-cell-prompt-width: 64px;
  --jp-cell-prompt-font-family: var(--jp-code-font-family-default);
  --jp-cell-prompt-letter-spacing: 0;
  --jp-cell-prompt-opacity: 1;
  --jp-cell-prompt-not-active-opacity: 0.5;
  --jp-cell-prompt-not-active-font-color: var(--md-grey-700);

  /* A custom blend of MD grey and blue 600
   * See https://meyerweb.com/eric/tools/color-blend/#546E7A:1E88E5:5:hex */
  --jp-cell-inprompt-font-color: #307fc1;

  /* A custom blend of MD grey and orange 600
   * https://meyerweb.com/eric/tools/color-blend/#546E7A:F4511E:5:hex */
  --jp-cell-outprompt-font-color: #bf5b3d;

  /* Notebook specific styles */

  --jp-notebook-padding: 10px;
  --jp-notebook-select-background: var(--jp-layout-color1);
  --jp-notebook-multiselected-color: var(--md-blue-50);

  /* The scroll padding is calculated to fill enough space at the bottom of the
  notebook to show one single-line cell (with appropriate padding) at the top
  when the notebook is scrolled all the way to the bottom. We also subtract one
  pixel so that no scrollbar appears if we have just one single-line cell in the
  notebook. This padding is to enable a 'scroll past end' feature in a notebook.
  */
  --jp-notebook-scroll-padding: calc(
    100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
      var(--jp-code-padding) - var(--jp-cell-padding) - 1px
  );

  /* Rendermime styles */

  --jp-rendermime-error-background: #fdd;
  --jp-rendermime-table-row-background: var(--md-grey-100);
  --jp-rendermime-table-row-hover-background: var(--md-light-blue-50);

  /* Dialog specific styles */

  --jp-dialog-background: rgba(0, 0, 0, 0.25);

  /* Console specific styles */

  --jp-console-padding: 10px;

  /* Toolbar specific styles */

  --jp-toolbar-border-color: var(--jp-border-color1);
  --jp-toolbar-micro-height: 8px;
  --jp-toolbar-background: var(--jp-layout-color1);
  --jp-toolbar-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.24);
  --jp-toolbar-header-margin: 4px 4px 0 4px;
  --jp-toolbar-active-background: var(--md-grey-300);

  /* Statusbar specific styles */

  --jp-statusbar-height: 24px;

  /* Input field styles */

  --jp-input-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-input-active-background: var(--jp-layout-color1);
  --jp-input-hover-background: var(--jp-layout-color1);
  --jp-input-background: var(--md-grey-100);
  --jp-input-border-color: var(--jp-inverse-border-color);
  --jp-input-active-border-color: var(--jp-brand-color1);
  --jp-input-active-box-shadow-color: rgba(19, 124, 189, 0.3);

  /* General editor styles */

  --jp-editor-selected-background: #d9d9d9;
  --jp-editor-selected-focused-background: #d7d4f0;
  --jp-editor-cursor-color: var(--jp-ui-font-color0);

  /* Code mirror specific styles */

  --jp-mirror-editor-keyword-color: #008000;
  --jp-mirror-editor-atom-color: #88f;
  --jp-mirror-editor-number-color: #080;
  --jp-mirror-editor-def-color: #00f;
  --jp-mirror-editor-variable-color: var(--md-grey-900);
  --jp-mirror-editor-variable-2-color: rgb(0, 54, 109);
  --jp-mirror-editor-variable-3-color: #085;
  --jp-mirror-editor-punctuation-color: #05a;
  --jp-mirror-editor-property-color: #05a;
  --jp-mirror-editor-operator-color: #a2f;
  --jp-mirror-editor-comment-color: #408080;
  --jp-mirror-editor-string-color: #ba2121;
  --jp-mirror-editor-string-2-color: #708;
  --jp-mirror-editor-meta-color: #a2f;
  --jp-mirror-editor-qualifier-color: #555;
  --jp-mirror-editor-builtin-color: #008000;
  --jp-mirror-editor-bracket-color: #997;
  --jp-mirror-editor-tag-color: #170;
  --jp-mirror-editor-attribute-color: #00c;
  --jp-mirror-editor-header-color: blue;
  --jp-mirror-editor-quote-color: #090;
  --jp-mirror-editor-link-color: #00c;
  --jp-mirror-editor-error-color: #f00;
  --jp-mirror-editor-hr-color: #999;

  /*
    RTC user specific colors.
    These colors are used for the cursor, username in the editor,
    and the icon of the user.
  */

  --jp-collaborator-color1: #ffad8e;
  --jp-collaborator-color2: #dac83d;
  --jp-collaborator-color3: #72dd76;
  --jp-collaborator-color4: #00e4d0;
  --jp-collaborator-color5: #45d4ff;
  --jp-collaborator-color6: #e2b1ff;
  --jp-collaborator-color7: #ff9de6;

  /* Vega extension styles */

  --jp-vega-background: white;

  /* Sidebar-related styles */

  --jp-sidebar-min-width: 250px;

  /* Search-related styles */

  --jp-search-toggle-off-opacity: 0.5;
  --jp-search-toggle-hover-opacity: 0.8;
  --jp-search-toggle-on-opacity: 1;
  --jp-search-selected-match-background-color: rgb(245, 200, 0);
  --jp-search-selected-match-color: black;
  --jp-search-unselected-match-background-color: var(
    --jp-inverse-layout-color0
  );
  --jp-search-unselected-match-color: var(--jp-ui-inverse-font-color0);

  /* Icon colors that work well with light or dark backgrounds */
  --jp-icon-contrast-color0: var(--md-purple-600);
  --jp-icon-contrast-color1: var(--md-green-600);
  --jp-icon-contrast-color2: var(--md-pink-600);
  --jp-icon-contrast-color3: var(--md-blue-600);

  /* Button colors */
  --jp-accept-color-normal: var(--md-blue-700);
  --jp-accept-color-hover: var(--md-blue-800);
  --jp-accept-color-active: var(--md-blue-900);
  --jp-warn-color-normal: var(--md-red-700);
  --jp-warn-color-hover: var(--md-red-800);
  --jp-warn-color-active: var(--md-red-900);
  --jp-reject-color-normal: var(--md-grey-600);
  --jp-reject-color-hover: var(--md-grey-700);
  --jp-reject-color-active: var(--md-grey-800);

  /* File or activity icons and switch semantic variables */
  --jp-jupyter-icon-color: #f37626;
  --jp-notebook-icon-color: #f37626;
  --jp-json-icon-color: var(--md-orange-700);
  --jp-console-icon-background-color: var(--md-blue-700);
  --jp-console-icon-color: white;
  --jp-terminal-icon-background-color: var(--md-grey-800);
  --jp-terminal-icon-color: var(--md-grey-200);
  --jp-text-editor-icon-color: var(--md-grey-700);
  --jp-inspector-icon-color: var(--md-grey-700);
  --jp-switch-color: var(--md-grey-400);
  --jp-switch-true-position-color: var(--md-orange-900);
}
</style>
<style type="text/css">
/* Force rendering true colors when outputing to pdf */
* {
  -webkit-print-color-adjust: exact;
}

/* Misc */
a.anchor-link {
  display: none;
}

/* Input area styling */
.jp-InputArea {
  overflow: hidden;
}

.jp-InputArea-editor {
  overflow: hidden;
}

.cm-editor.cm-s-jupyter .highlight pre {
/* weird, but --jp-code-padding defined to be 5px but 4px horizontal padding is hardcoded for pre.cm-line */
  padding: var(--jp-code-padding) 4px;
  margin: 0;

  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;

}

.jp-OutputArea-output pre {
  line-height: inherit;
  font-family: inherit;
}

.jp-RenderedText pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
}

/* Hiding the collapser by default */
.jp-Collapser {
  display: none;
}

@page {
    margin: 0.5in; /* Margin for each printed piece of paper */
}

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }
}
</style>
<!-- Load mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"> </script>
<!-- MathJax configuration -->
<script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
<!-- End of mathjax configuration --><script type="module">
  document.addEventListener("DOMContentLoaded", async () => {
    const diagrams = document.querySelectorAll(".jp-Mermaid > pre.mermaid");
    // do not load mermaidjs if not needed
    if (!diagrams.length) {
      return;
    }
    const mermaid = (await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.3/mermaid.esm.min.mjs")).default;

    mermaid.initialize({
      maxTextSize: 100000,
      startOnLoad: false,
      fontFamily: window
        .getComputedStyle(document.body)
        .getPropertyValue("--jp-ui-font-family"),
      theme: document.querySelector("body[data-jp-theme-light='true']")
        ? "default"
        : "dark",
    });

    let _nextMermaidId = 0;

    function makeMermaidImage(svg) {
      const img = document.createElement('img');
      const maxWidth = svg.match(/max-width: (\d+)/);
      if (maxWidth && maxWidth[1]) {
        const width = parseInt(maxWidth[1]);
        if (width && !Number.isNaN(width) && Number.isFinite(width)) {
          img.width = width;
        }
      }
      img.setAttribute('src', `data:image/svg+xml,${encodeURIComponent(svg)}`);
      return img;
    }

    async function makeMermaidError(text) {
      let errorMessage = '';
      try {
        await mermaid.parse(text);
      } catch (err) {
        errorMessage = `${err}`;
      }

      const result = document.createElement('details');
      const summary = document.createElement('summary');
      const pre = document.createElement('pre');
      const code = document.createElement('code');
      code.innerText = text;
      pre.appendChild(code);
      summary.appendChild(pre);
      result.appendChild(summary);

      const warning = document.createElement('pre');
      warning.innerText = errorMessage;
      result.appendChild(warning);
      return result;
    }

    async function renderOneMarmaid(src) {
      const id = `jp-mermaid-${_nextMermaidId++}`;
      const parent = src.parentNode;
      let raw = src.textContent.trim();
      const el = document.createElement("div");
      el.style.visibility = "hidden";
      document.body.appendChild(el);
      let result = null;
      try {
        const { svg } = await mermaid.render(id, raw, el);
        result = makeMermaidImage(svg);
      } catch (err) {
        parent.classList.add("jp-mod-warning");
        result = await makeMermaidError(raw);
      } finally {
        el.remove();
      }
      parent.classList.add("jp-RenderedMermaid");
      parent.appendChild(result);
    }

    void Promise.all([...diagrams].map(renderOneMarmaid));
  });
</script>
<style>
  .jp-RenderedMarkdown .jp-Mermaid:not(.jp-RenderedMermaid) {
    display: none;
  }
  .jp-RenderedMarkdown .jp-RenderedMermaid.jp-mod-warning {
    width: auto;
    padding: 10px;
    border: var(--jp-border-width) solid var(--jp-warn-color2);
    border-radius: var(--jp-border-radius);
    color: var(--jp-ui-font-color1);
    font-size: var(--jp-ui-font-size1);
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  .jp-RenderedMarkdown .jp-RenderedMermaid.jp-mod-warning details > pre {
    margin-top: 1em;
  }
  .jp-RenderedMarkdown .jp-RenderedMermaid.jp-mod-warning summary {
    color: var(--jp-warn-color2);
  }
  .jp-RenderedMarkdown .jp-RenderedMermaid.jp-mod-warning summary > pre {
    display: inline-block;
  }
  .jp-RenderedMermaid > .mermaid {
    display: none;
  }
</style>
<!-- End of mermaid configuration --></head>
<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
<main>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=b529e28a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Diagramme-&amp;-Tabellen-zu-SARS-CoV-2-in-%C3%96sterreich">Diagramme &amp; Tabellen zu SARS-CoV-2 in Österreich<a class="anchor-link" href="#Diagramme-&amp;-Tabellen-zu-SARS-CoV-2-in-%C3%96sterreich">¶</a></h1><p>Erstellt aus <a href="https://github.com/zeitferne/covidat-tools/blob/main/notebooks/covidat-old.ipynb">https://github.com/zeitferne/covidat-tools/blob/main/notebooks/covidat-old.ipynb</a></p>
<p>Datenquellen sind die AGES (<a href="https://covid19-dashboard.ages.at/">https://covid19-dashboard.ages.at/</a>) und das Gesundheitsministerium (<a href="https://info.gesundheitsministerium.gv.at/opendata">https://info.gesundheitsministerium.gv.at/opendata</a>). Hierbei werden die Bundesländermeldungen (auch genannt "Morgenmeldungen" oder "Krisenstabzahlen") direkt von <a href="https://info.gesundheitsministerium.gv.at/data/timeline-faelle-bundeslaender.csv">https://info.gesundheitsministerium.gv.at/data/timeline-faelle-bundeslaender.csv</a> bezogen, alle anderen werden über <a href="https://github.com/statistikat/coronaDAT">https://github.com/statistikat/coronaDAT</a> bezogen um auch auf historische Daten zurückgreifen zu können (die Daten selbst sind ident zu den offiziellen, allerdings steht aus offiziellen Quellen jeweils nur die aktuellste Datenversion zur Verfügung).</p>
<p>Tipp: Rechtsklicken auf die Diagramme und "in neuem Tab anzeigen" o.ä. um sie größer darzustellen.</p>
<p>Alle Angaben ohne Gewähr! Auch wenn als Datenquelle die AGES oder das Gesundheitsministerium angegeben ist, stammt die Darstellung &amp; ggf. weitere Auswertung von mir und kann fehlerhaft sein.</p>
<p>Viele Abschnitte die haupts. Informationen zur aktuellen Situation bzw. zu kurzfristigen Änderungen zeigen sind auf GitHub nicht angezeigt. Wagemutige können lokal ausführen (versuchen) und <code>DISPLAY_SHORTRANGE_DIAGS</code> von <code>= False</code> auf <code>= True</code> ändern.</p>
<h2 id="Hauptabschnitte">Hauptabschnitte<a class="anchor-link" href="#Hauptabschnitte">¶</a></h2><ul>
<li><a href="#K%C3%BCrzliche-Neuinfektionen-&amp;-Meldewesen">Meldewesen &amp; Neuinfektionen</a></li>
<li><a href="#%C3%9Cbersicht-Pandemieverlauf">Übersicht Pandemieverlauf</a></li>
<li><a href="#Hotspots-in-Bezirken-und-Altersgruppen-und-Ver%C3%A4nderung">Hotspots</a></li>
<li><a href="#Bezirke">Bezirke</a></li>
<li><a href="#Tests">Tests</a></li>
<li><a href="#Altersgruppen-und-Bundesl%C3%A4ndern">Altersgruppen</a></li>
<li><a href="#%C3%84nderungsraten">Änderungsraten</a><ul>
<li><a href="#%C3%84nderung-Inzidenz-vs.-Krankenhausbelegung-&amp;-Tote">Zusammenhänge Infektionen vs. Hospitalisierte &amp; Tote</a></li>
</ul>
</li>
<li><a href="#Hospitalisierung">Hospitalisierung</a></li>
<li><a href="#Todesf%C3%A4lle">Todesfälle</a><ul>
<li><a href="#Prognose-Todesf%C3%A4lle">Prognose Todesfälle</a></li>
</ul>
</li>
<li><a href="#Impfungen">Impfungen</a></li>
<li><a href="#Aus-der-O%C3%96-Landeskorrespondenz">OÖ Landeskorrespondenz</a></li>
<li><a href="#Verschiedenes">Verschiedenes</a></li>
<li><a href="#Abwasser">Abwasser</a></li>
<li><a href="#Varianten">Varianten</a></li>
</ul>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=36863768">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [1]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">DISPLAY_SHORTRANGE_DIAGS</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=a9552ae7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [2]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">locale</span>
<span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s2">"de_AT.UTF-8"</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=ee6b337e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [3]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="o">%</span><span class="k">precision</span> %.4f
<span class="c1">#%load_ext snakeviz</span>
<span class="kn">import</span> <span class="nn">colorcet</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">reload</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Markdown</span><span class="p">,</span> <span class="n">HTML</span>
<span class="kn">import</span> <span class="nn">textwrap</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">cycler</span> <span class="kn">import</span> <span class="n">cycler</span>

<span class="kn">from</span> <span class="nn">covidat</span> <span class="kn">import</span> <span class="n">cov</span><span class="p">,</span> <span class="n">covdata</span>
<span class="kn">from</span> <span class="nn">covidat.cov</span> <span class="kn">import</span> <span class="n">sortedlabels</span><span class="p">,</span> <span class="n">labelend2</span>

<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">precision</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'figure.figsize'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="o">*</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">9</span><span class="o">*</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'figure.dpi'</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">120</span> <span class="c1">#80</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'figure.facecolor'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'#fff'</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_theme</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">"whitegrid"</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_palette</span><span class="p">(</span><span class="s1">'tab10'</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'image.cmap'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">un_cmap</span>

<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_rows</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">min_rows</span> <span class="o">=</span> <span class="mi">40</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=383343bd">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [4]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">covidat.util</span> <span class="kn">import</span> <span class="n">COLLECTROOT</span><span class="p">,</span> <span class="n">DATAROOT</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"collect-root:"</span><span class="p">,</span> <span class="n">COLLECTROOT</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"data-root:"</span><span class="p">,</span> <span class="n">DATAROOT</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>collect-root: ...\covidat\tmpdata
data-root: ...\covidat-data\data
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=d640c6d5">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [5]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">MIDRANGE_NDAYS</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">SHORTRANGE_NDAYS</span> <span class="o">=</span> <span class="mi">91</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">DETAIL_NDAYS</span> <span class="o">=</span> <span class="mi">42</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">DETAIL_SMALL_NDAYS</span> <span class="o">=</span> <span class="mi">35</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=77b9782a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [6]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">nextday</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">dt</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Find gaps (max size 1) &amp; fill them</span>
<span class="k">def</span> <span class="nf">fixgaps1</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">namecol</span><span class="p">,</span> <span class="n">datecol</span><span class="p">,</span> <span class="n">fixcols</span><span class="p">,</span> <span class="n">allowlarge</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">followdt</span> <span class="o">=</span> <span class="n">nextday</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">datecol</span><span class="p">])</span>
    <span class="n">newdfs</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="p">]</span>
    <span class="n">groups</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">datecol</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
    <span class="nb">next</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span> <span class="c1"># Drop first</span>
    <span class="k">for</span> <span class="n">dt</span><span class="p">,</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
        <span class="n">i_dt</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
        <span class="n">n_bl</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="c1">#print(i_dt)</span>
        <span class="k">if</span> <span class="n">followdt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span> <span class="o">!=</span> <span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">():</span>
            <span class="c1">#print("Prev", df.iloc[i_dt - n_bl])</span>
            <span class="n">gapsize</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span> <span class="o">-</span> <span class="n">followdt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Gap: Expected"</span><span class="p">,</span> <span class="n">followdt</span><span class="p">,</span> <span class="s2">"found"</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="s2">"size"</span><span class="p">,</span> <span class="n">gapsize</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">gapsize</span> <span class="o">&gt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">allowlarge</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Gap larger than one day, unable to correct"</span><span class="p">)</span>
            <span class="n">prevrows</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i_dt</span> <span class="o">-</span> <span class="n">n_bl</span><span class="p">:</span><span class="n">i_dt</span><span class="p">]</span>
            <span class="n">nextrows</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i_dt</span><span class="p">:</span><span class="n">i_dt</span> <span class="o">+</span> <span class="n">n_bl</span><span class="p">]</span>
            <span class="c1">#print(prevrows.iloc[-1][datecol], nextrows.iloc[-1][datecol])</span>
            <span class="c1">#print(prevrows.iloc[0], nextrows.iloc[0])</span>
            <span class="k">for</span> <span class="n">gapidx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">gapsize</span><span class="o">.</span><span class="n">days</span><span class="p">):</span>
                <span class="n">newdf</span> <span class="o">=</span> <span class="n">prevrows</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">newdf</span><span class="p">[</span><span class="n">datecol</span><span class="p">]</span> <span class="o">=</span> <span class="n">followdt</span>
                <span class="n">coeff</span> <span class="o">=</span> <span class="p">(</span><span class="n">gapidx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">gapsize</span><span class="o">.</span><span class="n">days</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="c1">#print(gapidx, coeff)</span>
                <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">fixcols</span><span class="p">:</span>
                    <span class="n">newdf</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">prevrows</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
                        <span class="o">+</span> <span class="p">(</span><span class="n">nextrows</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="o">-</span> <span class="n">prevrows</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())</span>
                        <span class="o">*</span> <span class="n">coeff</span><span class="p">)</span>
                <span class="n">followdt</span> <span class="o">=</span> <span class="n">nextday</span><span class="p">(</span><span class="n">followdt</span><span class="p">)</span>
                <span class="n">newdfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newdf</span><span class="p">)</span>
        <span class="n">followdt</span> <span class="o">=</span> <span class="n">nextday</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">newdfs</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="n">datecol</span><span class="p">,</span> <span class="n">namecol</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=e7fccae9">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [7]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">erase_outliers</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">maxfactor</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"mean2"</span><span class="p">,</span> <span class="n">fillnan</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">series</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">outliers</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">series</span> <span class="o">&gt;</span> <span class="n">series</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">maxfactor</span><span class="p">)</span> <span class="o">|</span>
            <span class="p">(</span><span class="n">series</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span>
            <span class="p">(</span><span class="n">fillnan</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">series</span><span class="p">)))</span>
    <span class="n">nseries</span> <span class="o">=</span> <span class="n">series</span><span class="c1">#.where(~outliers)</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"mean2"</span><span class="p">:</span>
        <span class="n">series</span><span class="p">[</span><span class="n">outliers</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">nseries</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span> <span class="o">+</span> <span class="n">nseries</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"zero"</span><span class="p">:</span>
        <span class="n">series</span><span class="p">[</span><span class="n">outliers</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bad mode: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">series</span>

<span class="k">def</span> <span class="nf">dodgeannot</span><span class="p">(</span><span class="n">annots</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""annots must be a list of tuples (y, text, kwargs).</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    Modifies the list in-place to adjust Y-positions for minimal overlap.</span>
<span class="sd">    """</span>
    
    <span class="n">yrng</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="n">annots</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">changed</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">annot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">annots</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">p_annot</span> <span class="o">=</span> <span class="n">annots</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">annot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">p_annot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">yrng</span> <span class="o">*</span> <span class="mf">0.07</span><span class="p">:</span>
                <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">annots</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">annot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">yrng</span> <span class="o">*</span> <span class="mf">0.015</span> <span class="p">,</span> <span class="o">*</span><span class="n">annot</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
                <span class="n">annots</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">p_annot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">yrng</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">,</span> <span class="o">*</span><span class="n">p_annot</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    
    <span class="k">for</span> <span class="n">annot</span> <span class="ow">in</span> <span class="n">annots</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">annot</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="n">annot</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">va</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="o">**</span><span class="n">annot</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">plot_colorful_gcol</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">dates</span><span class="p">,</span> <span class="n">growth</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"Inzidenz"</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">draw1</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">mpos</span> <span class="o">=</span> <span class="n">growth</span> <span class="o">&gt;</span> <span class="mi">1</span>
    <span class="n">mgrow</span> <span class="o">=</span> <span class="n">growth</span> <span class="o">&gt;</span> <span class="n">growth</span><span class="o">.</span><span class="n">shift</span><span class="p">()</span>
    <span class="c1">#mgrow |= mgrow.shift(-1)</span>
    <span class="c1">#mgrow = mgrow.shift()</span>
    <span class="c1">#ax.stackplot([fsbl["Datum"].iloc[0], fsbl["Datum"].iloc[-1]], 1, 100, colors=["blue", "red"], alpha=0.3)</span>
    <span class="k">if</span> <span class="n">draw1</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">dates</span><span class="p">,</span> <span class="n">growth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C4"</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Steigende </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">dates</span><span class="p">,</span> <span class="n">growth</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">mpos</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Sinkende </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
        <span class="c1">#markersize=1.5</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">dates</span><span class="p">,</span> <span class="n">growth</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">mpos</span> <span class="o">&amp;</span> <span class="n">mgrow</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Verlangsamt sinkende </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
            <span class="c1">#markersize=1.5</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">dates</span><span class="p">,</span> <span class="n">growth</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mpos</span> <span class="o">&amp;</span> <span class="n">mgrow</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Beschleunigt steigende </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
        <span class="c1">#markersize=1.5</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">enrich_agd</span><span class="p">(</span><span class="n">agd</span><span class="p">,</span> <span class="n">fs</span><span class="p">):</span>
    <span class="c1">#display(agd)</span>
    <span class="n">agd</span><span class="p">[</span><span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">/</span> <span class="n">agd</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="n">agg</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"Altersgruppe"</span><span class="p">:</span> <span class="s2">"first"</span><span class="p">,</span>
            <span class="c1">#"Bundesland": "first", # Bug (slowness) with categorical dtype</span>
            <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span>
            <span class="s2">"AnzEinwohnerFixed"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span>
            <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span>
            <span class="s2">"AnzahlFaelleSum"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span>
            <span class="s2">"AnzahlTotSum"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span>
            <span class="s2">"AnzahlGeheilt"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span>
            <span class="s2">"Bundesland"</span><span class="p">:</span> <span class="s2">"first"</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="k">if</span> <span class="s2">"AnzahlFaelleMeldeDiff"</span> <span class="ow">in</span> <span class="n">agd</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">agg</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">"AnzahlFaelleMeldeDiff"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span>
        <span class="p">})</span>
    <span class="k">if</span> <span class="s2">"AgeFrom"</span> <span class="ow">in</span> <span class="n">agd</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">agg</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">"AgeFrom"</span><span class="p">:</span> <span class="s2">"first"</span><span class="p">,</span>
            <span class="s2">"AgeTo"</span><span class="p">:</span> <span class="s2">"first"</span><span class="p">,</span>
        <span class="p">})</span>
    <span class="k">if</span> <span class="s2">"FileDate"</span> <span class="ow">in</span> <span class="n">agd</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">agg</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s2">"FileDate"</span><span class="p">:</span> <span class="s2">"first"</span><span class="p">,</span>
        <span class="p">})</span>
    <span class="n">agd_sums</span> <span class="o">=</span> <span class="n">agd</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"AltersgruppeID"</span><span class="p">],</span>
        <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">group_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">agg</span><span class="p">)</span> <span class="c1"># Group over Geschlecht</span>
    
    
    <span class="k">if</span> <span class="n">fs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">per_state</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">per_state</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Alle"</span>
        <span class="c1">#per_state["Bundesland"] = "Alle"</span>
        <span class="c1">#per_state["AgeFrom"] = 0</span>
        <span class="c1">#per_state["AgeTo"] = np.iinfo(agd_sums["AgeTo"].dtype).max</span>
        <span class="n">per_state</span><span class="p">[</span><span class="s2">"AltersgruppeID"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">per_state</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"AnzahlGeheilt"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">)</span>
        <span class="n">per_state</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlGeheiltSum"</span><span class="p">:</span> <span class="s2">"AnzahlGeheilt"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">agd_sums</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">per_state</span><span class="p">,</span> <span class="n">agd_sums</span><span class="p">])</span>
        <span class="c1">#agd_sums["Bundesland"] = agd_sums["BundeslandID"].replace(cov.BUNDESLAND_BY_ID)</span>
    <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"BLCat"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="p">)</span>
    <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Gruppe"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">cat</span><span class="p">([</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]],</span> <span class="n">sep</span><span class="o">=</span><span class="s2">" "</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">,</span> <span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AltersgruppeID"</span><span class="p">],</span> <span class="mi">7</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]):</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">)</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">,</span> <span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AltersgruppeID"</span><span class="p">],</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]):</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
    <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelleProEW"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">/</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AltersgruppeID"</span><span class="p">])</span>
    <span class="n">agd_sums</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    

    
    <span class="k">return</span> <span class="n">agd_sums</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=6b0d09e1">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [8]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">load_bev</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"statat-bevstprog/latest/OGD_bevstprog_PR_BEVJD_7.csv"</span><span class="p">,</span>
                    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">"C-B00-0"</span><span class="p">:</span> <span class="s2">"BundeslandID"</span><span class="p">,</span>
                <span class="s2">"C-A10-0"</span><span class="p">:</span> <span class="s2">"Jahr"</span><span class="p">,</span>
                <span class="s2">"C-GALT5J99-0"</span><span class="p">:</span> <span class="s2">"AltersgruppeID5"</span><span class="p">,</span>
                <span class="s2">"C-C11-0"</span><span class="p">:</span> <span class="s2">"Geschlecht"</span><span class="p">,</span>
                <span class="s2">"F-S25V1"</span><span class="p">:</span> <span class="s2">"AnzEinwohner"</span>
            <span class="p">}))</span>
    <span class="n">result</span><span class="p">[</span><span class="s2">"Jahr"</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">"Jahr"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">"A10-"</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">result</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">"Jahr"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"Y"</span><span class="p">))</span>
    <span class="n">result</span><span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">"B00-"</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">result</span><span class="p">[</span><span class="s2">"Geschlecht"</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">"Geschlecht"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s2">"C11-1"</span><span class="p">:</span> <span class="s2">"M"</span><span class="p">,</span> <span class="s2">"C11-2"</span><span class="p">:</span> <span class="s2">"W"</span><span class="p">})</span>
    <span class="n">result</span><span class="p">[</span><span class="s2">"AltersgruppeID5"</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">"AltersgruppeID5"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">"GALT5J99-"</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">result</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Jahr"</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">],</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">"AltersgruppeID5"</span><span class="p">]</span>
            <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">ag5</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">ag5</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">10</span> <span class="k">if</span> <span class="n">ag5</span> <span class="o">&gt;=</span> <span class="mi">18</span> <span class="k">else</span> <span class="p">(</span><span class="n">ag5</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"AltersgruppeID"</span><span class="p">),</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">"Geschlecht"</span><span class="p">],</span>
    <span class="p">])[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">result</span>
<span class="n">statbev</span> <span class="o">=</span> <span class="n">load_bev</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=58df33de">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [9]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">origlevels</span> <span class="o">=</span> <span class="n">statbev</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
<span class="n">pandembev</span> <span class="o">=</span> <span class="p">(</span><span class="n">statbev</span><span class="p">[</span>
    <span class="p">(</span><span class="n">statbev</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"Y"</span><span class="p">))</span>
    <span class="o">&amp;</span> <span class="p">(</span><span class="n">statbev</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2024</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"Y"</span><span class="p">))])</span>
<span class="n">pandembev</span> <span class="o">=</span> <span class="n">pandembev</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"AltersgruppeID"</span><span class="p">])</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">reset_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"AltersgruppeID"</span><span class="p">],</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">"D"</span><span class="p">)</span><span class="o">.</span><span class="n">interpolate</span><span class="p">()</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">())</span>
<span class="n">pandembev</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">add_sum_rows</span><span class="p">(</span><span class="n">pandembev</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(),</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">10</span><span class="p">)[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
<span class="n">pandembev</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pandembev</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">reorder_levels</span><span class="p">(</span><span class="n">origlevels</span><span class="p">)</span>
<span class="c1"># .groupby(["BundeslandID", "AltersgruppeID", "Geschlecht"])</span>
<span class="c1"># .transform(lambda s: s.rename("AnzEinwohner").reset_index().set_index("Datum")["AnzEinwohner"].reindex(pd.date_range(fs["Datum"].min(), fs["Datum"].max()))).interpolate()).dropna()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=44334a3f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [10]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#%%time</span>
<span class="n">daydate</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="n">ages_version</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">load_day</span><span class="p">(</span><span class="s2">"Version.csv"</span><span class="p">,</span> <span class="n">daydate</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">ages_version</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ages_version</span><span class="p">[</span><span class="s2">"VersionsNr"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"V 2.7.0.0"</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">ages_version</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"AGES version update, new="</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ages_version</span><span class="p">[</span><span class="s2">"VersionsNr"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>

<span class="n">ages_vdate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">ages_version</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"CreationDate"</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">load_faelle</span><span class="p">(</span><span class="n">bev</span><span class="o">=</span><span class="n">pandembev</span><span class="p">,</span> <span class="n">daydate</span><span class="o">=</span><span class="n">daydate</span><span class="p">)</span>
<span class="n">fs</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages_vdate</span>
<span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span>
<span class="n">fs</span><span class="p">[</span><span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
<span class="n">fs</span><span class="p">[</span><span class="s2">"AnzahlFaelleProEW"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
<span class="n">fs</span><span class="p">[</span><span class="s2">"BLCat"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="p">)</span>

<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzTests"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"TestGesamt"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"TestGesamt"</span><span class="p">]</span>
    <span class="n">fs</span><span class="p">[</span><span class="s2">"TestPosRate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzTests"</span><span class="p">]</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">fs</span><span class="p">[</span><span class="s2">"TestPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"AnzTests"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">fs_at</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">hosp</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">add_date</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">load_day</span><span class="p">(</span><span class="s2">"Hospitalisierung.csv"</span><span class="p">,</span> <span class="n">daydate</span><span class="p">),</span> <span class="s2">"Meldedatum"</span><span class="p">)</span>
<span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenFreiPro100"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenFrei"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]</span> <span class="o">+</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">hosp</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
    <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenFreiPro100_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenFreiPro100"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">hosp</span><span class="p">[</span><span class="s2">"AnteilCov"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span>
<span class="n">hosp</span><span class="p">[</span><span class="s2">"AnteilNichtCov"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span>


<span class="c1">#gis_o = cov.load_gem_impfungen()</span>

<span class="n">DTFMT</span> <span class="o">=</span> <span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%c</span><span class="s2">"</span>

<span class="n">bez_orig</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">load_bezirke</span><span class="p">(</span><span class="n">daydate</span><span class="p">)</span>
<span class="n">bez</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_bez</span><span class="p">(</span><span class="n">bez_orig</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
<span class="n">bez</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages_vdate</span>

<span class="n">agd</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">load_ag</span><span class="p">(</span><span class="n">bev</span><span class="o">=</span><span class="n">pandembev</span><span class="p">,</span> <span class="n">daydate</span><span class="o">=</span><span class="n">daydate</span><span class="p">)</span>
<span class="n">agd</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages_vdate</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">agd</span><span class="p">,</span> <span class="p">[</span><span class="s2">"Gruppe"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">agd</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>

<span class="n">agd_sums</span> <span class="o">=</span> <span class="n">enrich_agd</span><span class="p">(</span><span class="n">agd</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
<span class="n">agd_sums_at</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
<span class="n">ag_to_id</span> <span class="o">=</span> <span class="n">agd_sums_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Altersgruppe"</span><span class="p">)[</span><span class="s2">"AltersgruppeID"</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">agd</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Gruppe"</span><span class="p">)</span>

<span class="n">hospfz</span> <span class="o">=</span> <span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">norm_df</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">load_day</span><span class="p">(</span><span class="s2">"CovidFallzahlen.csv"</span><span class="p">,</span> <span class="n">daydate</span><span class="p">),</span>
                      <span class="n">datecol</span><span class="o">=</span><span class="s2">"Meldedat"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">AGES_DATE_FMT</span><span class="p">)</span>
          <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">]))</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"MeldeDatum"</span><span class="p">)</span>
<span class="n">hospfz</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"Alle"</span><span class="p">,</span> <span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">hospfz</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">])[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
<span class="n">hospfz</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">ffill</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">recalc_at_hosp</span><span class="p">(</span><span class="n">hospfz</span><span class="p">):</span>
    <span class="n">scols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"FZHospFree"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">,</span> <span class="s2">"FZICUFree"</span><span class="p">]</span>
    <span class="n">hospfz_sum</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"BundeslandID != 10"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="n">scols</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="c1">#display(hospfz_sum)</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">IndexSlice</span><span class="p">[:],</span> <span class="mi">10</span><span class="p">),</span> <span class="n">scols</span><span class="p">]</span> <span class="o">=</span> <span class="n">hospfz_sum</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="c1"># MANUAL FIX according to https://coronavirus.wien.gv.at/aktuelle-kennzahlen-aus-wien/</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-02"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">456</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-03"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">455</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-04"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">444</span>
    <span class="c1"># CoV+Post+Nicht</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-05"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">103</span><span class="o">+</span><span class="mi">218</span><span class="o">+</span><span class="mi">117</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-06"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">96</span><span class="o">+</span><span class="mi">210</span><span class="o">+</span><span class="mi">111</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-07"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">101</span><span class="o">+</span><span class="mi">226</span><span class="o">+</span><span class="mi">115</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-08"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">108</span><span class="o">+</span><span class="mi">241</span><span class="o">+</span><span class="mi">115</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-09"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">105</span><span class="o">+</span><span class="mi">231</span><span class="o">+</span><span class="mi">109</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-10"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">103</span><span class="o">+</span><span class="mi">215</span><span class="o">+</span><span class="mi">110</span>
    
    <span class="n">recalc_at_hospfz</span><span class="p">(</span><span class="n">hospfz</span><span class="p">)</span>


<span class="c1">#hospfz.loc[10] = hospfz[hospfz["Bundesland"] != "Österreich"].groupby("Datum").sum(numeric_only=True).assign(Bundesland="Österreich")</span>
<span class="c1">#hospfz.loc[10, "Bundesland"] = "Österreich"</span>

<span class="n">hospfz</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">enrich_hosp_data</span><span class="p">(</span><span class="n">hospfz</span><span class="p">)</span>
<span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">hospfz</span><span class="p">)[[</span><span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">]]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Dropping All-Zero hospitalization data for "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">hospfz</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]))</span>
    <span class="n">hospfz</span> <span class="o">=</span> <span class="n">hospfz</span><span class="p">[</span><span class="n">hospfz</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">!=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]]</span>
    

<span class="n">AGES_STAMP</span> <span class="o">=</span> <span class="s2">" (AGES "</span> <span class="o">+</span> <span class="n">ages_vdate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%d</span><span class="s2">.%m.%y"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">")"</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>VersionsNr</th>
<th>VersionsDate</th>
<th>CreationDate</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>V 2.7.0.0</td>
<td>30.06.2023 00:00:00</td>
<td>30.06.2023 14:02:01</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a21835a7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [11]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">load_hist</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s2">"CovidFaelle_Timeline.csv"</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">31</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
              <span class="n">normalize</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="p">,</span> <span class="n">csv_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">ages_hist_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="p">([</span><span class="n">catcol</span><span class="p">]</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">catcol</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">catcol</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span>
    <span class="n">ages_hist</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">loadall</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">ndays</span><span class="p">,</span> <span class="n">normalize</span><span class="p">,</span> <span class="n">csv_args</span><span class="o">=</span><span class="n">csv_args</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">"Time"</span> <span class="ow">in</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">add_date</span><span class="p">(</span><span class="n">ages_hist</span><span class="p">,</span> <span class="s2">"Time"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">AGES_TIME_FMT</span><span class="p">)</span>
    <span class="n">ages_hist</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">ages_hist_keys</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ages_hist</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Loaded"</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="s2">"from"</span><span class="p">,</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"FileDate"</span><span class="p">]],</span> <span class="s2">"to"</span><span class="p">,</span>
          <span class="n">ages_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"FileDate"</span><span class="p">]],</span>
          <span class="s2">"requested"</span><span class="p">,</span> <span class="n">ndays</span><span class="p">,</span> <span class="s2">"got"</span><span class="p">,</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">())</span>
    <span class="n">sumcol</span> <span class="o">=</span> <span class="s2">"AnzahlFaelleSum"</span>
    <span class="n">dsumcol</span> <span class="o">=</span> <span class="s2">"AnzahlTotSum"</span>
    <span class="n">hsumcol</span> <span class="o">=</span> <span class="s2">"AnzahlGeheiltSum"</span>
    <span class="n">lastfiledate</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">filedate</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">lastfiledate</span> <span class="ow">and</span> <span class="n">filedate</span> <span class="o">-</span> <span class="n">lastfiledate</span> <span class="o">!=</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Gap in data between </span><span class="si">{</span><span class="n">lastfiledate</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">filedate</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">lastfiledate</span> <span class="o">=</span> <span class="n">filedate</span>
        
        <span class="n">mask</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">filedate</span>
        <span class="n">masked</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">masked</span><span class="p">,</span> <span class="n">ages_hist_keys</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="mi">7</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"AnzahlTot7Tage"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
            <span class="n">masked</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">masked</span><span class="p">[</span><span class="n">sumcol</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="n">sumcol</span><span class="p">])</span> <span class="o">/</span> <span class="n">masked</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
            <span class="n">masked</span><span class="p">[</span><span class="s2">"AnzahlTot7Tage"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">masked</span><span class="p">[</span><span class="n">dsumcol</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="n">dsumcol</span><span class="p">])</span>
        <span class="n">ages_hist</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="p">[</span><span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"AnzahlTot7Tage"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">masked</span>
    <span class="n">ages1</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">ages1</span><span class="p">,</span> <span class="n">catcol</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
        <span class="n">ages1</span><span class="p">[</span><span class="s2">"AnzahlFaelleMeldeDiff"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1</span><span class="p">[</span><span class="n">sumcol</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="n">sumcol</span><span class="p">]</span>
        <span class="n">ages1</span><span class="p">[</span><span class="s2">"AnzahlTotMeldeDiff"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1</span><span class="p">[</span><span class="n">dsumcol</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="n">dsumcol</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">hsumcol</span> <span class="ow">in</span> <span class="n">ages1</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">ages1</span><span class="p">[</span><span class="s2">"AnzahlGeheiltMeldeDiff"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1</span><span class="p">[</span><span class="n">hsumcol</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="n">hsumcol</span><span class="p">]</span>
    <span class="n">ages1m</span> <span class="o">=</span> <span class="p">(</span><span class="n">ages1</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"AnzahlFaelle"</span><span class="p">,</span>
        <span class="s2">"SiebenTageInzidenzFaelle"</span><span class="p">,</span>
        <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">,</span>
        <span class="s2">"AnzahlTot"</span><span class="p">,</span>
        <span class="s2">"AnzahlTotTaeglich"</span><span class="p">,</span>
        <span class="s2">"AnzahlGeheiltTaeglich"</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">)</span>
         <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
             <span class="s2">"AnzahlFaelleMeldeDiff"</span><span class="p">:</span> <span class="s2">"AnzahlFaelle"</span><span class="p">,</span>
             <span class="s2">"AnzahlTotMeldeDiff"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">,</span>
             <span class="s2">"AnzahlGeheiltMeldeDiff"</span><span class="p">:</span> <span class="s2">"AnzahlGeheilt"</span><span class="p">,</span>
         <span class="p">}))</span>
    <span class="n">ages1m</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1m</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">ages1m</span><span class="p">,</span> <span class="n">catcol</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]):</span>
        <span class="n">ages1m</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">ages1m</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">ages1m</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="n">catcol</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ages1</span><span class="p">,</span> <span class="n">ages1m</span><span class="p">,</span> <span class="n">ages_hist</span>

<span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"Time"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="s2">"Bundesland"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="s2">"BundeslandID"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span>
            <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s2">"AnzahlFaelleSum"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s2">"AnzahlTotSum"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s2">"AnzahlGeheiltTaeglich"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s2">"AnzahlGeheiltSum"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="n">ages1</span><span class="p">,</span> <span class="n">ages1m</span><span class="p">,</span> <span class="n">ages_hist</span> <span class="o">=</span> <span class="n">load_hist</span><span class="p">(</span><span class="n">ndays</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">csv_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">engine</span><span class="o">=</span><span class="s2">"c"</span><span class="p">,</span>
        <span class="n">dtype</span><span class="o">=</span><span class="n">cols</span><span class="p">,</span>
        <span class="n">usecols</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
    <span class="n">ages1</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="s2">"AnzahlGeheiltTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlGeheilt"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>Missing data for 2020-10-05
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Loaded CovidFaelle_Timeline.csv from Datum       2020-02-12 00:00:00
FileDate    2020-10-13 00:00:00
Name: 0, dtype: object to Datum       2023-06-29 00:00:00
FileDate    2023-06-30 00:00:00
Name: 7200979, dtype: object requested 2000 got 998
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=069cc166">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [12]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#%%prun -D program.prof</span>
<span class="c1">#%%time</span>

<span class="n">cols</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"Time"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">"Bundesland"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">"BundeslandID"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"Anzahl"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AnzahlTot"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AnzahlGeheilt"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AltersgruppeID"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"Geschlecht"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">"Altersgruppe"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="c1">#"AnzahlGeheiltTaeglich": int,</span>
        <span class="c1">#"AnzahlGeheiltSum": int,</span>
    <span class="p">}</span>
<span class="n">agd1</span><span class="p">,</span> <span class="n">agd1m</span><span class="p">,</span> <span class="n">agd_hist</span> <span class="o">=</span> <span class="n">load_hist</span><span class="p">(</span>
    <span class="s2">"CovidFaelle_Altersgruppe.csv"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">],</span> <span class="mi">52</span><span class="p">,</span>
    <span class="n">normalize</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ds</span><span class="p">:</span> <span class="n">ds</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTot"</span><span class="p">:</span> <span class="s2">"AnzahlTotSum"</span><span class="p">,</span> <span class="s2">"Anzahl"</span><span class="p">:</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">},</span> <span class="n">errors</span><span class="o">=</span><span class="s2">"raise"</span><span class="p">),</span>
    <span class="n">csv_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">engine</span><span class="o">=</span><span class="s2">"c"</span><span class="p">,</span>
        <span class="n">dtype</span><span class="o">=</span><span class="n">cols</span><span class="p">,</span>
        <span class="n">usecols</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
<span class="c1">#agd1m["Gruppe"] = agd1m["Bundesland"].str.cat(</span>
<span class="c1">#        [agd1m["Altersgruppe"], agd1m["Geschlecht"]], sep=" "</span>
<span class="c1">#    )</span>
<span class="n">agd1m</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_ag</span><span class="p">(</span><span class="n">agd1m</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"FileDate"</span><span class="p">),</span> <span class="n">parsedate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">agd_hist_o</span> <span class="o">=</span> <span class="n">agd_hist</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">agd_hist</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_ag</span><span class="p">(</span><span class="n">agd_hist</span><span class="p">,</span> <span class="n">agefromto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parsedate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">agd1</span> <span class="o">=</span> <span class="n">agd_hist</span><span class="p">[</span><span class="n">agd_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">agd_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">agd1</span> <span class="o">=</span> <span class="n">agd1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">agd1m</span><span class="p">[[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"AnzahlFaelleMeldeDiff"</span><span class="p">}),</span>
           <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">],</span>
           <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">],</span>
                 <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">"_x"</span><span class="p">))</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"Datum_x"</span><span class="p">])</span>
<span class="n">agd1m_sums</span> <span class="o">=</span> <span class="n">enrich_agd</span><span class="p">(</span><span class="n">agd1m</span><span class="p">,</span> <span class="n">ages1m</span><span class="p">)</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">agd1m</span><span class="p">,</span> <span class="p">[</span><span class="s2">"Gruppe"</span><span class="p">],</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">agd1m</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd1m</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>

<span class="n">cols</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"Time"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="c1">#"Bundesland": str,</span>
        <span class="s2">"GKZ"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"Bezirk"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AnzahlFaelleSum"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">"AnzahlTotSum"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="c1">#"AnzahlGeheiltTaeglich": int,</span>
        <span class="c1">#"AnzahlGeheiltSum": int,</span>
    <span class="p">}</span>
<span class="n">bez1</span><span class="p">,</span> <span class="n">bez1m</span><span class="p">,</span> <span class="n">bez_hist</span> <span class="o">=</span> <span class="n">load_hist</span><span class="p">(</span><span class="s2">"CovidFaelle_Timeline_GKZ.csv"</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="n">csv_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">engine</span><span class="o">=</span><span class="s2">"c"</span><span class="p">,</span>
        <span class="n">dtype</span><span class="o">=</span><span class="n">cols</span><span class="p">,</span>
        <span class="n">usecols</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
<span class="n">bez1m</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_bez</span><span class="p">(</span><span class="n">bez1m</span><span class="p">,</span> <span class="n">ages1m</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Loaded CovidFaelle_Altersgruppe.csv from Datum       2020-02-26 00:00:00
FileDate    2023-05-10 00:00:00
Name: 0, dtype: object to Datum       2023-06-29 00:00:00
FileDate    2023-06-30 00:00:00
Name: 12422799, dtype: object requested 52 got 52
Loaded CovidFaelle_Timeline_GKZ.csv from Datum       2020-02-26 00:00:00
FileDate    2023-05-10 00:00:00
Name: 0, dtype: object to Datum       2023-06-29 00:00:00
FileDate    2023-06-30 00:00:00
Name: 5838715, dtype: object requested 52 got 52
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=25e06f38">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [13]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ems_o</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/morgenmeldung/timeline-faelle-ems.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">)</span>
<span class="n">ems_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">ems_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_TIME_TZ_FMT</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"EMS"</span><span class="p">,</span> <span class="n">ems_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">ems_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
<span class="n">ems_o</span> <span class="o">=</span> <span class="n">fixgaps1</span><span class="p">(</span><span class="n">ems_o</span><span class="p">,</span> <span class="s2">"Name"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"BestaetigteFaelleEMS"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>EMS 2022-09-12 08:00:00+02:00 2021-03-01 08:00:00+01:00
Gap: Expected 2021-11-14 08:00:00+01:00 found 2021-11-15 08:00:00+01:00 size 1 days 00:00:00
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=89954c13">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [14]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mms_o</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/morgenmeldung/timeline-faelle-bundeslaender.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span>
    <span class="c1">#encoding="cp1252"</span>
<span class="p">)</span>
<span class="n">mms_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">mms_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_TIME_TZ_FMT</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"BMI"</span><span class="p">,</span> <span class="n">mms_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">mms_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>BMI 2022-09-12 09:30:00+02:00 2021-03-01 09:30:00+01:00
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=00bf2464">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [15]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">load_apo</span><span class="p">(</span><span class="n">enc</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
        <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/morgenmeldung/timeline-testungen-apotheken-betriebe.csv"</span><span class="p">,</span>
        <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s2">","</span><span class="p">,</span> <span class="n">thousands</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">enc</span><span class="p">,</span>
        <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">"Datum"</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">apo_o</span> <span class="o">=</span> <span class="n">load_apo</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
    <span class="n">apo_o</span> <span class="o">=</span> <span class="n">load_apo</span><span class="p">(</span><span class="s2">"cp1252"</span><span class="p">)</span>
<span class="n">apo_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">apo_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">AGES_DATE_FMT</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Apotheken"</span><span class="p">,</span> <span class="n">apo_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">apo_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Apotheken 2023-06-25 02:00:00+02:00 2021-02-15 01:00:00+01:00
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=9a16f85d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [16]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">reinf_o</span> <span class="o">=</span> <span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/ages-ems-extra/Reinfektionen_latest.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span>
           <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"Monat"</span><span class="p">:</span> <span class="s2">"Datum"</span><span class="p">}))</span>
<span class="n">reinf</span> <span class="o">=</span> <span class="n">reinf_o</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum != ''"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">reinf</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span>
    <span class="n">reinf</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span>
        <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"Jan"</span><span class="p">,</span> <span class="s2">"Jän"</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"Mrz"</span><span class="p">,</span> <span class="s2">"Mär"</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">"%b %y"</span><span class="p">)</span>
<span class="n">reinf</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=b01b1093">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [17]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span>
<span class="sa">f</span><span class="s2">"""</span>
<span class="s2">&lt;p&gt;&lt;strong&gt;Auswertung vom:&lt;/strong&gt; </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">DTFMT</span><span class="p">)</span><span class="si">}</span>
<span class="s2">&lt;p&gt;&lt;strong&gt;Letzte enthaltene Daten vom:&lt;/strong&gt;</span>
<span class="s2">&lt;ul&gt;</span>
<span class="s2">  &lt;li&gt; AGES: </span><span class="si">{</span><span class="n">ages_vdate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">DTFMT</span><span class="p">)</span><span class="si">}</span>
<span class="s2">  </span>
<span class="s2">      </span><span class="si">{</span><span class="n">ages_version</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="si">}</span>
<span class="s2">  &lt;/li&gt;</span>
<span class="s2">  &lt;li&gt; EMS Morgenmeldungen: </span><span class="si">{</span><span class="n">ems_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">DTFMT</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/li&gt;</span>
<span class="s2">  &lt;li&gt; Bundesländermeldungen: </span><span class="si">{</span><span class="n">mms_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">DTFMT</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/li&gt;</span>
<span class="s2">  &lt;li&gt; Apotheken-Tests: </span><span class="si">{</span><span class="n">apo_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">DTFMT</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/li&gt;</span>
<span class="s2">&lt;/ul&gt;</span>
<span class="s2">"""</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<p><strong>Auswertung vom:</strong> Di. 25.07.2023 22:02:40
<p><strong>Letzte enthaltene Daten vom:</strong>
<ul>
<li> AGES: Fr. 30.06.2023 14:02:01

      <table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>VersionsNr</th>
<th>VersionsDate</th>
<th>CreationDate</th>
</tr>
</thead>
<tbody>
<tr>
<td>V 2.7.0.0</td>
<td>30.06.2023 00:00:00</td>
<td>30.06.2023 14:02:01</td>
</tr>
</tbody>
</table>
</li>
<li> EMS Morgenmeldungen: Mo. 12.09.2022 08:00:00</li>
<li> Bundesländermeldungen: Mo. 12.09.2022 09:30:00</li>
<li> Apotheken-Tests: So. 25.06.2023 02:00:00</li>
</ul>
</p></p></div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=f43395a9">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [18]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">doubling_time</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
    <span class="c1"># x * g**t = 2x # Solve for t</span>
    <span class="c1"># g**t = 2</span>
    <span class="c1"># log(g) * t = log(2)</span>
    <span class="c1"># t = log(2) / log(g)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=1c915eb1">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [19]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="mi">7</span><span class="o">*</span><span class="n">doubling_time</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">fs_at</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"inz_g7"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[19]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>-13.3784</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=623eb53d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [20]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">pctc</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">emoji</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">percent</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">"±0"</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span>
        <span class="nb">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="s2">"+n"</span><span class="p">)</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mf">1.995</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">else</span>
        <span class="nb">format</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s2">"+.2n"</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"-"</span><span class="p">,</span> <span class="s2">"‒"</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">,</span> <span class="s2">"∞"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">percent</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="s2">"%"</span>
    <span class="k">if</span> <span class="n">emoji</span><span class="p">:</span>
        <span class="k">if</span> <span class="mf">0.97</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mf">1.03</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">):</span> <span class="c1"># 2 weeks halving</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">" ⏬"</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">" ↘"</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># 1 weeks doubling</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">" 🔥"</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">):</span> <span class="c1"># 2 weeks doubling</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">" ⏫"</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s2">" ↗"</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=02033272">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [21]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[21]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>1.4142</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=85c83b88">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [22]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">agd1_sums</span> <span class="o">=</span> <span class="n">enrich_agd</span><span class="p">(</span><span class="n">agd1</span><span class="p">,</span> <span class="n">ages1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=136a6dd1">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [23]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ages_old</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">ages_old</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ages_old2</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">ages_old2</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ages_old7</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">ages_old7</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">agd_old</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_ag</span><span class="p">(</span><span class="n">agd_hist</span><span class="p">[</span><span class="n">agd_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">agd_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">agefromto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parsedate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">agd_old2</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_ag</span><span class="p">(</span><span class="n">agd_hist</span><span class="p">[</span><span class="n">agd_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">agd_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">agefromto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parsedate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">agd_old7</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_ag</span><span class="p">(</span><span class="n">agd_hist</span><span class="p">[</span><span class="n">agd_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">agd_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">agefromto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parsedate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">for</span> <span class="n">agdh</span> <span class="ow">in</span> <span class="p">(</span><span class="n">agd_old</span><span class="p">,</span> <span class="n">agd_old2</span><span class="p">,</span> <span class="n">agd_old7</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">agdh</span><span class="p">,</span> <span class="p">[</span><span class="s2">"Gruppe"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
        <span class="n">agdh</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agdh</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
<span class="n">agd_sums_old</span> <span class="o">=</span> <span class="n">enrich_agd</span><span class="p">(</span><span class="n">agd_old</span><span class="p">,</span> <span class="n">ages_old</span><span class="p">)</span>
<span class="n">agd_sums_old2</span> <span class="o">=</span> <span class="n">enrich_agd</span><span class="p">(</span><span class="n">agd_old2</span><span class="p">,</span> <span class="n">ages_old2</span><span class="p">)</span>
<span class="n">agd_sums_old7</span> <span class="o">=</span> <span class="n">enrich_agd</span><span class="p">(</span><span class="n">agd_old7</span><span class="p">,</span> <span class="n">ages_old7</span><span class="p">)</span>

<span class="n">bez_old</span> <span class="o">=</span> <span class="n">bez_hist</span><span class="p">[</span><span class="n">bez_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bez_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">bez_old</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">bez_old</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_bez</span><span class="p">(</span><span class="n">bez_old</span><span class="p">,</span> <span class="n">ages_old</span><span class="p">)</span>

<span class="n">bez_old2</span> <span class="o">=</span> <span class="n">bez_hist</span><span class="p">[</span><span class="n">bez_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bez_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">bez_old2</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">bez_old2</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_bez</span><span class="p">(</span><span class="n">bez_old2</span><span class="p">,</span> <span class="n">ages_old2</span><span class="p">)</span>

<span class="n">bez_old7</span> <span class="o">=</span> <span class="n">bez_hist</span><span class="p">[</span><span class="n">bez_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bez_hist</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">bez_old7</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">bez_old7</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">enrich_bez</span><span class="p">(</span><span class="n">bez_old7</span><span class="p">,</span> <span class="n">ages_old7</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c4f38726">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [24]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">schul_o</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/morgenmeldung/timeline-testungen-schulen.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span>
    <span class="c1">#encoding="cp1252"</span>
<span class="p">)</span>
<span class="n">schul_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">schul_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_DATE_FMT</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"timeline-testungen-schulen"</span><span class="p">,</span> <span class="n">schul_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">schul_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>timeline-testungen-schulen 2022-07-01 02:00:00+02:00 2021-04-23 02:00:00+02:00
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=94474d5f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [25]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">bltest_o</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/morgenmeldung/timeline-testungen-bundeslaender.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span>
    <span class="c1">#encoding="cp1252"</span>
<span class="p">)</span>
<span class="n">bltest_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">bltest_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_TIME_TZ_FMT</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"timeline-testungen-bundeslaender"</span><span class="p">,</span> <span class="n">bltest_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">bltest_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>timeline-testungen-bundeslaender 2023-06-26 09:30:00+02:00 2021-03-01 09:30:00+01:00
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=d99c4402">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [26]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">schul</span> <span class="o">=</span> <span class="n">schul_o</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">schul</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">schul</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">schul</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">schul</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">,</span>
    <span class="s2">"TestungenSchulenPCR"</span><span class="p">:</span> <span class="s2">"PCRSum"</span><span class="p">,</span>
    <span class="s2">"TestungenSchulen"</span><span class="p">:</span> <span class="s2">"TestsSum"</span><span class="p">,</span>
    <span class="s2">"TestungenSchulenAntigen"</span><span class="p">:</span> <span class="s2">"AntigenSum"</span><span class="p">},</span>
             <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">schul</span><span class="p">[</span><span class="s2">"PCRSum"</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">schul</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span> <span class="o">=</span> <span class="n">schul</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)[</span><span class="s2">"PCRSum"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">diff</span><span class="p">())</span>
<span class="n">schul</span><span class="p">[</span><span class="s2">"Tests"</span><span class="p">]</span> <span class="o">=</span> <span class="n">schul</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)[</span><span class="s2">"TestsSum"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">diff</span><span class="p">())</span>
<span class="c1">#schul.loc[np.isnan(schul["PCR"]), "PCR"] = schul["PCRSum"]</span>

<span class="n">schul</span><span class="p">[</span><span class="s2">"Antigen"</span><span class="p">]</span> <span class="o">=</span> <span class="n">schul</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)[</span><span class="s2">"AntigenSum"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">diff</span><span class="p">())</span>
<span class="c1">#schul.loc[np.isnan(schul["Antigen"]), "Antigen"] = schul["AntigenSum"]</span>

<span class="n">apo</span> <span class="o">=</span> <span class="n">apo_o</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">apo</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">,</span>
    <span class="s2">"TestungenApothekenPCR"</span><span class="p">:</span> <span class="s2">"PCRSum"</span><span class="p">,</span>
    <span class="s2">"TestungenApotheken"</span><span class="p">:</span> <span class="s2">"TestsSum"</span><span class="p">,</span>
    <span class="s2">"TestungenApothekenAntigen"</span><span class="p">:</span> <span class="s2">"AntigenSum"</span><span class="p">,</span>
    <span class="s2">"TestungenBetriebe"</span><span class="p">:</span> <span class="s2">"TestsBetriebSum"</span><span class="p">})</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">apo</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">colname</span> <span class="ow">in</span> <span class="n">apo</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">colname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"Sum"</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">apo</span><span class="p">[</span><span class="n">colname</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s2">"Sum"</span><span class="p">)]]</span> <span class="o">=</span> <span class="n">apo</span><span class="p">[</span><span class="n">colname</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="n">colname</span><span class="p">]</span>
<span class="n">apo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">apo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">apo</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=692fb115">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [27]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">rollupneg</span><span class="p">(</span><span class="n">vs</span><span class="p">):</span>
    <span class="n">poscount</span> <span class="o">=</span> <span class="n">vs</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="n">gs</span> <span class="o">=</span> <span class="n">vs</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">poscount</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">gs</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

<span class="c1">#data = pd.Series([100, -10, -20, 10, 4, -1], name="d")</span>
<span class="c1">#corr = rollupneg(data).sort_index().rename("c")</span>
<span class="c1">#display(pd.DataFrame((data, corr)).T)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=e9d489db">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [28]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">rollupallneg</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">rollupneg</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="n">mask_at</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">10</span>
    <span class="c1">#print(len(mask_at[mask_at]))</span>
    <span class="n">corrcols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span>
    <span class="n">sums</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">mask_at</span><span class="p">,</span> <span class="n">corrcols</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"Datum"</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="c1">#display(sums)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask_at</span><span class="p">,</span> <span class="n">corrcols</span><span class="p">]</span> <span class="o">=</span> <span class="n">sums</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="c1"># TODO: Join by date for correct historical data</span>
<span class="n">ew_by_bundesland</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

<span class="n">ems</span> <span class="o">=</span> <span class="n">ems_o</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"BestaetigteFaelleEMS"</span><span class="p">:</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">})</span>
<span class="n">ems</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ems</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">ew_by_bundesland</span><span class="p">)</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">ems</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">ems</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ems</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span>
<span class="c1">#rollupallneg(ems)</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">ems</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">ems</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">ems</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">ems</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span>

<span class="n">mms</span> <span class="o">=</span> <span class="n">mms_o</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">mms</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">,</span>
    <span class="s2">"Intensivstation"</span><span class="p">:</span> <span class="s2">"FZICU"</span><span class="p">,</span>
    <span class="s2">"Hospitalisierung"</span><span class="p">:</span> <span class="s2">"FZHosp"</span><span class="p">,</span>
    <span class="s2">"BestaetigteFaelleBundeslaender"</span><span class="p">:</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">,</span>
    <span class="s2">"Todesfaelle"</span><span class="p">:</span> <span class="s2">"AnzahlTotSum"</span><span class="p">,</span>
    <span class="s2">"Genesen"</span><span class="p">:</span> <span class="s2">"AnzahlGeheiltSum"</span><span class="p">,</span>
    <span class="s2">"Testungen"</span><span class="p">:</span> <span class="s2">"TestsSum"</span><span class="p">,</span>
    <span class="s2">"TestungenPCR"</span><span class="p">:</span> <span class="s2">"PCRSum"</span><span class="p">,</span>
    <span class="s2">"TestungenAntigen"</span><span class="p">:</span> <span class="s2">"AntigenSum"</span><span class="p">})</span>
<span class="n">mms</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">-=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span>
<span class="n">mms</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="c1">#mms["AnzahlFaelleSum"] = mms["AnzahlFaelleSum"].str.replace(",00", "").str.replace(".", "", regex=False)</span>
<span class="n">mms</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">mms</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
<span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mms</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]),</span> <span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ew_by_bundesland</span><span class="p">)</span>
<span class="n">mms</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">rowkey</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-12-12"</span><span class="p">))</span>
<span class="n">prevkey</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-12-11"</span><span class="p">))</span><span class="c1">#</span>
<span class="c1">#print(mms.loc[rowkey, "AnzahlFaelleSum"])</span>
<span class="k">if</span> <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">rowkey</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">prevkey</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]:</span>
    <span class="c1">#print("corr!")</span>
    <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">rowkey</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">prevkey</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">+</span>
         <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="mi">9</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-12-13"</span><span class="p">)),</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">])</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="mi">10</span><span class="p">,</span> <span class="n">rowkey</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">IndexSlice</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">9</span><span class="p">],</span> <span class="n">rowkey</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="c1">#print(mms.loc[rowkey])</span>
<span class="n">mms</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">add_unsum</span><span class="p">(</span><span class="n">mms</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">colname</span> <span class="ow">in</span> <span class="n">mms</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">colname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"Sum"</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">dcol</span> <span class="o">=</span> <span class="n">colname</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s2">"Sum"</span><span class="p">)]</span>
            <span class="c1">#print(colname, dcol)</span>
            <span class="n">mms</span><span class="p">[</span><span class="n">dcol</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="n">colname</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="n">colname</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">add_unsum</span><span class="p">(</span><span class="n">mms</span><span class="p">)</span>

<span class="c1">#rollupallneg(mms)</span>

<span class="k">def</span> <span class="nf">enrich_mms</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="n">apo</span><span class="p">,</span> <span class="n">schul</span><span class="p">):</span>
    <span class="n">mms</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">apolast</span> <span class="o">=</span> <span class="n">apo</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">apovalid</span> <span class="o">=</span> <span class="n">apo</span><span class="c1">#[apo.index.get_level_values("Datum") != apolast]</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">erase_outliers</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
    <span class="c1">#mms["PCR"] = mms["PCR"].clip(lower=0)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRApo"</span><span class="p">]</span> <span class="o">=</span> <span class="n">apovalid</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"AGApo"</span><span class="p">]</span> <span class="o">=</span> <span class="n">apovalid</span><span class="p">[</span><span class="s2">"Antigen"</span><span class="p">]</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsApo"</span><span class="p">]</span> <span class="o">=</span> <span class="n">apovalid</span><span class="p">[</span><span class="s2">"Tests"</span><span class="p">]</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRReg"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span> <span class="o">+</span> <span class="n">apo</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">apo</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"Steiermark"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)[</span><span class="s2">"PCR"</span><span class="p">]</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"AGReg"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"Antigen"</span><span class="p">]</span> <span class="o">+</span> <span class="n">apo</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">apo</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"Steiermark"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)[</span><span class="s2">"Antigen"</span><span class="p">]</span>
    <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="mi">10</span><span class="p">,),</span> <span class="s2">"PCRReg"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)[</span><span class="s2">"PCRReg"</span><span class="p">]</span>
        <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">min_count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="o">.</span><span class="n">to_numpy</span><span class="p">())</span>
    <span class="c1">#mms["PCRReg"] = mms["PCR"].add(apo["PCR"])</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsReg"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"Tests"</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">apo</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">apo</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"Steiermark"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)[</span><span class="s2">"Tests"</span><span class="p">])</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">apo</span><span class="p">[</span><span class="s2">"TestsBetrieb"</span><span class="p">],</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRAlle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRReg"</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">schul</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">],</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsAlle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsReg"</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">schul</span><span class="p">[</span><span class="s2">"Tests"</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">schul</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"Wien"</span><span class="p">),</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRAlle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRReg"</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">schul</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">schul</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"Wien"</span><span class="p">),</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">at_tests</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)[[</span><span class="s2">"TestsAlle"</span><span class="p">,</span> <span class="s2">"PCRAlle"</span><span class="p">]]</span>
        <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
    <span class="c1">#display(at_tests)</span>
    <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="p">[</span><span class="s2">"TestsAlle"</span><span class="p">,</span> <span class="s2">"PCRAlle"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">at_tests</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
    <span class="n">mms</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRPosRate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRRPosRate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRReg"</span><span class="p">]</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRAPosRate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRAlle"</span><span class="p">]</span>

    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
        <span class="n">faelle7</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">faelle7</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRAPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">faelle7</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRAlle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsAPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">faelle7</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsAlle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">faelle7</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRReg"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsRPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">faelle7</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsReg"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsBLPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">faelle7</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"Tests"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRInz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"PCR"</span><span class="p">)</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"AGInz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"Antigen"</span><span class="p">)</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"AGRInz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"AGReg"</span><span class="p">)</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRAInz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"PCRAlle"</span><span class="p">)</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRRInz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"PCRReg"</span><span class="p">)</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsRInz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"TestsReg"</span><span class="p">)</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"TestsBLInz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"Tests"</span><span class="p">)</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"PCRPosRate_a14"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_hosp_data</span><span class="p">(</span><span class="n">mms</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="o">-</span><span class="mi">14</span><span class="p">):</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"FZICU_a3_lag"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"FZICU_a3"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"FZHosp_a3_lag"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"FZHosp_a3"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"FZICU_a3_lag"</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"FZHosp_a3_lag"</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span>
    
<span class="n">mms_unenriched</span> <span class="o">=</span> <span class="n">mms</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">enrich_mms</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="n">apo</span><span class="p">,</span> <span class="n">schul</span><span class="p">)</span>

<span class="n">MMS_STAMP</span> <span class="o">=</span> <span class="s2">" (Krisenstab "</span> <span class="o">+</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%d</span><span class="s2">.%m.%y"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">")"</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=369c7860">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [29]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">load_bltest</span><span class="p">():</span>
    <span class="n">bltest</span> <span class="o">=</span> <span class="n">bltest_o</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">,</span>
        <span class="s2">"Testungen"</span><span class="p">:</span> <span class="s2">"TestsSum"</span><span class="p">,</span>
        <span class="s2">"TestungenPCR"</span><span class="p">:</span> <span class="s2">"PCRSum"</span><span class="p">,</span>
        <span class="s2">"TestungenAntigen"</span><span class="p">:</span> <span class="s2">"AntigenSum"</span><span class="p">})</span>
    <span class="n">bltest</span> <span class="o">=</span> <span class="n">bltest</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">bltest</span><span class="p">[</span><span class="s2">"TestsSum"</span><span class="p">])]</span> <span class="c1"># Punch holes &amp; fix them</span>
    <span class="n">bltest_at</span> <span class="o">=</span> <span class="n">bltest</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
    <span class="n">zdates</span> <span class="o">=</span> <span class="n">bltest_at</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">bltest_at</span><span class="p">[</span><span class="s2">"TestsSum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bltest_at</span><span class="o">.</span><span class="n">shift</span><span class="p">()[</span><span class="s2">"TestsSum"</span><span class="p">]][</span><span class="s2">"Datum"</span><span class="p">]</span>
    <span class="n">bltest</span> <span class="o">=</span> <span class="n">bltest</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="p">(</span><span class="n">bltest</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-10-01"</span><span class="p">))</span>
        <span class="o">|</span> <span class="o">~</span><span class="n">bltest</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">zdates</span><span class="p">)]</span>
    <span class="n">bltest</span> <span class="o">=</span> <span class="n">fixgaps1</span><span class="p">(</span>
        <span class="n">bltest</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="s2">"Bundesland"</span><span class="p">,</span>
        <span class="s2">"Datum"</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">"TestsSum"</span><span class="p">,</span> <span class="s2">"PCRSum"</span><span class="p">,</span> <span class="s2">"AntigenSum"</span><span class="p">],</span>
        <span class="n">allowlarge</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">bltest</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bltest</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
    <span class="c1">#bltest.sort_values(["BundeslandID", "Datum"], inplace=True)</span>
    <span class="c1">#bltest["TestsSum"].ffill(inplace=True)</span>
    <span class="c1">#bltest["PCRSum"].ffill(inplace=True)</span>
    <span class="c1">#bltest["AntigenSum"].ffill(inplace=True)</span>
    <span class="n">add_unsum</span><span class="p">(</span><span class="n">bltest</span><span class="p">)</span>
    <span class="n">bltest</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#display(bltest.loc[(pd.to_datetime("2022-11-10") -  timedelta(14), "Tirol")])</span>
    <span class="n">bltest</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-10"</span><span class="p">),</span> <span class="s2">"Tirol"</span><span class="p">),</span> <span class="s2">"PCR"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">bltest</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-10"</span><span class="p">)</span> <span class="o">-</span>  <span class="n">timedelta</span><span class="p">(</span><span class="mi">14</span><span class="p">),</span> <span class="s2">"Tirol"</span><span class="p">),</span> <span class="s2">"PCR"</span><span class="p">])</span>
    <span class="n">bltest</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="s2">"Österreich"</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">bltest</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
    <span class="c1">#display(bltest.query("Bundesland != 'Österreich'").groupby("Datum").sum())</span>
    <span class="n">bltest</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="s2">"Österreich"</span><span class="p">),</span> <span class="s2">"BundeslandID"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="c1">#bltest.groupby(level="Bundesland")</span>
    <span class="k">return</span> <span class="n">bltest</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">bltest</span> <span class="o">=</span> <span class="n">load_bltest</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Gap: Expected 2022-10-01 09:30:00+02:00 found 2022-10-03 09:30:00+02:00 size 2 days 00:00:00
Gap: Expected 2022-10-08 09:30:00+02:00 found 2022-10-10 09:30:00+02:00 size 2 days 00:00:00
Gap: Expected 2022-10-15 09:30:00+02:00 found 2022-10-17 09:30:00+02:00 size 2 days 00:00:00
Gap: Expected 2022-10-22 09:30:00+02:00 found 2022-10-24 09:30:00+02:00 size 2 days 00:00:00
Gap: Expected 2022-10-26 09:30:00+02:00 found 2022-10-27 09:30:00+02:00 size 1 days 00:00:00
Gap: Expected 2022-10-29 09:30:00+02:00 found 2022-10-31 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2022-11-01 08:30:00+01:00 found 2022-11-02 08:30:00+01:00 size 1 days 00:00:00
Gap: Expected 2022-11-05 08:30:00+01:00 found 2022-11-07 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2022-11-12 08:30:00+01:00 found 2022-11-14 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2022-11-19 08:30:00+01:00 found 2022-11-21 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2022-11-26 08:30:00+01:00 found 2022-11-28 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2022-12-03 08:30:00+01:00 found 2022-12-05 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2022-12-08 08:30:00+01:00 found 2022-12-09 08:30:00+01:00 size 1 days 00:00:00
Gap: Expected 2022-12-10 08:30:00+01:00 found 2022-12-12 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2022-12-17 08:30:00+01:00 found 2022-12-19 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2022-12-24 08:30:00+01:00 found 2022-12-27 08:30:00+01:00 size 3 days 00:00:00
Gap: Expected 2022-12-31 08:30:00+01:00 found 2023-01-02 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-01-06 08:30:00+01:00 found 2023-01-09 08:30:00+01:00 size 3 days 00:00:00
Gap: Expected 2023-01-14 08:30:00+01:00 found 2023-01-16 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-01-21 08:30:00+01:00 found 2023-01-23 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-01-28 08:30:00+01:00 found 2023-01-30 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-02-04 08:30:00+01:00 found 2023-02-06 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-02-11 08:30:00+01:00 found 2023-02-13 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-02-18 08:30:00+01:00 found 2023-02-20 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-02-25 08:30:00+01:00 found 2023-02-27 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-03-04 08:30:00+01:00 found 2023-03-06 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-03-11 08:30:00+01:00 found 2023-03-13 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-03-18 08:30:00+01:00 found 2023-03-20 08:30:00+01:00 size 2 days 00:00:00
Gap: Expected 2023-03-25 08:30:00+01:00 found 2023-03-27 09:30:00+02:00 size 2 days 00:00:00
Gap: Expected 2023-04-01 09:30:00+02:00 found 2023-04-03 09:30:00+02:00 size 2 days 00:00:00
Gap: Expected 2023-04-08 09:30:00+02:00 found 2023-04-11 09:30:00+02:00 size 3 days 00:00:00
Gap: Expected 2023-04-15 09:30:00+02:00 found 2023-04-17 09:30:00+02:00 size 2 days 00:00:00
Gap: Expected 2023-04-22 09:30:00+02:00 found 2023-04-24 09:30:00+02:00 size 2 days 00:00:00
Gap: Expected 2023-04-29 09:30:00+02:00 found 2023-05-02 09:30:00+02:00 size 3 days 00:00:00
Gap: Expected 2023-05-03 09:30:00+02:00 found 2023-05-08 09:30:00+02:00 size 5 days 00:00:00
Gap: Expected 2023-05-09 09:30:00+02:00 found 2023-05-15 09:30:00+02:00 size 6 days 00:00:00
Gap: Expected 2023-05-16 09:30:00+02:00 found 2023-05-22 09:30:00+02:00 size 6 days 00:00:00
Gap: Expected 2023-05-23 09:30:00+02:00 found 2023-05-30 09:30:00+02:00 size 7 days 00:00:00
Gap: Expected 2023-05-31 09:30:00+02:00 found 2023-06-05 09:30:00+02:00 size 5 days 00:00:00
Gap: Expected 2023-06-06 09:30:00+02:00 found 2023-06-12 09:30:00+02:00 size 6 days 00:00:00
Gap: Expected 2023-06-13 09:30:00+02:00 found 2023-06-19 09:30:00+02:00 size 6 days 00:00:00
Gap: Expected 2023-06-20 09:30:00+02:00 found 2023-06-26 09:30:00+02:00 size 6 days 00:00:00
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=81f7ae8c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [30]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">haveages</span> <span class="o">=</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span>
<span class="n">havehosp</span> <span class="o">=</span> <span class="n">haveages</span> <span class="ow">and</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">havehosp</span><span class="si">=}</span><span class="s2">"</span><span class="p">)</span>

<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">ages_hist</span><span class="p">,</span> <span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"FileDate"</span><span class="p">],</span> <span class="mi">14</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"AnzahlFaelle14Tage"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlFaelle14Tage"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">ages_hist</span><span class="p">,</span> <span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"FileDate"</span><span class="p">],</span> <span class="mi">21</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"AnzahlToteXTage"</span><span class="p">,</span> <span class="s2">"AnzahlGeheiltXTage"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlToteXTage"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
    <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlGeheiltXTage"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlGeheiltSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlGeheiltSum"</span><span class="p">]</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">ages_hist</span><span class="p">,</span> <span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"FileDate"</span><span class="p">],</span> <span class="mi">365</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"AnzahlTote1J"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlTote1J"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
<span class="n">ages_hist</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlTote1J"</span><span class="p">]),</span> <span class="s2">"AnzahlTote1J"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
<span class="n">ages1x</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]]</span>
<span class="n">ages2x</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]]</span>
<span class="c1">#(ages_hist_f.iloc[tod][tod]["AnzahlFaelle"] +</span>
<span class="c1">#     ages_hist_f[tod][tod - 1]["AnzahlFaelle14Tage"] -</span>
<span class="c1">#     ages_hist_f[tod - 1][tod - 1]["AnzahlFaelle14Tage"])</span>
<span class="n">idxc</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">]</span>
<span class="n">ages1mx</span> <span class="o">=</span> <span class="p">(</span><span class="n">ages1</span>
           <span class="o">.</span><span class="n">copy</span><span class="p">()</span>
           <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span>
           <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"FileDate"</span><span class="p">:</span> <span class="s2">"Datum"</span><span class="p">})</span>
           <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">idxc</span><span class="p">))</span>
<span class="n">nmsrecent</span> <span class="o">=</span> <span class="p">(</span><span class="n">ages2x</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">idxc</span><span class="p">)[[</span><span class="s2">"AnzahlFaelle14Tage"</span><span class="p">,</span> <span class="s2">"AnzahlToteXTage"</span><span class="p">,</span> <span class="s2">"AnzahlGeheiltXTage"</span><span class="p">]]</span>
         <span class="o">-</span> <span class="n">ages1x</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">idxc</span><span class="p">)[[</span><span class="s2">"AnzahlFaelle14Tage"</span><span class="p">,</span> <span class="s2">"AnzahlToteXTage"</span><span class="p">,</span> <span class="s2">"AnzahlGeheiltXTage"</span><span class="p">]])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">nmsrecent</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">nmsrecent</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">idxc</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlGeheilt"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">nmsrecent</span><span class="p">[</span><span class="s2">"AnzahlGeheiltXTage"</span><span class="p">]</span>
<span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">nmsrecent</span><span class="p">[</span><span class="s2">"AnzahlFaelle14Tage"</span><span class="p">]</span>
<span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">nmsrecent</span><span class="p">[</span><span class="s2">"AnzahlToteXTage"</span><span class="p">]</span>
<span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlGeheiltSum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlGeheilt"</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="c1">#display(ages1.groupby("BundeslandID")["AnzahlFaelleSum"].agg("first"))</span>
<span class="n">ages1mx</span><span class="p">[[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">,</span> <span class="s2">"AnzahlTotSum"</span><span class="p">,</span> <span class="s2">"AnzahlGeheiltSum"</span><span class="p">]]</span> <span class="o">+=</span> <span class="p">(</span>
    <span class="n">ages1</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"BundeslandID"</span><span class="p">)[[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">,</span> <span class="s2">"AnzahlTotSum"</span><span class="p">,</span> <span class="s2">"AnzahlGeheiltSum"</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s2">"first"</span><span class="p">))</span>

<span class="n">mmx</span> <span class="o">=</span> <span class="n">bltest</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#display(mmx.reset_index().iloc[-1][["Datum", "Bundesland", "PCR"]])</span>
<span class="n">ages1m_i</span> <span class="o">=</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span>
<span class="n">mmx</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">ages1m_i</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">mmx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1m_i</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">mmx</span><span class="p">[[</span><span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])[[</span>
    <span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">]]</span>
<span class="n">fsm</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">fsm</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsm</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">+</span>  <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">fsm</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlGeheiltTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlGeheilt"</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fsm</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># ages1m not loaded in full range, use data by lab date for older data</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">,</span> <span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="s2">"AnzahlTotSum"</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">,</span> <span class="s2">"AnzahlGeheilt"</span><span class="p">,</span> <span class="s2">"AnzahlGeheiltSum"</span><span class="p">]</span>
<span class="n">mmx</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsm</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="n">mmx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">ages1mx</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">ages1mx</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>
<span class="n">olderidx</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">bltest</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"PCRSum"</span><span class="p">]),</span> <span class="s2">"PCRSum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsm</span><span class="p">[</span><span class="s2">"TestGesamt"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]),</span> <span class="s2">"PCR"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsm</span><span class="p">[</span><span class="s2">"AnzTests"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"TestsSum"</span><span class="p">]),</span> <span class="s2">"TestsSum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsm</span><span class="p">[</span><span class="s2">"TestGesamt"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Tests"</span><span class="p">]),</span> <span class="s2">"Tests"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsm</span><span class="p">[</span><span class="s2">"AnzTests"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"AntigenSum"</span><span class="p">]),</span> <span class="s2">"AntigenSum"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Antigen"</span><span class="p">]),</span> <span class="s2">"Antigen"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">#mmsidx = mms.set_index(idxc)</span>
<span class="c1">#mmx.loc[(mmx.index.get_level_values("Datum") &gt;= mmsidx["AnzahlTot"].first_valid_index()[1])</span>
<span class="c1">#    &amp; (mmx["Bundesland"] == "Niederösterreich"), "AnzahlTot"] = mmsidx["AnzahlTot"]</span>
<span class="c1">#mmx.loc[mmx.index.get_level_values("BundeslandID") == 10, "AnzahlTot"] =</span>
<span class="c1">#dsum = mmx.loc[</span>
<span class="c1">#    mmx.index.get_level_values("BundeslandID") != 10, ["AnzahlTot"]].groupby(level="Datum").sum()</span>
<span class="c1">#dsum["BundeslandID"] = 10</span>
<span class="c1">#mmx.loc[mmx.index.get_level_values("BundeslandID") == 10, "AnzahlTot"] = dsum.reset_index().set_index(idxc)</span>
<span class="c1">#display(mmx.loc[10, "AnzahlTot"])</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">mmx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"PCR"</span><span class="p">]])</span>

<span class="n">enrich_mms</span><span class="p">(</span><span class="n">mmx</span><span class="p">,</span> <span class="n">apo</span><span class="p">,</span> <span class="n">schul</span><span class="p">)</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRReg"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCR"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRRPosRate"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRPosRate"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRRPosRate_a7"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRPosRate_a7"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRRInz"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRInz"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRAlle"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCR"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRAPosRate"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRPosRate"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRAPosRate_a7"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRPosRate_a7"</span><span class="p">]</span>
<span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRAInz"</span><span class="p">]</span> <span class="o">=</span>  <span class="n">mmx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">olderidx</span><span class="p">,</span> <span class="s2">"PCRInz"</span><span class="p">]</span>
<span class="n">display</span><span class="p">(</span><span class="n">mmx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">110</span><span class="p">][[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"PCRReg"</span><span class="p">]])</span>
<span class="n">mmx</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    
<span class="n">ages1mx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">ages1mx</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
    <span class="n">ages1mx</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">ages1mx</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">ages1mx</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span>
<span class="n">ages1mx</span> <span class="o">=</span> <span class="n">ages1mx</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Data until"</span><span class="p">,</span> <span class="n">mmx</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>havehosp=True
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Datum         2023-06-30 00:00:00
Bundesland             Österreich
PCR                           NaN
Name: 9979, dtype: object</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>...\covidat-tools\src\covidat\cov.py:949: PerformanceWarning: DataFrame is highly fragmented.  This is usually the result of calling `frame.insert` many times, which has poor performance.  Consider joining all columns at once using pd.concat(axis=1) instead. To get a de-fragmented frame, use `newframe = frame.copy()`
  df[dgcol] = df[dailycol] / shifted[dailycol]
...\covidat-tools\src\covidat\cov.py:950: PerformanceWarning: DataFrame is highly fragmented.  This is usually the result of calling `frame.insert` many times, which has poor performance.  Consider joining all columns at once using pd.concat(axis=1) instead. To get a de-fragmented frame, use `newframe = frame.copy()`
  df[f"{inzcol}_prev{sfx}"] = df[inzcol] - df[dcol]
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Datum         2021-01-24 00:00:00
Bundesland             Burgenland
PCRReg                     8480.0
Name: 110, dtype: object</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Data until 2023-06-30 00:00:00
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=1331a2a3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [31]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &lt; '2021-07-01'"</span><span class="p">)</span>
        <span class="c1">#sns.boxplot(y=fs_oo["FZICU"], x=fs_oo["Bundesland"], ax=ax, color="lightgrey")</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">swarmplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">fs_oo</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mf">2.2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"CoV-PatientInnen auf Normalstation"</span><span class="p">)</span>
        <span class="c1">#ax.set_xlabel(None)</span>
        <span class="c1">#ax.set_xticks([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">: COVID-Normal-Belegungen bis exkl. Juli 2021 nach Häufigkeit"</span><span class="p">)</span>
        <span class="c1">#ax.set_ylabel("PatientInnen auf ICU")</span>
        <span class="n">curbel</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">-</span>  <span class="n">mms</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FZICU"</span><span class="p">]</span>
        <span class="c1">#if bl == 'Oberösterreich':</span>
        <span class="c1">#    levels = [("2", 52), ("2a", 75), ("3", 103)]</span>
        <span class="c1">#    for levelname, levelcap in levels:</span>
        <span class="c1">#        ax.axhline(y=levelcap, color="k", linewidth=1)</span>
        <span class="c1">#        ax.text(0.5, levelcap * 1.05, f"Stufe {levelname} bis {levelcap}", ha="right")</span>
        <span class="c1">#    ax.axhline(y=90, color="darkgrey")</span>
        <span class="c1">#    ax.text(-0.5, 90*1.05, "Prognose für 17.11.21: 90")</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">curbel</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"r"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mf">2.1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">curbel</span> <span class="o">*</span> <span class="mf">1.05</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"Aktuell: </span><span class="si">{</span><span class="n">curbel</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">percentileofscore</span><span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="s1">'FZHosp'</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span><span class="w"> </span><span class="n">curbel</span><span class="p">,</span><span class="w"> </span><span class="n">kind</span><span class="o">=</span><span class="s1">'weak'</span><span class="p">)</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">% darunter)"</span><span class="p">);</span>
        <span class="c1">#ax.text(-0.5, curbel * 1.05, f"Aktueller Belag: {curbel} ({fs_oo['FZICU'].sort_values())");</span>
        <span class="c1">#sns.violinplot(y=fs_oo["FZICU"], x=fs_oo["Bundesland"], ax=ax)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=32da4bbb">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="K%C3%BCrzliche-Neuinfektionen-&amp;-Meldewesen">Kürzliche Neuinfektionen &amp; Meldewesen<a class="anchor-link" href="#K%C3%BCrzliche-Neuinfektionen-&amp;-Meldewesen">¶</a></h1><p>Im folgenden die vielleicht wichtigste Information, die aktuelle 7-Tages-Inzidenz in Österreich aus verschiedenen Quellen:</p>
<ol>
<li><del>Die 8:00-Meldung des EMS (<a href="https://www.data.gv.at/katalog/dataset/9723b0c6-48f4-418a-b301-e717b6d98c92">https://www.data.gv.at/katalog/dataset/9723b0c6-48f4-418a-b301-e717b6d98c92</a> / <a href="https://info.gesundheitsministerium.gv.at/opendata#timeline-faelle-ems">https://info.gesundheitsministerium.gv.at/opendata#timeline-faelle-ems</a>)</del></li>
<li><del>Die 9:30-Bundesländer/BMI-Meldungen (<a href="https://www.data.gv.at/katalog/dataset/f33dc893-bd57-4e5c-a3b0-e32925f4f6b1">https://www.data.gv.at/katalog/dataset/f33dc893-bd57-4e5c-a3b0-e32925f4f6b1</a> / <a href="https://info.gesundheitsministerium.gv.at/opendata#timeline-faelle-bundeslaender">https://info.gesundheitsministerium.gv.at/opendata#timeline-faelle-bundeslaender</a>)</del></li>
<li>Die 14:00-Zahlen der AGES nach Meldedatum(<a href="https://www.data.gv.at/katalog/dataset/ef8e980b-9644-45d8-b0e9-c6aaf0eff0c0">https://www.data.gv.at/katalog/dataset/ef8e980b-9644-45d8-b0e9-c6aaf0eff0c0</a> / <a href="https://covid19-dashboard.ages.at/dashboard.html">https://covid19-dashboard.ages.at/dashboard.html</a>)</li>
<li>Wie 3., aber nach Labordatum</li>
<li>Wie 4. aber für jedes Datum wird der Wert aus dem damaligen Datenstand angezeigt (ohne spätere Nachmeldungen und Korrekturen)</li>
</ol>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=47c9f373">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [32]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">print_inz</span><span class="p">():</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">recent</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1">#"EMS 8:00": (ems["Datum"].iloc[-1].date() == today, ems, cov.DS_BMG),</span>
        <span class="c1">#"BMI 9:30": (mms["Datum"].iloc[-1].date() == today, mms, cov.DS_BMG),</span>
        <span class="s2">"AGES-Meldung"</span><span class="p">:</span> <span class="p">(</span><span class="n">ages1m</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">==</span> <span class="n">today</span><span class="p">,</span> <span class="n">ages1m</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_AGES</span><span class="p">),</span>
        <span class="s2">"AGES-Meldung &lt;= 14 T"</span><span class="p">:</span> <span class="p">(</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">==</span> <span class="n">today</span><span class="p">,</span> <span class="n">mmx</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_AGES</span><span class="p">),</span>
        <span class="s2">"AGES-Labordatum"</span><span class="p">:</span> <span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">==</span> <span class="n">today</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">fs</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_AGES</span><span class="p">),</span>
        <span class="s2">"AGES historisch"</span><span class="p">:</span> <span class="p">(</span><span class="n">ages1</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">==</span> <span class="n">today</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">ages1</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_AGES</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">tab</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">())]</span>
    <span class="n">coldates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">is_recent</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="n">recent</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1">#print(f"Inzidenz lt. {name:8} ({data.iloc[-1]['Datum'].strftime(DTFMT)}):")</span>
        <span class="n">lastdate</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span>
        <span class="n">coldates</span> <span class="o">+=</span> <span class="p">[</span><span class="n">lastdate</span><span class="p">,</span> <span class="n">lastdate</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">lastdate</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bundesland</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
            <span class="n">bldata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bundesland</span><span class="p">]</span>
            <span class="c1">#print(name, bundesland)</span>
            <span class="c1">#print(i, bundesland)</span>
            <span class="n">tab</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'inz'</span><span class="p">],</span> <span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="s1">'inz'</span><span class="p">],</span> <span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">7</span><span class="p">][</span><span class="s1">'inz'</span><span class="p">]])</span>
            <span class="c1">#print(f"  {bundesland:20}: {bldata.iloc[-1]['inz']:6.1f}"</span>
                  <span class="c1">#f" (Vortag: {bldata.iloc[-2]['inz']:6.1f},"</span>
                  <span class="c1">#f" 1 Woche vorher: {bldata.iloc[-1 - 7]['inz']:6.1f})")</span>
    <span class="n">coldates</span> <span class="o">=</span> <span class="p">[</span><span class="n">cd</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a%d</span><span class="s2">."</span><span class="p">)</span> <span class="k">for</span> <span class="n">cd</span> <span class="ow">in</span> <span class="n">coldates</span><span class="p">]</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">recent</span><span class="p">),</span> <span class="mi">3</span><span class="p">),</span> <span class="n">coldates</span><span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"Quelle"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span>
    <span class="c1">#display(tab)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">fs</span><span class="p">[</span><span class="s2">"BLCat"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
    <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">recent</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">5.5</span><span class="p">))</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">LogNorm</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">melt</span><span class="p">()[</span><span class="s2">"value"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">vmax</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">melt</span><span class="p">()[</span><span class="s2">"value"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.99</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">recent</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">"off"</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="n">dfsrc</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">3</span><span class="o">*</span><span class="n">i</span><span class="p">:</span><span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="c1">#if ax is axs[-1]: # Erstmeldung:</span>
            <span class="c1">#    dfsrc.iloc[:, 0] = np.nan</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">dfsrc</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">is_recent</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">srccite</span> <span class="o">=</span> <span class="n">recent</span><span class="p">[</span><span class="n">src</span><span class="p">]</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s2">"k"</span> <span class="k">if</span> <span class="n">is_recent</span> <span class="k">else</span> <span class="s2">"grey"</span>
            <span class="n">dfsrc</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">dfsrc</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">droplevel</span><span class="p">()</span>
            <span class="k">def</span> <span class="nf">doplot</span><span class="p">(</span><span class="n">ax</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
                <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span>
                    <span class="n">dfsrc</span><span class="p">,</span>
                    <span class="n">fmt</span><span class="o">=</span><span class="s2">".0f"</span><span class="p">,</span>
                    <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                    <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
                    <span class="n">square</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span> <span class="k">if</span> <span class="n">is_recent</span> <span class="k">else</span> <span class="mf">0.5</span><span class="p">,</span>
                    <span class="n">cmap</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">un_l_cmap</span><span class="p">)</span>
                <span class="c1">#if ax is axs[-1]: # Erstmeldung:</span>
                <span class="c1">#    ax.set_xticklabels([""] + ax.get_xticklabels()[1:])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_recent</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelcolor</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">pad</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">doplot</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
            <span class="c1">#fig2, ax2 = plt.subplots(figsize=(2, 3))</span>
            <span class="c1">#cov.stampit(fig2, srccite)</span>
            <span class="c1">#doplot(ax2)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>
<span class="n">print_inz</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr>
<th>Quelle</th>
<th colspan="3" halign="left">AGES-Meldung</th>
<th colspan="3" halign="left">AGES-Meldung &lt;= 14 T</th>
<th colspan="3" halign="left">AGES-Labordatum</th>
<th colspan="3" halign="left">AGES historisch</th>
</tr>
<tr>
<th>Datum</th>
<th>Fr.30.</th>
<th>Do.29.</th>
<th>Fr.23.</th>
<th>Fr.30.</th>
<th>Do.29.</th>
<th>Fr.23.</th>
<th>Do.29.</th>
<th>Mi.28.</th>
<th>Do.22.</th>
<th>Do.29.</th>
<th>Mi.28.</th>
<th>Do.22.</th>
</tr>
</thead>
<tbody>
<tr>
<th>Österreich</th>
<td>6.9783</td>
<td>7.0226</td>
<td>9.8914</td>
<td>7.0669</td>
<td>7.0226</td>
<td>9.8914</td>
<td>6.8630</td>
<td>6.9179</td>
<td>9.8633</td>
<td>6.9451</td>
<td>6.9894</td>
<td>9.8582</td>
</tr>
<tr>
<th>Vorarlberg</th>
<td>0.9921</td>
<td>0.7440</td>
<td>0.9921</td>
<td>0.9921</td>
<td>0.7440</td>
<td>0.9921</td>
<td>0.9788</td>
<td>0.7341</td>
<td>0.9790</td>
<td>0.9921</td>
<td>0.7440</td>
<td>0.9921</td>
</tr>
<tr>
<th>Tirol</th>
<td>1.8265</td>
<td>1.8265</td>
<td>3.6530</td>
<td>1.8265</td>
<td>1.8265</td>
<td>3.6530</td>
<td>1.6769</td>
<td>1.8059</td>
<td>3.6122</td>
<td>1.6960</td>
<td>1.8265</td>
<td>3.5225</td>
</tr>
<tr>
<th>Salzburg</th>
<td>4.6075</td>
<td>5.3164</td>
<td>7.6202</td>
<td>4.6075</td>
<td>5.3164</td>
<td>7.7974</td>
<td>4.2036</td>
<td>5.2545</td>
<td>7.7074</td>
<td>4.2531</td>
<td>5.3164</td>
<td>7.4429</td>
</tr>
<tr>
<th>Oberösterreich</th>
<td>3.1741</td>
<td>3.6370</td>
<td>6.2160</td>
<td>3.1741</td>
<td>3.5709</td>
<td>6.1499</td>
<td>3.1381</td>
<td>3.5304</td>
<td>6.0807</td>
<td>3.1741</td>
<td>3.5709</td>
<td>6.1499</td>
</tr>
<tr>
<th>Niederösterreich</th>
<td>8.8400</td>
<td>8.6059</td>
<td>9.1913</td>
<td>8.7815</td>
<td>8.5473</td>
<td>9.3084</td>
<td>8.3340</td>
<td>8.4499</td>
<td>9.5504</td>
<td>8.4302</td>
<td>8.4888</td>
<td>9.3084</td>
</tr>
<tr>
<th>Wien</th>
<td>16.7576</td>
<td>16.0914</td>
<td>22.1385</td>
<td>17.1676</td>
<td>16.1426</td>
<td>22.0872</td>
<td>16.7940</td>
<td>15.7888</td>
<td>21.8265</td>
<td>17.1163</td>
<td>16.0914</td>
<td>22.1385</td>
</tr>
<tr>
<th>Burgenland</th>
<td>7.3521</td>
<td>8.0205</td>
<td>13.7016</td>
<td>7.6863</td>
<td>8.3546</td>
<td>14.0358</td>
<td>7.2764</td>
<td>7.9380</td>
<td>13.8928</td>
<td>7.3521</td>
<td>8.0205</td>
<td>14.0358</td>
</tr>
<tr>
<th>Steiermark</th>
<td>2.6255</td>
<td>3.1825</td>
<td>6.2058</td>
<td>2.6255</td>
<td>3.2620</td>
<td>6.1262</td>
<td>2.6080</td>
<td>3.2403</td>
<td>6.0067</td>
<td>2.6255</td>
<td>3.2620</td>
<td>6.0467</td>
</tr>
<tr>
<th>Kärnten</th>
<td>0.8831</td>
<td>1.2364</td>
<td>2.8260</td>
<td>0.8831</td>
<td>1.0598</td>
<td>2.6494</td>
<td>0.8816</td>
<td>1.0580</td>
<td>2.6449</td>
<td>0.8831</td>
<td>1.0598</td>
<td>2.6494</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=c452592c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>WIRD NICHT MEHR ANGEZEIGT -- KURZZEITDIAGRAMM:</p>
<p>Das folgende Doppeldiagramm besteht aus 2 Teilen.</p>
<p>Oben sind die täglichen Neumeldungen dargestellt. Die ersten zwei Balken sind die EMS und BMI-Meldungen. Der 3. Balken kommt wider aus den 14:00-Zahlen der AGES (<a href="https://www.data.gv.at/katalog/dataset/ef8e980b-9644-45d8-b0e9-c6aaf0eff0c0">https://www.data.gv.at/katalog/dataset/ef8e980b-9644-45d8-b0e9-c6aaf0eff0c0</a> / <a href="https://covid19-dashboard.ages.at/dashboard.html">https://covid19-dashboard.ages.at/dashboard.html</a>), allerdings wird nicht die für den jeweiligen Tag gemeldete Fallzahl gemeldet, sondern die Differenz der bis heute insgesamt gemeldeten Fälle von den gestern und laut gestrigem Datenstand insgesamt gemeldeten Fällen. Das entpsricht dem, was unter <a href="https://orf.at/corona/daten/oesterreich">https://orf.at/corona/daten/oesterreich</a> als „Laborbestätigte Fälle
(gesamte Epidemie)“ bezeichnet wird.</p>
<p>Unten sind nochmals die 14:00-AGES Zahlen dargestellt, diesmal ist die Zuordnung der neuen Fälle wie in den AGES-Daten angegeben, d.h. nach Testdatum. Der erste Balken stellt dar wie viele positive Tests gemeldet wurden als dieser Tag zum ersten Mal in den AGES-Zahlen auftauchte. Der 2. Balken zeigt den letztgültigen Stand aus den aktuellsten Daten für diesen Tag an. Für den aktuellsten Tag fehlt daher dieser Balken, weil es (per Definition) noch keine Nachmeldungen gab.</p>
<p>Es werden auch jeweils Durchschnittlinien eingezeichnet. Diese zeigen dass die Meldungen zwar im Zeitverlauf leicht unterschiedlich sind, aber über längere Zeit ziemlich genau aufs gleiche hinauslaufen. Nur die AGES-Erstmeldungen sind logischerweise etwas niedriger (die Differenz zum Schnitt nach aktuellem Stand entspricht den Nachmeldungen + Korrekturen).</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=f74bcba1">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [33]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plt_sum_ax</span><span class="p">(</span>
    <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span>
    <span class="n">xs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">cats</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">vs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">color_args</span><span class="p">:</span> <span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">ucats</span> <span class="o">=</span> <span class="n">cats</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">ucats</span><span class="p">),</span> <span class="o">**</span><span class="p">(</span><span class="n">color_args</span> <span class="ow">or</span> <span class="p">{}))</span>
    <span class="c1">#display(colors)</span>
    <span class="c1">#dates = matplotlib.dates.date2num(agd_all.index.get_level_values("Datum"))</span>
    <span class="c1">#if mode == 'ratio':</span>
    <span class="c1">#    sums = agd_rec_at.query("Altersgruppe != 'Alle'").groupby("Datum")[col].sum()</span>
    <span class="n">pltbar</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">StackBarPlotter</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">xs</span><span class="p">,</span> <span class="n">allow_negative</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">color</span><span class="p">,</span> <span class="n">cat</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="n">ucats</span><span class="p">):</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">cats</span> <span class="o">==</span> <span class="n">cat</span>
        <span class="c1">#display(mask)</span>
        <span class="c1">#display(vs)</span>
        <span class="n">pltbar</span><span class="p">(</span><span class="n">vs</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">cat</span><span class="p">)</span>
        <span class="c1">#print(sum_below, ag_id)</span>
    <span class="c1">#ax.legend(title="Altersgruppe", loc="center left")</span>
    
<span class="k">def</span> <span class="nf">plt_recent_cases</span><span class="p">(</span><span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">data_sources</span><span class="p">,</span> <span class="n">n_days</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">28</span><span class="p">):</span>
    <span class="c1">#display(ages1)</span>
    <span class="n">_dt</span><span class="p">,</span> <span class="n">maxidx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
        <span class="p">((</span><span class="n">src</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">src</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="n">i</span><span class="p">)</span>
         <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">src</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_sources</span><span class="p">)))</span>
    
    <span class="n">xs0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">data_sources</span><span class="p">[</span><span class="n">maxidx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
        <span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span>
        <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">n_days</span><span class="p">:]</span>
        <span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">data_sources</span><span class="p">[</span><span class="n">maxidx</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>
    <span class="c1">#display(f"{_dt=}, {maxidx=}, {n_days=}")</span>
    <span class="k">assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xs0</span><span class="p">)</span> <span class="o">==</span> <span class="n">n_days</span><span class="p">)</span>
    <span class="c1">#display(xs0)</span>
    <span class="c1">#xs0 = xs0[xs0.weekday == 0]</span>
    <span class="c1">#n_bars = len(data_sources)</span>
    <span class="n">n_bars</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># Use same</span>
    <span class="n">mid</span> <span class="o">=</span> <span class="n">n_bars</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">bargroup_distance</span> <span class="o">=</span> <span class="mf">0.3</span>
    <span class="n">bar_space</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">bargroup_distance</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_bars</span>
    <span class="n">bar_distance</span> <span class="o">=</span> <span class="n">bar_space</span> <span class="o">/</span> <span class="mi">7</span>
    <span class="n">bar_width</span> <span class="o">=</span> <span class="n">bar_space</span> <span class="o">-</span> <span class="n">bar_distance</span>
    <span class="c1">#print(n_bars, mid, bargroup_distance, bar_space, bar_distance, bar_width)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">fulldata</span><span class="p">,</span> <span class="n">ls</span><span class="p">,</span> <span class="n">lc</span><span class="p">,</span> <span class="n">timeshift</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_sources</span><span class="p">):</span>
        <span class="n">fulldata</span> <span class="o">=</span> <span class="n">fulldata</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">fulldata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fulldata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">timeshift</span><span class="p">)</span>
        <span class="c1">#print(i, timeshift, xs0[0])</span>
        <span class="c1">#display(fulldata)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">fulldata</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)</span>
        <span class="c1">#display(data.head(3))</span>
        <span class="c1">#data.sort_values(by=["Datum", "Bundesland"], inplace=True)</span>
        <span class="c1">#display(data["Bundesland"].unique())</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">xs0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">timeshift</span><span class="p">)]</span>
        <span class="c1">#assert data["Datum"].nunique() == n_days, f"{label}: {data['Datum'].nunique() } != {n_days}"</span>
        <span class="c1">#display(data["Datum"].min())</span>
        <span class="c1">#data = data[data["Datum"].dt.weekday == 0]</span>
        <span class="c1">#print(f"{bar_space * i - bar_space * mid=}")</span>
        <span class="n">xs</span> <span class="o">=</span> <span class="n">xs0</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">bar_space</span> <span class="o">*</span> <span class="n">i</span> <span class="o">-</span> <span class="n">bar_space</span> <span class="o">*</span> <span class="n">mid</span> <span class="o">+</span> <span class="n">bar_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="c1">#print(len(xs), len(xs0), len(data), len(fulldata))</span>
        <span class="c1">#print(label)</span>
        <span class="n">plt_sum_ax</span><span class="p">(</span>
            <span class="n">ax</span><span class="p">,</span>
            <span class="n">xs</span><span class="p">,</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">],</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">],</span>
            <span class="n">width</span><span class="o">=</span><span class="n">bar_width</span><span class="p">)</span>
        <span class="n">mean</span> <span class="o">=</span> <span class="p">(</span><span class="n">fulldata</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
                <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
                <span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span>
                <span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
                <span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">xs</span><span class="p">,</span>
            <span class="n">mean</span><span class="p">[</span><span class="n">mean</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">xs0</span><span class="p">)],</span>
            <span class="n">color</span><span class="o">=</span><span class="n">lc</span><span class="p">,</span>
            <span class="c1">#alpha=0.6,</span>
            <span class="n">ls</span><span class="o">=</span><span class="n">ls</span><span class="p">,</span>
            <span class="c1">#drawstyle="steps-post",</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span>
            <span class="n">marker</span><span class="o">=</span><span class="s2">"+"</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"Ø "</span> <span class="o">+</span> <span class="n">label</span><span class="p">)</span>

    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">xs0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="c1">#ax.set_axisbelow(True)</span>
    
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">8.5</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
    <span class="n">n_days</span> <span class="o">=</span> <span class="n">DETAIL_NDAYS</span>
    <span class="c1">#print(f"{n_days=}")</span>
    <span class="n">ages1_at</span> <span class="o">=</span> <span class="n">ages1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
    <span class="n">plt_recent_cases</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">ages1</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">,</span> <span class="s1">'peru'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"Nur Erstmeldung"</span><span class="p">),</span>
        <span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">!=</span> <span class="n">fs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]],</span> <span class="s1">'-'</span><span class="p">,</span> <span class="s1">'k'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"Letztstand"</span><span class="p">)),</span>
        <span class="n">n_days</span><span class="o">=</span><span class="n">n_days</span><span class="p">)</span>
    <span class="c1">#(n_days</span>
               <span class="c1"># if fs.iloc[-1]["Datum"] + timedelta(1) &gt;= ems["Datum"].iloc[-1].tz_localize(None).normalize()</span>
               <span class="c1"># else n_days - 1)</span>
    <span class="c1">#)</span>
    <span class="c1">#raise</span>
    <span class="c1">#print(f"{n_days=}")</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ages1_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mf">0.3</span><span class="p">),</span>
        <span class="n">ages1_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">/</span> <span class="mi">7</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">"+"</span><span class="p">,</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
        <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Ø Historisch"</span><span class="p">)</span>
    <span class="n">plt_recent_cases</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">ems</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">,</span> <span class="s1">'darkred'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"EMS"</span><span class="p">),</span>
            <span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">,</span> <span class="s1">'teal'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"BMI"</span><span class="p">),</span>
            <span class="p">(</span><span class="n">ages1m</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">,</span> <span class="s1">'peru'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"AGES Meldesumme"</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">n_days</span><span class="o">=</span><span class="n">n_days</span><span class="p">)</span>
    <span class="c1">#axs[0].tick_params(axis="x", which="major", labelbottom=False)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#axs[0].xaxis.set_tick_params(which="major", pad=0)</span>
    <span class="c1">#ymax = max(ax.get_ylim()[1] for ax in axs)</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
        <span class="c1">#ax.set_ylim(top=ymax)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"both"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"both"</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"major"</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Summe neu gemeldete positive Tests +/- Korrekturen (nach Meldedatum)"</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.07</span><span class="p">)</span>
    <span class="n">nlegendentries</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">BUNDESLAND_BY_ID</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
            <span class="c1">#["Ø EMS", "Ø BMI", "Ø AGES Meldesumme"] + [bl for bl in cov.ICU_LIM_GREEN_BY_STATE if bl != 'Österreich'],</span>
            <span class="c1"># This weird args take care of negative values: The order of artists is:</span>
            <span class="c1"># BL1-positive-src1, BL1-negative-src1, BL2-positive-src1, BL2-negative-src1, ..., BLn-negative-srcN</span>
            <span class="c1"># But we do not give the negatives labels, so if we use the handles in addition to the labels,</span>
            <span class="c1"># we get all the right legend entries, and none of the wrong/duplicate ones.</span>
            <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()[</span><span class="mi">0</span><span class="p">][:</span><span class="n">nlegendentries</span><span class="p">],</span>
            <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()[</span><span class="mi">1</span><span class="p">][:</span><span class="n">nlegendentries</span><span class="p">],</span>
            <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span>
            <span class="n">ncol</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
            <span class="n">prop</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">6</span><span class="p">),</span>
            <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">));</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Positive Tests je Labordatum (AGES)"</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">))</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()[</span><span class="mi">1</span><span class="p">][:</span><span class="mi">3</span><span class="p">],</span>
            <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span>
            <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">prop</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">6</span><span class="p">),</span>
            <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.03</span><span class="p">));</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">))</span>
    <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">n_days</span><span class="p">:]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.05</span> <span class="k">for</span> <span class="n">data0</span> <span class="ow">in</span> <span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="n">ages1m</span><span class="p">,</span> <span class="n">ages1</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>
    <span class="c1"># BUG! TODO: Fix labels if negative values appear</span>
    <span class="c1">#print(n_bars, mid, bargroup_distance, bar_space, bar_distance, bar_width)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=8bbd5be7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [34]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_msys</span><span class="p">(</span><span class="n">bl</span><span class="p">,</span> <span class="n">uselog</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">agesbl</span> <span class="o">=</span> <span class="n">ages1m</span><span class="p">[</span><span class="n">ages1m</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
    <span class="n">fsbl</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">fsbl</span><span class="p">,</span> <span class="s1">'C1'</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"AGES 14:00 nach Labordatum+1"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="c1">#(ems[ems["Bundesland"] == bl], 'C2', 0, "EMS 8:00", None, 1.5),</span>
        <span class="c1">#(mms[mms["Bundesland"] == bl], 'C0', 0, "Bundesländermeldung 9:30", None, 2.5),</span>
        <span class="c1">#(fs[fs["Bundesland"] == bl], 'C3', 0, "AGES - 13%", ":", None),</span>
        <span class="p">(</span><span class="n">ages1</span><span class="p">[</span><span class="n">ages1</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s1">'C4'</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"AGES nur Erstmeldung"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span>
        <span class="p">(</span><span class="n">agesbl</span><span class="p">,</span> <span class="s1">'C0'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"AGES 14:00 nach Meldedatum"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="c1">#(fs, 'k', 1, "AGES Labordatum", "_"),</span>
    <span class="p">]</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="n">MIDRANGE_NDAYS</span>
    <span class="n">begdate</span> <span class="o">=</span> <span class="n">srcs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">srcs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
    <span class="c1">#print(begdate)</span>
    <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ls</span><span class="p">,</span> <span class="n">lw</span> <span class="ow">in</span> <span class="n">srcs</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="n">data_at</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">begdate</span><span class="p">]</span>
        <span class="c1">#assert len(data_at) == ndays + 1, f"{len(data_at)=}@{name=}@{offset=}@{len(data)=}@{ndays=}"</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">data_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span>
            <span class="n">data_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="mf">0.13</span><span class="p">)</span> <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"AGES - 13%"</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="c1">#marker=style,</span>
            <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
            <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span>
            <span class="n">ls</span><span class="o">=</span><span class="n">ls</span><span class="p">,</span>
            <span class="c1">#alpha=0.8,</span>
            <span class="n">markersize</span><span class="o">=</span><span class="n">lw</span> <span class="o">*</span> <span class="mi">3</span>
            <span class="c1">#markersize=10, ds=ds</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">uselog</span><span class="p">:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:][</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">agesbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">begdate</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span> <span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndays</span> <span class="o">&lt;=</span> <span class="n">DETAIL_NDAYS</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">DayLocator</span><span class="p">())</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="c1">#fig.autofmt_xdate()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">bl</span> <span class="o">+</span> <span class="s2">": Fallzahlen aus verschiedenen Quellen"</span> <span class="o">+</span> <span class="p">(</span><span class="s2">", logarithmisch"</span> <span class="k">if</span> <span class="n">uselog</span> <span class="k">else</span> <span class="s2">""</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fälle"</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">ax</span>
<span class="c1">#plt_msys("Österreich")</span>
<span class="c1">#selbl = "Österreich"</span>

<span class="n">plt_msys</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt_msys</span><span class="p">(</span><span class="s2">"Niederösterreich"</span><span class="p">)</span>
    <span class="n">plt_msys</span><span class="p">(</span><span class="s2">"Tirol"</span><span class="p">,</span> <span class="n">uselog</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">plt_msys</span><span class="p">(</span><span class="s2">"Vorarlberg"</span><span class="p">,</span> <span class="n">uselog</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#plt_msys("Vorarlberg")</span>
    <span class="n">plt_msys</span><span class="p">(</span><span class="s2">"Wien"</span><span class="p">,</span> <span class="n">uselog</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>



<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">mms_oo</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbl</span><span class="p">]</span>
    <span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbl</span><span class="p">]</span>
    <span class="n">fs_old_oo</span> <span class="o">=</span> <span class="n">ages_old</span><span class="p">[</span><span class="n">ages_old</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbl</span><span class="p">]</span>

<span class="c1">#ax.plot(</span>
<span class="c1">#    mms_oo["Datum"].iloc[-90:] - timedelta(1),</span>
<span class="c1">#    mms_oo["AnzahlTot"].rolling(14).sum().iloc[-90:], label="Krisenstab nach Meldedatum-1")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">90</span><span class="p">:],</span>
            <span class="n">fs_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">90</span><span class="p">:],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"AGES nach Todesdatum"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_old_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">90</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:],</span>
            <span class="n">fs_old_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">90</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"AGES nach Todesdatum, alter Stand"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">: COVID-Tote aus verschiedenen Quellen, 14-Tage-Summen"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_36_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=73db5f65">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [35]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ages1i</span> <span class="o">=</span> <span class="n">ages1</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">fsi</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">ages1i</span><span class="p">):]</span>
<span class="n">diff</span> <span class="o">=</span> <span class="p">(</span><span class="n">fsi</span><span class="p">[[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]]</span> <span class="o">/</span> <span class="n">ages1i</span><span class="p">[[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]])</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">diff</span><span class="p">[</span><span class="n">diff</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">diff</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>
<span class="c1">#display(diff)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">diff</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">xmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">1.05</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Fälle inklusive aller Nachmeldungen als Anteil der Erstmeldung ‒ Wochensummen"</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_37_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=222beffd">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [36]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="n">DETAIL_NDAYS</span>
    <span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span>
    <span class="c1">#fig, ax = plt.subplots()</span>
    <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="o">=</span> <span class="n">ages_old</span><span class="p">,</span> <span class="n">fs</span>
    <span class="c1">#old, new = ages_old2, ages_old</span>
    <span class="c1">#old, new = agd_sums_old.query("Bundesland == 'Österreich' and Altersgruppe != 'Alle'"), agd_sums.query("Bundesland == 'Österreich' and Altersgruppe != 'Alle'")</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff</span><span class="p">(</span>
        <span class="n">new</span><span class="p">,</span><span class="c1">#.query("Datum &lt; '2020-04-20'"),</span>
        <span class="n">old</span><span class="p">,</span><span class="c1">#.query("Datum &lt; '2020-04-20'"),</span>
        <span class="c1">#"Altersgruppe",</span>
        <span class="s2">"Bundesland"</span><span class="p">,</span>
        <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span>
        <span class="n">rwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">,</span> <span class="n">logview</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"Fälle"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="c1">#, vcol="AnzahlFaelle", name="Fälle")</span>
    <span class="c1">#cov.set_date_opts(ax)#, fs_oo.index[-ndays:] if ndays else fs_oo.index, showyear=True)</span>
    <span class="c1">#cov.set_logscale(ax)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Gefundene COVID-Fälle in </span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">"</span> <span class="o">+</span> <span class="p">(</span><span class="n">AGES_STAMP</span> <span class="k">if</span> <span class="n">new</span> <span class="ow">is</span> <span class="n">fs</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">" (AGES </span><span class="si">{</span><span class="n">new</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'FileDate'</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%d</span><span class="s1">.%m.%y'</span><span class="p">)</span><span class="si">}</span><span class="s2">)"</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=2674dd9d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [37]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">mmx</span><span class="p">)[[</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[37]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Bundesland</th>
<th>AnzahlFaelle</th>
</tr>
</thead>
<tbody>
<tr>
<th>997</th>
<td>Burgenland</td>
<td>3</td>
</tr>
<tr>
<th>1995</th>
<td>Kärnten</td>
<td>1</td>
</tr>
<tr>
<th>2993</th>
<td>Niederösterreich</td>
<td>19</td>
</tr>
<tr>
<th>3991</th>
<td>Oberösterreich</td>
<td>13</td>
</tr>
<tr>
<th>4989</th>
<td>Salzburg</td>
<td>2</td>
</tr>
<tr>
<th>5987</th>
<td>Steiermark</td>
<td>4</td>
</tr>
<tr>
<th>6985</th>
<td>Tirol</td>
<td>3</td>
</tr>
<tr>
<th>7983</th>
<td>Vorarlberg</td>
<td>1</td>
</tr>
<tr>
<th>8981</th>
<td>Wien</td>
<td>54</td>
</tr>
<tr>
<th>9979</th>
<td>Österreich</td>
<td>100</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=f9438663">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [38]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#xs = fs_at.set_index(["Bundesland", "Datum"])["AnzahlFaelle"] - ages_old.query("Bundesland == 'Österreich'").set_index(["Bundesland", "Datum"])["AnzahlFaelle"]</span>
<span class="c1">#xs[(xs != 0) &amp; np.isfinite(xs)].to_frame()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=28bae4a9">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [39]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="n">SHORTRANGE_NDAYS</span>
    <span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span>
    <span class="c1">#fig, ax = plt.subplots()</span>
    <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="o">=</span> <span class="n">ages_old</span><span class="p">,</span> <span class="n">fs</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff</span><span class="p">(</span>
        <span class="n">new</span><span class="p">,</span>
        <span class="n">old</span><span class="p">,</span>
        <span class="s2">"Bundesland"</span><span class="p">,</span>
        <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span>
        <span class="n">rwidth</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">,</span> <span class="n">logview</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"Fälle"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="c1">#, vcol="AnzahlFaelle", name="Fälle")</span>
    <span class="c1">#cov.set_date_opts(ax)#, fs_oo.index[-ndays:] if ndays else fs_oo.index, showyear=True)</span>
    <span class="c1">#cov.set_logscale(ax)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"7-Tage-Summe gefundener COVID-Fälle in </span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=e1b7cd64">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [40]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="k">def</span> <span class="nf">mathbold</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"[0-9]"</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="nb">chr</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s2">"𝟬"</span><span class="p">)</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=b7fab645">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [41]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">print_case_stats</span><span class="p">(</span><span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">ages1</span><span class="o">=</span><span class="n">ages1</span><span class="p">,</span> <span class="n">fs</span><span class="o">=</span><span class="n">fs</span><span class="p">,</span> <span class="n">lbl</span><span class="o">=</span><span class="s2">""</span><span class="p">):</span>
    <span class="n">ages1_at</span> <span class="o">=</span> <span class="n">ages1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
    <span class="n">agesrpt</span> <span class="o">=</span> <span class="n">ages1_at</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">Tag</span><span class="o">=</span><span class="n">ages1_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%A"</span><span class="p">))</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">16</span><span class="p">)[</span>
        <span class="p">[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Tag"</span><span class="p">,</span> <span class="s2">"FileDate"</span><span class="p">,</span> <span class="s2">"AnzahlFaelleMeldeDiff"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">agesrpt</span><span class="p">[</span><span class="s2">"AnzahlFaelleNeu"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbl</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span>
    <span class="c1">#display(agesrpt)</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">rptday</span> <span class="o">=</span> <span class="n">agesrpt</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">offset</span><span class="p">][</span><span class="s2">"Tag"</span><span class="p">]</span>
    <span class="n">rptday_s</span> <span class="o">=</span> <span class="n">agesrpt</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">offset</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">mday</span> <span class="o">=</span> <span class="n">agesrpt</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">offset</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%A"</span><span class="p">)</span>
    <span class="n">agesrpt</span> <span class="o">=</span> <span class="n">agesrpt</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">agesrpt</span><span class="p">[</span><span class="s2">"Tag"</span><span class="p">]</span> <span class="o">==</span> <span class="n">rptday</span><span class="p">]</span>
    <span class="n">agesrpt</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"#COVID19at Fallzahlen am </span><span class="si">{</span><span class="n">mday</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">selbl</span><span class="si">}{</span><span class="n">lbl</span><span class="si">}</span><span class="s2">/AGES):</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">hasnmark</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">agesrpt</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">nmark</span> <span class="o">=</span> <span class="s2">""</span> <span class="k">if</span> <span class="n">rec</span><span class="p">[</span><span class="s2">"AnzahlFaelleMeldeDiff"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">rec</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="k">else</span> <span class="s2">"*"</span>
        <span class="n">hasnmark</span> <span class="o">=</span> <span class="n">hasnmark</span> <span class="ow">or</span> <span class="n">nmark</span>
        <span class="n">fz</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">'AnzahlFaelleMeldeDiff'</span><span class="p">]</span><span class="si">:</span><span class="s2">+.0f</span><span class="si">}</span><span class="s2">"</span>
        <span class="c1">#if isfirst:</span>
        <span class="c1">#    fz = mathbold(fz)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">"‒"</span><span class="p">,</span> <span class="n">rec</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">".:"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">fz</span><span class="si">}{</span><span class="n">nmark</span><span class="si">}{</span><span class="s1">' gesamt'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isfirst</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">''</span><span class="si">}</span><span class="s2">,"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">'AnzahlFaelle'</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="s1">'für '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rptday</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isfirst</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">rptday_s</span><span class="si">}</span><span class="s2">"</span>
            <span class="o">+</span> <span class="p">(</span><span class="sa">f</span><span class="s2">" (Stand heute: </span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">'AnzahlFaelleNeu'</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">)"</span>
               <span class="k">if</span> <span class="n">rec</span><span class="p">[</span><span class="s1">'AnzahlFaelleNeu'</span><span class="p">]</span> <span class="o">!=</span> <span class="n">rec</span><span class="p">[</span><span class="s1">'AnzahlFaelle'</span><span class="p">]</span> <span class="k">else</span> <span class="s2">""</span><span class="p">))</span>
        <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">hasnmark</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"     *negative Nachmeldungen"</span><span class="p">)</span>
        
    <span class="n">posrates</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">mmx</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)[</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">]</span>
    <span class="n">posrates</span> <span class="o">=</span> <span class="n">posrates</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">posrates</span><span class="p">)]</span>
    <span class="c1">#display(posrates.to_frame())</span>
    <span class="c1">#display(ages1m[ages1m["Datum"] == agesrpt.iloc[0]["FileDate"]])</span>

    <span class="k">if</span> <span class="n">posrates</span><span class="o">.</span><span class="n">median</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mf">0.1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">⚠ 7-T-PCR-Positivrate aktuell </span><span class="si">{</span><span class="n">posrates</span><span class="o">.</span><span class="n">median</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">:</span><span class="s2">.2n</span><span class="si">}</span><span class="s2">% im Median der BL ⇒ hohe Dunkelziffer"</span><span class="p">)</span>
<span class="n">print_case_stats</span><span class="p">()</span>
<span class="n">print_case_stats</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">agd1_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '5-14'"</span><span class="p">),</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '5-14'"</span><span class="p">),</span> <span class="s2">" 5-14"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>#COVID19at Fallzahlen am Freitag (Österreich/AGES):

‒ 30.06.: +92* gesamt, 99 für Donnerstag
‒ 23.06.: +96, 93 Do. (Stand heute: 104)
‒ 16.06.: +142, 138 Do. (Stand heute: 142)
     *negative Nachmeldungen
#COVID19at Fallzahlen am Freitag (Österreich 5-14/AGES):

‒ 30.06.: +0* gesamt, 3 für Donnerstag
‒ 23.06.: +2, 2 Do.
‒ 16.06.: +2, 2 Do.
     *negative Nachmeldungen
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=b73212a2">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><a id="weekday-stats"></a></p>
<h2 id="An-welchen-Tagen-werden-die-meisten-F%C3%A4lle-gemeldet?">An welchen Tagen werden die meisten Fälle gemeldet?<a class="anchor-link" href="#An-welchen-Tagen-werden-die-meisten-F%C3%A4lle-gemeldet?">¶</a></h2><p>Im Folgenden wird über die letzen 100 Tage der Durchschnitt neu gemeldeter Fälle pro Woche berechnet und dann für jeden Wochentag welcher Anteil dieses Durchschnitts im Durchschnitt an diesem Wochentag gemeldet werden.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a6e304ba">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [42]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_distribution</span><span class="p">(</span><span class="n">src</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">n_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="n">plt_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">src</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">src</span><span class="p">[</span><span class="s2">"s7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">src</span><span class="p">[</span><span class="n">vcol</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">src</span><span class="p">[</span><span class="n">vcol</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">src</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">n_days</span><span class="p">:]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Mo.'</span><span class="p">,</span><span class="s1">'Di.'</span><span class="p">,</span> <span class="s1">'Mi.'</span><span class="p">,</span> <span class="s1">'Do.'</span><span class="p">,</span><span class="s1">'Fr.'</span><span class="p">,</span><span class="s1">'Sa.'</span><span class="p">,</span> <span class="s1">'So.'</span><span class="p">]</span>
    <span class="c1">#days.reverse()</span>
    <span class="n">contrib</span> <span class="o">=</span> <span class="p">(</span><span class="n">src</span><span class="p">[</span><span class="n">vcol</span><span class="p">]</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="n">src</span><span class="p">[</span><span class="s2">"s7"</span><span class="p">])</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"Anteil"</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="c1">#contrib = contrib[np.isfinite(contrib)]</span>
    <span class="n">contrib</span><span class="p">[</span><span class="s2">"Wochentag"</span><span class="p">]</span> <span class="o">=</span> <span class="n">contrib</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">contrib</span><span class="p">[</span><span class="s2">"daynum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">contrib</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">weekday</span>
    <span class="n">contrib</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"daynum"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">contrib</span><span class="p">[</span><span class="s2">"d"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">contrib</span><span class="o">.</span><span class="n">index</span> <span class="o">-</span> <span class="n">contrib</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">days</span>
    <span class="n">contrib_m</span> <span class="o">=</span> <span class="n">contrib</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Wochentag"</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="s2">"Anteil"</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">contrib</span><span class="p">[</span><span class="s2">"Anteil"</span><span class="p">][</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">contrib</span><span class="p">[</span><span class="s2">"Anteil"</span><span class="p">])]))</span>
    <span class="c1">#daysums = src.iloc[-n_days:].sum()</span>
    <span class="c1">#display(daysums[["AnzahlFaelle"]])</span>
    <span class="c1">#daysums.sort_index(inplace=True, key=)</span>
    
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>


    <span class="c1">#daysums.plot(y="AnzahlFaelleNorm", kind="barh", title=name, legend=False, ax=ax)</span>
    <span class="c1">#contrib_m.plot(kind="barh", title=name, legend=False, ax=ax, **(plt_args or {}))</span>
    <span class="c1">#sns.boxplot(data=contrib, ax=ax, order=days, x="Anteil", y="Wochentag", **(plt_args or {"color": "C0"}))</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">contrib</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Anteil"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Wochentag"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"d"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">un_l_cmap</span><span class="p">,</span>
        <span class="o">**</span><span class="p">(</span><span class="n">plt_args</span> <span class="ow">or</span> <span class="p">{</span><span class="s2">"color"</span><span class="p">:</span> <span class="s2">"C0"</span><span class="p">}))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">contrib_m</span><span class="p">,</span> <span class="n">contrib_m</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"|"</span><span class="p">,</span> <span class="o">**</span><span class="p">(</span><span class="n">plt_args</span> <span class="ow">or</span> <span class="p">{}),</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">xmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="c1">#ax.set_xlim(left=0.5, right=1.5)</span>

<span class="n">n_days</span> <span class="o">=</span> <span class="mi">7</span><span class="o">*</span><span class="mi">15</span>
    
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Verteilung der Fälle auf die Wochentage (letzte </span><span class="si">{</span><span class="n">n_days</span><span class="si">}</span><span class="s2"> Tage) in %, Schnitt der Wochen"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.85</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

    
<span class="n">plt_distribution</span><span class="p">(</span><span class="n">ems</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">),</span> <span class="s2">"EMS 8:00"</span><span class="p">,</span> <span class="n">n_days</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plt_distribution</span><span class="p">(</span><span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">),</span> <span class="s2">"BMI 9:30"</span><span class="p">,</span> <span class="n">n_days</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="c1">#plt_distribution(fs_at, "AGES", axs[2], 0)</span>
<span class="n">plt_distribution</span><span class="p">(</span><span class="n">ages1m</span><span class="p">,</span> <span class="s2">"AGES 14:00-Meldesumme"</span><span class="p">,</span> <span class="n">n_days</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plt_distribution</span><span class="p">(</span><span class="n">fs_at</span><span class="p">,</span> <span class="s2">"AGES nach Labordatum"</span><span class="p">,</span> <span class="n">n_days</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelleft</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Verteilung der Todesfälle auf die Wochentage (letzte </span><span class="si">{</span><span class="n">n_days</span><span class="si">}</span><span class="s2"> Tage) in %, Schnitt der Wochen"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.85</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="n">plt_args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
<span class="n">plt_distribution</span><span class="p">(</span><span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">),</span> <span class="s2">"BMI 9:30"</span><span class="p">,</span> <span class="n">n_days</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="n">plt_args</span><span class="o">=</span><span class="n">plt_args</span><span class="p">)</span>
<span class="c1">#plt_distribution(fs_at, "AGES", axs[2], 0)</span>
<span class="n">plt_distribution</span><span class="p">(</span><span class="n">ages1m</span><span class="p">,</span> <span class="s2">"AGES 14:00-Meldesumme"</span><span class="p">,</span> <span class="n">n_days</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="n">plt_args</span><span class="o">=</span><span class="n">plt_args</span><span class="p">)</span>
<span class="n">plt_distribution</span><span class="p">(</span><span class="n">fs_at</span><span class="p">,</span> <span class="s2">"AGES nach Todesdatum"</span><span class="p">,</span> <span class="n">n_days</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="n">plt_args</span><span class="o">=</span><span class="n">plt_args</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelleft</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.37</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="c1">#ax.tick_params(labelleft=False, pad=0)</span>
    
<span class="n">a1m_oo</span> <span class="o">=</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
<span class="n">a1m_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">][</span><span class="n">a1m_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">],</span> <span class="n">a1m_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">][</span><span class="n">a1m_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">a1m_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>105
105
105
105
105
105
105
</pre>
</div>
</div>
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[42]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>(Datum
 2021-08-26    -2.0
 2021-08-27    -3.0
 2021-08-31   -15.0
 2022-05-11   -12.0
 2022-09-13   -56.0
 2022-10-22   -89.0
 2022-12-04    -1.0
 2023-06-07    -1.0
 Name: AnzahlTot, dtype: float64,
 Datum
 2022-04-20    3108.0
 Name: AnzahlTot, dtype: float64)</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_45_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_45_3.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=bb8f3e2f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [43]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="mf">1.2</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[43]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>3861.0000</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c1e3d646">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [44]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_by_weekday</span><span class="p">(</span><span class="n">fs_at</span><span class="p">,</span> <span class="n">ttl</span><span class="p">,</span> <span class="n">uselog</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">wds</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Montag"</span><span class="p">,</span> <span class="s2">"Dienstag"</span><span class="p">,</span> <span class="s2">"Mittwoch"</span><span class="p">,</span> <span class="s2">"Donnerstag"</span><span class="p">,</span> <span class="s2">"Freitag"</span><span class="p">,</span> <span class="s2">"Samstag"</span><span class="p">,</span> <span class="s2">"Sonntag"</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
        <span class="n">fs_at_d</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">weekday</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at_d</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">wds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">MARKER_SEQ</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">fs_at_d</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1">#ax.annotate(</span>
        <span class="c1">#    f"{wds[i][:2]} {last['AnzahlFaelle'] / 1000:.0f}k",</span>
        <span class="c1">#    (last.name, last["AnzahlFaelle"]),</span>
        <span class="c1">#    xytext=(5, 0), textcoords='offset points', fontsize="xx-small")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">7</span><span class="p">:],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="c1">#ax.set_xlim(right=ax.get_xlim()[1] + 7)</span>
    <span class="k">if</span> <span class="n">uselog</span><span class="p">:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(bottom=500)</span>
    <span class="c1">#ax.set_ylim(bottom=0)</span>
    <span class="n">bl</span> <span class="o">=</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">: Neue Fälle je Wochentag</span><span class="si">{</span><span class="n">ttl</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>
    
<span class="c1">#plt_by_weekday(mms.query("Bundesland == 'Österreich'").iloc[-100:], " ‒ 9:30 Krisenstabmeldung")</span>
<span class="c1">#plt_by_weekday(mms.query("Bundesland == 'Oberösterreich'").iloc[-100:], " ‒ 9:30 Krisenstabmeldung")</span>
<span class="c1">#plt_by_weekday(ems.query("Bundesland == 'Österreich'").iloc[-100:], " ‒ 8:00 EMS")</span>
<span class="n">plt_by_weekday</span><span class="p">(</span><span class="n">ages1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">MIDRANGE_NDAYS</span> <span class="o">-</span> <span class="mi">7</span><span class="p">:],</span> <span class="s2">", logarithmisch ‒ AGES nach Meldedatum"</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt_by_weekday</span><span class="p">(</span><span class="n">ages1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">MIDRANGE_NDAYS</span> <span class="o">-</span> <span class="mi">7</span><span class="p">:],</span> <span class="s2">" ‒ AGES nach Meldedatum"</span><span class="p">,</span> <span class="n">uselog</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">plt_by_weekday</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">MIDRANGE_NDAYS</span> <span class="o">-</span> <span class="mi">7</span><span class="p">:],</span> <span class="s2">", logarithmisch ‒ AGES nach Labordatum"</span><span class="p">)</span>
    <span class="c1">#plt_by_weekday(ages1m.query("Bundesland == 'Österreich'").iloc[-100:], " ‒ AGES nach Meldedatum")</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_47_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=0bacf121">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [45]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">make_wowg_diag</span><span class="p">(</span>
    <span class="n">src</span><span class="p">,</span>
    <span class="n">stamp</span><span class="p">,</span>
    <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span>
    <span class="n">ccol</span><span class="o">=</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">"Neuinfektionen"</span><span class="p">,</span>
    <span class="n">ndays</span><span class="o">=</span><span class="mi">7</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">pltdg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">pltg7</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">fsdata</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#fsdata = mms.query("Bundesland == 'Österreich'").copy()</span>
    <span class="n">fsdata</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsdata</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c1">#cov.calc_inz(fsdata, ccol)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">fsdata</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bezirk"</span> <span class="k">if</span> <span class="s2">"Bezirk"</span> <span class="ow">in</span> <span class="n">src</span><span class="o">.</span><span class="n">columns</span> <span class="k">else</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">dailycol</span><span class="o">=</span><span class="n">ccol</span><span class="p">)</span>
    <span class="n">fsdata</span><span class="p">[</span><span class="n">ccol</span> <span class="o">+</span> <span class="s2">"_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsdata</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">fsdata</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsdata</span><span class="p">[</span><span class="n">ccol</span> <span class="o">+</span> <span class="s2">"_a7"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fsdata</span><span class="p">[</span><span class="n">ccol</span> <span class="o">+</span> <span class="s2">"_a7"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
    <span class="n">fsdata</span> <span class="o">=</span> <span class="n">fsdata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="n">display</span><span class="p">(</span><span class="n">stamp</span><span class="p">,</span> <span class="n">fsdata</span><span class="p">[[</span><span class="n">ccol</span><span class="p">,</span> <span class="n">ccol</span> <span class="o">+</span> <span class="s2">"_a7"</span><span class="p">,</span> <span class="s2">"inz_g7"</span><span class="p">,</span> <span class="s2">"inz_dg7"</span><span class="p">]]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1">#fsdata = fs_at.copy()</span>
    <span class="c1">#display(fsdata.dtypes)</span>
    
    <span class="c1">#ax = fig.subplots()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">stamp</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">pltg7</span> <span class="ow">or</span> <span class="n">pltdg</span><span class="p">:</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anstieg ggü. 7 Tage vorher"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pltdg</span><span class="p">:</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span>
                <span class="n">fsdata</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                <span class="c1">#drawstyle="steps-mid",</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">"Anstieg Wochentagswert (rechte Skala)"</span><span class="p">,</span>
                <span class="n">marker</span><span class="o">=</span><span class="s2">"+"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pltg7</span><span class="p">:</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span>
                <span class="n">fsdata</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                <span class="c1">#drawstyle="steps-mid",</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span>
                <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">"Anstieg Wochensumme (rechte Skala)"</span><span class="p">,</span>
                <span class="n">marker</span><span class="o">=</span><span class="s2">"x"</span>
                <span class="c1">#marker="D"</span>
            <span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax2</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">integer</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="c1">#ax.set_yscale("log", base=2)</span>
    <span class="c1">#ax.get_yaxis().set_major_locator(matplotlib.ticker.LogLocator(base=10.0, subs=(1.0, 0.5, 0.25)))</span>
    <span class="c1">#ax.get_yaxis().set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
    <span class="c1">#cmap = sns.color_palette(cov.div_l_cmap, as_cmap=True)</span>
    <span class="c1">#cnorm = matplotlib.colors.TwoSlopeNorm(vcenter=1, vmax=2)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fsdata</span><span class="p">[</span><span class="n">ccol</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span>
        <span class="n">fsdata</span><span class="p">[</span><span class="n">ccol</span> <span class="o">+</span> <span class="s2">"_a7"</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.45</span><span class="p">,)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
        <span class="c1">#linestyle="--",</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"7-Tage-Schnitt "</span> <span class="o">+</span> <span class="n">label</span><span class="p">,</span>
        <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">ds</span><span class="o">=</span><span class="s2">"steps-mid"</span><span class="p">)</span>
    <span class="c1">#ax.fill_between(fsdata["Datum"], 0, fsdata["AnzahlFaelle"], color="darkgrey")</span>
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">weekday</span> <span class="ow">in</span> <span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">dayofweek</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
            <span class="n">wkd</span> <span class="o">=</span> <span class="n">fsdata</span><span class="p">[</span><span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">dayofweek</span> <span class="o">==</span> <span class="n">weekday</span><span class="p">]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span>
                <span class="n">wkd</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">wkd</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">wkd</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
                <span class="p">(</span><span class="n">wkd</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span> <span class="o">-</span> <span class="n">wkd</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="n">cnorm</span><span class="p">(</span><span class="n">wkd</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:])),</span>
                <span class="n">units</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">angles</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">scale_units</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="n">wkd</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">/</span> <span class="mi">500</span><span class="p">,</span>
                <span class="c1">#headlength=2,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(bottom=500)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">fsdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
    <span class="c1">#ax.set_xticks(ax.get_xticks() + 0.5)</span>
    <span class="c1">#ax.get_yaxis().set_major_formatter(matplotlib.ticker.FormatStrFormatter("%.0f"))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"both"</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">ax2</span>

<span class="k">def</span> <span class="nf">same_axlims</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">axs2</span><span class="p">,</span> <span class="n">maxg</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">maxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minbottom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">axs2</span><span class="p">:</span>
        <span class="n">top</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">maxg</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs2</span><span class="p">))</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mf">1.1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs2</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs2</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
            <span class="c1">#ax.set_ylim(-0.2, 1)</span>
    <span class="n">left</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">right</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">)</span>
    <span class="n">top</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">maxy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">top</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">maxy</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
    <span class="n">bottom</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">minbottom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">minbottom</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">make_wowg_figs</span><span class="p">(</span><span class="n">bl</span><span class="p">,</span> <span class="n">maxg</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">7</span><span class="o">*</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">bl</span> <span class="o">+</span> <span class="s2">": Positive Tests nach Meldedatum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.96</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
    <span class="n">axs</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">axs2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1">#make_wowg_diag(fs_at, AGES_STAMP, axs[0])</span>
    <span class="c1">#ems0 = ems.query("Bundesland == 'Österreich'").copy()</span>
    <span class="c1">#mask = ems0["Datum"].dt.normalize().dt.tz_localize(None).isin(list(map(pd.to_datetime, ["2021-11-14", "2021-11-15"])))</span>
    <span class="c1">#display(mask)</span>
    <span class="c1">#display(mask.any())</span>
    <span class="c1">#assert mask.any()</span>
    <span class="c1">#ems0.loc[mask, "AnzahlFaelle"] = ems0.loc[mask, "AnzahlFaelle"].mean()</span>
    <span class="c1">#ems0["inz"] = cov.calc_inz(ems0)</span>
    <span class="c1">#cov.enrich_inz(ems0, catcol="Bundesland")</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span><span class="n">ems</span><span class="p">[</span><span class="n">ems</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span>
                               <span class="s2">"EMS "</span> <span class="o">+</span> <span class="n">ems</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span>
               <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">))</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span>
        <span class="n">mms</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s2">"BMI "</span> <span class="o">+</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span>
        <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">))</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span>
        <span class="n">ages1m</span><span class="p">[</span><span class="n">ages1m</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s2">"AGES Meldesumme "</span> <span class="o">+</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span>
        <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">fixup_axes</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">,</span> <span class="n">axs2</span><span class="p">):</span>
        <span class="n">same_axlims</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">axs2</span><span class="p">,</span> <span class="n">maxg</span><span class="o">=</span><span class="n">maxg</span><span class="p">)</span>
        <span class="c1">#cov.stampit(fig, cov.DS_BOTH)</span>
        
    <span class="n">fixup_axes</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">,</span> <span class="n">axs2</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>
    <span class="n">axs</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">axs2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s2">"Inklusive Nachmeldungen"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span><span class="n">ages1</span><span class="p">[</span><span class="n">ages1</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s2">"Nur Erstmeldungen"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">bl</span> <span class="o">+</span> <span class="s2">": Positive Tests nach Labordatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.025</span><span class="p">)</span>
    <span class="c1">#ax.set_xlim(left=ax.get_xlim()[0] + 7)</span>
    <span class="c1">#ax.set_title(None);</span>
    <span class="n">fixup_axes</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">,</span> <span class="n">axs2</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="c1">#fs.query("Bundesland == 'Österreich'")["AnzahlFaelle"].rolling(7).mean().tail(3)</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">make_wowg_figs</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">maxg</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">DETAIL_NDAYS</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=17461e43">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [46]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">make_wowg_figs</span><span class="p">(</span><span class="s2">"Vorarlberg"</span><span class="p">,</span> <span class="n">maxg</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">DETAIL_NDAYS</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=f0cd416b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [47]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cases</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span>
<span class="c1">#ismax = (cases &gt; cases.shift().cummax()).rename("ismax")</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">cases</span><span class="o">=</span><span class="n">cases</span><span class="p">))</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cases</span><span class="p">)</span>
<span class="c1">#ax.plot(cases[ismax], marker=".", lw=0)</span>
<span class="c1">#display(len(cases[ismax]))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Tägliche COVID-Fälle &amp; Allzeit-Maxima"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_50_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=8451a0b3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [48]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_minmax</span><span class="p">(</span><span class="n">fs_at</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">median</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"COVID-Fälle: Min, max, median, avg"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">plt_minmax</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_51_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=8b6fe47d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [49]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">draw3pt</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"inz"</span><span class="p">]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">": 7-Tage-Inzidenz / 100.000 EW in 3 Stufen"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">cl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">((</span><span class="s2">"C3"</span><span class="p">,</span> <span class="s2">"C1"</span><span class="p">,</span> <span class="s2">"C0"</span><span class="p">),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="c1">#data.quantile(0.995) * 1.1</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Extrem"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Hoch"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Gewöhnlich"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">draw3pt</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_52_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=e8a8d649">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="K%C3%BCrzliche-Negativmeldungen-in-Bundesl%C3%A4ndermeldungen">Kürzliche Negativmeldungen in Bundesländermeldungen<a class="anchor-link" href="#K%C3%BCrzliche-Negativmeldungen-in-Bundesl%C3%A4ndermeldungen">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e312812f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [50]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#mms[mms["AnzahlFaelle"] &lt; 0].query("Datum &gt;= '2022-03-01T00:00+2'")</span>
<span class="n">mms</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt;= '2022-03-01'"</span><span class="p">)[[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[50]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Datum</th>
<th>Bundesland</th>
<th>AnzahlFaelle</th>
</tr>
</thead>
<tbody>
<tr>
<th>4347</th>
<td>2022-04-25</td>
<td>Vorarlberg</td>
<td>-7.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=683bba97">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="K%C3%BCrzliche-Negativmeldungen-im-EMS">Kürzliche Negativmeldungen im EMS<a class="anchor-link" href="#K%C3%BCrzliche-Negativmeldungen-im-EMS">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=6477b732">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [51]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ems</span><span class="p">[</span><span class="n">ems</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt;= '2022-03-01T00:00+01:00'"</span><span class="p">)[[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[51]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Datum</th>
<th>Bundesland</th>
<th>AnzahlFaelle</th>
</tr>
</thead>
<tbody>
<tr>
<th>4466</th>
<td>2022-05-21 08:00:00+02:00</td>
<td>Tirol</td>
<td>-12.0</td>
</tr>
<tr>
<th>4496</th>
<td>2022-05-24 08:00:00+02:00</td>
<td>Tirol</td>
<td>-119.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=3fd7c19b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [52]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">trend_indicator</span><span class="p">(</span><span class="n">fsbl</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">fsbl</span><span class="p">)</span> <span class="o">+</span><span class="n">i</span>
    <span class="n">lastinz</span> <span class="o">=</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">'inz'</span><span class="p">]</span>
    <span class="n">inzd</span> <span class="o">=</span> <span class="n">lastinz</span> <span class="o">-</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="s2">"inz"</span><span class="p">]</span>
    <span class="n">inzd7</span> <span class="o">=</span> <span class="n">lastinz</span> <span class="o">-</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">7</span><span class="p">][</span><span class="s2">"inz"</span><span class="p">]</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">prev</span> <span class="o">=</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">last3</span> <span class="o">=</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">last5</span> <span class="o">=</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">4</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">last7</span> <span class="o">=</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">6</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">n_up</span> <span class="o">=</span> <span class="p">(</span><span class="n">last3</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>


    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="n">inzd</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span>
            <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">last3</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="ow">and</span>
            <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">last5</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
          <span class="n">n_up</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span>
          <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.01</span> <span class="ow">or</span>
          <span class="n">n_up</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="ow">and</span>
          <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.95</span> <span class="ow">and</span> <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.05</span> <span class="ow">and</span>
          <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">==</span> <span class="n">last7</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">inzd</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">last3</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="ow">and</span> <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.1</span> <span class="ow">or</span>
            <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.5</span><span class="p">):</span> <span class="c1"># and lastg1 &gt; 0.5:</span>
            <span class="k">return</span> <span class="s1">'grow'</span>
        <span class="k">return</span> <span class="s1">'slowgrow'</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="n">inzd</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span>
            <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">last3</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="ow">and</span>
            <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">last5</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
          <span class="n">n_up</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">and</span>
          <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.99</span> <span class="ow">or</span>
          <span class="n">n_up</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
          <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">1.05</span> <span class="ow">and</span>
          <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.95</span> <span class="ow">and</span>
          <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">==</span> <span class="n">last7</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">inzd</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">last3</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="ow">and</span> <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.9</span> <span class="ow">or</span>
            <span class="n">cur</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">):</span> <span class="c1"># and lastg1 &lt; 1.5:</span>
            <span class="k">return</span> <span class="s1">'shrink'</span>
        <span class="k">return</span> <span class="s1">'slowshrink'</span>
    <span class="k">return</span> <span class="s1">'unclear'</span>

<span class="k">def</span> <span class="nf">set_hls</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">set_hls_values</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">res</span><span class="p">)</span>
<span class="n">omicronbegdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-05-01"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plt_per_cat_inz</span><span class="p">(</span><span class="n">fs</span><span class="o">=</span><span class="n">fs</span><span class="p">,</span> <span class="n">stamp</span><span class="o">=</span><span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">omicronbegdate</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">DETAIL_NDAYS</span><span class="p">):</span>
    <span class="n">catlist</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">catcol</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">catlist</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"SARS-CoV-2-Fälle"</span> <span class="o">+</span> <span class="n">stamp</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="n">colors</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">grow</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">),</span>
        <span class="n">shrink</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">slowgrow</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">),</span>
        <span class="n">slowshrink</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.92</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">unclear</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">,</span> <span class="n">catlist</span><span class="p">):</span>
        <span class="n">fsbl</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="n">catcol</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
        <span class="n">fsbl</span> <span class="o">=</span> <span class="n">fsbl</span><span class="p">[</span><span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">ndays</span><span class="p">)]</span>
        <span class="n">bs</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span> <span class="o">*</span> <span class="mi">7</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"Einzel-Tageswert × 7"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">aa</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">snap</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ls</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"7-Tage-Inzidenz"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">legend</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
                <span class="n">handles</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">bs</span><span class="p">,</span>
                    <span class="n">ls</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">matplotlib</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="s1">'grow'</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">'Steigend &gt; 10%/Wo. &amp; nicht bremsend'</span><span class="p">),</span>
                    <span class="n">matplotlib</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="s1">'slowgrow'</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">'Eher steigend'</span><span class="p">),</span>
                    <span class="n">matplotlib</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="s1">'shrink'</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">'Sinkend &gt; 10%/Wo. &amp; nicht bremsend'</span><span class="p">),</span>
                    <span class="n">matplotlib</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="s1">'slowshrink'</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">'Eher sinkend'</span><span class="p">),</span>
                <span class="p">],</span>
                <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Beschriftung: </span><span class="si">{</span><span class="n">catcol</span><span class="si">}</span><span class="s2">: 7-Tage-Inzidenz/100.000 EW"</span>
                    <span class="s2">" (± Änderung Vortag/± Änderung Vorwoche)"</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">legend</span><span class="o">.</span><span class="n">get_title</span><span class="p">(),</span> <span class="n">fontsize</span><span class="o">=</span><span class="s1">'small'</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="c1">#fig.text(0.5, 0.9, "foo", fontsize="small", "Ste")</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bar</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bs</span><span class="p">):</span>
            <span class="n">bar</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">set_hls</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">trend_indicator</span><span class="p">(</span><span class="n">fsbl</span><span class="p">,</span> <span class="n">i</span><span class="p">)],</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.3</span><span class="p">))</span>
        <span class="c1">#ax.axhline(1, color="k")</span>
        <span class="c1">#ax.set_ylim(top=3, bottom=0.5)</span>
        <span class="n">lastinz</span> <span class="o">=</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'inz'</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">lastinz</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">inzd</span> <span class="o">=</span> <span class="n">lastinz</span> <span class="o">-</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="s2">"inz"</span><span class="p">]</span>
        <span class="n">inzd7</span> <span class="o">=</span> <span class="n">lastinz</span> <span class="o">-</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">7</span><span class="p">][</span><span class="s2">"inz"</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">lastinz</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">inzd</span><span class="si">:</span><span class="s2">+.0f</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">inzd7</span><span class="si">:</span><span class="s2">+.0f</span><span class="si">}</span><span class="s2">)"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">showday</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="c1">#ax.set_xlim(left=fsbl["Datum"].iloc[0])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">trend_indicator</span><span class="p">(</span><span class="n">fsbl</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.FuncFormatter(lambda v, _: f"×{v:.0f}"))</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fälle/100.000"</span><span class="p">)</span>
            <span class="c1">#ax.xaxis.set_major_locator(matplotlib.dates.MonthLocator(interval=3))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span>
    <span class="c1">#fig.autofmt_xdate()</span>
    
<span class="c1">#plt_per_cat_inz(ems, " ‒ EMS nach Meldedatum", #fromdate=pd.to_datetime("2021-11-01")</span>
<span class="c1">#               )</span>
<span class="c1">#raise</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt_per_cat_inz</span><span class="p">(</span><span class="n">ages1mx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="s2">" ‒ AGES nach Meldedatum 14-T"</span><span class="p">)</span> <span class="c1">#fromdate=pd.to_datetime("2021-11-01"))</span>
    <span class="c1">#axs = plt_per_cat_inz(mms, " ‒ BMI nach Meldedatum", #fromdate=pd.to_datetime("2021-11-01")</span>
    <span class="c1">#               )[1]</span>
    <span class="c1">#for ax in axs.flat:</span>
    <span class="c1">#    cov.set_logscale(ax)</span>
    <span class="c1">#    ax.set_ylim(bottom=50)</span>
    <span class="c1">#    ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.3, 1]))</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt_per_cat_inz</span><span class="p">(</span><span class="n">ages1m</span><span class="p">,</span> <span class="s2">" ‒ AGES nach Meldedatum"</span><span class="p">)</span>
<span class="c1">#plt_ag_sep(uselog=True)</span>
<span class="c1">#fig.text(0, 0.)</span>
<span class="c1">#plt_per_cat_inz(fs[fs["Datum"] != fs["Datum"].iloc[-1]], " ‒ AGES nach Labordatum (ohne neuesten Tag)")</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt_per_cat_inz</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="s2">" ‒ AGES nach Labordatum (inkl. neuestem Tag)"</span><span class="p">,)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
        <span class="c1">#cov.set_logscale(ax)</span>
        <span class="c1">#ax.set_ylim(bottom=50)</span>
        <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.3, 1]))</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=0ab1dfaf">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [53]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">])</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2020-10-01"</span><span class="p">))</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_58_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e095529d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [54]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#display(fs_at[fs_at["AnzahlFaelle"] &gt;= 9000][["Datum", "AnzahlFaelle", "inz"]])</span>
<span class="k">def</span> <span class="nf">plt_avg_scatter</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1">#ax.plot(ts, marker=".", linewidth=0.1, markersize=4, label=ts.name, **kwargs)</span>
    <span class="n">p_dayvals</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="n">ts</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">" (Tageswerte)"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span>
                                <span class="n">step</span><span class="o">=</span><span class="s2">"mid"</span><span class="p">)</span>
    <span class="n">means</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">p_means</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">means</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"7-Tage-Schnitt </span><span class="si">{</span><span class="n">ts</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
    <span class="n">p_lastmean</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">means</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Letzter 7-Tage-Schnitt"</span><span class="p">)</span>
    <span class="n">p_lastday</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">":"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Letzter Tageswert"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
        <span class="p">[</span><span class="n">p_means</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p_dayvals</span><span class="p">,</span> <span class="n">p_lastmean</span><span class="p">,</span> <span class="n">p_lastday</span><span class="p">],</span>
        <span class="p">[</span><span class="sa">f</span><span class="s2">"7-Tage-Schnitt </span><span class="si">{</span><span class="n">ts</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">" (Tageswerte)"</span><span class="p">,</span> <span class="s2">"Letzter 7-Tage-Schnitt"</span><span class="p">,</span> <span class="s2">"Letzter Tageswert"</span><span class="p">],</span>
        <span class="n">loc</span><span class="o">=</span><span class="s2">"upper left"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">ts</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> pro Tag"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plt_cases_simple</span><span class="p">(</span><span class="n">fs_at</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"Anzahl Fälle"</span><span class="p">)</span>
    <span class="n">plt_avg_scatter</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">)</span>
    <span class="n">plt_avg_scatter</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">)</span>
    <span class="c1">#axs[0].yaxis.set_major_locator(matplotlib.ticker.MultipleLocator(2500))</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s2">"log"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">ScalarFormatter</span><span class="p">())</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">subs</span><span class="o">=</span><span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Lineare Skala"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Logarithmische Skala"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">": Täglich entdeckte COVID-Fälle"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.05</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">plt_cases_simple</span><span class="p">(</span><span class="n">fs_at</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt_cases_simple</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_59_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=de841d3d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [55]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_uninf</span><span class="p">(</span><span class="n">fs_at</span><span class="p">):</span>
    <span class="n">fs_at</span> <span class="o">=</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">inzuninf</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span>
        <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">-</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">()</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span> <span class="o">*</span> <span class="mi">100_000</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inzuninf</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Inzidenz der nicht bereits innerhalb 120 Tage Infizierten (Schätzung)"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Inzidenz gesamt"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-08-01"</span><span class="p">))</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">plt_uninf</span><span class="p">(</span><span class="n">fs_at</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_60_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a721dc4a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [56]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt14d</span><span class="p">():</span>
    <span class="n">mms_at</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="p">(</span><span class="n">mms_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">mms_at</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms_at</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"14-Tage-Inzidenz pro 100.000 EW"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    
<span class="n">plt14d</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_61_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=448d98de">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="%C3%9Cbersicht-Pandemieverlauf">Übersicht Pandemieverlauf<a class="anchor-link" href="#%C3%9Cbersicht-Pandemieverlauf">¶</a></h1><p>Die rechte y-Achse ist logarithmisch (Änderung um gleichen Faktor ist immer gleich lang, gleiche absolute Änderungen werden mit zunehmendem Ausgangswert kleiner dargestellt).</p>
<p>Die gestrichelten Linien gehen jeweils vom letzen Wert aus, man kann daran leicht
ablesen wo wir uns gerade im Vergleich z.B. zur letzten Welle befinden.</p>
<p>Achtung: Die Zahlen v.a. der letzten 1-3 Tage sind in den hier verwendeten AGES normalerweise zu niedrig  und werden in den Folgetagen durch Nachmeldungen nach oben korrigiert. Der ORF hat dazu eine Übersicht unter "Verteilung neuer Fälle über die letzten Tage" bei <a href="https://orf.at/corona/daten/oesterreich">https://orf.at/corona/daten/oesterreich</a>. Derzeit scheint es dort leichte technische Probleme zu geben, das Diagramm wird zuerst nicht angezeigt, sondern man muss zuerst z.B. "Verstorbene" auswählen und dann wieder "Laborbestätigte Fälle" um zweiteres zu sehen.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=bd1523a3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [57]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">blverlauf</span> <span class="o">=</span> <span class="n">covdata</span><span class="o">.</span><span class="n">load_ww_blverlauf</span><span class="p">()</span>
<span class="n">blvfull</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">blverlauf</span><span class="p">[</span><span class="n">blverlauf</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-09-01"</span><span class="p">)])</span>
<span class="n">abwfrom</span> <span class="o">=</span> <span class="n">blverlauf</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="n">blverlauf_last</span> <span class="o">=</span> <span class="n">blverlauf</span><span class="p">[</span><span class="n">blverlauf</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">blverlauf</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span>
<span class="n">blv1</span> <span class="o">=</span> <span class="n">covdata</span><span class="o">.</span><span class="n">first_filedate</span><span class="p">(</span><span class="n">blvfull</span><span class="p">,</span> <span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a4d8cf2c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [58]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">blverlauf</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[58]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Timestamp('2023-07-24 23:10:09+0000', tz='UTC')</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=966c39cf">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [59]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">wien_hosp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">COLLECTROOT</span> <span class="o">/</span> <span class="s2">"covid/wien/wien.csv"</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">)</span>
<span class="n">wien_hosp</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">wien_hosp</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_DATE_FMT</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">())</span>
<span class="n">wien_hosp</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"stable"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">wien_hosp</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">keep</span><span class="o">=</span><span class="s2">"last"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">wien_hosp</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">hospfz_ow</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">])</span>

<span class="n">wien_hosp_x</span> <span class="o">=</span> <span class="n">wien_hosp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">wien_hosp_x</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">)</span>
<span class="n">hospfz_ow</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="n">hospfz_ow</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"BundeslandID"</span><span class="p">)</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hospfz_ow</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">wien_hosp_x</span>
        <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt;= '2022-11-02'"</span><span class="p">)</span>
        <span class="p">[</span><span class="s2">"HospPostCov"</span><span class="p">]</span>
        <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">"1D"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">interpolate</span><span class="p">(),</span>
    <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span> <span class="c1">#???</span>
    <span class="n">hospfz_ow</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-02"</span><span class="p">),</span> <span class="mi">9</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="n">wien_hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum == '2022-11-02'"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"HospPostCov"</span><span class="p">])</span>
    <span class="n">hospfz_ow</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-11-02"</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="n">wien_hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum == '2022-11-02'"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"HospPostCov"</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=1df4cded">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [60]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">natmon_latest</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/abwassermonitoring/dl_natmon_01_latest.csv"</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">,</span>
                            <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">errors</span><span class="o">=</span><span class="s2">"raise"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">"gemittelte kumulierte Faelle der letzten 7 Tage aus den Humantestungen"</span><span class="p">:</span> <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">,</span>
    <span class="s2">"Gesamtvirenfracht [Genkopien pro Tag * 10^6]"</span><span class="p">:</span> <span class="s2">"Abwassersignal"</span>
<span class="p">})</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>

<span class="n">natmon_norm</span> <span class="o">=</span> <span class="n">natmon_latest</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">msk_erw</span> <span class="o">=</span> <span class="n">natmon_norm</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2023-02-01"</span><span class="p">)</span>
<span class="c1">#display(natmon_norm)</span>
<span class="c1"># "Rund 52%" https://web.archive.org/web/20230110152232/https://abwassermonitoring.at/dashboard/</span>
<span class="n">anzEw</span> <span class="o">=</span> <span class="n">pandembev</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">natmon_norm</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">msk_erw</span><span class="p">,</span> <span class="s2">"Abwassersignal"</span><span class="p">]</span> <span class="o">=</span> <span class="n">natmon_norm</span><span class="p">[</span><span class="s2">"Abwassersignal"</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">anzEw</span> <span class="o">*</span> <span class="mf">0.515</span><span class="p">)</span>

<span class="c1"># "Mehr als 58%" https://abwassermonitoring.at/dashboard/</span>
<span class="n">natmon_norm</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">msk_erw</span><span class="p">,</span> <span class="s2">"Abwassersignal"</span><span class="p">]</span> <span class="o">=</span> <span class="n">natmon_norm</span><span class="p">[</span><span class="s2">"Abwassersignal"</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">anzEw</span> <span class="o">*</span> <span class="mf">0.582</span><span class="p">)</span>

<span class="c1">#natmon_latest["Datum"] = pd.to_datetime(natmon_latest["Datum"], format=cov.AGES_DATE_FMT)</span>
<span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">natmon</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">COLLECTROOT</span> <span class="o">/</span> <span class="s2">"covid/abwassermonitoring/natmon_01_all.csv.xz"</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">,</span>
                            <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">natmon</span> <span class="o">=</span> <span class="n">natmon</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"name"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
    <span class="n">natmon_latest0</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">natmon</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
            <span class="n">natmon</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"FileDate"</span><span class="p">)</span> <span class="o">==</span>
            <span class="n">natmon</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"FileDate"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
        <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s2">"all"</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="s2">"FileDate"</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">_drel</span><span class="p">(</span><span class="n">nm</span><span class="p">):</span>
        <span class="n">fst</span> <span class="o">=</span> <span class="n">nm</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">nm</span><span class="p">[</span><span class="s2">"Abwassersignal"</span><span class="p">]</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">()]</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="n">nm</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">nm</span><span class="p">[</span><span class="s2">"Abwassersignal"</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span>
        <span class="n">display</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">lst</span><span class="p">,</span> <span class="n">fst</span><span class="p">[</span><span class="s2">"Abwassersignal"</span><span class="p">]</span><span class="o">/</span><span class="n">lst</span><span class="p">[</span><span class="s2">"Abwassersignal"</span><span class="p">])</span>
    <span class="n">_drel</span><span class="p">(</span><span class="n">natmon_latest0</span><span class="p">)</span>
    <span class="n">_drel</span><span class="p">(</span><span class="n">natmon_latest</span><span class="p">)</span>
<span class="c1">#natmon_latest</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>name
FileDate          2023-07-24T23:10:09+00:00
Abwassersignal                      29918.7
Humansignal                         51059.0
Name: 2022-01-16 00:00:00, dtype: object</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>name
FileDate          2023-07-24T23:10:09+00:00
Abwassersignal                    5887.1333
Humansignal                             NaN
Name: 2023-07-18 00:00:00, dtype: object</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>5.0820</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>AnzahlFaelle7Tage    5.1059e+04
Abwassersignal       4.7869e+08
Name: 2022-01-16 00:00:00, dtype: float64</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>AnzahlFaelle7Tage           NaN
Abwassersignal       9.4192e+07
Name: 2023-07-18 00:00:00, dtype: float64</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>5.0820</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=3063ecdf">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [61]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span> <span class="o">=</span> <span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">with</span> <span class="n">sns</span><span class="o">.</span><span class="n">axes_style</span><span class="p">(</span><span class="s2">"whitegrid"</span><span class="p">,</span> <span class="p">{</span><span class="s1">'axes.grid'</span> <span class="p">:</span> <span class="kc">False</span><span class="p">}),</span> <span class="n">plt</span><span class="o">.</span><span class="n">rc_context</span><span class="p">({</span><span class="s2">"figure.dpi"</span><span class="p">:</span> <span class="mi">300</span><span class="p">}):</span>
    <span class="n">fsx</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">fsx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">bldata</span> <span class="o">=</span> <span class="n">fsx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2000</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">bl</span> <span class="o">==</span> <span class="s2">"Österreich"</span><span class="p">:</span>
            <span class="n">bldata</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">natmon_latest</span><span class="p">[</span><span class="s2">"Abwassersignal"</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">"left"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bldata</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">blv1</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"y"</span><span class="p">]</span>
                                 <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"Abwasser_y"</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">bl</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="s2">"Wien"</span><span class="p">):</span>
            <span class="n">bldata</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">wien_hosp</span><span class="p">[[</span><span class="s2">"HospPostCov"</span><span class="p">]],</span> <span class="n">on</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">"left"</span><span class="p">)</span>
            <span class="c1">#plt.plot(bldata["AnzEinwohner"])</span>
            <span class="c1">#display(bldata[~pd.isna(bldata["Abwassersignal"])])</span>
            <span class="c1">#display(bldata[["AnzEinwohner", "Abwassersignal", "inz"]].iloc[0])</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">plot_detail</span><span class="p">(</span><span class="n">bldata</span><span class="p">,</span> <span class="n">bl</span><span class="p">);</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Epidemieüberblick </span><span class="si">{</span><span class="n">bl</span><span class="si">}{</span><span class="n">AGES_STAMP</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x00000198EA4AC350&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x000001993E20D690&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x00000198896B8990&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x000001989F3DA2D0&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x000001990E54CD10&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x0000019910631B50&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x00000199109ED910&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x0000019910C33190&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_Normalstationsbelegung ohne PostCov' of &lt;matplotlib.lines.Line2D object at 0x0000019910E6E8D0&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x000001991100DD50&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_Normalstationsbelegung ohne PostCov' of &lt;matplotlib.lines.Line2D object at 0x00000199129DF850&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x00000199129AB2D0&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_3.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_4.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_5.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_6.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_7.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_8.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_9.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_67_10.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=93c1efb1">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [62]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">agdata2</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">print_predictions</span><span class="p">(</span><span class="n">agdata2</span><span class="p">[</span><span class="n">agdata2</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">),</span> <span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">,</span> <span class="s2">"Kumulative Inzidenz "</span> <span class="o">+</span> <span class="n">bl</span><span class="p">,</span>
                              <span class="n">target</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">35</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=cbd5ded2">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [63]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plt_status</span><span class="p">(</span><span class="n">fs_at</span><span class="p">,</span> <span class="n">hosp_at</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"sep"</span><span class="p">,</span> <span class="n">bymdat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">stamp</span><span class="o">=</span><span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ttly</span><span class="o">=</span><span class="mf">0.93</span><span class="p">):</span>
    <span class="n">fs_at</span> <span class="o">=</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="c1">#.query("Datum &gt;= '2021-08-01'").set_index("Datum")</span>
    <span class="c1">#ngeheilt = fs_at["AnzahlFaelleSum"] - fs_at["AnzahlGeheiltSum"]</span>
    <span class="c1">#aktiv = ngeheilt - fs_at["AnzahlTotSum"]</span>
    <span class="c1">#display(aktiv.tail(10))</span>
    <span class="c1">#fzhaus = aktiv - fs_at["FZHosp"] - fs_at["FZICU"]</span>
    <span class="n">caserate</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">dead0</span> <span class="o">=</span> <span class="n">erase_outliers</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">])</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">hosp_at</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">fs_at</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="s2">"FZICU"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FZICU"</span><span class="p">]</span>
        <span class="n">fs_at</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FZHosp"</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span>
        <span class="n">fs_at</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">],</span>
        <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">],</span>
        <span class="c1">#fs_at["AnzahlTotSum"],</span>
        <span class="c1">#fs_at["AnzahlGeheiltSum"],</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">"IntensivpatientInnen"</span><span class="p">,</span> <span class="s2">"Andere Hospitalisierte"</span><span class="p">],</span><span class="c1"># "Tot", "Inaktiv"],</span>
        <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">()[</span><span class="mi">3</span><span class="p">],</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">()[</span><span class="mi">1</span><span class="p">]],</span>
        <span class="c1">#colors=["k"] + sns.color_palette(n_colors=2),</span>
        <span class="c1">#step="pre",</span>
        <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">deadlabel</span> <span class="o">=</span> <span class="s2">"Verstorbene"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"sum2"</span> <span class="k">else</span> <span class="s2">"Verstorbene (14-Tage-Summe)"</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"sep"</span><span class="p">:</span>
        <span class="n">dead</span> <span class="o">=</span> <span class="n">dead0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">7</span> <span class="o">-</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">weekday</span><span class="p">()::</span><span class="mi">14</span><span class="p">]</span>
        <span class="c1">#display(fs_at["AnzahlTot"].iloc[-3:])</span>
        <span class="n">extrabar</span> <span class="o">=</span> <span class="n">dead</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">dead0</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">extrabar</span><span class="p">:</span>
            <span class="n">dead</span><span class="p">[</span><span class="n">dead0</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dead0</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dead</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
        <span class="n">bs</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">dead</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">dead</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">deadlabel</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=-</span><span class="mi">7</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s2">"edge"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">extrabar</span><span class="p">:</span>
            <span class="n">bs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_width</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span> <span class="o">*</span> <span class="p">(</span><span class="n">dead</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dead</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span> <span class="o">/</span> <span class="mi">14</span><span class="p">)</span>
        <span class="n">bs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">bymdat</span> <span class="ow">and</span> <span class="n">extrabar</span> <span class="ow">and</span> <span class="n">dead</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dead0</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
            <span class="n">bs</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dead0</span> <span class="k">if</span> <span class="n">bymdat</span> <span class="k">else</span> <span class="n">dead0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">9</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">bymdat</span> <span class="ow">and</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dead0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">9</span><span class="p">:],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
            <span class="n">fs_at</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"sum2"</span> <span class="k">else</span> <span class="n">dead0</span><span class="p">)</span> <span class="o">+</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span> <span class="o">+</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">],</span>
            <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span> <span class="o">+</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">deadlabel</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(bottom=20)</span>
    <span class="c1">#cov.set_logscale(ax)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">caserate</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"14-Tage-Inzidenz (rechte Skala)"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fälle"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">ScalarFormatter</span><span class="p">(</span><span class="n">useLocale</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Hospitalisierte/Verstorbene"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">caserate</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#ax.set_xlim(right=ax.get_xlim()[1] + 3, left=pd.to_datetime("2021-08-15"))</span>
    <span class="n">yrstart</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-01-01"</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ttly</span><span class="p">))</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
            <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">": Akute COVID-Krankheitslast ‒ Versuch einer Visualisierung"</span> <span class="o">+</span> <span class="n">stamp</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">ttly</span> <span class="o">+</span> <span class="mf">0.07</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ttly</span><span class="p">,</span> <span class="s2">"(Chronische/post-akute Erkrankung mangels Daten nicht dargestellt)"</span><span class="p">,</span>
            <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">stamp</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">stamp</span><span class="p">)</span>
    <span class="c1">#print(stamp, f"Krankheitstage seit {aktiv.loc[yrstart:].index[0]}:", aktiv.loc[yrstart:].sum(), ", davon im KH ", (fs_at["FZICU"] + fs_at["FZHosp"]).loc[yrstart:].sum())</span>
    <span class="c1">#print("Derzeit aktiv:",</span>
    <span class="c1">#      aktiv.iloc[-1],</span>
    <span class="c1">#      ", davon im KH",</span>
    <span class="c1">#      (hosp["IntensivBettenBelCovid19"] + hosp["NormalBettenBelCovid19"]).iloc[-1],</span>
    <span class="c1">#      ", davon auf ICU",</span>
    <span class="c1">#      hosp["IntensivBettenBelCovid19"].iloc[-1])</span>
    <span class="c1">#print("Verstorben 2022:", fs_at["AnzahlTot"].loc[yrstart:].sum())</span>
    <span class="k">return</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ax2</span>
<span class="c1">#selbl = "Oberösterreich"</span>
<span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Österreich"</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span> <span class="c1"># Vergleich Quellen in Subdiagrammen</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt_status</span><span class="p">(</span>
        <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">),</span>
        <span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">),</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">"sep"</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
        <span class="n">stamp</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
        <span class="n">ttly</span><span class="o">=</span><span class="mf">0.96</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">AGES_STAMP</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">" ("</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">")"</span><span class="p">))</span>
    <span class="n">m_ax</span><span class="p">,</span> <span class="n">m_ax2</span> <span class="o">=</span> <span class="n">plt_status</span><span class="p">(</span><span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"sep"</span><span class="p">,</span> <span class="n">bymdat</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stamp</span><span class="o">=</span><span class="s2">"Krisenstab "</span> <span class="o">+</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">same_axlims</span><span class="p">([</span><span class="n">ax</span><span class="p">,</span> <span class="n">m_ax</span><span class="p">],</span> <span class="p">[</span><span class="n">ax2</span><span class="p">,</span> <span class="n">m_ax2</span><span class="p">],</span> <span class="n">maxg</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt_status</span><span class="p">(</span>
        <span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Datum &gt;= '2019-08-01'"</span><span class="p">),</span>
        <span class="kc">None</span><span class="p">,</span><span class="c1">#hospfz.query(f"Bundesland == '{selbl}' and Datum &gt;= '2021-08-01'"),</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">"sep"</span><span class="p">,</span> <span class="n">bymdat</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">stamp</span><span class="o">=</span><span class="s2">", nach Meldedatum "</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>

<span class="n">plt_status</span><span class="p">(</span>
    <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Datum &gt;= '2019-08-01'"</span><span class="p">),</span>
    <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Datum &gt;= '2019-08-01'"</span><span class="p">),</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">"sep"</span><span class="p">,</span> <span class="n">bymdat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">stamp</span><span class="o">=</span><span class="n">AGES_STAMP</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[63]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>(&lt;Axes: ylabel='Hospitalisierte/Verstorbene'&gt;, &lt;Axes: ylabel='Fälle'&gt;)</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_69_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=1240ec7f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [64]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fs_at</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"FZHospAlle &lt; 450"</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">20</span><span class="p">)[[</span><span class="s2">"FZHospAlle"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[64]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>FZHospAlle</th>
<th>Datum</th>
</tr>
</thead>
<tbody>
<tr>
<th>12009</th>
<td>119.0</td>
<td>2023-06-10</td>
</tr>
<tr>
<th>12019</th>
<td>119.0</td>
<td>2023-06-11</td>
</tr>
<tr>
<th>12029</th>
<td>111.0</td>
<td>2023-06-12</td>
</tr>
<tr>
<th>12039</th>
<td>86.0</td>
<td>2023-06-13</td>
</tr>
<tr>
<th>12049</th>
<td>87.0</td>
<td>2023-06-14</td>
</tr>
<tr>
<th>12059</th>
<td>84.0</td>
<td>2023-06-15</td>
</tr>
<tr>
<th>12069</th>
<td>75.0</td>
<td>2023-06-16</td>
</tr>
<tr>
<th>12079</th>
<td>75.0</td>
<td>2023-06-17</td>
</tr>
<tr>
<th>12089</th>
<td>75.0</td>
<td>2023-06-18</td>
</tr>
<tr>
<th>12099</th>
<td>69.0</td>
<td>2023-06-19</td>
</tr>
<tr>
<th>12109</th>
<td>68.0</td>
<td>2023-06-20</td>
</tr>
<tr>
<th>12119</th>
<td>67.0</td>
<td>2023-06-21</td>
</tr>
<tr>
<th>12129</th>
<td>60.0</td>
<td>2023-06-22</td>
</tr>
<tr>
<th>12139</th>
<td>53.0</td>
<td>2023-06-23</td>
</tr>
<tr>
<th>12149</th>
<td>53.0</td>
<td>2023-06-24</td>
</tr>
<tr>
<th>12159</th>
<td>53.0</td>
<td>2023-06-25</td>
</tr>
<tr>
<th>12169</th>
<td>48.0</td>
<td>2023-06-26</td>
</tr>
<tr>
<th>12179</th>
<td>52.0</td>
<td>2023-06-27</td>
</tr>
<tr>
<th>12189</th>
<td>49.0</td>
<td>2023-06-28</td>
</tr>
<tr>
<th>12199</th>
<td>45.0</td>
<td>2023-06-29</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=52f663ec">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [65]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AnzahlFaelle &gt; PCRReg"</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)[[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"PCRReg"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[65]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Datum</th>
<th>Bundesland</th>
<th>PCRReg</th>
<th>AnzahlFaelle</th>
</tr>
</thead>
<tbody>
<tr>
<th>7305</th>
<td>2021-08-21</td>
<td>Vorarlberg</td>
<td>0.0000</td>
<td>61</td>
</tr>
<tr>
<th>7931</th>
<td>2023-05-09</td>
<td>Vorarlberg</td>
<td>24.4286</td>
<td>105</td>
</tr>
<tr>
<th>7995</th>
<td>2020-10-17</td>
<td>Wien</td>
<td>0.0000</td>
<td>703</td>
</tr>
<tr>
<th>8070</th>
<td>2020-12-31</td>
<td>Wien</td>
<td>0.0000</td>
<td>496</td>
</tr>
<tr>
<th>8073</th>
<td>2021-01-03</td>
<td>Wien</td>
<td>0.0000</td>
<td>210</td>
</tr>
<tr>
<th>8075</th>
<td>2021-01-05</td>
<td>Wien</td>
<td>357.0000</td>
<td>369</td>
</tr>
<tr>
<th>8193</th>
<td>2021-05-03</td>
<td>Wien</td>
<td>0.0000</td>
<td>18</td>
</tr>
<tr>
<th>8248</th>
<td>2021-06-27</td>
<td>Wien</td>
<td>0.0000</td>
<td>46</td>
</tr>
<tr>
<th>9071</th>
<td>2021-01-03</td>
<td>Österreich</td>
<td>0.0000</td>
<td>1630</td>
</tr>
<tr>
<th>9128</th>
<td>2021-03-01</td>
<td>Österreich</td>
<td>0.0000</td>
<td>1164</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=91c76167">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [66]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_big3</span><span class="p">(</span><span class="n">fs_at</span><span class="p">,</span> <span class="n">mms</span><span class="p">,</span> <span class="n">stamp</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">hosp_at</span> <span class="o">=</span> <span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
    <span class="c1">#ax2 = ax.twinx()</span>
    <span class="n">lw</span><span class="o">=</span><span class="mf">2.5</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">hospx</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span>
    <span class="n">hospy</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]:</span>
        <span class="n">hospx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">hospx</span><span class="p">,</span> <span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="s2">"Datum"</span><span class="p">]])</span>
        <span class="n">hospy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">hospy</span><span class="p">,</span> <span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="s2">"NormalBettenBelCovid19"</span><span class="p">]</span> <span class="o">+</span> <span class="n">hosp_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]])</span><span class="c1">#["IntensivBettenBelCovid19"])</span>
    <span class="k">elif</span> <span class="n">mms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]:</span>
        <span class="k">assert</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span>
        <span class="n">hospx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">hospx</span><span class="p">,</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="s2">"Datum"</span><span class="p">]])</span>
        <span class="n">hospy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">hospy</span><span class="p">,</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="s2">"FZICU"</span><span class="p">]])</span><span class="c1">#["IntensivBettenBelCovid19"])</span>
    <span class="n">hospx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">hospy</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=3000)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">hospy</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">deadrolling_nodata</span> <span class="o">=</span> <span class="mi">9</span> <span class="k">if</span> <span class="n">mms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">deadrolling</span> <span class="o">=</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span>
    <span class="n">deadrolling</span> <span class="o">=</span> <span class="n">deadrolling</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">deadrolling</span> <span class="o">=</span> <span class="n">deadrolling</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">deadrolling</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]</span>
    <span class="k">if</span> <span class="n">deadrolling_nodata</span><span class="p">:</span>
        <span class="n">deadrolling</span> <span class="o">=</span> <span class="n">deadrolling</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="n">deadrolling_nodata</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">deadrolling</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">deadrolling</span><span class="p">):],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"7-Tage-Inzidenz pro 100.000 Einwohner"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">deadrolling</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">hospy</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">deadrolling</span><span class="p">):],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Anzahl COVID-Fälle im KH"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">deadrolling</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Anzahl Tote pro 14 Tage*"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">deadrolling</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="c1">#fig.legend(loc="upper center", ncol=3, frameon=False, bbox_to_anchor=(0.5, 0.95))</span>
    <span class="n">aargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="s2">"larger"</span><span class="p">)</span>
    <span class="c1">#display(hospy, hospy.last_valid_index())</span>
    <span class="n">annots</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s1">'inz'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">fs_at</span><span class="p">[</span><span class="s1">'inz'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> Fälle in 7 Tagen</span><span class="se">\n</span><span class="s2">/100.000 EW"</span><span class="p">,</span> <span class="n">aargs</span><span class="p">),</span>
        <span class="p">(</span><span class="n">hospy</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hospy</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">hospy</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hospy</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> im KH"</span><span class="p">,</span> <span class="n">aargs</span><span class="p">),</span>
        <span class="p">(</span><span class="n">deadrolling</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">deadrolling</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> Tote* in 14 Tagen"</span><span class="p">,</span> <span class="n">aargs</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Inzidenz, Krankenhaus-PatientInnen, Tote"</span> <span class="o">+</span> <span class="n">stamp</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"x-large"</span><span class="p">)</span>
    <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.dates.DateFormatter("%b %y"))</span>
    <span class="c1">#ax.xaxis.set_major_locator(matplotlib.dates.MonthLocator())</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">deadrolling</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">hospx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">330</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">deadrolling</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">right</span><span class="o">=</span><span class="n">hospx</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">hospx</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">deadrolling</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">)</span>
    <span class="n">dodgeannot</span><span class="p">(</span><span class="n">annots</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="s2">"larger"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">tight</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hospx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">300</span><span class="p">:</span>
        <span class="n">tight</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"major"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">hospx</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">MIDRANGE_NDAYS</span> <span class="o">+</span> <span class="mi">14</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Personen (siehe Beschriftung)"</span><span class="p">);</span>
    <span class="k">if</span> <span class="n">mms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.03</span> <span class="k">if</span> <span class="n">tight</span> <span class="k">else</span> <span class="mf">0.07</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"* Tote nach Todesdatum, letzte </span><span class="si">{</span><span class="n">deadrolling_nodata</span><span class="si">}</span><span class="s2"> Tage wegen zu erwartenden Nachmeldungen weggelassen"</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">tight</span> <span class="k">else</span> <span class="mf">0.06</span><span class="p">,</span>
            <span class="s2">"* Tote nach Meldedatum, ohne Ausreißer-Nachmeldungen. Nur als Trendindikator geignet."</span>
            <span class="s2">"</span><span class="se">\n</span><span class="s2">Bereinigte Todeszahlen inkl. Nachmeldungen sind erst später im Nachhinein verfügbar (via AGES)."</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">)</span>
    <span class="c1">#cov.stampit(fig)</span>
    <span class="c1">#ax2.set_ylim(bottom=0)</span>
    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.MultipleLocator(100))</span>
<span class="n">plt_big3</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Datum &gt;= '2021-07-01'"</span><span class="p">),</span> <span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Datum &gt;= '2021-07-01'"</span><span class="p">),</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt_big3</span><span class="p">(</span><span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Datum &gt;= '2021-01-01'"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">MIDRANGE_NDAYS</span> <span class="o">-</span> <span class="mi">14</span><span class="p">:],</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
<span class="c1">#plt_big3(mmx.query("Bundesland == 'Oberösterreich' and Datum &gt;= '2022-01-01'").iloc[-MIDRANGE_NDAYS - 14:], None, "")</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_72_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=2aff40d6">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [67]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mmx</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[67]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>9977    45
9978    41
9979    39
Name: FZHosp, dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=23888a9a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>In den folgenden Heatmaps wurden die Bundesländer wurden nach Möglichkeit so angeordnet dass ähnliche untereinander sind.
Dabei wurde die NUTS Gliederung (<a href="https://www.statistik.at/web_de/klassifikationen/regionale_gliederungen/nuts_einheiten/index.html">https://www.statistik.at/web_de/klassifikationen/regionale_gliederungen/nuts_einheiten/index.html</a>) herangezogen die Österreich in eine Westregion mit Voralberg, Tirol, Salzburg, OÖ, Ostregion (Niederösterreich, Wien, Burgenland) und eine Südregion (Kärnten, Steiermark) unterteilt. Diese Unterteilung ist auch im Hinblick auf den früheren Schulstart in der Ostregion sinnvoll.</p>
<p>Die Farbskalierung erfolgt mit <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.colors.SymLogNorm.html#matplotlib.colors.SymLogNorm">https://matplotlib.org/stable/api/_as_gen/matplotlib.colors.SymLogNorm.html#matplotlib.colors.SymLogNorm</a>, d.h. die Farbzuteilung ist bis zur Inzidenz 20 linear und ab da logarithmisch.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=b37f0992">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [222]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="c1">#df["Datum"] = df</span>
<span class="c1">#print(df.dtypes)</span>
<span class="c1">#print(df.index)</span>
<span class="c1">#df.replace(0, 1, inplace=True)</span>

<span class="k">def</span> <span class="nf">date_hm_extent</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Calculate extents for imshow.</span>
<span class="sd">    </span>
<span class="sd">    See &lt;https://stackoverflow.com/a/45349235/2128694&gt;.</span>
<span class="sd">    """</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span>
    <span class="n">dnum</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">dnum</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dnum</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">dnum</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">step</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">stop</span> <span class="o">=</span> <span class="n">dnum</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">step</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
    <span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">extent</span>
<span class="c1"># fig, ax = plt.subplots(figsize=(14, 9) if bezmode else (14, 2))</span>

<span class="k">def</span> <span class="nf">plt_tl_heat</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">im_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cbar_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="c1">#cmap = cov.adjust_cmap(df, vmin=1, center=15)[0]</span>
    <span class="c1">#display(np.nanmax(df.to_numpy()))</span>
    <span class="c1">#tsnorm = matplotlib.colors.TwoSlopeNorm(vmin=1, vcenter=15, vmax=np.nanmax(df.to_numpy()))</span>
    <span class="c1">#lnorm = matplotlib.colors.LogNorm()</span>
    <span class="c1">#combnorm = matplotlib.colors.FuncNorm((</span>
    <span class="c1">#    lambda vs: lnorm(tsnorm(vs)),</span>
    <span class="c1">#    lambda vs: tsnorm.inverse(lnorm.inverse(vs))</span>
    <span class="c1">#))</span>
    <span class="n">def_im_args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="c1">#fmt=".0f",</span>
        <span class="c1">#center=0,</span>
        <span class="c1">#annot=True,</span>
        <span class="c1">#cmap="Spectral_r",</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">SymLogNorm</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">linscale</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="c1">#ax=axs[0],</span>
        <span class="n">aspect</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">,</span>
        <span class="n">interpolation</span><span class="o">=</span><span class="s2">"nearest"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">im_args</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">def_im_args</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">im_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">def_im_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">im_args</span><span class="p">)</span>
        <span class="c1">#if "cmap" not in def_im_args and hasattr(def_im_args["norm"], "linthresh"):</span>
        <span class="c1">#    def_im_args["cmap"]=cov.adjust_cmap(df, cmap=cov.un_cmap, center=def_im_args["norm"].linthresh * 2)</span>
    <span class="c1">#print(df)</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">date_hm_extent</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="o">**</span><span class="n">def_im_args</span><span class="p">)</span>
    <span class="c1">#ax.grid(False)</span>
    <span class="c1">#ax.grid(bezmode)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
    <span class="c1">#ax.xaxis.set_major_locator(matplotlib.dates.MonthLocator())</span>
    <span class="c1">#ax.xaxis.set_minor_locator(matplotlib.dates.DayLocator())</span>
    <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.dates.DateFormatter('%b'))</span>
    <span class="n">showyear</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">350</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="n">showyear</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">showyear</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"right"</span><span class="p">,</span> <span class="n">rotation_mode</span><span class="o">=</span><span class="s2">"anchor"</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FixedLocator</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">))))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FixedFormatter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">rows</span><span class="p">))))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">right</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">cbar_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">def_cbar_args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="nb">format</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.0f</span><span class="s2">"</span><span class="p">),</span>
            <span class="n">ticks</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">3000</span><span class="p">]</span> <span class="k">if</span> <span class="n">vmax</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="k">else</span>
                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span> <span class="k">if</span> <span class="n">vmax</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cbar_args</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">def_cbar_args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">cbar_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">def_cbar_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">cbar_args</span><span class="p">)</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="o">**</span><span class="n">def_cbar_args</span><span class="p">);</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">im</span><span class="p">,</span> <span class="n">cbar</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">mindate</span> <span class="o">=</span> <span class="s2">"2020-01-15"</span>
<span class="n">plt_tl_heat</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe != 'Alle' and Datum &gt;= '</span><span class="si">{</span><span class="n">mindate</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"rows"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ag_to_id</span><span class="p">),</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Inzidenz in den Altersgruppen"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">);</span>
<span class="n">fs0</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">fs0</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">]):</span>
    <span class="n">fs0</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">fs0</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
<span class="n">fs0</span> <span class="o">=</span> <span class="n">fs0</span><span class="p">[</span><span class="n">fs0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">mindate</span><span class="p">)]</span>
<span class="n">plt_tl_heat</span><span class="p">(</span><span class="n">fs0</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"BLCat"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Inzidenz in den Bundesländern"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
<span class="n">plt_tl_heat</span><span class="p">(</span><span class="n">fs0</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"BLCat"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">"hosp"</span><span class="p">),</span>
            <span class="n">im_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">SymLogNorm</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">linscale</span><span class="o">=</span><span class="mf">.25</span><span class="p">)),</span>
           <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Spitalsbelegung/100.000 EW in den Bundesländern"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">);</span>
<span class="n">plt_tl_heat</span><span class="p">(</span><span class="n">fs0</span><span class="p">[</span><span class="n">fs0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">fs0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s2">"BLCat"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">"dead14"</span><span class="p">),</span>
            <span class="n">im_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">SymLogNorm</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">linscale</span><span class="o">=</span><span class="mf">.5</span><span class="p">)),</span>
            <span class="n">cbar_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">),</span>
           <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Tote/14 Tage/100.000 EW in den Bundesländern"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">);</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">fs0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[222]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>(18317.0000, 19538.0000)</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_75_1.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=90e48051">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Hotspots-in-Bezirken-und-Altersgruppen-und-Ver%C3%A4nderung">Hotspots in Bezirken und Altersgruppen und Veränderung<a class="anchor-link" href="#Hotspots-in-Bezirken-und-Altersgruppen-und-Ver%C3%A4nderung">¶</a></h2><p>Die folgenden Diagramme stellen sehr kompakt über viele Bezirke/Bundesländer bzw. Altersgruppe-Bundesland-Kombinationen hinweg dar. Es werden alle Gruppen/Bezirke/Bundesländer dargestellt die entweder zu den 40
mit der meisten Inzidenz haben, oder zumindest eine halbe Million Einwohner/"Mitglieder" haben.</p>
<p>Die Diagramme sind jeweils von oben nach unten nach Inzidenz sortiert.
Der Balken geht von der Inzidenz vor sieben Tagen zum aktuellsten Inzidenzwert
(das schwarze Ende ist der Wert vor 7 Tagen). Der schwarze bzw. gelbe Pfeil
markieren die Inzidenz vor einem Tag bzw. vor zwei Wochen. Sie zeigen jeweils
auf den aktuellen Inzidenzwert (auf das Balkenende). D.h. wenn die derzeitige
Inzidenz höher ist, geht der Pfeil nach rechts, ist sie seitdem gesunken nach links.</p>
<p>Die Einfärbung der Balken erfolgt je nach dem prozentuellen Anstieg (immer dunkleres Rot)
bzw. Verringerung (immer dunkleres Blau) seit gestern (schwarzer Pfeil).</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=c0ab71ee">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [69]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_top_today</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">catcol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"inz"</span><span class="p">,</span> <span class="n">add_ew</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">by</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">n_top</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">topn</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">n_top</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">add_ew</span><span class="p">:</span>
        <span class="n">topn</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="n">n_top</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AnzEinwohner &gt;= 500_000"</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">topn</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">topn</span><span class="c1">#.sort_values(by="inz")</span>
<span class="k">def</span> <span class="nf">cleancurbez</span><span class="p">(</span><span class="n">bez</span><span class="p">):</span>
    <span class="n">cur_bez</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">bez</span><span class="p">)</span>
    <span class="n">nwien</span> <span class="o">=</span> <span class="p">(</span><span class="n">cur_bez</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"Wien"</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">cur_bez</span><span class="p">[</span><span class="s2">"GKZ"</span><span class="p">])</span>
    <span class="n">cur_bez</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">nwien</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cur_bez</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">nwien</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span>
        <span class="p">(</span><span class="n">cur_bez</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">nwien</span><span class="p">,</span> <span class="s2">"GKZ"</span><span class="p">]</span> <span class="o">//</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">BUNDESLAND_BY_ID</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME_BY_BUNDESLAND</span><span class="p">),</span>
        <span class="n">sep</span><span class="o">=</span><span class="s2">"/"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cur_bez</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"inz_a7"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pltbez</span><span class="p">(</span><span class="n">bez</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">topargs</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_manychange</span><span class="p">(</span><span class="n">get_top_today</span><span class="p">(</span><span class="n">cleancurbez</span><span class="p">(</span><span class="n">bez</span><span class="p">),</span> <span class="s1">'Bezirk'</span><span class="p">,</span> <span class="o">**</span><span class="n">topargs</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bezirke: 7-Tages-</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">pltbez</span><span class="p">(</span><span class="n">bez</span><span class="p">,</span> <span class="s2">"Inzidenz ‒ Höchste &amp; Meiste Einwohner"</span><span class="p">)</span>
<span class="c1">#pltbez(bez1m, "Melde-Inzidenz ‒ Höchste &amp; Meiste Einwohner")</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">pltbez</span><span class="p">(</span><span class="n">bez</span><span class="p">,</span> <span class="s2">"Inzidenz ‒ Prozentuell Meiststeigend/Woche"</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"inz_g7"</span><span class="p">,</span> <span class="n">add_ew</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">pltbez</span><span class="p">(</span><span class="n">bez</span><span class="p">,</span> <span class="s2">"Inzidenz ‒ Prozentuell Meiststeigend/Tag"</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"inz_g"</span><span class="p">,</span> <span class="n">add_ew</span><span class="o">=</span><span class="n">Faclse</span><span class="p">)</span>
    <span class="n">pltbez</span><span class="p">(</span><span class="n">bez1m</span><span class="p">,</span> <span class="s2">"Melde-Inzidenz ‒ Prozentuell Meiststeigend/Tag"</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"inz_g"</span><span class="p">,</span> <span class="n">add_ew</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">pltbez</span><span class="p">(</span><span class="n">bez1m</span><span class="p">,</span> <span class="s2">"Inzidenz nach Meldedatum"</span><span class="p">)</span>
    <span class="c1">#ax.set_xscale("log")</span>
    <span class="c1">#ax.xaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.85, 1]))</span>
    <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
    <span class="c1">#cur_bez[["Bezirk", "Datum", "inz", "inz_prev7", "g_inz"]]</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_manychange</span><span class="p">(</span><span class="n">get_top_today</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">),</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Gruppe"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Altersgruppen/Bundesland: 7-Tages-Inzidenz ‒ Höchste &amp; Größte"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">);</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="c1">#ax = cov.plt_manychange(get_top_today(agd_sums, "Gruppe", by="inz_g7", add_ew=False), catcol="Gruppe")</span>
    <span class="c1">#ax.set_title("Altersgruppen/Bundesland: 7-Tages-Inzidenz ‒ Meiststeigend/Woche" + AGES_STAMP);</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_manychange</span><span class="p">(</span><span class="n">get_top_today</span><span class="p">(</span><span class="n">agd</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"inz_g7"</span><span class="p">,</span> <span class="n">add_ew</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Gruppe"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Altersgruppen/Bundesland: 7-Tages-Inzidenz ‒ Meiststeigend/Woche"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">);</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_manychange</span><span class="p">(</span><span class="n">get_top_today</span><span class="p">(</span><span class="n">agd1m_sums</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">),</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Gruppe"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Altersgruppen/Bundesland: 7-Tages-Melde-Inzidenz"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">);</span>

<span class="k">def</span> <span class="nf">pltall_hotspots</span><span class="p">(</span><span class="n">bez</span><span class="p">,</span> <span class="n">agd_sums</span><span class="p">,</span> <span class="n">kind</span><span class="p">):</span>
    <span class="n">mixcats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">cleancurbez</span><span class="p">(</span><span class="n">bez</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'Bezirk'</span><span class="p">:</span> <span class="s1">'Gruppe'</span><span class="p">}),</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">)])</span>
    <span class="n">tops</span> <span class="o">=</span> <span class="n">get_top_today</span><span class="p">(</span><span class="n">mixcats</span><span class="p">,</span> <span class="s1">'Gruppe'</span><span class="p">,</span> <span class="n">add_ew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_manychange</span><span class="p">(</span><span class="n">tops</span><span class="p">,</span> <span class="s1">'Gruppe'</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Altersgruppen &amp; Bezirke mit Höchster Inzidenz nach </span><span class="si">{</span><span class="n">kind</span><span class="si">}</span><span class="s2">"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
    
    <span class="c1">#tops = get_top_today(cov.filterlatest(mixcats).query("inz_g14 &gt;= 1"), 'Gruppe', add_ew=False)</span>
    <span class="c1">#ax = cov.plt_manychange(tops, 'Gruppe')</span>
    <span class="c1">#ax.set_title("Altersgruppen &amp; Bezirke mit höherer Inzidenz als vor 2 Wochen" + AGES_STAMP)</span>
    <span class="n">ntop</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"#COVID19at Top-</span><span class="si">{</span><span class="n">ntop</span><span class="si">}</span><span class="s2"> Hotspots (nach AGES-</span><span class="si">{</span><span class="n">kind</span><span class="si">}</span><span class="s2">):</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">inote</span> <span class="o">=</span> <span class="s2">" Fälle in 7 Tagen/100.000 EW"</span>
    <span class="n">dnote</span> <span class="o">=</span> <span class="s2">" in 7 Tagen"</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ntop</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">mrec</span> <span class="o">=</span> <span class="n">tops</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">."</span><span class="p">,</span> <span class="n">mrec</span><span class="p">[</span><span class="s2">"Gruppe"</span><span class="p">],</span> <span class="sa">f</span><span class="s2">"(</span><span class="si">{</span><span class="n">mrec</span><span class="p">[</span><span class="s1">'inz'</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}{</span><span class="n">inote</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">mrec</span><span class="p">[</span><span class="s1">'inz_g7'</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">+.0%</span><span class="si">}{</span><span class="n">dnote</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
        <span class="n">dnote</span> <span class="o">=</span> <span class="n">inote</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="nb">print</span><span class="p">()</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">pltall_hotspots</span><span class="p">(</span><span class="n">bez</span><span class="p">,</span> <span class="n">agd_sums</span><span class="p">,</span> <span class="s2">"Labordatum"</span><span class="p">)</span>
    <span class="n">pltall_hotspots</span><span class="p">(</span><span class="n">bez1m</span><span class="p">,</span> <span class="n">agd1m_sums</span><span class="p">,</span> <span class="s2">"Meldedatum"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=e84737da">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Bezirke">Bezirke<a class="anchor-link" href="#Bezirke">¶</a></h1>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=53515fb7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p><a id="allbez-heatmap"></a>Die folgende Heatmap zeigt den Inzidenzverlauf pro Bezirk. Die Bezirke wurden hierbei so sortiert dass möglichst Nachbarbezirke nacheinander kommen und die Bezirke auch nach Bundesland und Region (<a href="https://de.wikipedia.org/wiki/NUTS:AT">https://de.wikipedia.org/wiki/NUTS:AT</a>) gruppiert sind.</p>
<p><img alt="bezirk-order-2.png" src="data:image/png;base64,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"/></p>
<p>-- Basiskarte © STATISTIK AUSTRIA, Letzte Änderung am 16.08.2021 <a href="https://www.statistik.at/web_de/klassifikationen/regionale_gliederungen/politische_bezirke/index.html">https://www.statistik.at/web_de/klassifikationen/regionale_gliederungen/politische_bezirke/index.html</a></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=d0e90857">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [70]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'image.cmap'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">un_cmap</span>
<span class="n">bez_hm</span> <span class="o">=</span> <span class="n">bez</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">bez</span><span class="p">[</span><span class="s2">"GKZ"</span><span class="p">])]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#bez_hm["KFZ"] = bez_hm["Bezirk"].apply(cov.bezname_to_kfz)</span>
<span class="n">bez_hm</span><span class="p">[</span><span class="s2">"sn"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bez_hm</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">shorten_bezname</span><span class="p">)</span>
<span class="c1">#bez_hm["inz"].replace(0, 0.1, inplace=True)</span>
<span class="c1">#kfz_to_gkz = bez_hm.set_index("KFZ")["GKZ"].to_dict()</span>
<span class="n">sname_to_gkz</span> <span class="o">=</span> <span class="n">bez_hm</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"sn"</span><span class="p">)[</span><span class="s2">"GKZ"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="n">geo_order_to_index</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">BEZ_GKZ_GEO_ORDER</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">BEZ_GKZ_GEO_ORDER</span><span class="p">))))</span>

<span class="k">def</span> <span class="nf">plt_bez_hm</span><span class="p">(</span><span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"inz"</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">recent</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">bez_hm0</span> <span class="o">=</span> <span class="n">bez_hm</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">recent</span> <span class="k">else</span> <span class="n">bez_hm</span><span class="p">[</span>
        <span class="n">bez_hm</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">bez_hm</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">MIDRANGE_NDAYS</span><span class="p">)]</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span><span class="p">:</span>
        <span class="n">bez_hm0</span> <span class="o">=</span> <span class="n">bez_hm0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bezirk != 'Rust(Stadt)'"</span><span class="p">)</span>
        <span class="c1">#bez_hm0 = bez_hm0[bez_hm0["Datum"] &lt;= bez_hm0["Datum"].iloc[-1] - timedelta(7)]</span>
        <span class="n">bez_hm0</span> <span class="o">=</span> <span class="n">bez_hm0</span><span class="p">[</span><span class="n">bez_hm0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bez_hm0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">9</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">rwidth</span> <span class="o">=</span> <span class="mi">28</span>
        <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">bez_hm0</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">,</span> <span class="n">rwidth</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"dead28"</span><span class="p">]):</span>
            <span class="n">bez_hm0</span><span class="p">[</span><span class="s2">"dead28"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bez_hm0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">bez_hm0</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
    <span class="n">bez_hm_p</span> <span class="o">=</span> <span class="p">(</span><span class="n">bez_hm0</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"sn"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span>
                             <span class="n">values</span><span class="o">=</span><span class="s2">"InfektionenPro100"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"cumulative"</span> <span class="k">else</span>
                             <span class="s2">"inz"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"inz"</span> <span class="k">else</span>
                             <span class="s2">"inz_g7"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"inz_g7"</span> <span class="k">else</span>
                             <span class="s2">"dead28"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">100_000</span><span class="p">)</span>
            <span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"index"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sname_to_gkz</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">geo_order_to_index</span><span class="p">)))</span>
    <span class="n">bez_hm_p</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'all'</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="kc">None</span> <span class="k">if</span> <span class="n">recent</span> <span class="k">else</span> <span class="mi">250</span><span class="p">)</span>
    <span class="n">mid</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'inz'</span><span class="p">:</span>
        <span class="k">if</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">recent</span><span class="p">:</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">LogNorm</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">SymLogNorm</span><span class="p">(</span><span class="n">mid</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"inz_g7"</span><span class="p">:</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">TwoSlopeNorm</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vcenter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'cumulative'</span><span class="p">:</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span><span class="p">:</span>
        <span class="c1">#bez_hm_p.replace(0, 0.001, inplace=True)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">SymLogNorm</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">linscale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"bad mode"</span><span class="p">)</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'inz_g7'</span> 
        <span class="k">else</span> <span class="n">cov</span><span class="o">.</span><span class="n">INZ_TICKS</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"inz"</span>
        <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">75</span><span class="p">]</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span>
        <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">plt_tl_heat</span><span class="p">(</span><span class="n">bez_hm_p</span><span class="p">,</span> <span class="n">im_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">aspect</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
            <span class="c1">#cmap=sns.blend_palette(["darkbrown", "red", "white"], as_cmap=True)</span>
            <span class="c1">#cmap=sns.color_palette("RdYlGn_r", as_cmap=True),</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">div_l_cmap</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"inz_g7"</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">),</span> <span class="n">cbar_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="n">ticks</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">tsstr</span> <span class="o">=</span> <span class="s2">" bis "</span> <span class="o">+</span> <span class="n">bez_hm0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">)</span> <span class="o">+</span> <span class="n">AGES_STAMP</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'cumulative'</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Kumulative Inzidenz (in Prozent) in den Bezirken"</span> <span class="o">+</span> <span class="n">tsstr</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'inz_g7'</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Inzidenzveränderung (Faktor) ggü. 7 Tage vorher in den Bezirken"</span> <span class="o">+</span> <span class="n">tsstr</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"inz"</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Inzidenz in den Bezirken"</span> <span class="o">+</span> <span class="n">tsstr</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Tote in den Bezirken pro 28 Tage und 100.000 Einwohnern"</span> <span class="o">+</span> <span class="n">tsstr</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"bad mode"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">labelleft</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labelright</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">gkzs</span> <span class="o">=</span> <span class="n">bez_hm_p</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sname_to_gkz</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#display(gkzs)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="p">(</span><span class="n">gkzs</span> <span class="o">//</span> <span class="mi">100</span> <span class="o">!=</span> <span class="n">gkzs</span><span class="o">.</span><span class="n">shift</span><span class="p">()</span> <span class="o">//</span> <span class="mi">100</span><span class="p">)</span>
    <span class="c1">#display(len(diff) - diff[diff].index.values)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span> <span class="o">-</span> <span class="n">diff</span><span class="p">[</span><span class="n">diff</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">xmin</span><span class="o">=</span><span class="n">bez_hm0</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xmax</span><span class="o">=</span><span class="n">bez_hm0</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bez_hm_p</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">xmin</span><span class="o">=</span><span class="n">bez_hm0</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xmax</span><span class="o">=</span><span class="n">bez_hm0</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.08</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">"black"</span><span class="p">)</span>
    <span class="c1">#else:</span>
    <span class="c1">#    ax.grid(False)</span>
    
<span class="n">plt_bez_hm</span><span class="p">(</span><span class="s2">"inz"</span><span class="p">)</span>
<span class="n">plt_bez_hm</span><span class="p">(</span><span class="s2">"inz_g7"</span><span class="p">)</span>
<span class="c1">#plt_bez_hm("cumulative")</span>
<span class="n">plt_bez_hm</span><span class="p">(</span><span class="s2">"dead"</span><span class="p">)</span>
<span class="c1">#plt_bez_hm(BEZMODE_LOW)</span>
<span class="c1">#plt_bez_hm(BEZMODE_HIGH)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_80_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_80_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_80_2.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e9500976">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [71]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">selbezs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Melk"</span><span class="p">,</span> <span class="s2">"Waidhofen an der Ybbs(Stadt)"</span><span class="p">,</span> <span class="s2">"Wiener Neustadt(Stadt)"</span><span class="p">,</span> <span class="s2">"Niederösterreich"</span><span class="p">,</span> <span class="s2">"Österreich"</span><span class="p">]</span>
<span class="c1">#selbezs = ["Landeck", "Tirol", "Österreich"]</span>
<span class="c1">#selbezs = ["Braunau am Inn", "Ried im Innkreis", "Schärding", "Grieskirchen", "Oberösterreich", "Österreich"]</span>
<span class="c1">#selbezs = (</span>
<span class="c1">#    ["Villach Stadt"] +</span>
<span class="c1">#    list(bez[bez["Bundesland"] == "Kärnten"].query("Bezirk != 'Villach Stadt'")["Bezirk"].unique()) +</span>
<span class="c1">#    ["Kärnten", "Österreich"])</span>

<span class="c1">#selbezs = ["Bruck-Mürzzuschlag", "Steiermark", "Österreich"]</span>
<span class="c1">#selbezs = ["Sankt Veit an der Glan", "Kärnten", "Österreich"]</span>
<span class="c1">#selbezs = ["Linz(Stadt)", "Oberösterreich", "Österreich"]</span>
<span class="c1">#selbezs = ["Lilienfeld", "Melk", "Gmünd"]</span>

<span class="n">bez0</span> <span class="o">=</span> <span class="n">bez</span><span class="p">[</span><span class="n">bez</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">selbezs</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">bez0</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"dead28"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">bez0</span><span class="p">[</span><span class="s2">"dead28"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">bez0</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">])</span> <span class="o">/</span> <span class="n">bez0</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">bez0</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"dead_a7"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
    <span class="n">bez0</span><span class="p">[</span><span class="s2">"dead_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">bez0</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">])</span> <span class="o">/</span> <span class="mi">7</span>
<span class="k">for</span> <span class="n">sbez</span> <span class="ow">in</span> <span class="n">selbezs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sbez</span><span class="p">,</span> <span class="n">bez0</span><span class="p">[</span><span class="n">bez0</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sbez</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzEinwohner"</span><span class="p">])</span>
<span class="n">bez0</span> <span class="o">=</span> <span class="n">bez0</span><span class="p">[</span><span class="n">bez0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">bez0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">430</span><span class="p">)]</span>
<span class="c1">#mdead = bez.groupby("Datum", as_index=False).agg({"dead14": "max"})</span>
<span class="c1">#mdead["Bezirk"] = "Maximum aller Bezirke"</span>
<span class="c1">#display(mdead.tail(10))</span>
<span class="c1">#bez0 = pd.concat([bez0, mdead]).reset_index(drop=True)</span>
<span class="n">showdet</span><span class="o">=</span><span class="kc">True</span>
<span class="n">pal</span> <span class="o">=</span> <span class="s2">"tab20"</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selbezs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="s2">"tab10"</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">with_palette</span><span class="p">(</span><span class="n">pal</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>  <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">'height_ratios'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]},</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="n">showdet</span> <span class="k">else</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">showdet</span><span class="p">:</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">axs</span><span class="p">])</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">bez0</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bezirk"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"dead28"</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span>
                 <span class="n">hue_order</span><span class="o">=</span><span class="nb">reversed</span><span class="p">(</span><span class="n">selbezs</span><span class="p">),</span>
                 <span class="n">palette</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">pal</span><span class="p">,</span> <span class="n">n_colors</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">selbezs</span><span class="p">))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span>
                <span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selbezs</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bez0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">showdet</span><span class="p">:</span>
        <span class="n">bez_oo</span> <span class="o">=</span> <span class="n">bez0</span><span class="p">[</span><span class="n">bez0</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbezs</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">bez_oo</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">bez_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="mf">0.8</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bez_oo</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">300</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="n">snap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">aa</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bez_oo</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">bez_oo</span><span class="p">[</span><span class="s2">"dead_a7"</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">min_n_ticks</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote/Tag"</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Tote in "</span> <span class="o">+</span> <span class="n">selbezs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" täglich &amp; 7-Tage-Schnitt"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote/4 Wochen/100.000 EW"</span><span class="p">)</span>
    <span class="c1">#ax.set_xlim(*ax.get_xlim())</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">bez</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">9</span><span class="p">)),</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">bez</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Tote pro 4 Wochen pro 100.000 EW"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Melk 78779.0
Waidhofen an der Ybbs(Stadt) 11187.0
Wiener Neustadt(Stadt) 47407.0
Niederösterreich 1727866.4520547944
Österreich 9135917.424657535
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_81_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=ed599f38">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [72]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">bez</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>array(['Amstetten', 'Baden', 'Bludenz', 'Braunau am Inn', 'Bregenz',
       'Bruck an der Leitha', 'Bruck-Mürzzuschlag', 'Burgenland',
       'Deutschlandsberg', 'Dornbirn', 'Eferding', 'Eisenstadt(Stadt)',
       'Eisenstadt-Umgebung', 'Feldkirch', 'Feldkirchen', 'Freistadt',
       'Gmunden', 'Gmünd', 'Graz(Stadt)', 'Graz-Umgebung', 'Grieskirchen',
       'Gänserndorf', 'Güssing', 'Hallein', 'Hartberg-Fürstenfeld',
       'Hermagor', 'Hollabrunn', 'Horn', 'Imst', 'Innsbruck-Land',
       'Innsbruck-Stadt', 'Jennersdorf', 'Kirchdorf an der Krems',
       'Kitzbühel', 'Klagenfurt Land', 'Klagenfurt Stadt', 'Korneuburg',
       'Krems an der Donau(Stadt)', 'Krems(Land)', 'Kufstein', 'Kärnten',
       'Landeck', 'Leibnitz', 'Leoben', 'Lienz', 'Liezen', 'Lilienfeld',
       'Linz(Stadt)', 'Linz-Land', 'Mattersburg', 'Melk', 'Mistelbach',
       'Murau', 'Murtal', 'Mödling', 'Neunkirchen', 'Neusiedl am See',
       'Niederösterreich', 'Oberpullendorf', 'Oberwart', 'Oberösterreich',
       'Perg', 'Reutte', 'Ried im Innkreis', 'Rohrbach', 'Rust(Stadt)',
       'Salzburg', 'Salzburg(Stadt)', 'Salzburg-Umgebung',
       'Sankt Johann im Pongau', 'Sankt Pölten(Land)',
       'Sankt Pölten(Stadt)', 'Sankt Veit an der Glan', 'Scheibbs',
       'Schwaz', 'Schärding', 'Spittal an der Drau', 'Steiermark',
       'Steyr(Stadt)', 'Steyr-Land', 'Südoststeiermark', 'Tamsweg',
       'Tirol', 'Tulln', 'Urfahr-Umgebung', 'Villach Land',
       'Villach Stadt', 'Voitsberg', 'Vorarlberg', 'Vöcklabruck',
       'Völkermarkt', 'Waidhofen an der Thaya',
       'Waidhofen an der Ybbs(Stadt)', 'Weiz', 'Wels(Stadt)', 'Wels-Land',
       'Wien', 'Wiener Neustadt(Land)', 'Wiener Neustadt(Stadt)',
       'Wolfsberg', 'Zell am See', 'Zwettl', 'Österreich'], dtype=object)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=35009b7c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Impfungen-vs.-Inzidenzen-pro-Bezirk">Impfungen vs. Inzidenzen pro Bezirk<a class="anchor-link" href="#Impfungen-vs.-Inzidenzen-pro-Bezirk">¶</a></h2><p>Das folgende Diagramm zeigt die aktuelle Situation in den Bezirken bezüglich Anteil vollgeimpfter Personen (x-Achse) und Inzidenz (y-Achse) im Zusammenhang.</p>
<p>Die hellblaue Linie teilt die Punktwolke der Bezirke ungefähr in der Mitte.</p>
<p>Die Farbe der Punkte gibt das Bundesland an, die Größe die Einwohnerzahl des Bezirks.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=ca577b4a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [73]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">loadimpfbez</span><span class="p">():</span>
        <span class="n">gis</span> <span class="o">=</span> <span class="n">gis_o</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="c1"># Since the data is published on the same day (23:59:59), use timedelta of full 7 days here.</span>
        <span class="k">def</span> <span class="nf">add_prev</span><span class="p">(</span><span class="n">days_before</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">gis_o_prev</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">load_gem_impfungen</span><span class="p">(</span><span class="n">gis</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="n">days_before</span><span class="p">,</span> <span class="s2">"D"</span><span class="p">))</span>
            <span class="k">assert</span> <span class="n">gis_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">gis_o_prev</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="n">days_before</span><span class="p">,</span> <span class="s2">"D"</span><span class="p">),</span> <span class="s2">"Bad timedelta"</span>
            <span class="c1">#print(gis_o_prev["Datum"][-1])</span>
            <span class="n">gis</span><span class="p">[</span><span class="sa">f</span><span class="s2">"Vollimmunisierte_d</span><span class="si">{</span><span class="n">days_before</span><span class="si">}</span><span class="s2">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">gis</span><span class="p">[</span><span class="s2">"Vollimmunisierte"</span><span class="p">]</span> <span class="o">-</span> <span class="n">gis_o_prev</span><span class="p">[</span><span class="s2">"Vollimmunisierte"</span><span class="p">]</span>
            <span class="n">gis</span><span class="p">[</span><span class="sa">f</span><span class="s2">"Teilgeimpfte_d</span><span class="si">{</span><span class="n">days_before</span><span class="si">}</span><span class="s2">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">gis</span><span class="p">[</span><span class="s2">"Teilgeimpfte"</span><span class="p">]</span> <span class="o">-</span> <span class="n">gis_o_prev</span><span class="p">[</span><span class="s2">"Teilgeimpfte"</span><span class="p">]</span>
            <span class="n">gis</span><span class="p">[</span><span class="sa">f</span><span class="s2">"VollimmunisiertePro100_d</span><span class="si">{</span><span class="n">days_before</span><span class="si">}</span><span class="s2">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">gis</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100"</span><span class="p">]</span> <span class="o">-</span> <span class="n">gis_o_prev</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100"</span><span class="p">]</span>
            <span class="n">gis</span><span class="p">[</span><span class="sa">f</span><span class="s2">"TeilgeimpftePro100_d</span><span class="si">{</span><span class="n">days_before</span><span class="si">}</span><span class="s2">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">gis</span><span class="p">[</span><span class="s2">"TeilgeimpftePro100"</span><span class="p">]</span> <span class="o">-</span> <span class="n">gis_o_prev</span><span class="p">[</span><span class="s2">"TeilgeimpftePro100"</span><span class="p">]</span>
        <span class="n">add_prev</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">add_prev</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
        <span class="n">bfs_o</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">bez</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">bez</span><span class="p">[</span><span class="s2">"GKZ"</span><span class="p">])])</span>
        <span class="n">bis</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">group_impfungen_by_bez</span><span class="p">(</span><span class="n">gis</span><span class="p">)</span>
        <span class="n">bfs</span> <span class="o">=</span> <span class="n">bfs_o</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"GKZ"</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">bfs</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bis</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"BundeslandID"</span><span class="p">))</span>
        <span class="n">ds</span><span class="p">[</span><span class="s2">"ImmunSpekulationPro100"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"InfektionenPro100"</span><span class="p">]</span> <span class="o">+</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100"</span><span class="p">]</span>
        <span class="n">ds</span><span class="p">[</span><span class="s2">"ImmunSpekulationPro100_d1"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"InfektionenPro100_d"</span><span class="p">]</span> <span class="o">+</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100_d1"</span><span class="p">]</span>
        <span class="n">ds</span><span class="p">[</span><span class="s2">"ImmunSpekulationPro100_d7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"InfektionenPro100_d7"</span><span class="p">]</span> <span class="o">+</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100_d7"</span><span class="p">]</span>
        <span class="n">ds</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ds</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">loadimpfbez</span><span class="p">();</span>
    <span class="n">ds</span><span class="p">[</span><span class="s2">"KFZ"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">bezname_to_kfz</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=1a7ccc17">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [74]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">linregress</span>

    <span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
    <span class="n">bezimpf_cur</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">bez_impf</span><span class="o">.</span><span class="n">reset_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">]))</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="c1">#display(bezimpf_cur)</span>
    <span class="n">bezimpf_cur</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">bezimpf_cur</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">bez_cur</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">bez</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">bez</span><span class="p">[</span><span class="s2">"GKZ"</span><span class="p">])]</span>
        <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"GKZ"</span><span class="p">])</span>
        <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])</span>
        <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bezimpf_cur</span><span class="p">)</span>
        <span class="o">.</span><span class="n">reset_index</span><span class="p">())</span>
    <span class="n">bez_cur</span><span class="p">[</span><span class="s2">"dose3_percent"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bez_cur</span><span class="p">[</span><span class="s2">"dose_3"</span><span class="p">]</span> <span class="o">/</span> <span class="n">bez_cur</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="c1">#bez_cur = bez_cur[bez_cur["Datum"] == bez_cur.iloc[-1]["Datum"] - timedelta(2)]</span>
    <span class="n">bez_cur</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">bez_cur</span><span class="p">)</span>
    <span class="c1">#bez_cur.sort_index(inplace=True)</span>
    <span class="n">bez_cur</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Bezirk"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">bez_cur</span><span class="p">[</span><span class="s2">"AnzahlFaelleOmiSum"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">bez_cur</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">bez</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum == '2022-01-01'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Bezirk"</span><span class="p">)[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">])</span>
    <span class="n">bez_cur</span><span class="p">[</span><span class="s2">"AnzahlFaelleOmi_pp"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bez_cur</span><span class="p">[</span><span class="s2">"AnzahlFaelleOmiSum"</span><span class="p">]</span> <span class="o">/</span> <span class="n">bez_cur</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="c1">#display(bez_cur)</span>
    <span class="c1">#bez_cur.loc[900, "Bezirk"] = "Wien"</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">bez_cur</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pltbezcurcorr</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">"omi"</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="n">ds</span><span class="p">):</span>
        <span class="n">usedose3</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">xcol</span> <span class="o">=</span> <span class="s2">"dose3_percent"</span> <span class="k">if</span> <span class="n">usedose3</span> <span class="k">else</span> <span class="s2">"valid_certificates_percent"</span>
        <span class="c1">#xcol = "dose3_percent"</span>
        <span class="n">ycol</span> <span class="o">=</span> <span class="s2">"AnzahlFaelleOmi_pp"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"omi"</span> <span class="k">else</span> <span class="s2">"dead91"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span> <span class="k">else</span> <span class="s2">"inz"</span>
        <span class="n">scol</span> <span class="o">=</span> <span class="s2">"AnzEinwohner"</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bezirk not in ('Rust(Stadt)')"</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="mi">3</span><span class="p">))</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">drawreg</span><span class="p">(</span><span class="n">ds0</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">lkws</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span>
                <span class="n">scatter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">ds0</span><span class="p">,</span>
                <span class="n">x</span><span class="o">=</span><span class="n">xcol</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="n">ycol</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="c1">#logx=True,</span>
                <span class="c1">#robust=True,</span>
                <span class="c1">#lowess=True,</span>
                <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">"zorder"</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="p">(</span><span class="n">lkws</span> <span class="ow">or</span> <span class="p">{})},</span>
                <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"Österreich"</span><span class="p">]):</span>
            <span class="n">ds0</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span> <span class="k">if</span> <span class="n">bl</span> <span class="o">!=</span> <span class="s2">"Österreich"</span> <span class="k">else</span> <span class="n">ds</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ds0</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">pv</span> <span class="o">=</span> <span class="n">linregress</span><span class="p">(</span><span class="n">ds0</span><span class="p">[</span><span class="n">xcol</span><span class="p">],</span> <span class="n">ds0</span><span class="p">[</span><span class="n">ycol</span><span class="p">])</span><span class="o">.</span><span class="n">pvalue</span>
                <span class="n">cl</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"C</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span> <span class="k">if</span> <span class="n">bl</span> <span class="o">!=</span> <span class="s2">"Österreich"</span> <span class="k">else</span> <span class="s2">"k"</span>
                <span class="k">if</span> <span class="n">pv</span> <span class="o">&lt;</span> <span class="mf">0.005</span><span class="p">:</span>
                    <span class="n">drawreg</span><span class="p">(</span><span class="n">ds0</span><span class="p">,</span> <span class="n">cl</span><span class="p">,</span> <span class="n">lkws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">lw</span><span class="o">=</span><span class="mf">0.7</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">pv</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
                    <span class="n">drawreg</span><span class="p">(</span><span class="n">ds0</span><span class="p">,</span> <span class="n">cl</span><span class="p">,</span> <span class="n">lkws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">pv</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">:</span>
                    <span class="n">drawreg</span><span class="p">(</span><span class="n">ds0</span><span class="p">,</span> <span class="n">cl</span><span class="p">,</span> <span class="n">lkws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.7</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">drawreg</span><span class="p">(</span><span class="n">ds0</span><span class="p">,</span> <span class="n">cl</span><span class="p">,</span> <span class="n">lkws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.4</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="n">pv</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">ds</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="n">xcol</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">ycol</span><span class="p">,</span>
            <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="n">scol</span><span class="p">,</span>
            <span class="c1">#marker="X",</span>
            <span class="n">sizes</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
            <span class="n">size_norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">10_000</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">500_000</span><span class="p">),</span>
            <span class="c1">#legend=False,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">rgb_values</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
            <span class="c1"># Map label to RGB</span>
            <span class="n">color_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">rgb_values</span><span class="p">))</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span>
                <span class="n">ds</span><span class="p">[</span><span class="n">xcol</span><span class="p">],</span>
                <span class="n">ds</span><span class="p">[</span><span class="n">ycol</span><span class="p">]</span> <span class="o">-</span> <span class="n">ds</span><span class="p">[</span><span class="n">ycol</span> <span class="o">+</span> <span class="s2">"_d7"</span><span class="p">],</span>
                <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">)),</span>
                <span class="n">ds</span><span class="p">[</span><span class="n">ycol</span> <span class="o">+</span> <span class="s2">"_d7"</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">color_map</span><span class="p">),</span>
                <span class="n">units</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">angles</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">scale_units</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
                <span class="n">headaxislength</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">headlength</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">headwidth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">rgb_values</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
            <span class="c1"># Map label to RGB</span>
            <span class="n">color_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">rgb_values</span><span class="p">))</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span>
                <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100"</span><span class="p">]</span> <span class="o">-</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100_d7"</span><span class="p">],</span>
                <span class="n">ds</span><span class="p">[</span><span class="n">ycol</span> <span class="o">+</span><span class="s2">"_prev7"</span><span class="p">],</span>
                <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100_d7"</span><span class="p">]</span> <span class="o">-</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100_d1"</span><span class="p">],</span>
                <span class="n">ds</span><span class="p">[</span><span class="n">ycol</span> <span class="o">+</span> <span class="s2">"_d7"</span><span class="p">]</span> <span class="o">-</span> <span class="n">ds</span><span class="p">[</span><span class="n">ycol</span> <span class="o">+</span> <span class="s2">"_d"</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">color_map</span><span class="p">),</span>
                <span class="n">units</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">angles</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">scale_units</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
                <span class="n">headaxislength</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span>
                <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100"</span><span class="p">]</span> <span class="o">-</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100_d1"</span><span class="p">],</span>
                <span class="n">ds</span><span class="p">[</span><span class="n">ycol</span> <span class="o">+</span> <span class="s2">"_prev"</span><span class="p">],</span>
                <span class="n">ds</span><span class="p">[</span><span class="s2">"VollimmunisiertePro100_d1"</span><span class="p">],</span>
                <span class="n">ds</span><span class="p">[</span><span class="n">ycol</span> <span class="o">+</span> <span class="s2">"_d"</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">color_map</span><span class="p">),</span>
                <span class="n">units</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">angles</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">scale_units</span><span class="o">=</span><span class="s2">"xy"</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
                <span class="n">headaxislength</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">addlabels</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="c1">#if np.isnan(item["InfektionenPro100"]): # Wien</span>
                <span class="c1">#    continue</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="n">xcol</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="n">ycol</span><span class="p">]</span>
                <span class="n">bname</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span>
                <span class="c1">#display(bname)</span>
                <span class="c1">#if kfz.loc[bname]["ID"] in ("KI",) or bname in ("Wels-Land", "Eisenstadt-U"):</span>
                <span class="c1">#     y += 1</span>
                <span class="c1">#if kfz.loc[bname]["ID"] in ("GR",) or bname in ("Mistelbach"):</span>
                <span class="c1">#     y -= 1</span>
                <span class="c1">#if item["inz"] &lt; 35 or item["inz"] &gt; 130 or item["VollimmunisiertePro100"] &lt; 51 or item["VollimmunisiertePro100"] &gt; 68:            </span>
                <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">shorten_bezname</span><span class="p">(</span><span class="n">bname</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span>
                        <span class="c1">#cov.bezname_to_kfz(bname),</span>
                        <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span>
                            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="n">scol</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">50_000</span> <span class="k">else</span> <span class="mi">5</span><span class="p">),</span>
                            <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">)</span>
                <span class="c1">#print(x,y,cov.shorten_bezname(bname),bname)</span>
                <span class="c1">#else:</span>
                <span class="c1">#    ax.text(x, y + 2, kfz.loc[bname]["ID"], size=6, ha="center")</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Kumulative Inzidenz seit 1.1.21"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"omi"</span>
                      <span class="k">else</span> <span class="s2">"Aktuelle 7-Tages-Inzidenz/100.000 EW"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"inz"</span>
                     <span class="k">else</span> <span class="s2">"Tote letzte 91 Tage/100.000 EW"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span>
                     <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="c1">#ax.set_ylabel("Anstieg 7-Tages-Inzidenz ggü. 7 Tage vorher (Faktor)")</span>
        <span class="c1">#ax.set_xlabel("Einwohner mit gültigen Impfzertifikaten in Prozent")</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Einwohner mit 3. Impfung in Prozent"</span> <span class="k">if</span> <span class="n">usedose3</span> <span class="k">else</span> <span class="s2">"Gem. Empfehlung (1-Jahresfrist für Auffrischung)"</span><span class="p">)</span>

        <span class="k">if</span> <span class="kc">False</span><span class="p">:</span> <span class="c1"># Hochrisiko-Grenze Herbst 2021</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">70</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">[</span><span class="mi">100</span><span class="p">]]),</span>
                <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">800</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="p">[</span><span class="mi">100_000</span><span class="p">]]),</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span>
                <span class="n">scalex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">scaley</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">drawstyle</span><span class="o">=</span><span class="s2">"steps-post"</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mf">0.55</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">"Hochrisiko-Grenze"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"omi"</span><span class="p">:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"inz"</span><span class="p">:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">.2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
        <span class="c1">#ax.set_yticks(100, 200, 300)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="n">ycol</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.95</span><span class="p">)</span>
        <span class="n">addlabels</span><span class="p">()</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">remove_labels_after</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"best"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"x-small"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Bezirke: Impfquote und </span><span class="si">{}</span><span class="s2"> bis "</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s2">"Kumulative Inzidenz seit 1.1.21"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"omi"</span><span class="k">else</span>
            <span class="s2">"Tote in 91 Tagen/100.000 EW"</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"dead"</span> <span class="k">else</span>
            <span class="s2">"7-Tages-Inzidenz"</span><span class="p">)</span>
                     <span class="o">+</span> <span class="n">ds</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">));</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>
    <span class="c1">#pltbezcurcorr(mode="omi")</span>
    <span class="n">pltbezcurcorr</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">)</span>
    <span class="n">pltbezcurcorr</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">"dead"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=83e93d19">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [75]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">kendalltau</span><span class="p">,</span> <span class="n">spearmanr</span><span class="p">,</span> <span class="n">linregress</span>
    <span class="k">def</span> <span class="nf">plotreg</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">bez2</span> <span class="o">=</span> <span class="n">bez</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"GKZ"</span><span class="p">])</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">bez_impf</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'AnzEinwohner'</span><span class="p">,</span> <span class="s1">'BundeslandID'</span><span class="p">,</span> <span class="s1">'Bundesland'</span><span class="p">]),</span> <span class="n">how</span><span class="o">=</span><span class="s2">"inner"</span><span class="p">)</span>
        <span class="n">bezcur</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">bez2</span><span class="o">.</span><span class="n">reset_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">]))</span>
        <span class="c1">#display(linregress(bezcur["dose_3"], bezcur["inz"]))</span>
        <span class="n">bez2</span><span class="p">[</span><span class="s2">"dose3_pp"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bez2</span><span class="p">[</span><span class="s2">"valid_certificates_percent"</span><span class="p">]</span><span class="c1"># / bez2["AnzEinwohner"]</span>
        <span class="n">xcol</span> <span class="o">=</span> <span class="s2">"dose3_pp"</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="n">bez2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
            <span class="p">{</span><span class="c1">#"kendall tau": kendalltau(s[xcol], s["inz"]).correlation,</span>
             <span class="c1">#"spearman r": spearmanr(s[xcol], s["inz"]).correlation,</span>
             <span class="s2">"R"</span><span class="p">:</span> <span class="n">linregress</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">xcol</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">])</span><span class="o">.</span><span class="n">rvalue</span><span class="p">}))</span>
                                                     <span class="c1">#linregress(s["valid_certificates_percent"], s["inz"]))</span>
        <span class="c1">#display(corr)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">corr</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
        <span class="c1">#ax.set_ylabel("Lineares Bestimmtheitsmaß $R^2$")</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Linearer Korrelationskoeffizent Anteil mit aktueller Impfung vs. Inzidenz in den Bezirken"</span><span class="p">)</span>
    <span class="n">plotreg</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">"&gt; 0, d.h. mehr Impfungen </span><span class="se">\n</span><span class="s2">=&gt; mehr Covid-Fälle"</span><span class="p">,</span> <span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">"&lt; 0, d.h. mehr Impfungen </span><span class="se">\n</span><span class="s2">=&gt; weniger Covid-Fälle"</span><span class="p">,</span> <span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">),</span> <span class="n">va</span><span class="o">=</span><span class="s2">"top"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"7-Tage-Inzidenz pro 100.000 Einwohner, logarithmisch"</span><span class="p">)</span>
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"7-Tage-Inziden/100.000 EW"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">labelend2</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="s2">"inz"</span><span class="p">)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="s2">"x-small"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"lower center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.58</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="c1">#axs[1].legend()</span>
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">((</span><span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"PCRReg"</span><span class="p">]</span>
                   <span class="o">-</span> <span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"PCRReg"</span><span class="p">]</span>
                   <span class="o">-</span> <span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Niederösterreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"PCRReg"</span><span class="p">])</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span>
                    <span class="p">(</span><span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
                   <span class="o">-</span> <span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
                   <span class="o">-</span> <span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Niederösterreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzEinwohner"</span><span class="p">]))</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"TestsRInz"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">labelend2</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">mmx</span><span class="p">[</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">!=</span> <span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="s2">"TestsRInz"</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">xmax</span><span class="o">=</span><span class="mi">100_000</span><span class="p">))</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">60_000</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Wöchentlich gemeldete AG+PCR-Tests in </span><span class="si">% d</span><span class="s2">er Einwohner"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">end_3g</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-03-05"</span><span class="p">)</span>
    <span class="n">test_limit</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-04-01"</span><span class="p">)</span>
    <span class="n">omi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-12-31"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">end_3g</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">test_limit</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">omi</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">"Ende 3G am</span><span class="se">\n</span><span class="s2">Arbeitsplatz"</span><span class="p">,</span> <span class="p">(</span><span class="n">end_3g</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"right"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">"Omikron</span><span class="se">\n</span><span class="s2">dominant"</span><span class="p">,</span> <span class="p">(</span><span class="n">omi</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"right"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">"Beschränkung</span><span class="se">\n</span><span class="s2">Gratistests"</span><span class="p">,</span> <span class="p">(</span><span class="n">test_limit</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"left"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=b2830849">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [76]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">ds0</span> <span class="o">=</span> <span class="n">ds</span><span class="c1">#.query("Bundesland == 'Salzburg'")</span>
    <span class="p">(</span><span class="n">ds0</span><span class="p">[[</span>
        <span class="s2">"Bezirk"</span><span class="p">,</span>
        <span class="s2">"valid_certificates_percent"</span><span class="p">,</span>
        <span class="s2">"InfektionenPro100"</span><span class="p">,</span>
        <span class="s2">"inz_g7"</span><span class="p">,</span>
        <span class="s2">"AnzEinwohner"</span><span class="p">,</span>
        <span class="s2">"inz"</span><span class="p">,</span>
        <span class="s2">"inz_a7"</span><span class="p">]]</span>
     <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"valid_certificates_percent"</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
     <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">AnzEinwohner</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
     <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
         <span class="s2">"valid_certificates_percent"</span><span class="p">:</span> <span class="s2">"% mit 1G-Zertifikat"</span><span class="p">,</span>
         <span class="s2">"InfektionenPro100"</span><span class="p">:</span> <span class="s2">"% Infektionen"</span><span class="p">,</span>
         <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="s2">"Einwohner"</span><span class="p">,</span>
         <span class="s2">"inz_a7"</span><span class="p">:</span> <span class="s2">"7-Tg Ø inz"</span><span class="p">},)</span>
     <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ds0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a16c1ab2">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Bezirke,-die-auf-den-letzen-oder-vorletzen-Tag-verd%C3%A4chtig-wenig-F%C3%A4lle-gebucht-haben">Bezirke, die auf den letzen oder vorletzen Tag verdächtig wenig Fälle gebucht haben<a class="anchor-link" href="#Bezirke,-die-auf-den-letzen-oder-vorletzen-Tag-verd%C3%A4chtig-wenig-F%C3%A4lle-gebucht-haben">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=62c672e7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [77]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">bez</span><span class="p">[</span><span class="n">bez</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">bez</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"inz_dg7 &lt;= 0.3 and AnzahlFaelle7Tage &gt;= 5 * 7 or AnzahlFaelle == 0 and AnzahlFaelle7Tage &gt;= 3 * 7"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">])[[</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="s2">"inz_dg7"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[77]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th></th>
<th>Bundesland</th>
<th>AnzahlFaelle</th>
<th>inz_dg7</th>
<th>AnzahlFaelle7Tage</th>
<th>AnzEinwohner</th>
</tr>
<tr>
<th>Datum</th>
<th>Bezirk</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2023-06-28</th>
<th>Burgenland</th>
<td>Burgenland</td>
<td>0</td>
<td>0.0</td>
<td>24</td>
<td>302342.726</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e850e529">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [78]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_growfig</span><span class="p">(</span><span class="n">data0</span><span class="p">,</span> <span class="n">ttl</span><span class="p">,</span> <span class="n">basecol</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">showlast</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">gtox</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  
        <span class="n">s</span><span class="p">[</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">s</span><span class="p">[</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">s</span>
    <span class="n">inzdx7</span> <span class="o">=</span> <span class="n">gtox</span><span class="p">(</span><span class="n">data0</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">basecol</span><span class="si">}</span><span class="s2">_dg7"</span><span class="p">])</span>
    <span class="n">inzx7</span> <span class="o">=</span> <span class="n">gtox</span><span class="p">(</span><span class="n">data0</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">basecol</span><span class="si">}</span><span class="s2">_g7"</span><span class="p">])</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">bar_args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">aa</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">snap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
        <span class="n">inzdx7</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">inzdx7</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">inzdx7</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"Niedrigerer Wochentagswert"</span><span class="p">,</span>
        <span class="o">**</span><span class="n">bar_args</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
        <span class="n">inzdx7</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="n">inzdx7</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">inzdx7</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"Höherer Wochentagswert"</span><span class="p">,</span>
        <span class="o">**</span><span class="n">bar_args</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inzx7</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inzx7</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">inzx7</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Sinkende Wochensumme"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inzx7</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">inzx7</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Steigende Wochensumme"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span>
            <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>
    <span class="n">valdates</span> <span class="o">=</span> <span class="n">data0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data0</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]</span>
    <span class="n">alwaysshow</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">valdates</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">1.5</span><span class="p">),</span> <span class="n">inzdx7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">alwaysshow</span><span class="p">:]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">"higher"</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.05</span><span class="p">)),</span>
                <span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">),</span> <span class="n">inzdx7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">alwaysshow</span><span class="p">:]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">"lower"</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.05</span><span class="p">)))</span>
    <span class="k">def</span> <span class="nf">fmtx</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">"×</span><span class="si">{</span><span class="n">v</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">"</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">"÷</span><span class="si">{</span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">"</span>
    <span class="k">if</span> <span class="n">showlast</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">inzx7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span> <span class="k">if</span> <span class="n">inzx7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">"C3"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
            <span class="n">fmtx</span><span class="p">(</span><span class="n">inzx7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">= </span><span class="si">{</span><span class="n">data0</span><span class="p">[</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">basecol</span><span class="si">}</span><span class="s1">_g7'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">+.1%</span><span class="si">}</span><span class="s2">"</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"-"</span><span class="p">,</span> <span class="s2">"−"</span><span class="p">)</span> <span class="o">+</span>
            <span class="p">((</span><span class="s2">"</span><span class="se">\n</span><span class="s2">×2 in "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">doubling_time</span><span class="p">(</span><span class="n">data0</span><span class="p">[</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">basecol</span><span class="si">}</span><span class="s1">_g7'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">".0f"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" T"</span><span class="p">)</span> <span class="k">if</span> <span class="n">inzx7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">""</span><span class="p">),</span>
            <span class="p">(</span><span class="n">inzx7</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">inzx7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s2">"offset points"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">valdates</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span>
        <span class="n">left</span><span class="o">=</span><span class="n">valdates</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">right</span><span class="o">=</span><span class="n">valdates</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">valdates</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">valdates</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">ttl</span><span class="si">}</span><span class="s2">: Inzidenzveränderung gegenüber 7 Tage vorher"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.96</span><span class="p">)</span>
    <span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.FuncFormatter(lambda v, _: f"×{v:.1f}"))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="n">fmtx</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>
    

<span class="c1">#selbez = "Imst"</span>
<span class="n">selbez</span> <span class="o">=</span> <span class="s2">"Scheibbs"</span>
<span class="c1">#selbez = "Tamsweg"</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">bez</span><span class="p">[</span><span class="n">bez</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbez</span><span class="p">]</span>

<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">"# Details für Bezirk </span><span class="si">{</span><span class="n">selbez</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">Einwohner: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'AnzEinwohner'</span><span class="p">]</span><span class="si">:</span><span class="s2">n</span><span class="si">}</span><span class="s2">"</span><span class="p">))</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Positive Tests im Bezirk "</span> <span class="o">+</span> <span class="n">selbez</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.025</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
    <span class="n">axs2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span><span class="n">bez</span><span class="p">[</span><span class="n">bez</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbez</span><span class="p">],</span> <span class="s2">"Letzter Stand nach Labordatum"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">))</span>
    <span class="c1">#axs[0].tick_params(pad=0)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span><span class="n">bez1</span><span class="p">[</span><span class="n">bez1</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbez</span><span class="p">],</span> <span class="s2">"Nur Erstmeldungen nach Labordatum"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">))</span>
    <span class="c1">#axs[1].tick_params(pad=0)</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span><span class="n">bez1m</span><span class="p">[</span><span class="n">bez1m</span><span class="p">[</span><span class="s2">"Bezirk"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbez</span><span class="p">],</span> <span class="s2">"Nach Meldedatum"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">))</span>
    <span class="n">same_axlims</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">axs2</span><span class="p">,</span> <span class="n">maxg</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1">#for ax in axs[:2]:</span>
    <span class="c1">#    ax.set_xlim(ax.get_xlim()[0] - 1, ax.get_xlim()[1] - 1)</span>
    
<span class="c1">#data = bez1m[bez1m["Bezirk"] == selbez]</span>
<span class="n">plt_growfig</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"Bezirk </span><span class="si">{</span><span class="n">selbez</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">cov</span><span class="o">.</span><span class="n">plot_detail_ax</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"ag55_inz"</span><span class="p">,</span> <span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"nhosp"</span><span class="p">,</span> <span class="s2">"icu"</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">),</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">());</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="c1">#fs_at2 = fs_at.copy()</span>
<span class="c1">#cov.enrich_inz(fs_at2, "ag55_inz", catcol="Bundesland")</span>
<span class="c1">#plt_growfig(fs_at2.query("Datum &gt;= '2020-11-01'"), "55+", "ag55_inz")</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<h1 id="Details-f%C3%BCr-Bezirk-Scheibbs">Details für Bezirk Scheibbs<a class="anchor-link" href="#Details-f%C3%BCr-Bezirk-Scheibbs">¶</a></h1><p>Einwohner: 41 711</p>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\plotting\_matplotlib\core.py:807: UserWarning: The label '_7-Tage-Summe Tote vol.' of &lt;matplotlib.lines.Line2D object at 0x0000019910C3AA90&gt; starts with '_'. It is thus excluded from the legend.
  ax.legend(handles, labels, loc="best", title=title)
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_90_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_90_3.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=0e59d770">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Tests">Tests<a class="anchor-link" href="#Tests">¶</a></h1><p>Diese Daten können nur den BMI-Morgenmeldungen entnommen werden. Öfters kommt es deshalb zu Korrekturen was dann
zu einer gewaltigen Anzahl neuer PCR Tests oder auch Fällen pro Tag führt, oder auch zu negativen Anzahlen.</p>
<p>Wie man sieht hat Wien (und somit Gesamt-Österreich) sehr hohe Testraten was wohl dem dort stark beworbenen <a href="https://allesgurgelt.at/wien">Alles-Gurgelt-Programm</a> zu verdanken ist.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=b898174e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [79]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mms_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"PCR"</span><span class="p">,</span> <span class="s2">"Antigen"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="s2">"PCRApo"</span><span class="p">,</span> <span class="s2">"PCRReg"</span><span class="p">]</span>
<span class="n">apo_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"PCR"</span><span class="p">,</span> <span class="s2">"Antigen"</span><span class="p">,</span> <span class="s2">"TestsBetrieb"</span><span class="p">]</span>
<span class="n">mms_nw</span> <span class="o">=</span> <span class="p">(</span><span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="n">mms_cols</span><span class="p">]</span> <span class="o">-</span>
          <span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="n">mms_cols</span><span class="p">])</span>
<span class="n">apo_nw</span> <span class="o">=</span> <span class="n">apo</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="mi">10</span><span class="p">)[</span><span class="n">apo_cols</span><span class="p">]</span> <span class="o">-</span> <span class="n">apo</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="mi">9</span><span class="p">)[</span><span class="n">apo_cols</span><span class="p">]</span>
<span class="n">mms_nw</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Ö ohne Wien"</span>
<span class="n">mms_nw</span><span class="p">[</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms_nw</span><span class="p">[</span><span class="s2">"PCRReg"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">mms_nw</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=13bdec0a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [80]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">schulat</span> <span class="o">=</span> <span class="n">schul</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">schulat</span><span class="p">[</span><span class="s2">"Zeit"</span><span class="p">]</span> <span class="o">=</span> <span class="n">schulat</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m.%y"</span><span class="p">)</span>
<span class="n">schulat</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span> <span class="o">/=</span> <span class="mi">1000</span>
<span class="n">schulat</span><span class="p">[</span><span class="s2">"Antigen"</span><span class="p">]</span> <span class="o">/=</span> <span class="mi">1000</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">schulat</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Zeit"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">,</span> <span class="s2">"Antigen"</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">ScalarFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">ScalarFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">ticklabel_format</span><span class="p">(</span><span class="n">useOffset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">'plain'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Wöchentlich durchgeführte Schultests in Österreich (in 1000)"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl Tests (1000)"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plt_tests_per_bl</span><span class="p">(</span><span class="n">col</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">schul</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">),</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">plt_tests_per_bl</span><span class="p">(</span><span class="s2">"PCR"</span><span class="p">)</span>
<span class="n">plt_tests_per_bl</span><span class="p">(</span><span class="s2">"Antigen"</span><span class="p">)</span>
<span class="c1">#sns.lineplot(data=schul.reset_index().query("Bundesland != 'Österreich'"), x="Datum", y="PCR", hue="Bundesland", marker=".")</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">25</span><span class="p">),</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Im Wochenschnitt gemeldete Tests"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.89</span><span class="p">)</span>

<span class="n">ndays</span> <span class="o">=</span> <span class="n">MIDRANGE_NDAYS</span>

<span class="k">def</span> <span class="nf">plt_tests</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms_oo</span><span class="p">,</span> <span class="n">apo_oo</span><span class="p">):</span>
    <span class="n">mms_oo</span> <span class="o">=</span> <span class="n">mms_oo</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">bl</span> <span class="o">=</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"PCR_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Antigen_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Antigen"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">mms_oo</span> <span class="o">=</span> <span class="n">mms_oo</span><span class="p">[(</span><span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">ndays</span><span class="p">))]</span>
    <span class="n">apo_oo</span> <span class="o">=</span> <span class="n">apo_oo</span><span class="p">[</span><span class="n">apo_oo</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">mms_oo</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>
    <span class="c1">#ax.plot(fs_oo["Datum"] + timedelta(1), fs_oo["AnzTests"], label="Tests laut AGES", alpha=0.5)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">(),</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"PCR_a7"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"BMI PCR"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">apo_oo</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Apo PCR"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">apo_oo</span><span class="p">[</span><span class="s2">"TestsBetrieb"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Betriebe"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">apo_oo</span><span class="p">[</span><span class="s2">"Antigen"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Apo AG"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">(),</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Antigen"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s2">"BMI AG"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span>
    <span class="c1">#print(mms_oo["Antigen"])</span>
    <span class="c1">#ax.plot(schul_oo["PCR"] / 7, marker=".", label="Schul-PCR")</span>
    <span class="c1">#ax.plot(hosp_oo["Datum"], hosp_oo["Tests"], label="Tests laut AGES/Hosp", alpha=0.5)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"lower left"</span><span class="p">)</span>
    <span class="c1">#ax.set_ylabel("Anzahl Tests (PCR)");</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=fs_oo["AnzTests"].quantile(0.995))</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">for</span> <span class="p">(</span><span class="n">blid</span><span class="p">,</span> <span class="n">bl</span><span class="p">),</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">BUNDESLAND_BY_ID</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">axs</span><span class="p">):</span>
    <span class="c1">#fs_oo = fs.query("Bundesland == 'Niederösterreich'")</span>
    <span class="n">apo_oo</span> <span class="o">=</span> <span class="n">apo</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">blid</span><span class="p">)</span>
    <span class="n">schul_oo</span> <span class="o">=</span> <span class="n">schul</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">blid</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#hosp_oo = hosp.query("Bundesland == 'Niederösterreich'").copy()</span>
    <span class="c1">#hosp_oo["Tests"] = hosp_oo["TestGesamt"].diff()</span>
    <span class="n">mms_oo</span> <span class="o">=</span> <span class="n">mmx</span><span class="p">[(</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">plt_tests</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms_oo</span><span class="p">,</span> <span class="n">apo_oo</span><span class="p">)</span>


<span class="n">plt_tests</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">mms_nw</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">apo_nw</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_93_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_93_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_93_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_93_3.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=2722a634">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [81]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mmx</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])[</span><span class="s2">"PCRReg"</span><span class="p">]</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[81]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Bundesland  Datum     
Österreich  2023-06-20    2209.7143
            2023-06-21    3164.7143
            2023-06-22    2545.7143
            2023-06-23    2064.7143
            2023-06-24    2956.7143
            2023-06-25    2095.7143
            2023-06-26    2030.7143
            2023-06-27          NaN
            2023-06-28          NaN
            2023-06-29          NaN
            2023-06-30          NaN
Name: PCRReg, dtype: float64</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=20a7c440">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [82]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ndays</span><span class="o">=</span><span class="n">DETAIL_SMALL_NDAYS</span><span class="c1">#7*6 + 1</span>
<span class="k">def</span> <span class="nf">plt_tests_cases_daily</span><span class="p">(</span><span class="n">mms_oo0</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
    <span class="n">bl</span> <span class="o">=</span> <span class="n">mms_oo0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span>
    <span class="n">mms_oo</span> <span class="o">=</span> <span class="n">mms_oo0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
    <span class="c1">#ax.plot(fs_oo["Datum"] + timedelta(1), fs_oo["AnzTests"], label="Tests laut AGES", alpha=0.5)</span>
    <span class="c1">#ax.plot(mms_oo["Datum"].dt.normalize(), mms_oo["PCR"].rolling(7).mean(), label="Laut BMI", marker=".")</span>
    <span class="c1">#ax.plot(apo_oo["Datum"].dt.normalize(), apo_oo["PCR"].rolling(7).mean(), label="Apotheken", marker=".")</span>
    <span class="c1">#ax.plot(hosp_oo["Datum"], hosp_oo["Tests"], label="Tests laut AGES/Hosp", alpha=0.5)</span>
    <span class="n">pltr</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">StackBarPlotter</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">pltr</span><span class="p">(</span><span class="n">mms_oo</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"PCR lt. Ländermeldung"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">)</span>
    <span class="n">pltr</span><span class="p">(</span><span class="n">mms_oo</span><span class="p">[</span><span class="s2">"PCRApo"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Apotheken-PCR"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C4"</span><span class="p">)</span>
    <span class="c1">#ax.bar(, mms_oo["PCR"], label="PCR-Tests lt. BMI (links)", color="C0")</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">(),</span>
             <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Fälle lt. </span><span class="si">{</span><span class="s1">'AGES nach Meldedatum'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">haveages</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">'9:30-Krisenstabmeldung'</span><span class="si">}</span><span class="s2"> (rechts)"</span><span class="p">,</span>
             <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span>
             <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
             <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
             <span class="n">mew</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
             <span class="n">markeredgecolor</span><span class="o">=</span><span class="s2">"white"</span><span class="p">)</span>
    <span class="n">top3</span> <span class="o">=</span> <span class="p">(</span><span class="n">mms_oo</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span> <span class="o">+</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"PCRApo"</span><span class="p">])</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">top3</span> <span class="o">*</span> <span class="mi">5</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="n">top3</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    
    <span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">())</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="s2">"xx-small"</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"major"</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="s2">"medium"</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1">#ax.legend(loc="upper left")</span>
        <span class="c1">#ax2.legend(loc="upper right")</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tests"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fälle"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#ax.set_ylabel("Anzahl Tests (PCR)");</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">mms_oo</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mms_oo</span><span class="p">[</span><span class="s1">'PCRRPosRate_a7'</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span><span class="w"> </span><span class="s1">'PCRRPosRate_a7'</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">:</span><span class="s2">.2n</span><span class="si">}</span><span class="s2">% positiv in 7 Tagen)"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.96</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=fs_oo["AnzTests"].quantile(0.995))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"PCR-Tests und Fälle, Stand "</span> <span class="o">+</span> <span class="n">bltest_o</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.24</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.32</span><span class="p">)</span>
    <span class="c1">#fig.text(0.5, 0.9, "Beschriftung: „Bundesland (Anteil positiver Tests in 7 Tagen)“",</span>
    <span class="c1">#         ha="center", fontsize="small", va="bottom")</span>
    <span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">BUNDESLAND_BY_ID</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="c1">#fs_oo = fs.query("Bundesland == 'Niederösterreich'")</span>
        <span class="n">mms_oo0</span> <span class="o">=</span> <span class="n">mmx</span><span class="p">[</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
        <span class="n">plt_tests_cases_daily</span><span class="p">(</span><span class="n">mms_oo0</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
    <span class="c1">#fig.autofmt_xdate()</span>
    <span class="c1">#plt_tests_cases_daily(mms_nw.reset_index(), axs.flat[-1])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=890b8998">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [83]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="n">mms0</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="c1">#mms[mms["Datum"] &lt; mms.iloc[-1]["Datum"]]</span>
<span class="c1">#mms0 = mms0[np.isfinite[mms0["PCR"]]]</span>

<span class="n">mms0_nw</span> <span class="o">=</span> <span class="n">mms0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland not in ('Wien', 'Österreich')"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">"AnzahlFaelleSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"PCRSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"AntigenSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"Tests"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"TestsAlle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"PCR"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"PCRReg"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"TestsReg"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"PCRAlle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"TestsSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
<span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Ö ohne Wien"</span>
<span class="n">c7</span> <span class="o">=</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"TestsAPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">c7</span> <span class="o">/</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"TestsAlle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCRAPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">c7</span> <span class="o">/</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCRAlle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"TestsRPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">c7</span> <span class="o">/</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"TestsReg"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">c7</span> <span class="o">/</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCRReg"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"TestsBLPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">c7</span> <span class="o">/</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"Tests"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">c7</span> <span class="o">/</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"Tests"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCRPosRate_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">c7</span> <span class="o">/</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">mms0_nw</span><span class="p">)</span>
<span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCR_s7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">print_test_stats</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">])]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">15</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"PCR_s7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mms0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"PCR"</span><span class="p">]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"‼ Keine Daten für heute"</span><span class="p">)</span>
    <span class="n">mday</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%A"</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dayofweek</span> <span class="o">==</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">dayofweek</span><span class="p">]</span>
    <span class="n">data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">agesremark</span> <span class="o">=</span> <span class="s2">", Fälle lt. AGES/Meldedatum"</span> <span class="k">if</span> <span class="n">haveages</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"#COVID19at PCR-Tests (inkl. Apotheken) 24h bis </span><span class="si">{</span><span class="n">mday</span><span class="si">}{</span><span class="n">agesremark</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'Bundesland'</span><span class="p">]</span><span class="si">}</span><span class="s2">):</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">nwrec</span> <span class="o">=</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="n">mms_nw</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">nwrec</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="c1">#print(nwrec)</span>
        <span class="k">def</span> <span class="nf">fmtpcr</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="s2">"6,"</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">"."</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">"‒"</span><span class="p">,</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">".:"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">fmtpcr</span><span class="p">(</span><span class="n">rec</span><span class="p">[</span><span class="s1">'PCRReg'</span><span class="p">])</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">fmtpcr</span><span class="p">(</span><span class="n">nwrec</span><span class="p">[</span><span class="s1">'PCRReg'</span><span class="p">])</span><span class="si">}{</span><span class="s1">' exkl. Wien'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isfirst</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">''</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"(</span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">'PCRRPosRate_a7'</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.3n</span><span class="si">}</span><span class="s2">% / </span><span class="si">{</span><span class="n">nwrec</span><span class="p">[</span><span class="s1">'PCRRPosRate_a7'</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.3n</span><span class="si">}</span><span class="s2">% </span><span class="si">{</span><span class="s1">'positiv in 7 Tagen'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isfirst</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">'+'</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
        <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">print_test_stats</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>‼ Keine Daten für heute
#COVID19at PCR-Tests (inkl. Apotheken) 24h bis Montag, Fälle lt. AGES/Meldedatum (Österreich):

‒ 26.06.:  2.030 /    658 exkl. Wien (4,84% / 6,44% positiv in 7 Tagen)
‒ 19.06.:  2.204 /    682 (5,14% / 9,38% +)
‒ 12.06.:  2.211 /    664 (5,47% / 9,04% +)
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=5d156c46">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [84]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#display(mms0_nw.tail(15))</span>

<span class="k">def</span> <span class="nf">pltposrate2</span><span class="p">(</span><span class="n">mms0_nw</span><span class="p">,</span> <span class="n">schoolinc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span><span class="p">):</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="c1"># if mark else dict()</span>
    <span class="n">mms0_nw</span> <span class="o">=</span> <span class="n">mms0_nw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:]</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Positivrate: "</span> <span class="o">+</span> <span class="n">mms0_nw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="c1">#apodiff =  (mms0_nw["Datum"].iloc[-1] - apo.index.get_level_values("Datum")[-1]).days + 1</span>
    <span class="n">mms0_a</span> <span class="o">=</span> <span class="n">mms0_nw</span>
    <span class="c1">#if apodiff &gt; 0:</span>
    <span class="c1">#    apomsg = f"die {apodiff} letzten Tage" if apodiff &gt; 1 else "den letzten Tag"</span>
    <span class="c1">#    ax.set_title(f"*Tests inklusive Apotheken wegen Meldeverzögerung ohne {apomsg}")</span>
    <span class="c1">#    mms0_a = mms0_nw.iloc[:-apodiff]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">schoolinc</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">mms0_a</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">mms0_a</span><span class="p">[</span><span class="s2">"PCRAPosRate_a7"</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"PCR 9:30-Meldung + Apotheken* + Schulen"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">mms0_a</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">mms0_a</span><span class="p">[</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">],</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"PCR 9:30-Meldung + Apotheken*"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">mms0_a</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">mms0_a</span><span class="p">[</span><span class="s2">"TestsAPosRate_a7"</span><span class="p">],</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"AG+PCR 9:30-Meldung + Apotheken*"</span> <span class="o">+</span> <span class="p">(</span><span class="s2">""</span> <span class="k">if</span> <span class="n">schoolinc</span> <span class="k">else</span> <span class="s2">" + Schulen"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C4"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"TestsBLPosRate_a7"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"AG+PCR 9:30-Meldung"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C2"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCRPosRate_a7"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"PCR 9:30-Meldung"</span> <span class="o">+</span> <span class="p">(</span><span class="s2">" (inkl. Schulen)"</span> <span class="k">if</span> <span class="n">schoolinc</span> <span class="k">else</span> <span class="s2">""</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"PCRPosRate_a7"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">60</span><span class="p">:]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Test-Positivrate (Fälle lt. Krisenstab / Anz. Tests)"</span><span class="p">)</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"7-Tage-Inzidenz / 100.000 EW"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">mms0_nw</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Inzidenz"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper left"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper right"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10_000</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ax2</span>
  
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">pltposrate2</span><span class="p">(</span><span class="n">mms0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">))</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">20_000</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">400</span><span class="p">))</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">pltposrate2</span><span class="p">(</span><span class="n">mms0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">),</span> <span class="n">schoolinc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span><span class="p">)</span>
<span class="c1">#pltposrate2(mms0_nw)</span>
<span class="c1">#pltposrate2(mms0.query("Bundesland == 'Oberösterreich'"))</span>
<span class="c1">#pltposrate2(mms0.query("Bundesland == 'Tirol'"))</span>
<span class="c1">#pltposrate2(mms0.query("Bundesland == 'Steiermark'"))</span>
<span class="c1">#pltposrate2(mms0.query("Bundesland == 'Burgenland'"))</span>

<span class="k">def</span> <span class="nf">pltpos</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pltcol</span><span class="p">,</span> <span class="n">rmlast</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mark</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span><span class="p">,</span> <span class="n">mms0</span><span class="o">=</span><span class="n">mms0</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">rmlast</span><span class="p">:</span>
        <span class="n">mms0</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">!=</span> <span class="n">apo</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="c1">#mms0 = mms0[mms0["Datum"] &lt;= apo.xs(10).index[-1]]</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span>
        <span class="n">y</span><span class="o">=</span><span class="n">mms0</span><span class="p">[</span><span class="n">pltcol</span><span class="p">],</span>
        <span class="n">hue</span><span class="o">=</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">],</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span> <span class="k">if</span> <span class="n">mark</span> <span class="k">else</span> <span class="s2">""</span><span class="p">,</span>
        <span class="n">markeredgewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">labelend</span><span class="p">(</span><span class="n">ycol</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">mms0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">][</span><span class="n">ycol</span><span class="p">]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
                <span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bl</span><span class="p">],</span>
                <span class="p">(</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ys</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
                <span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bl</span><span class="p">],</span>
                <span class="p">(</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ys</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">ys</span><span class="p">)]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">)</span>
    <span class="n">labelend</span><span class="p">(</span><span class="n">pltcol</span><span class="p">)</span>
    <span class="c1">#cov.set_date_opts(ax, mms0["Datum"])</span>
    <span class="c1">#plt.setp(ax.get_legend().get_texts(), fontsize='9')</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms0</span><span class="p">,</span> <span class="n">pltcol</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">v</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%"</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span>
              <span class="c1">#bbox_to_anchor=(0.35, 1)</span>
              <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">),</span>
              <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span>
              <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
              <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span>
             <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="c1">#ax.set_ylim(top=0.25, bottom=0)</span>
    
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=0.3, bottom=0)</span>
    
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms0</span><span class="p">[</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">mms0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">ndays</span><span class="p">)][</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="c1">#ax.set_xlim(left=mms["Datum"].iloc[-1] - timedelta(45), right=mms["Datum"].iloc[-1] +timedelta(1))</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Positivrate"</span><span class="p">)</span>
    <span class="c1">#ax.set_title("Positivrate je Bundesland im 7-Tage-Schnitt")</span>
    <span class="c1">#mms_h = mms0.query("Datum &gt;= '2021-04-20'")</span>
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_tl_heat</span><span class="p">(</span>
            <span class="n">mms0</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">BLCat</span><span class="o">=</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="p">))</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
                <span class="n">index</span><span class="o">=</span><span class="s2">"BLCat"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">pltcol</span><span class="p">),</span>
            <span class="n">im_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="c1">#norm=matplotlib.colors.Normalize(vmin=0, vmax=0.1),</span>
                        <span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">TwoSlopeNorm</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vcenter</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">),</span>
                        <span class="n">cmap</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">div_l_cmap</span><span class="p">,</span>
                    <span class="p">),</span>
            <span class="n">cbar_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">xmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                           <span class="n">pad</span><span class="o">=</span><span class="mf">0.08</span><span class="p">,</span>
                           <span class="n">ticks</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">mms0</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mms0</span><span class="p">[</span><span class="n">pltcol</span><span class="p">]),</span> <span class="n">pltcol</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">())):</span>
            <span class="n">mms0_oo</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">mms0_oo</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mms0_oo</span><span class="p">[</span><span class="n">pltcol</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span> <span class="n">pltcol</span><span class="p">]</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
                <span class="nb">format</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s2">".1%"</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s2">"offset points"</span><span class="p">,</span>
                <span class="n">xycoords</span><span class="o">=</span><span class="p">(</span><span class="s1">'axes fraction'</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"left"</span><span class="p">)</span>
<span class="n">showboth</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span> <span class="k">if</span> <span class="n">showboth</span> <span class="k">else</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span> <span class="k">if</span> <span class="n">showboth</span> <span class="k">else</span> <span class="mi">6</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">showboth</span><span class="p">:</span>
    <span class="n">axs</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">axs</span><span class="p">]</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
    <span class="s2">"Test-Positivrate (PCR Ländermeldung+Apotheke) je Bundesland im 7-Tage-Schnitt, Stand "</span> <span class="o">+</span>
    <span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">if</span> <span class="n">showboth</span><span class="p">:</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.17</span><span class="p">)</span>
    <span class="n">pltpos</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">"TestsAPosRate_a7"</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"major"</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Tests lt. 9:30-Meldung + Apotheken + Schultests inkl. Antigen"</span><span class="p">)</span>
<span class="n">pltpos</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">"PCRRPosRate_a7"</span><span class="p">,</span> <span class="n">rmlast</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1">#axs[1].set_title("Ländermeldung + Apotheken")</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">pltpos</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"TestsAPosRate_a7"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
            <span class="s2">"Test-Positivrate (PCR+Antigen) je Bundesland im 7-Tage-Schnitt, Stand "</span> <span class="o">+</span> <span class="n">mms0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span>
            <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">#ax.set_title("Nur Ländermeldung")</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">pltpos</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"PCRPosRate_a7"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
            <span class="s2">"Test-Positivrate (PCR) je Bundesland im 7-Tage-Schnitt, Stand "</span> <span class="o">+</span> <span class="n">mms0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span>
            <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">#ax.set_title("Nur Ländermeldung")</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_97_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=19b824e1">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [85]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
    <span class="s2">"Test-Positivrate (PCR Ländermeldung + Apotheke) je Bundesland im 7-Tage-Schnitt, Stand "</span> <span class="o">+</span>
    <span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">pltpos</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"PCRRPosRate_a7"</span><span class="p">,</span> <span class="n">rmlast</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mmx</span><span class="p">),</span> <span class="n">mark</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
<span class="c1">#ax.set_title("Tests lt. 9:30-Krisenstab-Meldung + Apotheken, Fälle lt. AGES")</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_98_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=6cb763dd">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [86]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">drawposratelatest</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
    <span class="n">mms0</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">mmx</span><span class="p">)</span>
    <span class="n">sortbl</span> <span class="o">=</span> <span class="n">mms0</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">sortbl</span><span class="p">,</span>
        <span class="n">hue_order</span><span class="o">=</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">],</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
        <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">,</span>
        <span class="n">saturation</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">dodge</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mf">0.05</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sortbl</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]):</span>
        <span class="n">bldata</span> <span class="o">=</span> <span class="n">sortbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">bldata</span><span class="p">[</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s2">".1%"</span><span class="p">),</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span>
                    <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                    <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="n">textcoords</span><span class="o">=</span><span class="s2">"offset points"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fälle / PCR-Tests"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"7-Tage PCR-Positivrate, Stand </span><span class="si">{</span><span class="n">mms0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'Datum'</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">drawposratelatest</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=668a0599">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [87]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C8"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Wien: 7-Tage-PCR-Positivrate (9:30-Meldung + Apotheken)"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_100_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=ac19f03f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [88]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Oberösterreich"</span>
    <span class="n">df0</span> <span class="o">=</span>  <span class="n">mmx</span><span class="p">[</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbl</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">df0</span><span class="p">[</span><span class="s2">"PCRRPosrate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df0</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span> <span class="o">/</span> <span class="n">df0</span><span class="p">[</span><span class="s2">"PCRReg"</span><span class="p">]</span>
    <span class="c1">#print(df0.iloc[-1]["TestsSum"], df0.iloc[-1]["Tests"], df0.iloc[-1]["PCRSum"], df0.iloc[-1]["PCR"])</span>
    <span class="n">make_wowg_diag</span><span class="p">(</span>
       <span class="n">df0</span><span class="p">,</span> <span class="n">selbl</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"PCR-Positivrate"</span><span class="p">,</span> <span class="n">ccol</span><span class="o">=</span><span class="s2">"PCRRPosrate"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">7</span><span class="o">*</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">selbl</span> <span class="o">+</span> <span class="s2">": PCR-Positivrate (9:30 Krisenstabsmeldung + Apotheken)"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.05</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=2554c7ae">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [89]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plt_pcrs</span><span class="p">():</span>
    <span class="n">pcrcol</span> <span class="o">=</span> <span class="s2">"PCRRInz"</span>
    <span class="n">mms0</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">mms0a</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"PCR"</span><span class="p">])]</span>
    <span class="n">mms0a</span> <span class="o">=</span> <span class="n">mms0a</span><span class="c1">#[mms0a["Datum"] &gt;= mms0["Datum"].iloc[-1] - timedelta(MIDRANGE_NDAYS)]</span>
    
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">mms0a</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">mms0a</span><span class="p">[</span><span class="n">pcrcol</span><span class="p">],</span> <span class="n">hue</span><span class="o">=</span><span class="n">mms0a</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">],</span>
                      <span class="c1">#marker='.',</span>
                      <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="c1">#ax.get_yaxis().set_major_formatter(matplotlib.ticker.PercentFormatter(xmax=1, decimals=1))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"PCR-Tests pro Woche in </span><span class="si">% d</span><span class="s2">. EW"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="mi">100_000</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">100_000</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms0a</span><span class="p">,</span> <span class="n">pcrcol</span><span class="p">,</span> <span class="n">ends</span><span class="o">=</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="n">colorize</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Testrate (Nur PCR, Ländermeldung+Apotheke) pro Bundesland, 7-Tage-Summe, logarithmisch"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms0a</span><span class="p">,</span> <span class="n">pcrcol</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">v</span><span class="o">/</span><span class="mi">100_000</span><span class="si">:</span><span class="s2">.2%</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                    <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">));</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms0a</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">plt_pcrs</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_102_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=00f3102e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Altersgruppen-und-Bundesl%C3%A4ndern">Altersgruppen und Bundesländern<a class="anchor-link" href="#Altersgruppen-und-Bundesl%C3%A4ndern">¶</a></h1><p>Die Bundesländer wurden nach Möglichkeit so angeordnet dass ähnliche untereinander sind.
Dabei wurde die NUTS Gliederung (<a href="https://www.statistik.at/web_de/klassifikationen/regionale_gliederungen/nuts_einheiten/index.html">https://www.statistik.at/web_de/klassifikationen/regionale_gliederungen/nuts_einheiten/index.html</a>) herangezogen die Österreich in eine Westregion mit Voralberg, Tirol, Salzburg, OÖ, Ostregion (Niederösterreich, Wien, Burgenland) und eine Südregion (Kärnten, Steiermark) unterteilt. Diese Unterteilung ist auch im Hinblick auf den früheren Schulstart in der Ostregion sinnvoll.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=83539781">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Aktuelle-Situation-im-%C3%9Cberblick">Aktuelle Situation im Überblick<a class="anchor-link" href="#Aktuelle-Situation-im-%C3%9Cberblick">¶</a></h3><p>Die Farbskalierung der Inzidenzen ist logarithmisch, die der Inzidenzveränderung linear.</p>
<p>Als Lesehilfe ist am Ende eine Heatmap die die Bevölkerungszahlen angibt. Dabei sind in der "Alle" Spalte und der "Österreich" Zeile jeweils durschnittswerte angegeben um die Farbskala nicht zu sprengen. Hier ist also nur ein vergleich innerhalb dieser Zeile bzw. Spalte sinnvoll, nicht mit anderen Feldern.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=e616a48e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [90]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">cert_s_i</span> <span class="o">=</span> <span class="n">cert_s</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">cert_s_i</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"NoState"</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="n">cert_s_i</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">cert_s_i</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">):</span>
        <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">dt</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="s2">"&lt;5"</span><span class="p">),</span> <span class="s2">"certs_pp"</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="s2">"5-14"</span><span class="p">)</span>
        <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">dt</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="s2">"12-14"</span><span class="p">)]</span> <span class="o">+</span> <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">dt</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="s2">"00-11"</span><span class="p">)]</span>
        <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">-=</span> <span class="n">agd_sums</span><span class="p">[</span>
            <span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"&lt;5"</span><span class="p">)]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
        <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="s2">"certs_pp"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="s2">"valid_certificates"</span><span class="p">]</span> <span class="o">/</span> <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="n">cert_s_i</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">set_names</span><span class="p">(</span><span class="n">cert_s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># With pandas v2.0, the names seem to get lost</span>
    <span class="n">cert_s_i</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">"00-11"</span><span class="p">,</span> <span class="s2">"12-14"</span><span class="p">],</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cert_s_i</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">{</span><span class="s2">"85+"</span><span class="p">:</span> <span class="s2">"&gt;84"</span><span class="p">,</span> <span class="s2">"All"</span><span class="p">:</span> <span class="s2">"Alle"</span><span class="p">},</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cert_s_i</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=382218fb">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [91]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="c1">#hm.loc[hm["inz_g7"] &gt;= 10, "inz_g7"] = np.nan</span>

<span class="k">def</span> <span class="nf">pivoted</span><span class="p">(</span><span class="n">valuecol</span><span class="p">,</span> <span class="n">hm0</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">hm0</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">valuecol</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span>
        <span class="n">axis</span><span class="o">=</span><span class="s2">"columns"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ag_to_id</span><span class="p">))</span>
    
<span class="k">def</span> <span class="nf">set_hm_ax_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">pad</span><span class="o">=-</span><span class="mf">4.5</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">fixup_hms</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">):</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
        <span class="n">set_hm_ax_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">getquan</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mf">0.015</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">cutoff</span> <span class="k">if</span> <span class="n">upper</span> <span class="k">else</span> <span class="n">cutoff</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">"higher"</span> <span class="k">if</span> <span class="n">upper</span> <span class="k">else</span> <span class="s2">"lower"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">drawinz</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hm0</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">hm0_p</span> <span class="o">=</span> <span class="n">pivoted</span><span class="p">(</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">hm0</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span> <span class="c1"># / 1000</span>
    <span class="c1">#display(hm0_p)</span>
    <span class="c1">#display(hm0.dtypes)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span>
        <span class="n">hm0_p</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
        <span class="n">fmt</span><span class="o">=</span><span class="s2">".0f"</span><span class="p">,</span>
        <span class="c1">#fmt=".2n",</span>
        <span class="c1">#fmt="3.3n",</span>
        <span class="c1">#center=0,</span>
        <span class="n">annot</span><span class="o">=</span><span class="n">annot</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">LogNorm</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">getquan</span><span class="p">(</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">norm</span> <span class="k">else</span> <span class="n">norm</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">cbar_kws</span><span class="o">=</span><span class="p">{</span>
            <span class="c1">#"format": lambda n, _: f"{n:.2n}%", #matplotlib.ticker.PercentFormatter(decimals=1),</span>
            <span class="c1">#"ticks": np.array([0, 20, 35, 50, 100, 200, 300, 400, 700, 1000, 1500, 2000, 3000, 4000]</span>
            <span class="c1">#                 ) / 1000</span>
            <span class="s2">"format"</span><span class="p">:</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.0f</span><span class="s2">"</span><span class="p">),</span>
            <span class="c1">#"ticks": [0, 1, 2, 3, 4, 5, 7, 10, 20, 35, 50, 100, 200, 300, 500, 800]</span>
            <span class="s2">"ticks"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">3000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">]</span>
    <span class="p">})</span>
    <span class="c1">#ax.set_title(f"Wöchentlich neu infizierte (%) per {hm0['Datum'].iloc[0].strftime('%a %x')}{AGES_STAMP}")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"7-Tage-</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> per </span><span class="si">{</span><span class="n">hm0</span><span class="p">[</span><span class="s1">'Datum'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">AGES_STAMP</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">drawginz</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hm0</span><span class="p">,</span> <span class="n">tcmap</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">hm0_p</span> <span class="o">=</span> <span class="p">(</span><span class="n">pivoted</span><span class="p">(</span><span class="s2">"inz_g7"</span><span class="p">,</span> <span class="n">hm0</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">hm0_p</span><span class="p">,</span>
                <span class="n">fmt</span><span class="o">=</span><span class="s2">".0f"</span><span class="p">,</span>
                <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="c1">#center=1,</span>
                <span class="c1">#vmax=3,</span>
                <span class="c1">#vmin=0.5,</span>
                <span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">TwoSlopeNorm</span><span class="p">(</span>
                    <span class="n">vmin</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                    <span class="n">vcenter</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">vmax</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">norm</span> <span class="k">else</span> <span class="n">norm</span><span class="p">,</span>
                <span class="n">cmap</span><span class="o">=</span><span class="n">tcmap</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Anstieg wöchentlicher </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2"> (%) auf"</span> <span class="o">+</span>
                 <span class="sa">f</span><span class="s2">" </span><span class="si">{</span><span class="n">hm0</span><span class="p">[</span><span class="s1">'Datum'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2"> i.Vgl. zu 7 Tage vorher lt. AGES"</span><span class="p">)</span>
    

<span class="c1">#drawheatmap(agd_sums, "Inzidenz")</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=06debf13">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [92]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">animheatmap</span><span class="p">(</span><span class="n">n_days</span><span class="p">):</span>
    <span class="n">hmb</span> <span class="o">=</span> <span class="p">(</span><span class="n">agd_sums</span>
           <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich' and Altersgruppe != 'Alle'"</span><span class="p">)</span>
           <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span>
           <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"BLCat"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">}))</span>
    <span class="c1">#hmb = hmb.loc[hmb["Bundesland"] != "Österreich"]</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">LogNorm</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
    <span class="n">cl</span> <span class="o">=</span> <span class="s2">"lightgrey"</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"cet_fire"</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#cmap.set_under("b")</span>
    <span class="n">cmap</span><span class="o">.</span><span class="n">set_over</span><span class="p">(</span><span class="s2">"white"</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">rc_context</span><span class="p">({</span>
        <span class="s2">"text.color"</span><span class="p">:</span> <span class="n">cl</span><span class="p">,</span>
        <span class="s1">'axes.labelcolor'</span><span class="p">:</span> <span class="n">cl</span><span class="p">,</span>
        <span class="s1">'xtick.color'</span><span class="p">:</span> <span class="n">cl</span><span class="p">,</span>
        <span class="s1">'ytick.color'</span><span class="p">:</span> <span class="n">cl</span><span class="p">}):</span>
        <span class="k">for</span> <span class="n">past</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_days</span><span class="p">):</span>
            <span class="n">hm0</span> <span class="o">=</span> <span class="n">hmb</span><span class="p">[</span><span class="n">hmb</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">hmb</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">past</span><span class="p">)]</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">"black"</span><span class="p">)</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">"black"</span><span class="p">)</span>
            <span class="n">drawinz</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hm0</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="s2">"Inzidenz"</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">hm0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">))</span>
            <span class="c1">#ax.tick_params(rotation=0)</span>
            <span class="n">fixup_hms</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">ax</span><span class="p">])</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">"inzanim/fig-"</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">n_days</span> <span class="o">-</span> <span class="n">past</span><span class="p">,</span> <span class="s2">"03d"</span><span class="p">))</span>
<span class="c1">#animheatmap(len(fs_at))</span>
<span class="c1">#animheatmap(1)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=66545bf2">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [93]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">agd0</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AgeFrom &gt;= 15 and AgeTo &lt;= 65 and Bundesland == 'Österreich'"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">agd0</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="n">agd0</span> <span class="o">=</span> <span class="n">agd0</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">})</span>
<span class="n">agd0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &lt; '2025-07-01'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">agd0</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>array(['15-24', '25-34', '35-44', '45-54', '55-64'], dtype=object)</pre>
</div>
</div>
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[93]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>0.0507</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=799fe89c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [94]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">drawheatmap</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">):</span>
    <span class="n">agd_sums</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">,</span> <span class="mi">180</span><span class="p">):</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle6M"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">180</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle9M"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">240</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle12M"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">365</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle6MProEw"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle6M"</span><span class="p">]</span> <span class="o">/</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle9MProEw"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle9M"</span><span class="p">]</span> <span class="o">/</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle12MProEw"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle12M"</span><span class="p">]</span> <span class="o">/</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="n">hm0</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]]</span> <span class="c1">#np.datetime64("2020-11-10")]#</span>

    <span class="n">hm0</span> <span class="o">=</span> <span class="n">hm0</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"BLCat"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">})</span>
    <span class="n">hm0m</span> <span class="o">=</span> <span class="n">agd1m_sums</span><span class="p">[</span><span class="n">agd1m_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">agd1m_sums</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]]</span> <span class="c1">#np.datetime64("2020-11-10")]#</span>
    <span class="n">hm0m</span> <span class="o">=</span> <span class="n">hm0m</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"BLCat"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">})</span>
    <span class="n">hm01</span> <span class="o">=</span> <span class="n">agd1_sums</span><span class="p">[</span><span class="n">agd1_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">agd1_sums</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]]</span> <span class="c1">#np.datetime64("2020-11-10")]#</span>
    <span class="n">hm01</span> <span class="o">=</span> <span class="n">hm01</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"BLCat"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">})</span>
    <span class="n">hm0m_old</span> <span class="o">=</span> <span class="n">agd1m_sums</span><span class="p">[</span><span class="n">agd1m_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">agd1m_sums</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>
    <span class="n">hm0m_old</span> <span class="o">=</span> <span class="n">hm0m_old</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"BLCat"</span><span class="p">:</span> <span class="s2">"Bundesland"</span><span class="p">})</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">un_l_cmap</span>
    <span class="n">tcmap</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">div_l_cmap</span>
    
    
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">fig2</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">))</span>
        <span class="n">drawinz</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">hm0</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="s2">"Inzidenz"</span><span class="p">)</span>
        <span class="n">fixup_hms</span><span class="p">(</span><span class="n">fig2</span><span class="p">,</span> <span class="p">[</span><span class="n">ax2</span><span class="p">])</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig2</span><span class="p">)</span>
   
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">figm</span><span class="p">,</span> <span class="n">axsm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">LogNorm</span><span class="p">(</span>
            <span class="n">vmin</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">][</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="n">getquan</span><span class="p">(</span><span class="n">hm0m</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">][</span><span class="n">hm0m</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">))),</span>
            <span class="n">vmax</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">getquan</span><span class="p">(</span><span class="n">hm0m</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>
        <span class="p">)</span>
        <span class="n">drawinz</span><span class="p">(</span><span class="n">axsm</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">hm0m</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="s2">"Melde-Inzidenz"</span><span class="p">,</span> <span class="n">norm</span><span class="p">)</span>
        <span class="n">drawinz</span><span class="p">(</span><span class="n">axsm</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">hm0</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="s2">"Inzidenz"</span><span class="p">,</span> <span class="n">norm</span><span class="p">)</span>
        <span class="n">gnorm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">TwoSlopeNorm</span><span class="p">(</span>
            <span class="n">vmin</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
                     <span class="n">getquan</span><span class="p">(</span><span class="n">hm0m</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
                     <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">vcenter</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">vmax</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span>
                <span class="n">getquan</span><span class="p">(</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">getquan</span><span class="p">(</span><span class="n">hm0</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="mi">1</span><span class="p">))</span>
        <span class="n">drawginz</span><span class="p">(</span><span class="n">axsm</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">hm0m</span><span class="p">,</span> <span class="n">tcmap</span><span class="p">,</span> <span class="s2">"Meldungen"</span><span class="p">,</span> <span class="n">gnorm</span><span class="p">)</span>
        <span class="n">drawginz</span><span class="p">(</span><span class="n">axsm</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">hm0</span><span class="p">,</span> <span class="n">tcmap</span><span class="p">,</span> <span class="s2">"Fälle"</span><span class="p">,</span> <span class="n">gnorm</span><span class="p">)</span>
        <span class="n">fixup_hms</span><span class="p">(</span><span class="n">figm</span><span class="p">,</span> <span class="n">axsm</span><span class="p">)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">figm</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_AGES</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">drawinz</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">hm0</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="s2">"Inzidenz"</span><span class="p">)</span>

        <span class="n">drawginz</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">hm0</span><span class="p">,</span> <span class="n">tcmap</span><span class="p">,</span> <span class="s2">"Fälle"</span><span class="p">)</span>
        <span class="n">fixup_hms</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
        <span class="n">g1fig</span><span class="p">,</span> <span class="n">g1ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">))</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">pivoted</span><span class="p">(</span><span class="s2">"inz_dg7"</span><span class="p">,</span> <span class="n">hm01</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span>
                <span class="n">fmt</span><span class="o">=</span><span class="s2">"2.1f"</span><span class="p">,</span>
                <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">g1ax</span><span class="p">,</span>
                <span class="c1">#center=1,</span>
                <span class="c1">#vmax=1.5,</span>
                <span class="c1">#vmin=0.9,</span>
                <span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">TwoSlopeNorm</span><span class="p">(</span>
                        <span class="n">vmin</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm01</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span> <span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                        <span class="n">vcenter</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">vmax</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm01</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span> <span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
                <span class="n">cmap</span><span class="o">=</span><span class="n">tcmap</span><span class="p">)</span>
        <span class="n">g1ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"Fallzahländerung (%) auf </span><span class="si">{</span><span class="n">hm01</span><span class="p">[</span><span class="s1">'Datum'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
            <span class="sa">f</span><span class="s2">" i.Vgl. zur Erstmeldung für vorigen </span><span class="si">{</span><span class="n">hm01</span><span class="p">[</span><span class="s1">'Datum'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%A'</span><span class="p">)</span><span class="si">}{</span><span class="n">AGES_STAMP</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">fixup_hms</span><span class="p">(</span><span class="n">g1fig</span><span class="p">,</span> <span class="p">[</span><span class="n">g1ax</span><span class="p">])</span>
        
    <span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="p">]</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">pivoted</span><span class="p">(</span><span class="s2">"AnzahlFaelle9MProEw"</span><span class="p">,</span> <span class="n">hm0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
            <span class="n">fmt</span><span class="o">=</span><span class="s2">".0f"</span><span class="p">,</span>
            <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="c1">#center=1,</span>
            <span class="c1">#vmax=1.5,</span>
            <span class="c1">#vmin=0.9,</span>
            <span class="c1">#norm=matplotlib.colors.TwoSlopeNorm(vmin=0.8, vcenter=1, vmax=1.2),</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Fälle in % d. EW, letzte 9 Monate, per </span><span class="si">{</span><span class="n">hm0</span><span class="p">[</span><span class="s1">'Datum'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2"> lt. AGES"</span><span class="p">)</span>
        <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">cert0</span> <span class="o">=</span> <span class="n">cert_s_i</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="n">cert0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cert0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="p">)</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">pivoted</span><span class="p">(</span><span class="s2">"certs_pp"</span><span class="p">,</span> <span class="n">cert0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
                    <span class="n">fmt</span><span class="o">=</span><span class="s2">".0f"</span><span class="p">,</span>
                    <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="c1">#center=1,</span>
                    <span class="c1">#vmax=1.5,</span>
                    <span class="c1">#vmin=0.9,</span>
                    <span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">TwoSlopeNorm</span><span class="p">(</span>
                        <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="c1">#vmin=cert0["certs_pp"].min(),</span>
                        <span class="n">vcenter</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">cert_s_i</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">cert_s_i</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">"Österreich"</span><span class="p">,</span> <span class="s2">"Alle"</span><span class="p">),</span> <span class="s2">"certs_pp"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">),</span>
                        <span class="n">vmax</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
                    <span class="n">cmap</span><span class="o">=</span><span class="n">tcmap</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="n">tcmap</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"_r"</span><span class="p">)</span> <span class="k">else</span> <span class="n">tcmap</span> <span class="o">+</span> <span class="s2">"_r"</span><span class="p">)</span>
                    <span class="c1">#cmap=cmap + "_r"#"viridis_r"</span>
            <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Grüner Pass oder gem. NIG-Empfehlung (%) per </span><span class="si">{</span><span class="n">cert_s_i</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s1">'Datum'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2"> lt. </span><span class="si">{</span><span class="n">cov</span><span class="o">.</span><span class="n">DS_BMG</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        
        <span class="n">fixup_hms</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="n">drawinz</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">hm0m</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="s2">"Inzidenz nach Meldedatum"</span><span class="p">)</span>

        <span class="n">drawginz</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">hm0m</span><span class="p">,</span> <span class="n">tcmap</span><span class="p">,</span> <span class="s2">"Neuinfektionen nach Meldedatum"</span><span class="p">)</span>
        <span class="n">fixup_hms</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">LogNorm</span><span class="p">(</span>
            <span class="n">vmin</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm0m_old</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">][</span><span class="n">hm0m_old</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="n">getquan</span><span class="p">(</span><span class="n">hm0m</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">][</span><span class="n">hm0m</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">False</span><span class="p">))),</span>
            <span class="n">vmax</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">getquan</span><span class="p">(</span><span class="n">hm0m_old</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">][</span><span class="n">hm0m_old</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">getquan</span><span class="p">(</span><span class="n">hm0m</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">][</span><span class="n">hm0m</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>
        <span class="p">)</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
        <span class="n">drawinz</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">hm0m</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="s2">"Inzidenz nach Meldedatum"</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
        <span class="n">drawinz</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">hm0m_old</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="s2">"Inzidenz nach Meldedatum"</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
        <span class="n">fixup_hms</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">)</span>

    <span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">bev_fig</span><span class="p">,</span> <span class="n">bev_axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">bev</span> <span class="o">=</span> <span class="n">pivoted</span><span class="p">(</span><span class="s2">"AnzEinwohner"</span><span class="p">,</span> <span class="n">hm0</span><span class="p">)</span>
        <span class="c1">#display(bev)</span>
        <span class="n">bev_rel</span> <span class="o">=</span> <span class="n">bev</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
        <span class="n">bev_rel</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">bev_rel</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">/</span> <span class="n">bev_rel</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">][:,</span><span class="kc">None</span><span class="p">]</span>
        <span class="c1">#display(pd.DataFrame(bev_rel))</span>
        <span class="c1">#display(bev.iloc[:, 0].to_numpy())</span>
        <span class="n">bev_rel</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/=</span> <span class="n">bev_rel</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="c1">#bev_rel[0, 0] = np.nan</span>
        <span class="c1">#bev_rel[0, 3] = np.nan</span>
        <span class="c1">#display(bev.loc[:"Österreich"])</span>
        <span class="n">bev</span><span class="p">[</span><span class="s2">"Alle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bev</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Alle"</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">bev</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">"Österreich"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bev</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="c1">#display(bev.loc[:"Österreich"])</span>
        <span class="c1">#bev.loc["Österreich", "Alle"] = np.nan # Makes no sense</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">bev</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span>
                    <span class="n">fmt</span><span class="o">=</span><span class="s2">"0.1f"</span><span class="p">,</span>
                    <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">ax</span><span class="o">=</span><span class="n">bev_axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="c1">#center=0,</span>
                    <span class="c1">#vmax=3,</span>
                    <span class="c1">#vmin=0.5,</span>
                    <span class="c1">#norm=matplotlib.colors.TwoSlopeNorm(vmin=0.5, vcenter=1, vmax=2),</span>
                    <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
        <span class="n">bev_axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Bevölkerungszahlen (1000) lt. AGES (Links &amp; oben Durchchnittswerte)"</span><span class="p">)</span>

        <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">bev_rel</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">bev</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">bev</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
                <span class="n">fmt</span><span class="o">=</span><span class="s2">"2.1f"</span><span class="p">,</span>
                <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">bev_axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="c1">#center=0,</span>
                <span class="c1">#vmax=3,</span>
                <span class="c1">#vmin=0.5,</span>
                <span class="n">norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="mi">17</span><span class="p">),</span>
                <span class="n">cmap</span><span class="o">=</span><span class="s2">"Blues"</span><span class="p">)</span>
        <span class="n">bev_axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Altersverteilung (%) pro Bundesland lt. AGES"</span><span class="p">)</span>
        <span class="n">fixup_hms</span><span class="p">(</span><span class="n">bev_fig</span><span class="p">,</span> <span class="n">bev_axs</span><span class="p">)</span>

<span class="n">drawheatmap</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_109_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_109_1.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=d8b7fe81">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Altersgruppen,-f%C3%BCr-die-auf-den-letzen-oder-vorletzen-Tag-verd%C3%A4chtig-wenig-F%C3%A4lle-gebucht-wurden">Altersgruppen, für die auf den letzen oder vorletzen Tag verdächtig wenig Fälle gebucht wurden<a class="anchor-link" href="#Altersgruppen,-f%C3%BCr-die-auf-den-letzen-oder-vorletzen-Tag-verd%C3%A4chtig-wenig-F%C3%A4lle-gebucht-wurden">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=41b0dc50">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [95]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">print_sus_agd</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">):</span>
    <span class="n">agd_sums</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">display</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
        <span class="s2">"inz_dg7 &lt;= 0.3 and AnzahlFaelle7Tage &gt;= 5 * 7 or AnzahlFaelle == 0 and AnzahlFaelle7Tage &gt;= 3 * 7 and inz_dg7 &lt; 1"</span>
        <span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">])[[</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="s2">"inz_dg7"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">print_sus_agd</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th></th>
<th></th>
<th>AnzahlFaelle</th>
<th>inz_dg7</th>
<th>AnzahlFaelle7Tage</th>
<th>AnzEinwohner</th>
</tr>
<tr>
<th>Datum</th>
<th>Bundesland</th>
<th>Altersgruppe</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan="2" valign="top">2023-06-28</th>
<th>Wien</th>
<th>55-64</th>
<td>3.0</td>
<td>0.1429</td>
<td>60.0</td>
<td>256339.4548</td>
</tr>
<tr>
<th>Österreich</th>
<th>65-74</th>
<td>6.0</td>
<td>0.2500</td>
<td>56.0</td>
<td>934279.1315</td>
</tr>
<tr>
<th>2023-06-29</th>
<th>Österreich</th>
<th>65-74</th>
<td>2.0</td>
<td>0.1667</td>
<td>46.0</td>
<td>934340.4356</td>
</tr>
<tr>
<th>2023-06-28</th>
<th>Burgenland</th>
<th>Alle</th>
<td>0.0</td>
<td>0.0000</td>
<td>24.0</td>
<td>302342.7260</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=31f60ff6">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [96]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">selbl</span> <span class="o">=</span> <span class="s1">'Österreich'</span>
    <span class="n">ag_q</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Altersgruppe != 'Alle' and Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff</span><span class="p">(</span>
        <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ag_q</span><span class="p">),</span>
        <span class="n">agd_sums_old</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ag_q</span><span class="p">),</span>
        <span class="s2">"Altersgruppe"</span><span class="p">,</span>
        <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">rwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">ndays</span><span class="o">=</span><span class="n">DETAIL_SMALL_NDAYS</span><span class="p">,</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"Fälle"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,)</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">selbl</span> <span class="o">+</span> <span class="s2">": COVID-Fälle"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=b2a8bdbc">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [97]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">selag</span> <span class="o">=</span> <span class="s1">'&gt;84'</span>
    <span class="n">ag_q</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Altersgruppe == '</span><span class="si">{</span><span class="n">selag</span><span class="si">}</span><span class="s2">'"</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff</span><span class="p">(</span>
        <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ag_q</span><span class="p">),</span>
        <span class="n">agd_sums_old</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ag_q</span><span class="p">),</span>
        <span class="s2">"Bundesland"</span><span class="p">,</span>
        <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">rwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">ndays</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="mi">7</span><span class="p">,</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"Fälle"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,)</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Altersgruppe "</span> <span class="o">+</span> <span class="n">selag</span> <span class="o">+</span> <span class="s2">": COVID-Fälle"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="c1">#for ax in axs.flat:</span>
        <span class="c1">#ax.set_ylim(bottom=ax.get_ylim()[1] * 0.025)</span>
        <span class="c1">#cov.set_logscale(ax)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=b3c94922">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Verteilung-der-Infektionen-auf-die-Bundesl%C3%A4nder">Verteilung der Infektionen auf die Bundesländer<a class="anchor-link" href="#Verteilung-der-Infektionen-auf-die-Bundesl%C3%A4nder">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=37347932">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [98]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
    <span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Oberösterreich"</span>
    <span class="n">bez2</span> <span class="o">=</span> <span class="n">bez</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">bez</span><span class="p">[</span><span class="s2">"GKZ"</span><span class="p">])]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">bez2</span> <span class="o">=</span> <span class="n">bez2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"GKZ"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">geo_order_to_index</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"stable"</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">rc_context</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">"axes.prop_cycle"</span><span class="p">:</span> <span class="n">cycler</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"tab20"</span> <span class="k">if</span> <span class="n">bez2</span><span class="p">[</span><span class="s2">"GKZ"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="s2">"tab10"</span><span class="p">,</span> <span class="n">n_colors</span><span class="o">=</span><span class="mi">20</span><span class="p">))}):</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">plt_cat_dists</span><span class="p">(</span>
            <span class="n">data_cat</span><span class="o">=</span><span class="n">bez2</span><span class="p">,</span>
            <span class="n">data_agg</span><span class="o">=</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">),</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bezirk"</span><span class="p">,</span> <span class="n">bundesland</span><span class="o">=</span><span class="n">selbl</span><span class="p">,</span>
            <span class="n">stamp</span><span class="o">=</span><span class="n">AGES_STAMP</span><span class="p">,</span>
            <span class="n">datefrom</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
            <span class="n">shortrange</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=a7cf7702">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [99]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">plt_cat_dists</span><span class="p">(</span>
        <span class="n">data_cat</span><span class="o">=</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="n">data_agg</span><span class="o">=</span><span class="n">fs_at</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">bundesland</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span>
        <span class="n">stamp</span><span class="o">=</span><span class="n">AGES_STAMP</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=5784f252">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Verteilung-der-Infektionen-auf-die-Altersgruppen">Verteilung der Infektionen auf die Altersgruppen<a class="anchor-link" href="#Verteilung-der-Infektionen-auf-die-Altersgruppen">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=8c5fe2b0">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [100]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_ag_sep</span><span class="p">(</span><span class="n">uselog</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rmlast</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">agd_sums</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">omicronbegdate</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">DETAIL_NDAYS</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">!=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="k">if</span> <span class="n">rmlast</span> <span class="k">else</span> <span class="n">agd_sums</span>
    <span class="n">per_bl</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">2</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt_per_cat_inz</span><span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe !='Alle'"</span><span class="p">),</span>
        <span class="s2">", "</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Altersgruppe"</span> <span class="k">if</span> <span class="n">per_bl</span> <span class="k">else</span> <span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span>
        <span class="s2">", je "</span> <span class="o">+</span> <span class="p">(</span><span class="s2">"Bundesland"</span> <span class="k">if</span> <span class="n">per_bl</span> <span class="k">else</span> <span class="s2">"Altersgruppe"</span><span class="p">)</span>
        <span class="o">+</span> <span class="p">(</span><span class="s2">" nach Meldedatum"</span> <span class="k">if</span> <span class="n">rmlast</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">""</span><span class="p">)</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span>
        <span class="s2">"Bundesland"</span> <span class="k">if</span> <span class="n">per_bl</span> <span class="k">else</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span>
        <span class="n">fromdate</span><span class="o">=</span><span class="n">fromdate</span><span class="p">,</span>
        <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">)</span>
    <span class="n">trans</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">transforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">transFigure</span><span class="p">,</span> <span class="n">fig</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rmlast</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">"* bis Labordatum "</span> <span class="o">+</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">", d.h. neuester Tag wegen Meldeverzug weggelassen; Zahlen in Klammer: Änderung ggü. Vortag/Vorwoche"</span>
            <span class="k">if</span> <span class="n">rmlast</span> <span class="k">else</span> <span class="s2">"* ACTHUNG: V.a. letzer Tag mit fehlenden Nachmeldungen"</span><span class="p">,</span>
            <span class="n">va</span><span class="o">=</span><span class="s2">"bottom"</span><span class="p">,</span>
            <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="s2">"x-small"</span><span class="p">,</span>
            <span class="n">in_layout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="n">trans</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">uselog</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">subs</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt_ag_sep</span><span class="p">(</span><span class="n">uselog</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rmlast</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">agd_sums</span><span class="o">=</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">))</span>
    <span class="c1">#plt_ag_sep(uselog=False, rmlast=False, agd_sums=agd_sums.query("Bundesland == 'Österreich'"))</span>
    <span class="c1">#plt_ag_sep(uselog=True, rmlast=False, agd_sums=agd_sums.query("Bundesland == 'Wien'"))</span>
    <span class="c1">#plt_ag_sep(uselog=True, rmlast=False, agd_sums=agd_sums.query("Bundesland == 'Oberösterreich'"))</span>

    <span class="n">plt_ag_sep</span><span class="p">(</span><span class="n">uselog</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rmlast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">agd_sums</span><span class="o">=</span><span class="n">agd1m_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=922335b6">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [101]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_ag_sep_and_print</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '5-14'"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"#COVID19at-Fälle pro Woche pro 100.000 Einwohnern in der Altersgruppe 5-14 in Österreich, nach Labordatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span> <span class="o">+</span> <span class="s2">":</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="o">*</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"‒"</span><span class="p">,</span> <span class="n">record</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m:"</span><span class="p">),</span> <span class="nb">format</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="s2">".0f"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">","</span><span class="p">,</span> <span class="n">pctc</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">],</span> <span class="n">emoji</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
              <span class="s2">"in 7 Tagen"</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">""</span><span class="p">)</span>
<span class="n">plt_ag_sep_and_print</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>#COVID19at-Fälle pro Woche pro 100.000 Einwohnern in der Altersgruppe 5-14 in Österreich, nach Labordatum (AGES Fr. 30.06.23):

‒ 29.06: 1, ‒47% ⏬ in 7 Tagen
‒ 22.06: 2, ‒15% ↘ 
‒ 15.06: 2, +33% ↗ 
‒ 08.06: 2, ‒44% ⏬ 
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=1473f5be">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [102]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt_ag_sep</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">=</span><span class="n">agd1m_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '5-14'"</span><span class="p">),</span> <span class="n">uselog</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rmlast</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=ec6809e6">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [103]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#            "agU25_inz_g7",</span>
<span class="c1">#            "ag25to54_inz_g7",</span>
<span class="c1">#            "ag55_inz_g7"</span>
<span class="k">def</span> <span class="nf">agg_casedata</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">lblkey</span><span class="p">,</span> <span class="n">lblval</span><span class="p">,</span> <span class="n">extragrp</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">extragrp</span> <span class="ow">or</span> <span class="p">[]))</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
        <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzEinwohnerFixed"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzahlTot"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">})</span>
    <span class="n">res</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">/</span> <span class="n">res</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
    <span class="n">res</span><span class="p">[</span><span class="n">lblkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">lblval</span>
    <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">lblkey</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">draw_ag_grps</span><span class="p">(</span><span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">ndays</span><span class="p">)]</span>
    <span class="n">ag5</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '&lt;5'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">])</span>
    <span class="n">ag85</span> <span class="o">=</span> <span class="n">agg_casedata</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AgeFrom &gt;= 84"</span><span class="p">),</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"85+"</span><span class="p">)</span>
    <span class="n">ag65</span> <span class="o">=</span> <span class="n">agg_casedata</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AgeFrom &gt;= 64"</span><span class="p">),</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"65+"</span><span class="p">)</span>
    <span class="n">ag14</span> <span class="o">=</span> <span class="n">agg_casedata</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '5-14'"</span><span class="p">),</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"5-14"</span><span class="p">)</span>
    <span class="n">agmid</span> <span class="o">=</span> <span class="n">agg_casedata</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AgeFrom &gt;= 25 and AgeFrom &lt; 64"</span><span class="p">),</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"25-64"</span><span class="p">)</span>
    <span class="n">agother</span> <span class="o">=</span> <span class="n">agg_casedata</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '15-24'"</span><span class="p">),</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"15-24"</span><span class="p">)</span>
    
    <span class="n">hasfig</span> <span class="o">=</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span>
    
    <span class="k">if</span> <span class="n">hasfig</span><span class="p">:</span>
        <span class="c1">#display(ag65)</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    
    <span class="n">pdata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">ag14</span><span class="p">,</span> <span class="n">agother</span><span class="p">,</span> <span class="n">agmid</span><span class="p">,</span> <span class="n">ag65</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">pdata</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span>
        <span class="n">palette</span><span class="o">=</span><span class="s2">"tab10"</span><span class="p">,</span>
        <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">extrapal</span> <span class="o">=</span> <span class="p">[</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"Paired"</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"Paired"</span><span class="p">)[</span><span class="mi">9</span><span class="p">]]</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">ag5</span><span class="p">,</span> <span class="n">ag85</span><span class="p">]),</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span>
        <span class="n">palette</span><span class="o">=</span><span class="n">extrapal</span><span class="p">,</span>
        <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">lw</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">labelend2</span><span class="p">(</span>
        <span class="n">ax</span><span class="p">,</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">pdata</span><span class="p">,</span> <span class="n">ag5</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">ag85</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="s2">"inz"</span><span class="p">,</span>
        <span class="n">cats</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span>
        <span class="n">shorten</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"-"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">"+"</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"&lt;5"</span><span class="p">,</span> <span class="s2">"0"</span><span class="p">),</span>
        <span class="n">colorize</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="n">pdata</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">())</span> <span class="o">+</span> <span class="n">extrapal</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">right</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">hasfig</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">: Inzidenzen je Altersgruppe nach Labordatum ‒ Logarithmische Skala"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span>
                    <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Erkannte Fälle/100.000 EW"</span><span class="p">);</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">selbl</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fälle/100.000"</span><span class="p">);</span>
    <span class="c1">#ax.set_yscale("log")</span>
    <span class="c1">#ax.set_ylim(bottom=0)</span>
    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.85, 1]))</span>
    <span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>

    <span class="c1">#fs_at.iloc[fs_at["ag55_inz"].argmax()]</span>
<span class="n">draw_ag_grps</span><span class="p">(</span><span class="n">ndays</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
<span class="c1">#cov.set_date_opts(plt.gca(), week_always=True)</span>

<span class="k">def</span> <span class="nf">draw_ag_grps_all</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">draw_ag_grps</span><span class="p">(</span><span class="n">bl</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">SHORTRANGE_NDAYS</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">if</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">reduced</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="c1">#ax.set_xlim(left=fs["Datum"].iloc[-1] - timedelta(SHORTRANGE_NDAYS), right=fs["Datum"].iloc[-1] + timedelta(5))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: COVID-19-Fälle je Bundesland &amp; Altersgruppe, logarithmisch"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">draw_ag_grps_all</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\pandas\core\arraylike.py:396: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_121_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_121_2.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c80783bb">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [104]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Österreich"</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Datum &gt;= '2020-01-01'"</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="p">[</span><span class="s2">"Inzidenz gesamt"</span><span class="p">],</span>
    <span class="c1">#marker="."</span>
<span class="p">)</span>
<span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Altersgruppe == '5-14' and Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Inzidenz 5-14"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="c1">#ax.plot(agd_sums.query("Bundesland == 'Österreich'"))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">: Inzidenzen je Altersgruppe nach Labordatum ‒ Logarithmische Skala"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
<span class="c1">#ax.set_yscale("log")</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">#ax.set_ylim(bottom=0)</span>
<span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.85, 1]))</span>
<span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Erkannte Fälle/100.000 EW"</span><span class="p">);</span>
<span class="c1">#fs_at.iloc[fs_at["ag55_inz"].argmax()]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_122_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=7f1d8654">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [105]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_agd_front_1</span><span class="p">(</span><span class="n">tdata</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">cl</span><span class="p">,</span> <span class="n">visx</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="p">(),</span> <span class="n">sfactor</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">annot_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plt_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">annot</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">annot</span> <span class="o">=</span> <span class="p">(</span><span class="s1">''</span><span class="p">,)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">annot</span><span class="p">:</span>
        <span class="n">annot</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">nags</span> <span class="o">=</span> <span class="n">tdata</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
    <span class="c1">#with plt.style.context("dark_background"):</span>
    <span class="c1">#fig.set_facecolor((0.9, 0.9, 0.9))</span>
    <span class="c1">#ax.set_facecolor('None')</span>
    <span class="c1">#fig.set_textcolor("white")</span>
    <span class="c1">#if monotonic:</span>
       
    <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">tdata</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">],</span> <span class="n">tdata</span><span class="p">[</span><span class="n">vcol</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">visx</span><span class="p">:</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="o">*</span><span class="n">coords</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">tdata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m.%y"</span> <span class="k">if</span> <span class="s1">'year'</span> <span class="ow">in</span> <span class="n">annot</span> <span class="k">else</span> <span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%d</span><span class="s2">. %B"</span><span class="p">),</span>
        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">,</span> <span class="o">**</span><span class="p">(</span><span class="n">plt_args</span> <span class="ow">or</span> <span class="p">{}))</span>
    <span class="k">if</span> <span class="n">annot</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">fdate</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m.%y"</span> <span class="k">if</span> <span class="s1">'year'</span> <span class="ow">in</span> <span class="n">annot</span> <span class="k">else</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">.%m"</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">left</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">left</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
                <span class="p">(</span><span class="s2">"&lt;"</span> <span class="k">if</span> <span class="s1">'last'</span> <span class="ow">in</span> <span class="n">annot</span> <span class="k">else</span> <span class="s2">""</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">fdate</span><span class="p">(</span><span class="n">tdata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span> <span class="o">+</span>
                <span class="p">(</span><span class="s2">"&gt;"</span> <span class="k">if</span> <span class="s1">'first'</span> <span class="ow">in</span> <span class="n">annot</span> <span class="k">else</span> <span class="s2">""</span><span class="p">),</span>
                <span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idx</span><span class="p">]),</span>
                <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="k">if</span> <span class="n">left</span> <span class="k">else</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">visx</span> <span class="k">else</span> <span class="mi">1</span><span class="p">],</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">,</span>
                <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span> <span class="k">if</span> <span class="n">visx</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">,</span> 
                <span class="n">ha</span><span class="o">=</span><span class="s1">'right'</span> <span class="k">if</span> <span class="n">left</span> <span class="k">else</span> <span class="s1">'left'</span><span class="p">,</span>
                <span class="n">va</span><span class="o">=</span><span class="s1">'top'</span> <span class="k">if</span> <span class="n">left</span> <span class="ow">and</span> <span class="n">visx</span> <span class="k">else</span> <span class="s1">'bottom'</span> <span class="k">if</span> <span class="n">visx</span> <span class="k">else</span> <span class="s1">'baseline'</span><span class="p">,</span>
                <span class="o">**</span><span class="p">(</span><span class="n">annot_args</span> <span class="ow">or</span> <span class="p">{}))</span>
    <span class="n">points</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">sfactor</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="n">coords</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span>
               <span class="n">s</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)(</span><span class="n">tdata</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">])</span> <span class="o">*</span> <span class="n">sfactor</span><span class="p">,</span>
                            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                            <span class="o">**</span><span class="p">(</span><span class="n">plt_args</span> <span class="ow">or</span> <span class="p">{}))</span>
    <span class="k">return</span> <span class="n">lines</span><span class="p">,</span> <span class="n">points</span>

<span class="k">def</span> <span class="nf">plt_agd_front</span><span class="p">(</span>
    <span class="n">bldata</span><span class="p">,</span> <span class="n">diffs</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sfactor</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">plt_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mark_last</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">bldata</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">"stable"</span><span class="p">)</span>
    <span class="n">nags</span> <span class="o">=</span> <span class="n">bldata</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
    <span class="c1">#with plt.style.context("dark_background"):</span>
    <span class="c1">#fig.set_facecolor((0.9, 0.9, 0.9))</span>
    <span class="c1">#ax.set_facecolor('None')</span>
    <span class="c1">#fig.set_textcolor("white")</span>
    <span class="n">long</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span>
    <span class="n">seldata</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">needyear</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">365</span>
    <span class="k">def</span> <span class="nf">fdate</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m.%y"</span> <span class="k">if</span> <span class="n">needyear</span> <span class="k">else</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">.%m"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">long</span><span class="p">:</span>
        <span class="n">breaks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"plasma"</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">monotonic</span> <span class="o">=</span> <span class="n">vcol</span> <span class="o">==</span> <span class="s2">"AnzahlFaelleSumProEW"</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span><span class="c1">#dpi=400 if long and monotonic else None</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="c1">#if monotonic:</span>
    <span class="n">vmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">diffs</span><span class="p">))</span> <span class="o">*</span> <span class="mf">0.1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">long</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span>
    <span class="n">cnorm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">diffs</span><span class="p">),</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
    <span class="n">visx</span> <span class="o">=</span> <span class="n">monotonic</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">diff</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">)),</span> <span class="n">diffs</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">tdata</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">nags</span> <span class="o">*</span> <span class="p">(</span><span class="n">diff</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span> <span class="o">-</span><span class="n">nags</span> <span class="o">*</span> <span class="n">diff</span> <span class="k">if</span> <span class="n">diff</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">cl</span> <span class="o">=</span> <span class="n">cm</span><span class="p">(</span><span class="n">cnorm</span><span class="p">(</span><span class="n">diff</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">monotonic</span><span class="p">:</span>
            <span class="n">pdiff</span> <span class="o">=</span> <span class="n">diffs</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]</span>
            <span class="c1">#assert pdiff &gt; diff, f"{pdiff} &gt; {diff}"</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pdiff</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">diff</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="c1">#print(pdiff, diff, p)</span>
                <span class="n">ptdata</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">nags</span> <span class="o">*</span> <span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span> <span class="o">-</span><span class="n">nags</span> <span class="o">*</span> <span class="n">p</span> <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span><span class="p">]</span>
                <span class="c1">#print("ptdata", ptdata["Datum"].unique())</span>
                <span class="n">ptdata1</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">nags</span> <span class="o">*</span> <span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mi">2</span><span class="p">):</span> <span class="o">-</span><span class="n">nags</span> <span class="o">*</span> <span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span><span class="p">]</span>
                <span class="c1">#assert ptdata.shape == ptdata1.shape, f"{ptdata.shape:=} {ptdata1.shape:=}"</span>
                <span class="c1">#print("pdata1", ptdata1["Datum"].unique())</span>
                <span class="c1">#print(f"{ptdata[vcol].shape=} {ptdata1[vcol].shape=}")</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">fill_betweenx</span><span class="p">(</span>
                    <span class="n">ptdata</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
                    <span class="n">ptdata1</span><span class="p">[</span><span class="n">vcol</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
                    <span class="n">ptdata</span><span class="p">[</span><span class="n">vcol</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">cm</span><span class="p">(</span><span class="n">cnorm</span><span class="p">(</span><span class="n">p</span><span class="p">)),</span> <span class="c1">#alpha=0.3,</span>
                    <span class="n">lw</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                    <span class="c1">#lw=0,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span>
                <span class="p">)</span>
        <span class="n">seldata</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tdata</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">tdata</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">],</span> <span class="n">tdata</span><span class="p">[</span><span class="n">vcol</span><span class="p">])</span>
        <span class="n">doannot</span> <span class="o">=</span> <span class="n">annot</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">long</span> <span class="ow">or</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">breaks</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">doannot</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">monotonic</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">doannot</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'first'</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">):</span>
                <span class="n">doannot</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'last'</span><span class="p">,)</span>
        <span class="n">plt_args0</span> <span class="o">=</span> <span class="n">plt_args</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="ow">and</span> <span class="n">mark_last</span><span class="p">:</span>
            <span class="n">plt_args0</span> <span class="o">=</span> <span class="n">plt_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="n">plt_args</span> <span class="k">else</span> <span class="p">{}</span>
            <span class="n">plt_args0</span><span class="p">[</span><span class="s2">"lw"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">plt_agd_front_1</span><span class="p">(</span><span class="n">tdata</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">cl</span><span class="o">=</span><span class="n">cl</span><span class="p">,</span> <span class="n">visx</span><span class="o">=</span><span class="n">visx</span><span class="p">,</span>
                        <span class="n">annot</span><span class="o">=</span><span class="n">doannot</span><span class="p">,</span>
                        <span class="n">sfactor</span><span class="o">=</span><span class="n">sfactor</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">long</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">vcol</span><span class="o">=</span><span class="n">vcol</span><span class="p">,</span>
                        <span class="n">plt_args</span><span class="o">=</span><span class="n">plt_args0</span><span class="p">)</span>
    <span class="n">vaxis</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span> <span class="k">if</span> <span class="n">visx</span> <span class="k">else</span> <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span>
    <span class="n">caxis</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span> <span class="k">if</span> <span class="n">visx</span> <span class="k">else</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span>
    <span class="n">caxis</span><span class="o">.</span><span class="n">set_label_text</span><span class="p">(</span><span class="s2">"Altersgruppe"</span><span class="p">)</span>
    <span class="n">vaxis</span><span class="o">.</span><span class="n">set_label_text</span><span class="p">({</span><span class="s2">"inz"</span><span class="p">:</span> <span class="s2">"7-Tage-Inzidenz / 100.000 EW"</span><span class="p">,</span>
                          <span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">:</span> <span class="s2">"Kumulative Inzidenz in Prozent der Bevölkerung"</span><span class="p">}[</span><span class="n">vcol</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">long</span> <span class="ow">and</span> <span class="kc">False</span><span class="p">:</span>
        <span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span> <span class="k">if</span> <span class="n">visx</span> <span class="k">else</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">)(</span><span class="mi">0</span><span class="p">,</span> <span class="n">nags</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="c1">#cov.set_logscale(ax)</span>
    <span class="k">if</span> <span class="n">vcol</span> <span class="o">==</span> <span class="s2">"inz"</span><span class="p">:</span>
        <span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span> <span class="k">if</span> <span class="n">visx</span> <span class="k">else</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">)(</span><span class="s2">"log"</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">vaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">subs</span><span class="o">=</span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">ScalarFormatter</span><span class="p">(</span><span class="n">useOffset</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">vaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">vcol</span> <span class="o">==</span> <span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">:</span>
        <span class="n">vaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">xmax</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span> <span class="k">if</span> <span class="n">visx</span> <span class="k">else</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">)(</span><span class="nb">max</span><span class="p">(</span><span class="n">vaxis</span><span class="o">.</span><span class="n">get_data_interval</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">legend</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">long</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="n">sname</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"inz"</span><span class="p">:</span> <span class="s2">"Inzidenz (logarithmisch)"</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">:</span> <span class="s2">"Kumulative Inzidenz"</span><span class="p">}[</span><span class="n">vcol</span><span class="p">]</span>
        <span class="n">todate</span> <span class="o">=</span> <span class="n">fdate</span><span class="p">(</span><span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">*</span> <span class="n">nags</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
        <span class="n">fromdate</span> <span class="o">=</span> <span class="n">fdate</span><span class="p">(</span><span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="nb">max</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">*</span> <span class="n">nags</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
        <span class="n">tostr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">" ‒ </span><span class="si">{</span><span class="n">todate</span><span class="si">}</span><span class="s2">"</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">""</span>
        <span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span> <span class="k">if</span> <span class="n">fig</span> <span class="k">else</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">)(</span>
            <span class="n">bldata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">": </span><span class="si">{</span><span class="n">sname</span><span class="si">}</span><span class="s2"> je Altersgruppe </span><span class="si">{</span><span class="n">fromdate</span><span class="si">}{</span><span class="n">tostr</span><span class="si">}{</span><span class="n">ttl</span><span class="si">}{</span><span class="n">AGES_STAMP</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>
<span class="n">cov</span> <span class="o">=</span> <span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Österreich"</span><span class="p">]</span>

<span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_agd_front</span><span class="p">(</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Österreich"</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span> <span class="o">*</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">mark_last</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#plt_agd_front(</span>
    <span class="c1">#    agd1m_sums[agd1m_sums["Bundesland"] == "Österreich"], np.arange(0, 7 * 4, 7), ttl=" nach Meldedatum",</span>
    <span class="c1">#    plt_args=dict(ls="--", zorder=1, alpha=0.5), legend=False, annot=False, sfactor=0, ax=ax)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="c1">#raise</span>
    <span class="c1">#n = 63</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_agd_front</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="n">i</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">"wave/</span><span class="si">{</span><span class="n">i</span><span class="si">:</span><span class="s2">03d</span><span class="si">}</span><span class="s2">.png"</span><span class="p">)</span>
    <span class="c1">#display(plt_agd_front(agd_sums[agd_sums["Bundesland"] == "Österreich"], np.arange(0, 7 * 6, 7), "AnzahlFaelleSumProEW")[0])</span>
    <span class="c1">#plt_agd_front(agd_sums[agd_sums["Bundesland"] == "Österreich"], np.arange(0, 280, 7 * 4))</span>
    <span class="c1">#plt_agd_front(agd_sums[agd_sums["Bundesland"] == "Österreich"], np.arange(0, 325, 7))</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_agd_front</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Österreich"</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-09-01"</span><span class="p">))</span><span class="o">.</span><span class="n">days</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="c1">#ax.get_legend().remove()</span>

<span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"7-Tage-Inzidenzen (logarithmisch) je Altersgruppe und Bundesland"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.94</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">bl</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
        <span class="n">agdata_bl</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">)</span>
        <span class="n">bldata</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
        <span class="n">deltapeakrange</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt; '2021-10-01' and Datum &lt; '2022-01-01'"</span><span class="p">)</span>
        <span class="n">deltapeakdate</span> <span class="o">=</span> <span class="n">deltapeakrange</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">deltapeakrange</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()][</span><span class="s2">"Datum"</span><span class="p">]</span>
        <span class="n">peakrange</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt; '2022-01-01' and Datum &lt; '2022-03-04'"</span><span class="p">)</span>
        <span class="n">peakdate</span> <span class="o">=</span> <span class="n">peakrange</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">peakrange</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()][</span><span class="s2">"Datum"</span><span class="p">]</span>
        <span class="n">postpeakrange</span> <span class="o">=</span> <span class="n">peakrange</span><span class="p">[</span><span class="n">peakrange</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">peakdate</span><span class="p">]</span>
        <span class="n">midpeakmindate</span> <span class="o">=</span> <span class="n">postpeakrange</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">postpeakrange</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">argmin</span><span class="p">()][</span><span class="s2">"Datum"</span><span class="p">]</span>
        <span class="n">peak2range</span> <span class="o">=</span> <span class="n">bldata</span><span class="p">[</span><span class="n">bldata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">midpeakmindate</span><span class="p">]</span>
        <span class="n">peak2date</span> <span class="o">=</span> <span class="n">peak2range</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">peak2range</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()][</span><span class="s2">"Datum"</span><span class="p">]</span>
        <span class="n">ba5range</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt; '2022-06-01' and Datum &lt; '2022-09-01'"</span><span class="p">)</span>
        <span class="n">ba5peakpeakdate</span> <span class="o">=</span> <span class="n">ba5range</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">ba5range</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()][</span><span class="s2">"Datum"</span><span class="p">]</span>
        <span class="c1">#print(bl, peakdate, midpeakmindate)</span>
        <span class="c1">#display([0] + list((bldata["Datum"].iloc[-1] - pd.to_datetime(dt)).days for dt in ("2022-02-27", "2022-02-01")))</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dts</span> <span class="o">=</span> <span class="p">(</span><span class="n">deltapeakdate</span><span class="p">,</span> <span class="n">peakdate</span><span class="p">,</span> <span class="n">peak2date</span><span class="p">,</span> <span class="n">ba5peakpeakdate</span><span class="p">,</span> <span class="n">agdata_bl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">dts</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"k"</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">cl</span><span class="p">,</span> <span class="n">dt</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">dts</span><span class="p">):</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plt_agd_front_1</span><span class="p">(</span>
                <span class="n">agdata_bl</span><span class="p">[</span><span class="n">agdata_bl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">dt</span><span class="p">],</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">dt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">dts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">sfactor</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">cl</span><span class="o">=</span><span class="n">cl</span><span class="p">,</span> <span class="n">annot_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="s2">"x-small"</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_linestyle</span><span class="p">(</span><span class="s2">"--"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="p">[</span><span class="s2">"Delta-Peak"</span><span class="p">,</span> <span class="s2">"BA.1-Peak"</span><span class="p">,</span> <span class="s2">"BA.2-Peak"</span><span class="p">,</span> <span class="s2">"BA.5-Sommer-Peak"</span><span class="p">,</span> <span class="n">agdata_bl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">)],</span>
                       <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">dts</span><span class="p">))</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.ticker.NullFormatter())</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"7-T-Inzidenz"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

<span class="n">nweeks</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">begdate</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span> <span class="o">*</span> <span class="p">(</span><span class="n">nweeks</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"7-Tage-Inzidenzen (logarithmisch) je Altersgruppe und Bundesland"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.94</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ymin</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">begdate</span><span class="p">][</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.03</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.9</span>
    <span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">bl</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
        <span class="n">agdata_bl</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">)</span>
        <span class="n">plt_agd_front</span><span class="p">(</span><span class="n">agdata_bl</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">nweeks</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mark_last</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="n">ymin</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.ticker.NullFormatter())</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"7-T-Inzidenz"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"#COVID19at 7-Tage-Inzidenzen je Altersgruppe &amp; Bundesland wöchentlich seit </span><span class="si">{</span><span class="n">begdate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="n">aglast</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
<span class="n">agmax</span> <span class="o">=</span> <span class="n">aglast</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">aglast</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Höchste gesamt-österreichische Inzidenz in einer Altersgruppe hat derzeit </span><span class="si">{</span><span class="n">agmax</span><span class="p">[</span><span class="s1">'Altersgruppe'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="sa">f</span><span class="s2">"(</span><span class="si">{</span><span class="n">agmax</span><span class="p">[</span><span class="s1">'inz'</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">agmax</span><span class="p">[</span><span class="s1">'inz_g7'</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">100</span><span class="si">:</span><span class="s2">+.3n</span><span class="si">}</span><span class="s2">% in 7 Tagen)"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_123_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\matplotlib\collections.py:963: RuntimeWarning: invalid value encountered in sqrt
  scale = np.sqrt(self._sizes) * dpi / 72.0 * self._factor
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>#COVID19at 7-Tage-Inzidenzen je Altersgruppe &amp; Bundesland wöchentlich seit Do. 08.06.2023
Höchste gesamt-österreichische Inzidenz in einer Altersgruppe hat derzeit &gt;84 (12, -35,8% in 7 Tagen)
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_123_3.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=6ef2aff9">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [106]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"7-Tage-Inzidenz (logarithmisch) je Altersgruppe und Bundesland"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">agd_latest</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">)</span>
<span class="n">agdata_nat</span> <span class="o">=</span> <span class="n">agd_latest</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)</span>
<span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">agd_latest</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.03</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.9</span><span class="p">,</span> <span class="n">agd_latest</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
<span class="n">sznorm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span>
    <span class="n">vmin</span><span class="o">=</span><span class="n">agdata_nat</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span>
    <span class="n">vmax</span><span class="o">=</span><span class="n">agdata_nat</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.95</span><span class="p">),</span>
    <span class="n">clip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
    <span class="n">cl</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"C</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">agdata_bl</span> <span class="o">=</span> <span class="n">agd_latest</span><span class="p">[</span><span class="n">agd_latest</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">agdata_bl</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">],</span> <span class="n">agdata_bl</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">coords</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">bl</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bl</span><span class="p">],</span>
                <span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bl</span><span class="p">],</span>
                <span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"right"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="n">coords</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span>
               <span class="n">s</span><span class="o">=</span><span class="n">sznorm</span><span class="p">(</span><span class="n">agdata_bl</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">])</span> <span class="o">*</span> <span class="mi">50</span><span class="p">,</span>
                            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="n">ymin</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"7-T-Inzidenz"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>...\AppData\Local\Temp\ipykernel_33144\3004067593.py:26: UserWarning: Attempt to set non-positive ylim on a log-scaled axis will be ignored.
  ax.set_ylim(bottom=ymin)
</pre>
</div>
</div>
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[106]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Text(0, 0.5, '7-T-Inzidenz')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_124_2.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=9b17339a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [107]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plot_per_bl_inz_hm</span><span class="p">(</span>
    <span class="n">agd_sums</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">figsize</span><span class="p">:</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">cbar_pad</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">figdpi</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">labelright</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cbary</span><span class="o">=</span><span class="mf">0.91</span><span class="p">,</span>
    <span class="n">cbar_aspect</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">cbar_fraction</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span>
    <span class="n">projection</span><span class="o">=</span><span class="k">lambda</span> <span class="n">bldata</span><span class="p">:</span> <span class="n">bldata</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">),</span>
    <span class="n">sortkey</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ag_to_id</span><span class="p">)):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">(),</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">figdpi</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">):</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="p">[</span><span class="n">axs</span><span class="p">]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Inzidenz nach Bundeland und Altersgruppe"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.02</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.975</span><span class="p">)</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">un_cmap</span> <span class="c1">#sns.color_palette("BuPu", as_cmap=True).copy()</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">SymLogNorm</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">projection</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">])</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
                 <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
    <span class="c1">#norm = matplotlib.colors.TwoSlopeNorm(vmin=0.5, vcenter=1, vmax=2.5)</span>
    <span class="c1">#norm.clip = False</span>
    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">bundesland</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="o">.</span><span class="n">categories</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())):</span>
        <span class="c1">#ax.set_title(bundesland, size=6, pad=0)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bundesland</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">"grey"</span><span class="p">)</span>
        <span class="n">bldata</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bundesland</span><span class="p">]</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt_tl_heat</span><span class="p">(</span><span class="n">projection</span><span class="p">(</span><span class="n">bldata</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"rows"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sortkey</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
            <span class="n">im_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">),</span>
            <span class="n">cbar_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="c1">#ticks=[0.5, 0.8, 1, 1.5, 2, 3],</span>
                <span class="c1">#ticks=[0.5, 1, 1.5, 2, 2.5],</span>
                <span class="n">shrink</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                <span class="c1">#format=matplotlib.ticker.PercentFormatter(xmax=1),#matplotlib.ticker.FormatStrFormatter("%.1f"),</span>
                <span class="n">ticks</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">],</span>
                <span class="n">pad</span><span class="o">=</span><span class="n">cbar_pad</span><span class="p">,</span>
                <span class="n">aspect</span><span class="o">=</span><span class="n">cbar_aspect</span><span class="p">,</span>
                <span class="n">fraction</span><span class="o">=</span><span class="n">cbar_fraction</span><span class="p">))</span>
        <span class="c1">#print(vars(cbar))</span>
        <span class="c1">#ax.axhline(0.4, color="lightgrey", linewidth=1, snap=True)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bundesland</span><span class="p">])</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Inzidenz"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">cbary</span><span class="p">)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"both"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelright</span><span class="o">=</span><span class="n">labelright</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"both"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"lightgrey"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
        <span class="c1">#cov.set_date_opts(ax)</span>
        <span class="c1">#ax.tick_params(bottom=False)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"left"</span><span class="p">,</span> <span class="n">rotation_mode</span><span class="o">=</span><span class="s2">"anchor"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span>

<span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">plot_per_bl_inz_hm</span><span class="p">(</span>
        <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2000</span><span class="p">)]</span>
        <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">),</span>
                       <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">3.5</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span> <span class="n">cbar_pad</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">figdpi</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mf">4.5</span><span class="p">);</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax</span><span class="p">,)</span> <span class="o">=</span> <span class="n">plot_per_bl_inz_hm</span><span class="p">(</span>
    <span class="n">agd_sums</span>
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">),</span>
                   <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">cbar_pad</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">figdpi</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">cbar_aspect</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">cbar_fraction</span><span class="o">=</span><span class="mf">0.03</span><span class="p">);</span>

<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">([</span><span class="n">tick</span><span class="o">.</span><span class="n">label1</span> <span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">()],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
         <span class="n">ha</span><span class="o">=</span><span class="s2">"right"</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="n">rotation_mode</span><span class="o">=</span><span class="s2">"anchor"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">([</span><span class="n">tick</span><span class="o">.</span><span class="n">label2</span> <span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">()],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
         <span class="n">ha</span><span class="o">=</span><span class="s2">"left"</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span><span class="n">rotation_mode</span><span class="o">=</span><span class="s2">"anchor"</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Inzidenz in den Altersgruppen, logarithmisch"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[107]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Text(0.5, 1.1, 'Inzidenz in den Altersgruppen, logarithmisch')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_125_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_125_2.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=8840196e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [108]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">selag</span> <span class="o">=</span> <span class="s2">"5-14"</span>
<span class="n">agdata2</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Altersgruppe == '</span><span class="si">{</span><span class="n">selag</span><span class="si">}</span><span class="s2">' and Bundesland == 'Österreich'"</span><span class="p">)</span>
<span class="c1">#[agd_sums["Datum"] &gt;= pd.to_datetime("2021-09-01")]</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">relplot</span><span class="p">(</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">"line"</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">agdata2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
    <span class="c1">#col_wrap=3,</span>
    <span class="n">ds</span><span class="o">=</span><span class="s2">"steps-post"</span><span class="p">,</span>
    <span class="n">marker</span><span class="o">=</span><span class="s2">"s"</span><span class="p">,</span>
    <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">markersize</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="c1">#col_order=agdata2["Bundesland"].unique()[:-1],</span>
    <span class="c1">#solid_joinstyle="miter", marker="s", mew=0, ms=3</span>
<span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Kumulative Inzidenz in der Altersgruppe "</span> <span class="o">+</span> <span class="n">selag</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.05</span><span class="p">)</span>
<span class="c1">#g.fig.subplots_adjust(hspace=0.3)</span>
<span class="c1">#ax.legend(*sortedlabels(ax, agdata2, "AnzahlFaelleSumProEW", fmtval=lambda v: format(v, ".0%")), ncol=2)</span>
<span class="c1">#ax.set_yscale("log")</span>
<span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
<span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.5, 0.7, 1]))</span>
<span class="c1">#ax.set_ylim(bottom=1)</span>
<span class="c1">#labelend2(ax, agdata2, "AnzahlFaelleSumProEW", 100)</span>
<span class="c1">#ax.set_title("Kumulative Inzidenz " + agdata2.iloc[0]["Altersgruppe"])</span>
<span class="c1">#ax.set_ylabel("Kumulative Inzidenz in der Altersgruppe " + agdata2.iloc[0]["Altersgruppe"])</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">flat</span><span class="p">,</span> <span class="n">agdata2</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="c1">#ax.set_ylim(bottom=0.08, top=0.28)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">agdata2</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">blval</span> <span class="o">=</span> <span class="n">agdata2</span><span class="p">[</span><span class="n">agdata2</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">][</span><span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">blval</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Kumulative Inzidenz"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>...\AppData\Local\hatch\env\virtual\covidat\MDfikVs6\notebooks\Lib\site-packages\seaborn\axisgrid.py:118: UserWarning: The figure layout has changed to tight
  self._figure.tight_layout(*args, **kwargs)
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_126_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c59f6276">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [109]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># cividis</span>
<span class="c1"># Spectral_r</span>
<span class="c1"># rainbow</span>
<span class="c1"># viridis</span>
<span class="c1"># cubehelix</span>
<span class="c1"># brg # Wie eine werbung oder so</span>
<span class="c1"># gist_ncar: Brauchbar</span>
<span class="c1"># seismic</span>
<span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">with_age_palette</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">bundesland</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="p">):</span> <span class="c1">#cov.Bundesland.categories:</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">"### Altersgruppendaten zu </span><span class="si">{</span><span class="n">bundesland</span><span class="si">}</span><span class="s2">"</span><span class="p">))</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">plt_cat_dists</span><span class="p">(</span>
            <span class="n">data_cat</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">[(</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bundesland</span><span class="p">)</span> 
                              <span class="c1">#&amp; (agd_sums["Datum"] != agd_sums["Datum"].iloc[-1])</span>
                             <span class="p">]</span>
            <span class="o">.</span><span class="n">query</span><span class="p">(</span>
                <span class="c1">#"Altersgruppe not in ('Alle', '15-24', '25-34')",</span>
                <span class="s2">"Altersgruppe not in ('Alle')"</span><span class="p">),</span>
            <span class="n">data_agg</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bundesland</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == 'Alle'"</span><span class="p">),</span>
            <span class="c1">#.iloc[:-1]</span>
            <span class="n">bundesland</span><span class="o">=</span><span class="n">bundesland</span><span class="p">,</span>
            <span class="n">catcol</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span>
            <span class="n">stamp</span><span class="o">=</span><span class="n">AGES_STAMP</span><span class="p">,</span>
            <span class="n">datefrom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="c1">#fs.iloc[-1]["Datum"] - timedelta(400),</span>
            <span class="n">shortrange</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
        <span class="c1">#break</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<h3 id="Altersgruppendaten-zu-%C3%96sterreich">Altersgruppendaten zu Österreich<a class="anchor-link" href="#Altersgruppendaten-zu-%C3%96sterreich">¶</a></h3>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_127_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_127_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_127_3.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_127_4.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_127_5.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_127_6.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_127_7.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=e6bb8347">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [110]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">x0</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
<span class="n">p85</span> <span class="o">=</span> <span class="n">x0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '&gt;84'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">x0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == 'Alle'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">p75</span> <span class="o">=</span> <span class="n">x0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '75-84'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">x0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == 'Alle'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">p65</span> <span class="o">=</span> <span class="n">x0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '65-74'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">x0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == 'Alle'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=493ff351">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [111]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">MIDRANGE_NDAYS</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)]</span>
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '5-14'"</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
                  <span class="c1">#marker=".",</span>
                  <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                  <span class="n">size</span><span class="o">=</span><span class="s2">"AnzEinwohnerFixed"</span><span class="p">,</span>
                  <span class="n">size_norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="mi">100_000</span><span class="p">),</span>
                  <span class="n">markersize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                    <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
    <span class="s2">"Inzidenz in der Altersgruppe "</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Altersgruppe"</span><span class="p">]</span> <span class="o">+</span>
    <span class="s2">" je Bundesland ‒ logarithmische Skala"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="s2">"inz"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"7-Tage-Inzidenz/100.000 EW"</span><span class="p">)</span>
<span class="c1">#ax.set_yscale("log")</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>

<span class="c1">#ax.set_ylim(bottom=5);</span>
<span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
<span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(subs=[0.2, 0.5, 1]))</span>
<span class="c1">#ax.yaxis.set_minor_locator(matplotlib.ticker.NullLocator())</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[111]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>&lt;matplotlib.legend.Legend at 0x19910bbd290&gt;</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_129_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=5a20f872">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [112]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">natmon_latest</span><span class="p">[</span><span class="s2">"Abwassersignal"</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span> <span class="o">/</span> <span class="mi">650_000</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"Drübergelegtes Abwassersignal Österreich"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '&gt;84' and Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"inz"</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">"Inzidenz Altersgruppe 85+ in Wien"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"inz"</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">"Gesamtinzidenz Österreich"</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">natmon_latest</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fälle/100.000 EW"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_130_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a3ac13b3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [113]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">agg_casedata</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2000</span><span class="p">)]</span>
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe in ('&gt;84',)"</span><span class="p">),</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"85+"</span><span class="p">,</span> <span class="n">extragrp</span><span class="o">=</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
                  <span class="c1">#marker=".",</span>
                  <span class="c1">#mew=0.5,</span>
                  <span class="n">size</span><span class="o">=</span><span class="s2">"AnzEinwohnerFixed"</span><span class="p">,</span>
                  <span class="n">size_norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()),</span>
                  <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="c1">#markersize=12</span>
                 <span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
    <span class="s2">"Inzidenz in der Altersgruppe "</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Altersgruppe"</span><span class="p">]</span> <span class="o">+</span>
    <span class="s2">" je Bundesland"</span> <span class="o">+</span> <span class="s2">", logarithmische Skala"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
<span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="s2">"inz"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"7-Tage-Inzidenz/100.000 EW"</span><span class="p">)</span>
<span class="c1">#ax.set_yscale("log")</span>
<span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">"lower"</span><span class="p">)))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
    <span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span>
    <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="c1">#ax.set_ylim(bottom=5);</span>
<span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
<span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(subs=[0.2, 0.5, 1]))</span>
<span class="c1">#ax.yaxis.set_minor_locator(matplotlib.ticker.NullLocator())</span>
<span class="c1">#ax.axvline(pd.to_datetime("2023-02-01"), color="k")</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>18317.5 19537.5 19536.0
</pre>
</div>
</div>
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[113]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>&lt;matplotlib.patches.Polygon at 0x199129c0050&gt;</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_131_2.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=ae04141d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Inzidenz%C3%A4nderungsverlauf-je-Altersgruppe">Inzidenzänderungsverlauf je Altersgruppe<a class="anchor-link" href="#Inzidenz%C3%A4nderungsverlauf-je-Altersgruppe">¶</a></h2><p>Hier geht es nicht um die 7-Tages-Inzidenz pro 100.000 Einwohner selbst, sondern um deren relative Veränderung.</p>
<p>Der ORF hat die entsprechenden Inzidenzen dazu: <a href="https://orf.at/corona/daten/oesterreich">https://orf.at/corona/daten/oesterreich</a></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=fa5d2fd8">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [114]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt; '2021-06-15' and (inz_prev7 &gt; 20 or inz &gt; 20)"</span><span class="p">),</span> <span class="n">row</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">map_dataframe</span><span class="p">(</span>
         <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">,</span>
         <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz_g7"</span><span class="p">,</span>
         <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="p">[</span><span class="s2">"&lt;5"</span><span class="p">,</span> <span class="s2">"5-14"</span><span class="p">,</span> <span class="s2">"15-24"</span><span class="p">,</span> <span class="s2">"25-34"</span><span class="p">,</span> <span class="s2">"35-44"</span><span class="p">,</span> <span class="s2">"45-54"</span><span class="p">,</span> <span class="s2">"55-64"</span><span class="p">,</span> <span class="s2">"65-74"</span><span class="p">,</span> <span class="s2">"75-84"</span><span class="p">,</span> <span class="s2">"&gt;84"</span><span class="p">],</span>
         <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
         <span class="c1">#markeredgecolor="none"</span>
    <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="c1">#plt.text(pd.to_datetime("2021-08-09"), 5, "foo-bar-baz", rotation=45, ha="left", va="top")</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"black"</span><span class="p">);</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Relative Änderung ggü. 7 Tage voher"</span><span class="p">);</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plt_ages</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1">#print("pltby", by)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s2">"inz_g7p"</span>
    <span class="n">data0</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">data0</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">data0</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data0</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
        <span class="n">hue</span><span class="o">=</span><span class="n">by</span><span class="p">,</span> <span class="c1">#hue_order=["&lt;5", "5-14", "15-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75-84", "&gt;84"],</span>
        <span class="n">size</span><span class="o">=</span><span class="s2">"AnzEinwohnerFixed"</span> <span class="k">if</span> <span class="s2">"AnzEinwohnerFixed"</span> <span class="ow">in</span> <span class="n">data0</span><span class="o">.</span><span class="n">columns</span> <span class="k">else</span> <span class="s2">"AnzEinwohner"</span><span class="p">,</span>
        <span class="n">size_norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)),</span>
        <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">xmax</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
    <span class="c1">#cov.remove_labels_after(ax, "AnzEinwohner", bbox_to_anchor=(0.7, 1), loc="upper right")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
        <span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="n">by</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s2">"+.0%"</span><span class="p">)),</span>
        <span class="n">loc</span><span class="o">=</span><span class="s2">"best"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">kwargs2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">shorten</span><span class="o">=</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span><span class="p">)</span> <span class="k">if</span> <span class="n">by</span> <span class="o">==</span> <span class="s2">"Altersgruppe"</span> <span class="k">else</span> <span class="p">{}</span>
    <span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data0</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="n">by</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ax</span>

<span class="k">def</span> <span class="nf">plt_age_changes</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="c1">#print("pltby_c", by)</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">days</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_ages</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">),</span> <span class="n">by</span><span class="o">=</span><span class="n">by</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">'.'</span> <span class="k">if</span> <span class="n">ndays</span> <span class="o">&lt;=</span> <span class="n">MIDRANGE_NDAYS</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"black"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=min(0.7, ax.get_ylim()[1]), bottom=max(-0.5, ax.get_ylim()[0]))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Änderung ggü. 7 Tage vorher"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ax</span>
    
<span class="k">def</span> <span class="nf">plt_age_changes_2</span><span class="p">(</span><span class="n">agd_sums_at</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">SHORTRANGE_NDAYS</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="c1">#print("pltby_c", by)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_age_changes</span><span class="p">(</span>
        <span class="n">agd_sums_at</span><span class="p">[</span><span class="n">agd_sums_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">agd_sums_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="n">ndays</span><span class="p">,</span> <span class="s2">"D"</span><span class="p">)],</span>
        <span class="n">by</span><span class="o">=</span><span class="n">by</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">agd_sums_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Altersgruppe"</span> <span class="k">if</span> <span class="n">by</span> <span class="o">==</span> <span class="s2">"Bundesland"</span> <span class="k">else</span> <span class="s2">"Bundesland"</span><span class="p">]</span>
                 <span class="o">+</span> <span class="s2">": Verlauf der wöchentlichen Inzidenzveränderung je "</span> <span class="o">+</span> <span class="n">by</span>  <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
    <span class="c1">#plt.gcf().legend(loc="center right")</span>
    <span class="c1">#ax.get_legend().remove()</span>

    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="n">one_year_earlier</span> <span class="o">=</span> <span class="n">agd_sums_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">365</span><span class="p">,</span> <span class="s2">"D"</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_age_changes</span><span class="p">(</span><span class="n">agd_sums_at</span><span class="p">[</span>
            <span class="p">(</span><span class="n">agd_sums_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">one_year_earlier</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">90</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"D"</span><span class="p">))</span> <span class="o">&amp;</span>
            <span class="p">(</span><span class="n">agd_sums_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">one_year_earlier</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">90</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"D"</span><span class="p">))])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">one_year_earlier</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">one_year_earlier</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.99</span><span class="p">,</span> <span class="n">one_year_earlier</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">" </span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">va</span><span class="o">=</span><span class="s2">"top"</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">ax</span>
    <span class="c1">#plt.figure()</span>
    <span class="c1">#agd_sums_oo = agd_sums.query("Bundesland == 'Oberösterreich'").reset_index()</span>
    <span class="c1">#ax = plt_ages(agd_sums_oo[agd_sums_oo["Datum"] &gt;= "2020-09-01"], "inz")</span>
    <span class="c1">#ax.set_yscale("log", base=2)</span>
    <span class="c1">#ax.get_yaxis().set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
    <span class="c1">#ax.set_ylabel("Inzidenz");</span>
    
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">with_age_palette</span><span class="p">():</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Verlauf der wöchentlichen Inzidenzveränderung je Altersgruppe"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_age_changes_2</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">7</span><span class="o">*</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Nach Labordatum"</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_age_changes_2</span><span class="p">(</span><span class="n">agd1m_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">7</span><span class="o">*</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">top</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">))</span>
        <span class="c1">#ax.set_ylim(bottom=-0.6, top=1)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Nach Meldedatum"</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="c1">#ax = plt_age_changes_2(agd_sums.query("Bundesland == 'Wien'"), by="Altersgruppe", ndays=37)</span>
        <span class="c1">#ax.set_ylim(top=1)</span>
        <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_age_changes_2</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">])]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">'"</span><span class="p">),</span>
                                   <span class="n">ndays</span><span class="o">=</span><span class="n">SHORTRANGE_NDAYS</span><span class="p">)</span>
            <span class="c1">#ax.set_ylim(bottom=-0.6, top=1)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_title</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"("</span><span class="p">,</span> <span class="s2">"nach Labordatum ("</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=466ab5ca">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [115]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">contextlib</span>
<span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">drawrelag</span><span class="p">(</span><span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">relto</span><span class="o">=</span><span class="s2">"allcat"</span><span class="p">):</span>
    <span class="n">cat</span> <span class="o">=</span> <span class="s2">"Bundesland"</span> <span class="k">if</span> <span class="n">by</span> <span class="o">!=</span> <span class="s2">"Bundesland"</span> <span class="k">else</span> <span class="s2">"Altersgruppe"</span>
    <span class="n">allcat</span> <span class="o">=</span> <span class="s2">"Alle"</span> <span class="k">if</span> <span class="n">cat</span> <span class="o">==</span> <span class="s2">"Altersgruppe"</span> <span class="k">else</span> <span class="s2">"Österreich"</span>
    <span class="n">allby</span> <span class="o">=</span>  <span class="s2">"Alle"</span> <span class="k">if</span> <span class="n">by</span> <span class="o">==</span> <span class="s2">"Altersgruppe"</span> <span class="k">else</span> <span class="s2">"Österreich"</span>
    <span class="n">agd_sums0</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">by</span><span class="si">}</span><span class="s2"> == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="n">cat</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">relto</span> <span class="o">==</span> <span class="s2">"allcat"</span><span class="p">:</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">agd_sums0</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">allcat</span><span class="p">)[</span><span class="s2">"inz"</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">relto</span> <span class="o">==</span> <span class="s2">"bytotal"</span><span class="p">:</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">by</span><span class="si">}</span><span class="s2"> == '</span><span class="si">{</span><span class="n">allby</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="n">cat</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])[</span><span class="s2">"inz"</span><span class="p">]</span>
    <span class="n">agd_sums0</span><span class="p">[</span><span class="s2">"relinz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums0</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">/</span> <span class="n">norm</span>
    <span class="c1">#agd_sums0 = agd_sums0[</span>
    <span class="c1">#    agd_sums0.index.get_level_values("Datum") &gt;= agd_sums0.index[-1][1] - timedelta(MIDRANGE_NDAYS * 1.5)]</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">with_age_palette</span><span class="p">()</span> <span class="k">if</span> <span class="n">cat</span> <span class="o">==</span> <span class="s2">"Altersgruppe"</span> <span class="k">else</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">nullcontext</span><span class="p">():</span>
        <span class="n">df</span> <span class="o">=</span>  <span class="n">agd_sums0</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">cat</span><span class="si">}</span><span class="s2"> != '</span><span class="si">{</span><span class="n">allcat</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"relinz"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="n">cat</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s2">"AnzEinwohnerFixed"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">remove_labels_after</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"AnzEinwohnerFixed"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">agd_sums0</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">),</span> <span class="n">autoyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Inzidenz relativ zur Gesamtinzidenz"</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
            <span class="n">selbl</span> <span class="o">+</span> 
            <span class="sa">f</span><span class="s2">": Inzidenz je </span><span class="si">{</span><span class="n">cat</span><span class="si">}</span><span class="s2"> relativ zur "</span> <span class="o">+</span>
            <span class="p">(</span><span class="s2">"Gesamtinzidenz"</span> <span class="k">if</span> <span class="n">relto</span> <span class="o">==</span> <span class="s2">"allcat"</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">"Gesamtinzidenz je </span><span class="si">{</span><span class="n">cat</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="mf">0.99</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
            <span class="o">*</span><span class="n">cov</span><span class="o">.</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="s2">"relinz"</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="n">cat</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.0%</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="s2">"relinz"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="n">cat</span><span class="p">,</span> <span class="o">**</span><span class="p">({</span><span class="s2">"shorten"</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">}</span> <span class="k">if</span> <span class="n">cat</span> <span class="o">!=</span> <span class="s2">"Bundesland"</span> <span class="k">else</span> <span class="p">{}))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="mf">3.5</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">drawrelag</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">drawrelag</span><span class="p">(</span><span class="s2">"&gt;84"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">relto</span><span class="o">=</span><span class="s2">"bytotal"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_134_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_134_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=61a12e58">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [116]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt_age_changes_2</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '&gt;84'"</span><span class="p">),</span> <span class="n">by</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt_age_changes_2</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '5-14'"</span><span class="p">),</span> <span class="n">by</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">SHORTRANGE_NDAYS</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=304508ef">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="%C3%84nderungsraten">Änderungsraten<a class="anchor-link" href="#%C3%84nderungsraten">¶</a></h1>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c8bcb82f">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [117]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">reff_o</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/ages-ems-extra/R_eff_latest.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s2">","</span><span class="p">,</span>
    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span>
    <span class="n">date_format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_DATE_FMT</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">reff_o</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="n">reff_o</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">reff_o</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>  <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">'height_ratios'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]},</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Datenquelle: AGES, TU Graz (CC BY 4.0)"</span><span class="p">)</span>

<span class="n">reff</span> <span class="o">=</span> <span class="n">reff_o</span><span class="p">[</span><span class="s2">"R_eff"</span><span class="p">]</span><span class="c1">#.query("Datum &gt;= '2020-04-27' and Datum &lt; '2022-04-16'")["R_eff"]</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Effektive Reproduktionszahl von SARS-CoV-2 in Österreich bis "</span> <span class="o">+</span> <span class="n">reff</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">))</span>

<span class="n">style</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">zorder</span><span class="o">=-</span><span class="mi">3</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">in_layout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">reff</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">reff</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">reff</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">"$R_\operatorname</span><span class="si">{eff}</span><span class="s2"> &lt; 1$ (abnehmende Ausbreitung)"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">reff</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">reff</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">"$R_\operatorname</span><span class="si">{eff}</span><span class="s2"> &gt; 1$ (zunehmende Ausbreitung)"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">"$R_\operatorname</span><span class="si">{eff}</span><span class="s2">$"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">markseasons</span><span class="p">(</span><span class="n">ax</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2019-12-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2020-03-01"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"skyblue"</span><span class="p">,</span> <span class="o">**</span><span class="n">style</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Winter"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2020-06-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2020-09-01"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="o">**</span><span class="n">style</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Sommer"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-06-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-09-01"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="o">**</span><span class="n">style</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-06-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-09-01"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="o">**</span><span class="n">style</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2023-06-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2023-09-01"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="o">**</span><span class="n">style</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2020-12-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-03-01"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"skyblue"</span><span class="p">,</span> <span class="o">**</span><span class="n">style</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-12-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-03-01"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"skyblue"</span><span class="p">,</span> <span class="o">**</span><span class="n">style</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-12-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2023-03-01"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"skyblue"</span><span class="p">,</span> <span class="o">**</span><span class="n">style</span><span class="p">)</span>


<span class="n">markseasons</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper left"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"smaller"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">1.6</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="c1">#ax.xaxis.set_major_locator(matplotlib.ticker.NullLocator())</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="c1">#cov.set_logscale(ax2)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">750</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">300</span><span class="p">))</span>
<span class="c1">#ax2.grid(False)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"7-Tage-Inzidenz"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper left"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"smaller"</span><span class="p">)</span>
<span class="n">markseasons</span><span class="p">(</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">reff</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>dtype('&lt;M8[ns]')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_137_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=881882b1">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [118]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span><span class="mi">3</span><span class="p">][</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[118]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>0.8349</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=6624d655">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [119]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#selbl = "Österreich"</span>
<span class="c1">#data0 = ems.query(f"Bundesland == '{selbl}'")</span>
<span class="n">nwien</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland not in ('Wien', 'Österreich')"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">"AnzahlFaelleSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">nwien</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Österreich ohne Wien"</span>
<span class="n">nwien</span><span class="p">[</span><span class="s2">"inz"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_inz</span><span class="p">(</span><span class="n">nwien</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">nwien</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plt0</span><span class="p">(</span><span class="n">data0</span><span class="p">):</span>
    <span class="n">data0</span> <span class="o">=</span> <span class="n">data0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">MIDRANGE_NDAYS</span><span class="p">:]</span>
    <span class="n">plt_growfig</span><span class="p">(</span><span class="n">data0</span><span class="p">,</span> <span class="n">data0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">])</span>
    <span class="c1">#plt.axvspan(date(2021, 7, 1), date(2021, 7, 22), color="y", zorder=10, alpha=0.3)</span>
    <span class="c1">#plt.axvline(date(2021, 7, 1), color="k", zorder=1)</span>
    <span class="c1">#plt.axvline(date(2021, 7, 22), color="k", zorder=1)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
<span class="c1">#plt_growfig(fs_at, fs_at.iloc[0]["Bundesland"])</span>
<span class="c1">#display(nwien.tail(1))</span>
<span class="c1">#plt0(fs.query("Bundesland == 'Wien'"))</span>
<span class="c1">#plt_growfig(nwien.query("Datum &gt;= '2021-01-01'"), "Österreich ohne Wien/AGES nach Labordatum")</span>
<span class="c1">#plt.gca().set_ylim(top=2, bottom=-2)</span>
<span class="c1">#plt0(fs.query("Bundesland == 'Österreich'"))</span>
<span class="c1">#plt_growfig(ages1m.query("Bundesland == 'Österreich' and Datum &gt;= '2011-01-01'"), "Österreich/AGES nach Meldedatum")</span>
<span class="n">plt_growfig</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">),</span> <span class="s2">"Wien/AGES nach Labordatum"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=-</span><span class="mi">1</span><span class="p">);</span>
<span class="n">plt_growfig</span><span class="p">(</span><span class="n">ages1mx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">600</span><span class="p">:],</span> <span class="s2">"Österreich/AGES nach Meldedatum ohne Nachmeldungen &gt;14T"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=-</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_139_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_139_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=4c1efe6e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [120]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_bl_gs</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="n">extratitle</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">ccol</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">SHORTRANGE_NDAYS</span><span class="p">):</span>
    <span class="n">recfs</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">ndays</span><span class="p">)]</span>
    <span class="n">recfs</span> <span class="o">=</span> <span class="n">recfs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">recfs</span><span class="p">[</span><span class="s2">"inz_g7p"</span><span class="p">]</span> <span class="o">=</span> <span class="n">recfs</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">recfs</span><span class="p">[</span><span class="s2">"inz_dg7p"</span><span class="p">]</span> <span class="o">=</span> <span class="n">recfs</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">uselegend</span> <span class="o">=</span> <span class="n">recfs</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">25</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'err_style'</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">uselegend</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'size_norm'</span><span class="p">]</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="mi">2_000_000</span><span class="p">,</span> <span class="n">recfs</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()))</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'size'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"AnzEinwohnerFixed"</span> <span class="k">if</span> <span class="s2">"AnzEinwohnerFixed"</span> <span class="ow">in</span> <span class="n">fs</span><span class="o">.</span><span class="n">columns</span> <span class="k">else</span> <span class="s2">"AnzEinwohner"</span>
        <span class="k">if</span> <span class="mi">10</span> <span class="o">&lt;</span> <span class="n">recfs</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">"palette"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"tab20"</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'alpha'</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">0.992</span> <span class="o">**</span> <span class="n">recfs</span><span class="p">[</span><span class="n">ccol</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">recfs</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz_g7p"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="n">ccol</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s1">'.'</span> <span class="k">if</span> <span class="n">uselegend</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="n">uselegend</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1">#sns.lineplot(</span>
    <span class="c1">#    data=recfs, x="Datum", y="inz_dg7p", hue="Bundesland", marker="*", lw=0, mew=0,</span>
    <span class="c1">#    ax=ax, legend=False)</span>
    <span class="k">if</span> <span class="n">uselegend</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
            <span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">recfs</span><span class="p">,</span> <span class="s2">"inz_g7p"</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s2">"+.0%"</span><span class="p">),</span> <span class="n">cat</span><span class="o">=</span><span class="n">ccol</span><span class="p">),</span>
            <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(bottom=-0.6, top=1)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">recfs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="c1">#ax.set_xlim(left=ax.get_xlim()[0] + 0.5, right=ax.get_xlim()[1] + 3)</span>
    <span class="n">finfs</span> <span class="o">=</span> <span class="n">recfs</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">recfs</span><span class="p">[</span><span class="s2">"inz_g7p"</span><span class="p">])]</span>
    <span class="n">bottom</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">finfs</span><span class="p">[</span><span class="s2">"inz_g7p"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.003</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.05</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">finfs</span><span class="p">)[</span><span class="s2">"inz_g7p"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.01</span><span class="p">)</span>
    <span class="n">top</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">finfs</span><span class="p">[</span><span class="s2">"inz_g7p"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.997</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.05</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">finfs</span><span class="p">)[</span><span class="s2">"inz_g7p"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.01</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span>
        <span class="c1"># TODO: Bottom calculation is only correct if bottom is negative</span>
        <span class="n">bottom</span><span class="o">=</span><span class="n">bottom</span><span class="p">,</span>
        <span class="n">top</span><span class="o">=</span><span class="n">top</span><span class="p">)</span>
    <span class="c1">#ax.set_xlim(left=date(2021, 10, 1))</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ccol</span> <span class="o">==</span> <span class="s2">"Bezirk"</span><span class="p">:</span>
        <span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">recfs</span><span class="p">,</span> <span class="s2">"inz_g7p"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="n">ccol</span><span class="p">,</span> <span class="n">shorten</span><span class="o">=</span><span class="p">(</span><span class="k">lambda</span> <span class="n">cat</span><span class="p">:</span> <span class="n">cov</span><span class="o">.</span><span class="n">bezname_to_kfz</span><span class="p">(</span><span class="n">cat</span><span class="p">)))</span>
    <span class="k">elif</span> <span class="n">ccol</span> <span class="o">==</span> <span class="s2">"Bundesland"</span><span class="p">:</span>
        <span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">recfs</span><span class="p">,</span> <span class="s2">"inz_g7p"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="n">ccol</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">ccol</span> <span class="o">==</span> <span class="s2">"Gruppe"</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">shorten_grp</span><span class="p">(</span><span class="n">cat</span><span class="p">):</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME_BY_BUNDESLAND</span><span class="p">[</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="k">return</span> <span class="s2">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
        <span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">recfs</span><span class="p">,</span> <span class="s2">"inz_g7p"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="n">ccol</span><span class="p">,</span> <span class="n">shorten</span><span class="o">=</span><span class="n">shorten_grp</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anstieg positiver Tests ggü. 7 Tage vorher"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">.5</span><span class="p">);</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Verlauf der wöchentlichen Inzidenzveränderung je </span><span class="si">{</span><span class="n">ccol</span><span class="si">}{</span><span class="n">extratitle</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ax</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">ages1m</span><span class="p">,</span> <span class="s2">" ‒ Nach Meldedatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="s2">"‒ Nach Labordatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ages1mx0</span> <span class="o">=</span> <span class="n">ages1mx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">ages1mx0</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span>
    <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">ages1mx0</span><span class="p">,</span> <span class="s2">" ‒ Nach AGES-Meldedatum ohne Nachmeldungen &gt;14 Tage"</span><span class="p">)</span>

<span class="c1">#ax.set_ylim(top=3)</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">selbl</span><span class="o">=</span><span class="s2">"Oberösterreich"</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">bez</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and GKZ &gt; 0"</span><span class="p">),</span> <span class="sa">f</span><span class="s2">" in </span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>    
    
    <span class="n">bez1mbegdt</span> <span class="o">=</span> <span class="n">bez1m</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">bez1m</span><span class="p">[</span><span class="s1">'inz_g7'</span><span class="p">]</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span> <span class="s2">"Datum"</span><span class="p">]</span>
    <span class="n">agd1mbegdt</span> <span class="o">=</span> <span class="n">agd1m_sums</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">agd1m_sums</span><span class="p">[</span><span class="s1">'inz_g7'</span><span class="p">]</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">(),</span> <span class="s2">"Datum"</span><span class="p">]</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">bez1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"GKZ &gt; 0"</span><span class="p">),</span> <span class="s2">" in Ö/MD"</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">)</span>
    <span class="c1">#ax.get_legend().remove()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="c1">#ax.set_ylim(top=3)</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">agd1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle' and Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="s2">" in Ö nach Meldedatum"</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">)</span>
    <span class="c1">#ax.get_legend().remove()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">bez</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"GKZ &gt; 0"</span><span class="p">),</span> <span class="s2">" in Ö nach Labordatum"</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span><span class="p">)</span>
    <span class="c1">#ax.get_legend().remove()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="c1">#ax.set_ylim(top=3)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle' and Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="s2">" in Ö nach Labordatum"</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span><span class="p">)</span>
    <span class="c1">#ax.get_legend().remove()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt_bl_gs</span><span class="p">(</span><span class="n">agd</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt;= '2021-03-01' and Datum &lt; '2021-07-01'"</span><span class="p">)</span>
                   <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle' and Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="s2">" in Ö nach Labordatum, 2021"</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">)</span>
    <span class="c1">#ax.get_legend().remove()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=994c5976">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [121]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">draw_gpct</span><span class="p">(</span><span class="n">agd0</span><span class="p">,</span> <span class="n">catcol</span><span class="p">,</span> <span class="n">catname</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
    <span class="n">agd0</span><span class="c1"># = agd0[agd0["Datum"] != agd0["Datum"].max()]</span>
    <span class="c1">#agd0 = agd0[agd0["Datum"] &gt;= agd0["Datum"].max() - timedelta(700)]</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="mi">2000</span><span class="c1">#2 * MIDRANGE_NDAYS# 2000# (52 + 10) * 7</span>
    <span class="n">alldts</span> <span class="o">=</span> <span class="n">agd0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="n">crising</span> <span class="o">=</span> <span class="p">(</span><span class="n">agd0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"inz_g7 &gt; 1"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
               <span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">alldts</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">ctotal</span> <span class="o">=</span> <span class="n">agd0</span><span class="p">[</span><span class="n">catcol</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">((</span><span class="n">crising</span> <span class="o">/</span> <span class="n">ctotal</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Steigend ggü. 7 Tage vorher"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
            <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">crising1</span> <span class="o">=</span> <span class="n">agd0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"inz_g &gt; 1"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"inz_g"</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">alldts</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">crising1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">crising1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]:</span>
         <span class="c1"># Delayed reporting may easily drag this down for the last day (but not up)</span>
        <span class="n">crising1</span> <span class="o">=</span> <span class="n">crising1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">((</span><span class="n">crising1</span> <span class="o">/</span> <span class="n">ctotal</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Steigend ggü. Vortag"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">.7</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="p">(</span><span class="n">crising</span> <span class="o">/</span> <span class="n">ctotal</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">autoyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Anteil </span><span class="si">{</span><span class="n">catname</span><span class="si">}</span><span class="s2"> mit steigender 7-Tage-Inzidenz"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">catname</span><span class="si">}</span><span class="s2"> mit steigender #Covid19at-7-Tage-Inzidenz "</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Steigend seit 7 Tage zuvor per </span><span class="si">{</span><span class="n">crising</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">:"</span>
          <span class="sa">f</span><span class="s2">" </span><span class="si">{</span><span class="n">crising</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">ctotal</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">crising</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">ctotal</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Steigend seit Vortag per </span><span class="si">{</span><span class="n">crising1</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">: "</span>
          <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">crising1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">crising1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">ctotal</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
    <span class="c1">#print(cov.filterlatest(agd0).query("inz_g7 &gt; 1")[catcol].unique())</span>
    <span class="c1">#print(cov.filterlatest(agd0).query("inz_g &gt; 1")[catcol].unique())</span>
     
    
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">bez0</span> <span class="o">=</span> <span class="n">bez</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"GKZ &gt; 0"</span><span class="p">)</span>
<span class="n">draw_gpct</span><span class="p">(</span><span class="n">bez0</span><span class="p">,</span> <span class="s2">"GKZ"</span><span class="p">,</span> <span class="s2">"Bezirke"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">))</span>

<span class="nb">print</span><span class="p">()</span>
<span class="n">agd0</span> <span class="o">=</span> <span class="n">agd</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle' and Bundesland != 'Österreich'"</span><span class="p">)</span>
<span class="n">draw_gpct</span><span class="p">(</span><span class="n">agd0</span><span class="p">,</span> <span class="s2">"Gruppe"</span><span class="p">,</span> <span class="s2">"Bundesland+Altersgruppe+Geschlecht-Kombinationen"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Anteil Gruppen/Bezirke mit steigender Inzidenz"</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Bezirke mit steigender #Covid19at-7-Tage-Inzidenz  (AGES Fr. 30.06.23)
Steigend seit 7 Tage zuvor per 29.06.2023: 18/94 (19.1%)
Steigend seit Vortag per 28.06.2023: 18 (19.1%)

Bundesland+Altersgruppe+Geschlecht-Kombinationen mit steigender #Covid19at-7-Tage-Inzidenz  (AGES Fr. 30.06.23)
Steigend seit 7 Tage zuvor per 29.06.2023: 30/180 (16.7%)
Steigend seit Vortag per 29.06.2023: 45 (25.0%)
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_141_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=fcf77ee9">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [122]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">bez0</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"inz_g7 &gt; 1"</span><span class="p">)[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[122]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>18</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=9177fdc5">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [123]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plt_per_bl_g7</span><span class="p">(</span><span class="n">fs</span><span class="o">=</span><span class="n">fs</span><span class="p">,</span> <span class="n">stamp</span><span class="o">=</span><span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Inzidenzveränderung gegenüber 7 Tage vorher"</span> <span class="o">+</span> <span class="n">stamp</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">,</span> <span class="n">fs</span><span class="p">[</span><span class="n">catcol</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
        <span class="n">fsbl</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="n">catcol</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Einzel-Tageswert"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">fsbl</span> <span class="o">=</span> <span class="n">fsbl</span><span class="p">[</span><span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">40</span><span class="p">)]</span>
        <span class="n">plot_colorful_gcol</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">],</span> <span class="s2">"Wochensumme"</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">))</span>
        <span class="c1">#ax.axhline(1, color="k")</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.33</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">: ×</span><span class="si">{</span><span class="n">fsbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'inz_g7'</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> / Woche"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fsbl</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">showday</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="c1">#ax.set_xlim(left=fsbl["Datum"].iloc[0])</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"×</span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">"</span><span class="p">))</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Inzidenzfaktor"</span><span class="p">)</span>
            <span class="c1">#ax.xaxis.set_major_locator(matplotlib.dates.MonthLocator(interval=3))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="c1">#fig.autofmt_xdate()</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt_per_bl_g7</span><span class="p">()</span>
    <span class="c1">#plt_per_bl_g7(ages1m, " - AGES nach Meldedatum" + AGES_STAMP)</span>
    <span class="c1">#plt_per_bl_g7(ages1mx0, " - AGES/Meldedatum ohne Nachmeldungen &gt;14 Tage")</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=1d846dc6">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [124]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt_per_bl_g7</span><span class="p">(</span><span class="n">agd1m_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe != 'Alle'"</span><span class="p">),</span> <span class="s2">", Altersgruppen, nach Meldedatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">)</span>
    <span class="n">plt_per_bl_g7</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe != 'Alle'"</span><span class="p">),</span> <span class="s2">", Altersgruppen, nach Labordatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">)</span>
    <span class="n">plt_per_bl_g7</span><span class="p">(</span><span class="n">agd1m_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien' and Altersgruppe != 'Alle'"</span><span class="p">),</span> <span class="s2">", Wien, Altersgruppen, nach Meldedatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">)</span>
    <span class="n">plt_per_bl_g7</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '&gt;84'"</span><span class="p">),</span> <span class="s2">", Altersgruppe 85+, nach Labordatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=16eaca88">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [125]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">plt_growfig</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">'"</span><span class="p">),</span> <span class="n">bl</span> <span class="o">+</span> <span class="s2">"/Labordatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">showlast</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=5511efe2">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [126]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plot_g7s</span><span class="p">(</span>
    <span class="n">agd_sums</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">figsize</span><span class="p">:</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">cbar_pad</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">figdpi</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">labelright</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cbary</span><span class="o">=</span><span class="mf">0.91</span><span class="p">,</span>
    <span class="n">projection</span><span class="o">=</span><span class="k">lambda</span> <span class="n">bldata</span><span class="p">:</span> <span class="n">bldata</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">"inz_g7"</span><span class="p">),</span>
    <span class="n">sortkey</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ag_to_id</span><span class="p">)):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">(),</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">figdpi</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">):</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="p">[</span><span class="n">axs</span><span class="p">]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Inzidenzveränderung (Faktor) ggü. 7 Tage vorher"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.01</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.975</span><span class="p">)</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">div_l_cmap</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="c1">#cov.div_cmap</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">TwoSlopeNorm</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vcenter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">norm</span><span class="o">.</span><span class="n">clip</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">bundesland</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="o">.</span><span class="n">categories</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())):</span>
        <span class="c1">#ax.set_title(bundesland, size=6, pad=0)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bundesland</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">"grey"</span><span class="p">)</span>
        <span class="n">bldata</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bundesland</span><span class="p">]</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt_tl_heat</span><span class="p">(</span><span class="n">projection</span><span class="p">(</span><span class="n">bldata</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"rows"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sortkey</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
            <span class="n">im_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
                <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
                <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">),</span>
            <span class="n">cbar_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="c1">#ticks=[0.5, 0.8, 1, 1.5, 2, 3],</span>
                <span class="c1">#ticks=[-0.5, 0, 1, 2],</span>
                <span class="n">shrink</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">),</span>
                <span class="n">pad</span><span class="o">=</span><span class="n">cbar_pad</span><span class="p">,</span>
                <span class="n">aspect</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
        <span class="c1">#print(vars(cbar))</span>
        <span class="c1">#ax.axhline(0.4, color="lightgrey", linewidth=1, snap=True)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.dates.DateFormatter('%b %y'))</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pad</span><span class="o">=-</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bundesland</span><span class="p">])</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Faktor"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">cbary</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelright</span><span class="o">=</span><span class="n">labelright</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span> 
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">pad</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">)</span> 
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"both"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"both"</span><span class="p">)</span> 
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"lightgrey"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"major"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span> 
        <span class="c1">#ax.tick_params(bottom=False)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plot_g7s</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">),</span> <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">cbar_pad</span><span class="o">=</span><span class="mf">0.02</span> <span class="p">,</span><span class="n">figdpi</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">plot_g7s</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">MIDRANGE_NDAYS</span><span class="p">)]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">),</span>
         <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">3.5</span><span class="o">*</span><span class="mi">2</span><span class="p">),</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">cbar_pad</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">figdpi</span><span class="o">=</span><span class="mi">160</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mf">4.5</span><span class="p">)</span>

<span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Österreich"</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plot_g7s</span><span class="p">(</span>
        <span class="n">agd_sums</span><span class="c1">#[agd_sums["Datum"] &gt;= agd_sums.iloc[-1]["Datum"] - timedelta(MIDRANGE_NDAYS * 3)]</span>
            <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">cbar_pad</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mf">4.5</span><span class="p">,</span> <span class="n">cbary</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figdpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="c1">#ax.tick_params(labelsize=4)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">: Inzidenveränderung ggü. 7 Tage zuvor"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.15</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">);</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">proj_kpi</span><span class="p">(</span><span class="n">bldata</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="n">bldata</span> <span class="o">=</span> <span class="n">bldata</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">bldata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">bldata</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="p">:],</span> <span class="s2">"dead_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="k">return</span> <span class="n">bldata</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[[</span><span class="s2">"icu_g7"</span><span class="p">,</span> <span class="s2">"nhosp_g7"</span><span class="p">,</span> <span class="s2">"inz_g7"</span><span class="p">,</span> <span class="s2">"dead_g7"</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">"icu_g7"</span><span class="p">:</span> <span class="s2">"ICU"</span><span class="p">,</span> <span class="s2">"nhosp_g7"</span><span class="p">:</span> <span class="s2">"KH"</span><span class="p">,</span> <span class="s2">"inz_g7"</span><span class="p">:</span> <span class="s2">"Inz."</span><span class="p">,</span> <span class="s2">"dead_g7"</span><span class="p">:</span> <span class="s2">"Tote"</span>
        <span class="p">})</span><span class="o">.</span><span class="n">T</span>
    <span class="n">fsh</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">fsh</span><span class="p">,</span> <span class="s2">"nhosp"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">fsh</span><span class="p">,</span> <span class="s2">"icu"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">fsh</span><span class="p">,</span> <span class="s2">"dead"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plot_g7s</span><span class="p">(</span><span class="n">fsh</span><span class="p">[</span><span class="n">fsh</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">fsh</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">90</span><span class="p">)],</span>
             <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">cbar_pad</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mf">4.5</span><span class="p">,</span>
             <span class="n">projection</span><span class="o">=</span><span class="n">proj_kpi</span><span class="p">,</span> <span class="n">cbary</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
             <span class="n">sortkey</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s2">"Inz."</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"KH"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"ICU"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"Tote"</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}))[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Veränderung ggü. 7 Tage zuvor"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.02</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">7</span><span class="p">);</span>

<span class="k">def</span> <span class="nf">plot_cum_inz</span><span class="p">(</span>
    <span class="n">agd_sums</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">figsize</span><span class="p">:</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">cbar_pad</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">figdpi</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">labelright</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cbary</span><span class="o">=</span><span class="mf">0.91</span><span class="p">,</span>
    <span class="n">projection</span><span class="o">=</span><span class="k">lambda</span> <span class="n">bldata</span><span class="p">:</span> <span class="n">bldata</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">),</span>
    <span class="n">sortkey</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ag_to_id</span><span class="p">)):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">(),</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">figdpi</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">):</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="p">[</span><span class="n">axs</span><span class="p">]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Kumulative Inzidenz nach Bundeland und Altersgruppe"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.01</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.975</span><span class="p">)</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">un_cmap</span> <span class="c1">#sns.color_palette("BuPu", as_cmap=True).copy()</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span>
        <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">projection</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">])</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
                 <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
    <span class="c1">#norm = matplotlib.colors.TwoSlopeNorm(vmin=0.5, vcenter=1, vmax=2.5)</span>
    <span class="c1">#norm.clip = False</span>
    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">bundesland</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="o">.</span><span class="n">categories</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())):</span>
        <span class="c1">#ax.set_title(bundesland, size=6, pad=0)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bundesland</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">"grey"</span><span class="p">)</span>
        <span class="n">bldata</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bundesland</span><span class="p">]</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt_tl_heat</span><span class="p">(</span><span class="n">projection</span><span class="p">(</span><span class="n">bldata</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"rows"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sortkey</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
            <span class="n">im_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
                <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
                <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">),</span>
            <span class="n">cbar_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="c1">#ticks=[0.5, 0.8, 1, 1.5, 2, 3],</span>
                <span class="c1">#ticks=[0.5, 1, 1.5, 2, 2.5],</span>
                <span class="n">shrink</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">xmax</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span><span class="c1">#matplotlib.ticker.FormatStrFormatter("%.1f"),</span>
                <span class="n">ticks</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
                <span class="n">pad</span><span class="o">=</span><span class="n">cbar_pad</span><span class="p">,</span>
                <span class="n">aspect</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
        <span class="c1">#print(vars(cbar))</span>
        <span class="c1">#ax.axhline(0.4, color="lightgrey", linewidth=1, snap=True)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s1">'%b %y'</span><span class="p">))</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bundesland</span><span class="p">])</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Infizierte"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">cbary</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelright</span><span class="o">=</span><span class="n">labelright</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"both"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"lightgrey"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
        <span class="c1">#ax.tick_params(bottom=False)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plot_cum_inz</span><span class="p">(</span><span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="s2">"2021-08-1"</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">),</span> <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
                 <span class="n">aspect</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">cbar_pad</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">6</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_146_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_146_1.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=d2f7d5f4">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="%C3%84nderung-Inzidenz-vs.-Krankenhausbelegung-&amp;-Tote">Änderung Inzidenz vs. Krankenhausbelegung &amp; Tote<a class="anchor-link" href="#%C3%84nderung-Inzidenz-vs.-Krankenhausbelegung-&amp;-Tote">¶</a></h2><p>Im Folgenden wird dargestellt wie Veränderungen der Inzidenz um einen bestimmten Faktor zwei Wochen später
eine Veränderung der Krankenhausauslastung &amp; Todeszahlen um einen tendenziell ähnlichen Faktor verursachen.</p>
<p>Die Inzidenzen stammen von den AGES-Daten, alle anderen Kennzahlen aus der Morgenmeldung.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=1a90f9ac">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [127]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.patheffects</span>

<span class="n">_posratecol</span> <span class="o">=</span> <span class="s2">"PCRRPosRate_a7"</span>
<span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plot_changes</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">):</span>
    <span class="n">mms</span><span class="p">,</span> <span class="n">mms_orig</span> <span class="o">=</span> <span class="n">mms</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">mms</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"FZHospAlle"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"FZHospAlle"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="n">_posratecol</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"PCRRPosRate"</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"FZHospAlle_lag_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"FZHospAlle_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"FZICU_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"FZICU_a7"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"FZICU_lag_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"FZICU_a7_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"dead"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"dead_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"dead"</span><span class="p">]</span> <span class="o">/</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"dead"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">mms</span><span class="p">[</span><span class="s2">"dead_g7_lag"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"dead_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">mms</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">NEED_CUTOFF</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="ow">and</span> <span class="n">NEED_CUTOFF</span><span class="p">:</span>
        <span class="n">cutoff</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">if</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">==</span> <span class="mi">6</span> <span class="k">else</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"wd"</span><span class="p">,</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">weekday</span><span class="p">(),</span> <span class="n">cutoff</span><span class="p">,</span> <span class="n">mms</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="n">cutoff</span><span class="p">:])</span>
        
        <span class="n">mms</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"FZHospAlle_lag_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span> <span class="o">-</span> <span class="n">cutoff</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:,</span> <span class="s2">"FZHospAlle_lag_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="c1">#mms.loc[:, "FZICU_lag_g7"] = mms["FZICU_lag_g7"].iloc[:-cutoff]</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="n">MIDRANGE_NDAYS</span> <span class="o">*</span> <span class="mi">1</span>
    <span class="n">inzcols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span>
    <span class="n">inzcolors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"C0"</span><span class="p">]</span>
    <span class="n">inzlabels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"7-T-Inzidenz n. Meldedat. ohne Nachm. &gt;14 T"</span><span class="p">,</span> <span class="s2">"_"</span><span class="p">,</span> <span class="s2">"_"</span><span class="p">]</span>
    <span class="n">pltdata</span> <span class="o">=</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="c1">#display(</span>
    <span class="c1">#    pltdata["dead_g7_lag"].last_valid_index(),</span>
    <span class="c1">#    pltdata["dead_g7_lag"][pltdata["dead_g7_lag"].last_valid_index()],</span>
    <span class="c1">#    pltdata["Bundesland"][pltdata["dead_g7_lag"].last_valid_index()]</span>
    <span class="c1">#)</span>
    <span class="c1">#display(pltdata["dead"].iloc[-15:])</span>
    <span class="n">pltdata</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="n">inzcols</span><span class="p">,</span>
        <span class="c1">#marker=".",</span>
        <span class="c1">#cmap="crest"</span>
        <span class="n">color</span><span class="o">=</span><span class="n">inzcolors</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pltdata</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pltdata</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">),</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">inzcolors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pltdata</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pltdata</span><span class="p">[</span><span class="s2">"inz_dg7"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">),</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">inzcolors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">"posrate:"</span><span class="p">,</span> <span class="n">pltdata</span><span class="p">[</span><span class="sa">f</span><span class="s2">"inz_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">pltdata</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">pltdata</span><span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">_posratecol</span><span class="si">}</span><span class="s2">_g7"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">set_hls_values</span><span class="p">(</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span>
        <span class="n">path_effects</span><span class="o">=</span><span class="p">[</span>
            <span class="n">matplotlib</span><span class="o">.</span><span class="n">patheffects</span><span class="o">.</span><span class="n">Stroke</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">foreground</span><span class="o">=</span><span class="s1">'white'</span><span class="p">),</span>
            <span class="n">matplotlib</span><span class="o">.</span><span class="n">patheffects</span><span class="o">.</span><span class="n">Normal</span><span class="p">()],</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"PCR-Positivrate"</span><span class="p">,</span>
        <span class="n">lw</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
    <span class="n">conscols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"dead_g7_lag"</span><span class="p">,</span> <span class="s2">"FZHospAlle_lag_g7"</span><span class="p">]</span>
    <span class="n">conscolors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"k"</span><span class="p">,</span> <span class="s2">"C1"</span><span class="p">]</span>
    <span class="n">conslabels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"14-T Tote nach Meldedatum (‒14 Tage)"</span><span class="p">,</span> <span class="s2">"Krankenhausbelegung (‒7 Tage)"</span><span class="p">]</span>
    
    <span class="n">pltdata</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
       <span class="n">y</span><span class="o">=</span><span class="s2">"dead_g7_lag"</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span>
        <span class="c1">#markersize=8</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">pltdata</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
       <span class="n">y</span><span class="o">=</span><span class="s2">"FZHospAlle_lag_g7"</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">pltdata</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">"FZICU_lag_g7"</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span>
        <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span>
        <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"lightgrey"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">inzlabels</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"7-T-PCR-Positivrate (BL-Personengewichtet)"</span><span class="p">]</span> <span class="o">+</span> <span class="n">conslabels</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"7-T ICU (‒7 T)"</span><span class="p">],</span>
        <span class="n">prop</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
        <span class="n">loc</span><span class="o">=</span><span class="s2">"best"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Relative Änderung ggü. 7 Tage voher"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_pctdiff_formatter</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"r"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">in_layout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"b"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">in_layout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:][</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ax</span>

<span class="k">def</span> <span class="nf">plotchanges_all</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="n">bl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">mms</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">"FZHospAlle"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mms</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">mms</span><span class="p">[</span><span class="s2">"FZHospAlle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+</span> <span class="n">mms</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="s2">"FZHospAlle"</span><span class="p">,</span> <span class="n">dailycol</span><span class="o">=</span><span class="s2">"FZHospAlle"</span><span class="p">)</span>
    <span class="n">plot_changes</span><span class="p">(</span><span class="n">mms</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"SARS-CoV-2: </span><span class="si">{</span><span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'Bundesland'</span><span class="p">]</span><span class="si">}</span><span class="s2">: Änderungsraten bis "</span>
                                       <span class="o">+</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">bevwpcr</span><span class="p">(</span><span class="n">mmx</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s2">"PCRRPosRate_a7"</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">mmx</span><span class="p">[</span><span class="o">~</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">"Österreich"</span><span class="p">,</span><span class="s2">"Vorarlberg"</span><span class="p">])]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]))</span>
    
<span class="n">mmx0</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">mmx0</span><span class="p">[</span><span class="n">_posratecol</span><span class="p">]</span> <span class="o">=</span> <span class="n">bevwpcr</span><span class="p">(</span><span class="n">mmx</span><span class="p">,</span> <span class="n">_posratecol</span><span class="p">)</span>
<span class="c1">#rint(mmx0.iloc[-1])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mmx0</span><span class="p">[</span><span class="n">_posratecol</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"7-T-PCR-Positivrate, BL-Personengewichtet"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="n">_posratecol</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"7-T-Positivrate roh (d.h. Wien-lastig)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: PCR-Positivrate (Apotheke+Ländermeldung)"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">(),</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.35</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plotchanges_all</span><span class="p">(</span><span class="n">mmx0</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="s2">"Österreich"</span><span class="p">)</span>
    <span class="c1">#plotchanges_all(None, fs_at, "Österreich")</span>
    <span class="n">plotchanges_all</span><span class="p">(</span><span class="n">mmx</span><span class="p">,</span> <span class="s2">"Wien"</span><span class="p">)</span>
    <span class="c1">#plotchanges_all(mmx, "Oberösterreich")</span>
    <span class="c1">#plotchanges_all(mmx, "Niederösterreich")</span>
    <span class="c1">#plotchanges_all(mmx, "Steiermark")</span>
    <span class="c1">#plotchanges_all(mmx, "Tirol")</span>


<span class="nb">print</span><span class="p">(</span>
    <span class="s2">"Die Änderungsraten der #COVID19at-Kennzahlen zeigen den Trend.</span><span class="se">\n\n</span><span class="s2">"</span>
    <span class="s2">"Je weiter entfernt von ±0%, desto dynamischer entwickelt sich die Kennzahl. "</span>
    <span class="s2">"Ein Sinken der Kurve bedeutet nicht ein Sinken der Kennzahl. "</span>
    <span class="s2">"Die Kennzahl sinkt erst wenn die Kurve den blauen Bereich unter ±0</span><span class="si">% e</span><span class="s2">rreicht."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Die Änderungsraten der #COVID19at-Kennzahlen zeigen den Trend.

Je weiter entfernt von ±0%, desto dynamischer entwickelt sich die Kennzahl. Ein Sinken der Kurve bedeutet nicht ein Sinken der Kennzahl. Die Kennzahl sinkt erst wenn die Kurve den blauen Bereich unter ±0% erreicht.
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_148_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=9003bfa7">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [128]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">print_grow_stats</span><span class="p">(</span><span class="n">selbl</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"Faelle7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="c1">#data["dead14a"] = ages1m.query(f"Bundesland == '{selbl}'").set_index("Datum")["AnzahlTot"].rolling(14).sum()</span>
    <span class="n">data</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">"dead14"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AnzahlTot"</span><span class="p">)</span>
    <span class="c1">#cov.enrich_inz(data, "dead14a", "Bundesland", "AnzahlTot")</span>
    <span class="c1">#data["FZHospAlle"].ffill(inplace=True)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">"FZHospAlle"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"FZHospAlle"</span><span class="p">]</span><span class="o">.</span><span class="n">ffill</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"FZHospAlle_g7"</span><span class="p">]</span><span class="o">.</span><span class="n">ffill</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">"FZICU_a3"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">mday</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%A"</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dayofweek</span> <span class="o">==</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">dayofweek</span><span class="p">]</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">allmark</span> <span class="o">=</span> <span class="s2">"AGES/Meldedatum"</span>
    <span class="n">nohosp</span> <span class="o">=</span> <span class="n">haveages</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">havehosp</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dayofweek</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="c1">#print(mms.iloc[-1]["Datum"].weekday(), havehosp, nohosp)</span>
    <span class="k">if</span> <span class="n">allmark</span><span class="p">:</span>
        <span class="n">mmsmark</span> <span class="o">=</span> <span class="n">agesmark</span> <span class="o">=</span> <span class="n">hmark</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="n">dmark</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">agesmark</span> <span class="o">=</span> <span class="n">dmark</span> <span class="o">=</span> <span class="s2">"¹"</span>
        <span class="n">mmsmark</span> <span class="o">=</span>  <span class="n">hmark</span> <span class="o">=</span> <span class="s2">"²"</span>
        <span class="k">if</span> <span class="n">selbl</span> <span class="o">==</span> <span class="s2">"Niederösterreich"</span><span class="p">:</span>
            <span class="n">dmark</span> <span class="o">=</span> <span class="n">mmsmark</span>
    <span class="n">hmark</span> <span class="o">+=</span> <span class="s2">" (Stand Fr.)"</span> <span class="k">if</span> <span class="n">nohosp</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="n">head</span> <span class="o">=</span> <span class="s2">"#COVID19at Kennzahlen"</span>
    <span class="n">head</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">" "</span> <span class="o">+</span> <span class="n">selbl</span><span class="p">)</span> <span class="k">if</span> <span class="n">selbl</span> <span class="o">!=</span> <span class="s1">'Österreich'</span> <span class="k">else</span> <span class="s1">''</span>
    <span class="n">head</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">" "</span> <span class="o">+</span> <span class="n">allmark</span><span class="p">)</span> <span class="k">if</span> <span class="n">allmark</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">head</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">nf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">rec</span><span class="p">[</span><span class="s1">'Faelle7'</span><span class="p">])</span>
        <span class="n">nfstr</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">nf</span><span class="p">,</span> <span class="s1">',.0f'</span> <span class="k">if</span> <span class="n">nf</span> <span class="o">&gt;=</span> <span class="mi">10_000</span> <span class="k">else</span> <span class="s1">'.0f'</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span> <span class="s1">'.'</span><span class="p">)</span>
        <span class="n">dtstr</span> <span class="o">=</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">strftime</span><span class="p">((</span><span class="s2">"%A "</span> <span class="k">if</span> <span class="n">isfirst</span> <span class="k">else</span> <span class="s2">""</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">.%m"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"."</span>
        <span class="n">dtstr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">"\b0+"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="n">dtstr</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="n">dtstr</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"🖤</span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">'dead14'</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}{</span><span class="s1">' Tote'</span><span class="o">+</span><span class="w"> </span><span class="n">dmark</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' in 14 Tagen,'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isfirst</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">''</span><span class="si">}</span><span class="s2">"</span>
                <span class="sa">f</span><span class="s2">" </span><span class="si">{</span><span class="n">pctc</span><span class="p">(</span><span class="n">rec</span><span class="p">[</span><span class="s1">'dead14_g7'</span><span class="p">],</span><span class="w"> </span><span class="n">emoji</span><span class="o">=</span><span class="n">isfirst</span><span class="p">)</span><span class="si">}{</span><span class="s1">' in 7 T'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isfirst</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">''</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="c1">#f"🖤{rec['dead14a']:.0f}{' Tote² in 14 Tagen,' if isfirst else ''} {pctc(rec['dead14a_g7'])}{' in 7 T' if isfirst else ''}",</span>
            <span class="sa">f</span><span class="s2">"🏥</span><span class="si">{</span><span class="n">rec</span><span class="p">[</span><span class="s1">'FZHospAlle'</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}{</span><span class="s1">' im KH'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">hmark</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">','</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isfirst</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">''</span><span class="si">}</span><span class="s2">"</span>
                    <span class="sa">f</span><span class="s2">" </span><span class="si">{</span><span class="n">pctc</span><span class="p">(</span><span class="n">rec</span><span class="p">[</span><span class="s1">'FZHospAlle_g7'</span><span class="p">],</span><span class="w"> </span><span class="n">emoji</span><span class="o">=</span><span class="n">isfirst</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"🤒</span><span class="si">{</span><span class="n">nfstr</span><span class="si">}{</span><span class="s1">' Fälle'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">agesmark</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' 7-T-Schnitt,'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">isfirst</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">''</span><span class="si">}</span><span class="s2">"</span>
                <span class="sa">f</span><span class="s2">" </span><span class="si">{</span><span class="n">pctc</span><span class="p">(</span><span class="n">rec</span><span class="p">[</span><span class="s1">'inz_g7'</span><span class="p">],</span><span class="w"> </span><span class="n">emoji</span><span class="o">=</span><span class="n">isfirst</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">sep</span><span class="o">=</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> <span class="k">if</span> <span class="n">isfirst</span> <span class="k">else</span> <span class="s2">"</span><span class="se">\N{EM QUAD}</span><span class="s2">"</span><span class="p">)</span> <span class="c1">#")</span>
        <span class="k">if</span> <span class="n">isfirst</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
        <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">allmark</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="si">{</span><span class="n">agesmark</span><span class="si">}</span><span class="s2">AGES/Meldedatum</span><span class="se">\N{EM QUAD}</span><span class="si">{</span><span class="n">mmsmark</span><span class="si">}</span><span class="s2">9:30-Meldung"</span><span class="p">)</span>
<span class="n">print_grow_stats</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">()</span>
<span class="n">print_grow_stats</span><span class="p">(</span><span class="s2">"Oberösterreich"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">()</span>
<span class="n">print_grow_stats</span><span class="p">(</span><span class="s2">"Steiermark"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">()</span>
<span class="n">print_grow_stats</span><span class="p">(</span><span class="s2">"Wien"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>#COVID19at Kennzahlen AGES/Meldedatum

Freitag 30.6.
🖤14 Tote in 14 Tagen, ±0% in 7 T
🏥43 im KH, ‒19% ↘
🤒91 Fälle 7-T-Schnitt, ‒29% ↘

23.6. 🖤14 +40% 🏥53 ‒29% 🤒128 ‒13%
16.6. 🖤10 ‒38% 🏥75 ‒37% 🤒146 ‒6,8%


#COVID19at Kennzahlen Oberösterreich AGES/Meldedatum

Freitag 30.6.
🖤0 Tote in 14 Tagen, ±0% in 7 T
🏥7 im KH, ±0%
🤒7 Fälle 7-T-Schnitt, ‒48% ⏬

23.6. 🖤0 ±0% 🏥7 ±0% 🤒13 +5,7%
16.6. 🖤0 ±0% 🏥7 ‒36% 🤒13 ‒16%


#COVID19at Kennzahlen Steiermark AGES/Meldedatum

Freitag 30.6.
🖤0 Tote in 14 Tagen, ‒100% ⏬ in 7 T
🏥4 im KH, ‒50% ⏬
🤒5 Fälle 7-T-Schnitt, ‒57% ⏬

23.6. 🖤2 ±0% 🏥8 ‒27% 🤒11 ‒1,3%
16.6. 🖤2 +100% 🏥11 ‒48% 🤒11 ‒17%


#COVID19at Kennzahlen Wien AGES/Meldedatum

Freitag 30.6.
🖤0 Tote in 14 Tagen, ‒100% ⏬ in 7 T
🏥18 im KH, ‒25% ↘
🤒48 Fälle 7-T-Schnitt, ‒22% ↘

23.6. 🖤2 ‒50% 🏥24 ‒11% 🤒62 ‒11%
16.6. 🖤4 ‒20% 🏥27 ‒25% 🤒69 ‒2%
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=20194a72">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [129]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">indic_hm</span><span class="p">():</span>
    <span class="n">mmx0</span> <span class="o">=</span> <span class="n">mmx</span><span class="p">[</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">28</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">mmx0</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">])</span> <span class="k">as</span> <span class="n">shifted</span><span class="p">:</span>
        <span class="n">mmx0</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mmx0</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">shifted</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">mmx0</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"FZICU_a7"</span><span class="p">]):</span>
        <span class="n">mmx0</span><span class="p">[</span><span class="s2">"FZICU_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mmx0</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mmx0</span><span class="p">,</span> <span class="s2">"FZHospAlle"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">dailycol</span><span class="o">=</span><span class="s2">"FZHospAlle"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mmx0</span><span class="p">,</span> <span class="s2">"dead14"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">dailycol</span><span class="o">=</span><span class="s2">"AnzahlTot"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mmx0</span><span class="p">,</span> <span class="n">_posratecol</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">dailycol</span><span class="o">=</span><span class="n">_posratecol</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">mmx0</span><span class="p">,</span> <span class="s2">"FZICU_a7"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">dailycol</span><span class="o">=</span><span class="s2">"FZICU"</span><span class="p">)</span>
    <span class="n">agd65</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="p">[</span><span class="n">agd_sums</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">"65-74"</span><span class="p">,</span> <span class="s2">"75-84"</span><span class="p">,</span> <span class="s2">"&gt;84"</span><span class="p">])]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])[</span>
        <span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">,</span> <span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="c1">#display(agd65)</span>
    <span class="c1">#s7 = agd65["AnzahlFaelle"].groupby(level="Bundesland").rolling(7).sum().reset_index(0, drop=True)</span>
    <span class="c1">#display(s7)</span>
    <span class="c1">#agd65["AnzahlFaelle7Tage"] = s7</span>
    <span class="n">agd65</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd65</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">/</span> <span class="n">s</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
    
    
    <span class="c1">#agd_sums</span>
    <span class="n">atpcr</span> <span class="o">=</span> <span class="n">bevwpcr</span><span class="p">(</span><span class="n">mmx0</span><span class="p">,</span> <span class="n">_posratecol</span><span class="p">)</span>
    <span class="n">atpcr_g7</span> <span class="o">=</span> <span class="n">atpcr</span> <span class="o">/</span> <span class="n">atpcr</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">mmx0</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)[</span>
        <span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">,</span> <span class="s2">"FZHospAlle_g7"</span><span class="p">,</span> <span class="s2">"dead14_g7"</span><span class="p">,</span> <span class="n">_posratecol</span> <span class="o">+</span> <span class="s2">"_g7"</span><span class="p">,</span> <span class="s2">"FZICU_a7_g7"</span><span class="p">]]</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">"ag65inz_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd65</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">))[</span><span class="s2">"AnzahlFaelle7Tage_g7"</span><span class="p">]</span>
    <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">_posratecol</span> <span class="o">+</span> <span class="s2">"_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">atpcr_g7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"inz_g7"</span><span class="p">:</span> <span class="s2">"Inzidenz 7-T"</span><span class="p">,</span>
        <span class="s2">"ag65inz_g7"</span><span class="p">:</span> <span class="s2">"Inzidenz 65+ 7-T"</span><span class="p">,</span>
        <span class="n">_posratecol</span> <span class="o">+</span> <span class="s2">"_g7"</span><span class="p">:</span> <span class="s2">"PCR+-Rate 7-T"</span><span class="p">,</span>
        <span class="s2">"FZHospAlle_g7"</span><span class="p">:</span> <span class="s2">"Hospitalisierung"</span><span class="p">,</span>
        <span class="s2">"FZICU_a7_g7"</span><span class="p">:</span> <span class="s2">"ICU 7-T"</span><span class="p">,</span>
        <span class="s2">"dead14_g7"</span><span class="p">:</span> <span class="s2">"Tote 14-T"</span><span class="p">}</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">Bundesland</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">annot</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s0</span><span class="p">:</span> <span class="n">pctc</span><span class="p">(</span><span class="n">s0</span><span class="p">,</span> <span class="n">percent</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">TwoSlopeNorm</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">vmin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">vmax</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">annot</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">div_l_cmap</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">"s"</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">set_hm_ax_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Indikatortrends: prozentuelle Veränderung zur Vorwoche"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">indic_hm</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=b67b9995">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Hospitalisierung">Hospitalisierung<a class="anchor-link" href="#Hospitalisierung">¶</a></h1><p>Hier wird berechnet wann die nächste Gefahrenstufe/Maßnahmenstufe erreicht wird, würde sich
das (angenommene) exponentielle Wachstum der belegten Intensivbetten seit 1/7/14 Tagen (jeweils über einen 3-Tage-Durchsnitt gerechnet) genau so fortsetzt. Das ist normalerweise nicht der Fall, einen Hinweis auf die in den
nächsten zwei Wochen zu erwartende Geschwindigkeit der Belegungsveränderung gibt das Diagramm zu <a href="#Inzidenz-und-Intensivstation">Inzidenz und Intensivstation</a>.</p>
<p>Eine Darstellung mit Fokus auf der aktuellen Belegung mit schöner Einzeichnung der Gefahrengrenzen gibt es beim <a href="https://orf.at/corona/daten/morgenmeldung">ORF bei den "Morgenmeldungen"</a>, wobei die Grenzen beim ORF leicht anders (niedriger) sind. Die Kapazitäten hier sind lt. AGES-Zahlen und inkludieren somit Zusatzbetten die notfallsmäßig innerhalb 7 Tage bereitgestellt werden könnten. Die Darstellung hier ist also konsistent mit <a href="https://covid19-dashboard.ages.at/dashboard_Hosp.html">https://covid19-dashboard.ages.at/dashboard_Hosp.html</a>.</p>
<p>Was bedeuten nun diese Grenzen? Sind 10% nicht z.B. ziemlich wenig? Nein! Dies ist nur die Belegung durch COVID-Patienten <em>zusätzlich</em> zur normalen Belegung. Schon bei 10% Zusatzbelegung müssen bestimmte Operationen verschoben werden. Das trifft zuerst "elektive" OPs. Das klingt harmlos, aber "elektiv" heißt nur dass die OP nicht medizinisch dringend ist. Das kann z.B. Hüft-OPs betreffen, wo zwar eine auf später verschobene OP die Heilungschancen nicht (wesentlich) verschlechtert, aber wo die Lebensqualität der Betroffenen ohne OP doch inzwischen wesentlich verschlechtert wird.</p>
<p>Mehr dazu ist in <a href="https://www.oegari.at/web_files/cms_daten/pa_covid_intensivbelastung_120421-whkmfrei_1.pdf">https://www.oegari.at/web_files/cms_daten/pa_covid_intensivbelastung_120421-whkmfrei_1.pdf</a> nachzulesen, unter der bezeichnenden Überschrift "Die 10:30:50-Regel: Schleichend zum Systemkollaps" (ÖGARI ist die Österreichische Gesellschaft u.a. für Intensivmediziner).</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=0d48598d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [130]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">hospdiff</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"FZHospAlle"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">barargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">snap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">aa</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">hospdiff</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">hospdiff</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">hospdiff</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="o">**</span><span class="n">barargs</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">hospdiff</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">hospdiff</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">hospdiff</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="o">**</span><span class="n">barargs</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">hospdiff</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"black"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%+d</span><span class="s2">"</span><span class="p">))</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hospdiff</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: Änderung der Hospitalisierten COVID-PatientInnen ggü. 7 Tage zuvor"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">print_hospdiff</span><span class="p">(</span><span class="n">hospdiff</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">hospdiff</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"d_hosp"</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">"d_hosp_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hospdiff</span> <span class="o">/</span> <span class="n">hospdiff</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Änderung hospitalisierter #Covid19at-PatientInnen"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="o">*</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"‒"</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m:"</span><span class="p">),</span> <span class="nb">format</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"d_hosp"</span><span class="p">],</span> <span class="s2">"+.0f"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">","</span><span class="p">,</span>
              <span class="n">pctc</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"d_hosp_g7"</span><span class="p">],</span> <span class="n">emoji</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
              <span class="s2">"in 7 Tagen"</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">""</span><span class="p">)</span>
<span class="n">print_hospdiff</span><span class="p">(</span><span class="n">hospdiff</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Änderung hospitalisierter #Covid19at-PatientInnen (AGES Fr. 30.06.23)
‒ 30.06: -10, ‒55% ⏬ in 7 Tagen
‒ 23.06: -22, ‒50% ⏬ 
‒ 16.06: -44, ‒6,4% ↘ 
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_152_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=eb32377a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [131]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#recalc_at_hosp(hospfz_ow)</span>

<span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"Wien"</span><span class="p">,</span> <span class="s2">"Österreich"</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="mi">9000</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">' and Datum &gt;= '2022-11-01'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"FZHosp"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"Normalstation AGES"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">hospfz_ow</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="s2">"FZHosp"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"Normalstation AGES + Wiener Post Covid ab 2.11.2022"</span><span class="p">)</span>
    <span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="n">extralabel</span> <span class="o">=</span> <span class="s2">" (logarithmisch)"</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">extralabel</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hospfz</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">bl</span> <span class="o">+</span> <span class="s2">": COVID-19 PatientInnen auf Normalstation"</span> <span class="o">+</span> <span class="n">extralabel</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_153_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_153_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=44ef2435">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [132]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#wien_hosp = wien_hosp.query("Datum &gt;= '2022-08-29'")</span>
<span class="c1">#display(wien_hosp)</span>

<span class="c1">#wien_hosp["FZHosp"] = wien_hosp["FZHospCov"] + wien_hosp["FZHospOutCov"] + wien_hosp["FZHospPostCov"]</span>

<span class="k">def</span> <span class="nf">draw_wien_hosp</span><span class="p">(</span><span class="n">pfx</span><span class="p">,</span> <span class="n">ttl</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">pltr</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">StackBarPlotter</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">wien_hosp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"plasma"</span><span class="p">,</span> <span class="n">n_colors</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
    <span class="n">pltr</span><span class="p">(</span><span class="n">wien_hosp</span><span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">pfx</span><span class="si">}</span><span class="s2">Cov"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"COVID-Station"</span><span class="p">)</span>
    <span class="n">pltr</span><span class="p">(</span><span class="n">wien_hosp</span><span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">pfx</span><span class="si">}</span><span class="s2">OutCov"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Nicht-COVID-Station"</span><span class="p">)</span>
    <span class="n">pltr</span><span class="p">(</span><span class="n">wien_hosp</span><span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">pfx</span><span class="si">}</span><span class="s2">PostCov"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Post-COVID-Station"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Wien: Personen wegen oder mit COVID-19 in Spitalsbehandlung in </span><span class="si">{</span><span class="n">ttl</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Quelle: https://presse.wien.gv.at/"</span><span class="p">)</span>
    <span class="n">hwien</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span>
    <span class="c1">#print(list(map(matplotlib.dates.num2date, ax.get_xlim())))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">axrng</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">num2date</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
    <span class="n">axrng</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">)</span>
    <span class="n">axrng</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">)</span>
    <span class="n">hwien</span> <span class="o">=</span> <span class="n">hwien</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hwien</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="o">*</span><span class="n">axrng</span><span class="p">)]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hwien</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">hwien</span><span class="p">[</span><span class="sa">f</span><span class="s2">"FZ</span><span class="si">{</span><span class="n">pfx</span><span class="si">}</span><span class="s2">"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">ttl</span><span class="si">}</span><span class="s2"> lt. AGES"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper right"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">draw_wien_hotline</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="c1">#ax.plot(wien_hosp["HotlineCalls"], marker="o", label="Täglich")</span>
    <span class="c1">#ax.plot(wien_hosp["HotlineCalls"].rolling(7).mean(), ls="--",</span>
    <span class="c1">#        label="7-Tage-Schnitt", color="k", marker="_")</span>
    <span class="c1">#cov.set_date_opts(ax)</span>
    <span class="n">make_wowg_diag</span><span class="p">(</span>
            <span class="n">wien_hosp</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">Bundesland</span><span class="o">=</span><span class="s2">"Wien"</span><span class="p">),</span> <span class="s2">"1450-Anrufe"</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span>
        <span class="n">ccol</span><span class="o">=</span><span class="s2">"HotlineCalls"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Anrufe"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">pltdg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pltg7</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Wien: Anrufe bei der Gesundheitshotline 1450"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Quelle: https://presse.wien.gv.at/"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.07</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    
<span class="n">draw_wien_hosp</span><span class="p">(</span><span class="s2">"Hosp"</span><span class="p">,</span> <span class="s2">"Normalpflege"</span><span class="p">)</span>
<span class="n">draw_wien_hosp</span><span class="p">(</span><span class="s2">"ICU"</span><span class="p">,</span> <span class="s2">"Intensivpflege"</span><span class="p">)</span>
<span class="n">draw_wien_hotline</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'1450-Anrufe'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>HotlineCalls      NaN
HotlineCalls_a7   NaN
inz_g7            NaN
inz_dg7           NaN
Name: 232, dtype: float64</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_154_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_154_3.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_154_4.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=d2ff0c46">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [133]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">wien_hosp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][[</span><span class="s2">"HospCov"</span><span class="p">,</span> <span class="s2">"HospOutCov"</span><span class="p">,</span> <span class="s2">"HospPostCov"</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[133]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>56.0000</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=f7970f03">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [134]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[134]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Datum</th>
<th>BundeslandID</th>
<th>TestGesamt</th>
<th>FZHosp</th>
<th>FZICU</th>
<th>FZHospFree</th>
<th>FZICUFree</th>
<th>Bundesland</th>
<th>AnzEinwohner</th>
<th>FZHospAlle</th>
<th>ICU_green_use</th>
<th>FZHospAlle_a3</th>
<th>FZICU_a3</th>
<th>FZICU_m3</th>
<th>FZHosp_a3</th>
<th>ICU_green_use_m3</th>
<th>ICU_green_use_a3</th>
<th>hosp</th>
<th>nhosp</th>
<th>icu</th>
</tr>
</thead>
<tbody>
<tr>
<th>11858</th>
<td>2023-06-30</td>
<td>9</td>
<td>75761978</td>
<td>16</td>
<td>2</td>
<td>957</td>
<td>243</td>
<td>Wien</td>
<td>9.1359e+06</td>
<td>18</td>
<td>0.04</td>
<td>19.0</td>
<td>2.0</td>
<td>2.0</td>
<td>17.0</td>
<td>0.04</td>
<td>0.04</td>
<td>0.197</td>
<td>0.1751</td>
<td>0.0219</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=36cf444a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [135]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">draw_hosp_g7</span><span class="p">():</span>
    <span class="n">hospx</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
    <span class="n">hospxg7</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">hospx</span><span class="p">[</span><span class="s2">"FZHospAlle"</span><span class="p">]</span>
        <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">/</span> <span class="n">s</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"FZHosp_g7"</span><span class="p">))</span>
    <span class="c1">#hospxg7 = hospxg7.loc[</span>
    <span class="c1">#    hospxg7.index.get_level_values("Datum") &gt;=</span>
    <span class="c1">#    hospxg7.index.get_level_values("Datum")[-1] - timedelta(MIDRANGE_NDAYS)]</span>
    
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">hospxg7</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"FZHosp_g7"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="c1">#marker=".",</span>
                     <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">hospxg7</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"FZHosp_g7"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C9"</span><span class="p">,</span>
                      <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="c1">#marker="o",</span>
                      <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                 <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">3.1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hospxg7</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="s2">"FZHosp_g7"</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"×</span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hospxg7</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Faktor ggü. Vorwoche"</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Veränderung Hospitalisierung (Faktor) ggü. gleichem Wochentag der Vorwoche"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span>
                 <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hospxg7</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="s2">"FZHosp_g7"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">draw_hosp_g7</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_157_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=bc9ec02c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [136]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
    <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">(),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span>
           <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Gesamtkapzität an Intensivbetten"</span><span class="p">)</span>
<span class="n">newcap</span> <span class="o">=</span> <span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich' and Datum == '2021-09-10'"</span><span class="p">)[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">oldcap</span> <span class="o">=</span> <span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich' and Datum == '2021-09-09'"</span><span class="p">)[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">mid</span> <span class="o">=</span> <span class="n">oldcap</span> <span class="o">+</span> <span class="p">(</span><span class="n">newcap</span> <span class="o">-</span> <span class="n">oldcap</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
        <span class="s2">"Anstieg insgesamt verfügbarer Intensivbetten in OÖ"</span><span class="p">,</span>
        <span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">mid</span><span class="p">),</span>
        <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">mid</span><span class="p">),</span>
        <span class="n">arrowprops</span><span class="o">=</span><span class="p">{</span><span class="s1">'arrowstyle'</span><span class="p">:</span> <span class="s1">'-&gt;'</span><span class="p">,</span> <span class="s1">'color'</span><span class="p">:</span> <span class="s1">'k'</span><span class="p">})</span>
<span class="c1">#hosp.query("Bundesland == 'Oberösterreich' and Datum in ('2021-09-10', '2021-09-09', '2021-04-21', '2021-04-22')")[</span>
<span class="c1">#    ["Datum", "Bundesland", "IntensivBettenKapGes", "IntensivBettenBelCovid19"]</span>
<span class="c1">#].set_index(["Bundesland", "Datum"]).tail(5)</span>
<span class="c1">#labelends(ax, hosp["IntensivBetten"])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Gesamtkapazität der Intensivstationen"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">);</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[136]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>(0.0000, 510.8500)</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_158_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=484058bb">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [137]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">hosp2</span> <span class="o">=</span> <span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">subcols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">hosp2</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="p">{</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">})</span>
<span class="n">hosp2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hosp2</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">subcols</span><span class="p">]</span> <span class="o">-=</span> <span class="n">hosp</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hosp</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Wien'</span><span class="p">,</span> <span class="n">subcols</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]</span> <span class="o">+</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">hosp2</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
    <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenFreiPro100_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenFreiPro100"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">hosp2</span><span class="p">[</span><span class="s2">"AnteilCov"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span>
<span class="n">hosp2</span><span class="p">[</span><span class="s2">"AnteilNichtCov"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">hosp2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"IntensivBettenFreiPro100_a7"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1">#hosp2.sort_values(by=["Datum"], inplace=True)</span>
    <span class="c1">#display(hosp2.head(30))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">hosp2</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s2">"AnteilNichtCov"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="p">[</span><span class="s2">"% Nicht-COVID"</span><span class="p">],</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Anteil von Covid-Fällen an belegten Intensivbetten in OÖ"</span><span class="p">)</span>

    <span class="c1">#plt.figure()</span>
    <span class="c1">#plt.stackplot(hosp2["Datum"], [hosp2["AnteilCov"], hosp2["AnteilNichtCov"]], linewidth=0)</span>
    <span class="c1">#plt.legend(["% COVID", "% Nicht-COVID"])</span>

    <span class="c1">#display(hosp2.dtypes)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">hosp2</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">)[[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"IntensivBettenBelCovid19"</span><span class="p">,</span> <span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]]</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">"d_BelCov19"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">"d_BelNichtCov19"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hosp2</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">"d_BelCov19_cumsum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"d_BelCov19"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">"d_BelNichtCov19_cumsum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"d_BelNichtCov19"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[[</span><span class="s2">"d_BelNichtCov19"</span><span class="p">,</span> <span class="s2">"d_BelCov19"</span><span class="p">]],</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=+</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">hosp2</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes_a7"</span><span class="p">,</span> <span class="s2">"IntensivBettenBelGes"</span><span class="p">,</span> <span class="s2">"IntensivBettenBelCovid19"</span><span class="p">,</span> <span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Intensivbelegung gesamt OÖ"</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=08018757">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [138]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">hosp</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">display</span><span class="p">(</span><span class="n">hosp</span><span class="p">[</span><span class="n">hosp</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=f7196c9c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [139]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">oo_icu_levels</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"1a"</span><span class="p">:</span>  <span class="p">(</span><span class="mi">226</span><span class="p">,</span>  <span class="mi">24</span><span class="p">),</span>
    <span class="s2">"2'"</span><span class="p">:</span> <span class="p">(</span><span class="mi">198</span><span class="p">,</span> <span class="mi">52</span><span class="p">),</span>
    <span class="s2">"2"</span><span class="p">:</span>  <span class="p">(</span><span class="mi">175</span><span class="p">,</span>  <span class="mi">52</span><span class="p">),</span>
    <span class="s2">"2?"</span><span class="p">:</span> <span class="p">(</span><span class="mi">175</span><span class="p">,</span>  <span class="mi">52</span><span class="p">),</span>
    <span class="s2">"2a"</span><span class="p">:</span> <span class="p">(</span><span class="mi">175</span><span class="p">,</span>  <span class="mi">75</span><span class="p">),</span>
    <span class="s2">"3"</span><span class="p">:</span>  <span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">103</span><span class="p">),</span> <span class="c1"># 100 / 150</span>
    <span class="s2">"3a"</span><span class="p">:</span> <span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">127</span><span class="p">),</span>
    <span class="s2">"4"</span><span class="p">:</span>  <span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">157</span><span class="p">),</span> <span class="c1"># 150 / 150</span>
    <span class="s2">"5?"</span><span class="p">:</span> <span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">175</span><span class="p">),</span> <span class="c1"># ??? https://www.land-oberoesterreich.gv.at/246019.htm</span>
<span class="p">}</span>
<span class="c1"># No reports since Feb 7 2021 https://www.land-oberoesterreich.gv.at/249398.htm</span>
<span class="c1"># Till Mar 17 https://www.land-oberoesterreich.gv.at/251836.htm</span>
<span class="n">oo_icu_levelchanged</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">27</span><span class="p">):</span> <span class="s2">"5?"</span><span class="p">,</span> <span class="c1"># https://www.land-oberoesterreich.gv.at/245274.htm</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span> <span class="s2">"4"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">23</span><span class="p">):</span> <span class="s2">"3"</span><span class="p">,</span>
    <span class="c1">#hosp2.iloc[0]["Datum"].date(): "3",</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">):</span> <span class="s2">"2a"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span> <span class="mi">18</span><span class="p">):</span> <span class="s2">"2?"</span><span class="p">,</span> <span class="c1"># No data, https://www.land-oberoesterreich.gv.at/250011.htm</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">):</span> <span class="s2">"2a"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">27</span><span class="p">):</span> <span class="s2">"3"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">):</span> <span class="s2">"2a"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">2</span><span class="p">):</span> <span class="s2">"2"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">29</span><span class="p">):</span> <span class="s2">"2a"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">5</span><span class="p">):</span> <span class="s2">"3"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">):</span> <span class="s2">"3a"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">24</span><span class="p">):</span> <span class="s2">"4"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">):</span> <span class="s2">"3a"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">23</span><span class="p">):</span> <span class="s2">"3"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">):</span> <span class="s2">"2a"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">):</span> <span class="s2">"2"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">):</span> <span class="s2">"2"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span> <span class="mi">27</span><span class="p">):</span> <span class="s2">"1a"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span> <span class="s2">"2'"</span><span class="p">,</span>
    <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span> <span class="mi">20</span><span class="p">):</span> <span class="s2">"1a"</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">load_hx</span><span class="p">():</span>
    <span class="n">hx</span> <span class="o">=</span> <span class="p">(</span><span class="n">hosp2</span>
          <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span>
          <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])[[</span><span class="s2">"AnzEinwohner"</span><span class="p">]])</span>
          <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">hospfz</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])[[</span><span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">,</span> <span class="s2">"FZHospFree"</span><span class="p">,</span> <span class="s2">"FZICUFree"</span><span class="p">]])</span>
          <span class="o">.</span><span class="n">sort_index</span><span class="p">())</span>
    <span class="n">latest</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">):</span>
        <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">bl</span><span class="p">,</span> <span class="n">latest</span><span class="p">),</span> <span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">bl</span><span class="p">,),</span> <span class="s2">"AnzEinwohner"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">hvbg</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">"Vorarlberg"</span><span class="p">,)]</span>
    <span class="c1">#display(hvbg)</span>
    <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">"Vorarlberg"</span><span class="p">,</span> <span class="s2">"FZICUFree"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">hvbg</span><span class="p">[</span><span class="s2">"FZICUFree"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
        <span class="o">-</span> <span class="n">hvbg</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())</span>
    <span class="n">firstdate</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">dt</span><span class="p">,</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">oo_icu_levelchanged</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">dt</span> <span class="o">&lt;</span> <span class="n">firstdate</span><span class="p">:</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">firstdate</span>
        <span class="n">kapncov</span><span class="p">,</span> <span class="n">kapcov</span> <span class="o">=</span> <span class="n">oo_icu_levels</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
        <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">"Oberösterreich"</span><span class="p">,</span> <span class="n">dt</span><span class="p">),</span> <span class="s2">"IntensivBettenKapNichtCovid19"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kapncov</span>
        <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">"Oberösterreich"</span><span class="p">,</span> <span class="n">dt</span><span class="p">),</span> <span class="s2">"IntensivBettenKapCovid19"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kapcov</span>
    <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">"Oberösterreich"</span><span class="p">,),</span> <span class="s2">"IntensivBettenKapNichtCovid19"</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">"ffill"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">"Oberösterreich"</span><span class="p">,),</span> <span class="s2">"IntensivBettenKapCovid19"</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">"ffill"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#display(hvbg["FZICUFree"].to_numpy() - hvbg["IntensivBettenBelGes"].to_numpy())</span>
    <span class="c1">#hx.loc["Vorarlberg"]</span>
    <span class="c1">#display(hx.xs(hx.index.get_level_values("Datum")[-2], level="Datum")[["FZICUFree"]])</span>
    <span class="c1">#display(hx.xs("Vorarlberg")["FZICUFree"].describe())</span>
    <span class="c1">#display(hx.xs("Vorarlberg").tail(7))</span>
    <span class="c1">#display((hx.xs("Vorarlberg")["FZICUFree"] + hvbg["IntensivBettenBelCovid19"]).describe())</span>
    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">bl</span><span class="p">,</span> <span class="n">latest</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">bl</span><span class="p">,</span> <span class="n">latest</span><span class="p">),</span> <span class="p">:]</span>
        <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">bl</span><span class="p">,</span> <span class="n">latest</span><span class="p">),</span> <span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">,</span> <span class="s2">"FZHospFree"</span><span class="p">,</span> <span class="s2">"FZICUFree"</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">bl</span><span class="p">,</span> <span class="n">latest</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">,</span> <span class="s2">"FZHospFree"</span><span class="p">,</span> <span class="s2">"FZICUFree"</span><span class="p">]])</span>
        <span class="c1">#print(bl, lastdate, hx.loc[(bl, lastdate + timedelta(1))])</span>
    <span class="n">hx</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hx</span>
    
<span class="n">hx</span> <span class="o">=</span> <span class="n">load_hx</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">bltitle</span><span class="p">(</span><span class="n">bl</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">bl</span> <span class="k">if</span> <span class="n">bl</span> <span class="o">!=</span> <span class="s2">"Österreich"</span> <span class="k">else</span> <span class="s2">"Österreich (ohne Wien)"</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=2d08425e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [140]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_bl_icu_stats</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="n">hbl</span><span class="p">,</span> <span class="n">pltfree_end</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">bltitle</span><span class="p">(</span><span class="n">bl</span><span class="p">))</span>
    <span class="c1">#print(hbl.index)</span>
    <span class="c1">#if bl in ("Vorarlberg", "Oberösterreich":</span>
    <span class="c1">#hbl["IntensivBettenKapGes"].clip(upper=hbl["IntensivBettenKapGes"].quantile(0.1, interpolation="lower"), inplace=True)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
                    <span class="p">(</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span> <span class="o">-</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">])</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
                   <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Non-Cov-belegt"</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="s2">"post"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">icufree</span> <span class="o">=</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"FZICUFree"</span><span class="p">]</span>
    <span class="n">stks</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span>
        <span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">],</span> <span class="n">icufree</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">"CoV-belegt"</span><span class="p">,</span> <span class="s2">"CoV-verfügbar"</span><span class="p">],</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">()[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">()[</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="s2">"post"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pltfree_end</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"FZICUFree"</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Maximalkapazität"</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="s2">"steps-post"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">stks</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bl</span> <span class="o">==</span> <span class="s2">"Oberösterreich"</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
            <span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="p">(</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span> <span class="o">-</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapNichtCovid19"</span><span class="p">])</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
            <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapCovid19"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="s2">"post"</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"Außer Betrieb"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Intensivbetten"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">hbl</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">300</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>

<span class="n">dsource</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_AGES</span> <span class="o">+</span> <span class="s2">", OÖ Landeskorrespondenz"</span> <span class="o">+</span> <span class="s2">" | Nach einer Darstellung von @brosch_alex"</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Intensivstationen Cov-Belegt &amp; verfügbar"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">hbl</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="c1">#.iloc[-60:]</span>
        <span class="n">plt_bl_icu_stats</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="n">hbl</span><span class="p">)</span>
        <span class="c1">#ax.legend(loc="upper right", ncol=2, frameon=False, bbox_to_anchor=(1, 1.1), columnspacing=1.1)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="c1">#ax.xaxis.set_major_locator(matplotlib.dates.MonthLocator(interval=1))</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">60</span><span class="p">:])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="c1">#ax.set_xlim(left=ax.get_xlim()[1] - 60)</span>
        <span class="c1">#ax.set_xlim(left=hbl.index[0], right=hbl.index[-1])</span>
        <span class="c1">#ax.xaxis.set_minor_locator(matplotlib.dates.MonthLocator(interval=1))</span>
        <span class="c1">#ax.grid(axis="x", which="minor")</span>
        <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.dates.DateFormatter("%b"))</span>
        <span class="c1">#ax.yaxis.set_major_formatter(lambda y, pos: abs(int(y)))</span>
        <span class="c1">#ax.axhline(0, color='k', linewidth=1, zorder=20)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper left"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">dsource</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plt_bl_icu_stats</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"Oberösterreich"</span><span class="p">,</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s2">"Oberösterreich"</span><span class="p">),</span> <span class="n">pltfree_end</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Intensivbetten in Oberösterreich"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span>
         <span class="s2">"(*Zwischen 7.2. und 16.3. wurde vom Land OÖ keine Krankenhaus-Stufe veröffentlicht, Stufen dort aus AGES-Daten geschätzt)"</span><span class="p">,</span>
         <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">dt</span><span class="p">,</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">oo_icu_levelchanged</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">isfirst</span> <span class="o">=</span> <span class="n">dt</span> <span class="o">==</span> <span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">isfirst</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">"Stufe "</span> <span class="o">+</span> <span class="n">level</span> <span class="k">if</span> <span class="n">isfirst</span> <span class="k">else</span> <span class="n">level</span><span class="p">,</span>
                <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">ha</span><span class="o">=</span><span class="s2">"right"</span> <span class="k">if</span> <span class="n">isfirst</span> <span class="k">else</span> <span class="s2">"center"</span><span class="p">,</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="c1">#ax.set_xlim(left=date(2021, 11, 1))</span>
<span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">dsource</span><span class="p">)</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">plt_bl_icu_stats</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"Burgenland"</span><span class="p">,</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s2">"Burgenland"</span><span class="p">),</span> <span class="n">pltfree_end</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">);</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Intensivbetten im Burgenland"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">plt_bl_icu_stats</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"Salzburg"</span><span class="p">,</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s2">"Salzburg"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">80</span><span class="p">:],</span> <span class="n">pltfree_end</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">);</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Intensivbetten in Salzburg"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_162_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=c3f7ca7e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Zu OÖ: <a href="https://derstandard.at/permalink/rc/1000252002/context?ref=live_red_content">https://derstandard.at/permalink/rc/1000252002/context?ref=live_red_content</a>
Auf den Intensivstationen liegen derzeit noch 57 Corona-Patienten. Wie der Geschäftsführer der Oö. Gesundheitsholding Franz Harnoncourt kürzlich ausgeführt hat, würden 25 mit Covid-Patienten belegte Intensivbetten einen Normalbetrieb im Spital erlauben, 50 einen Hybridbetrieb, bei dem man aber elektive Eingriffe verschieben müsse, und bei 75 "konzentrieren wir uns nur mehr auf das Akutgeschehen".</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=3892773d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [141]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="s2">"Wien"</span><span class="p">])</span>
<span class="c1">#display(.index)</span>
<span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">"Österreich"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="c1"># Sorry for the to_numpy...</span>
<span class="n">hx</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">"FZICUFree"</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">hx</span><span class="p">[</span><span class="s2">"AnteilCov"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hx</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hx</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span>
<span class="n">hx</span><span class="p">[</span><span class="s2">"AnteilNichtCov"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hx</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hx</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=ddd38d06">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [142]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plt_per_bl_hosp_bars</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"COVID-PatientInnen im Krankenhaus"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">hbl</span> <span class="o">=</span> <span class="n">hospfz</span><span class="p">[</span><span class="n">hospfz</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
        <span class="n">hbl</span><span class="p">[</span><span class="s2">"FZICU_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">hbl</span><span class="p">[</span><span class="s2">"FZHospAlle_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"FZHospAlle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">rechosp</span> <span class="o">=</span> <span class="n">hbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">DETAIL_NDAYS</span><span class="p">:]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">pad</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="s2">"x-small"</span><span class="p">)</span>
        <span class="n">barargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">snap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">aa</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">pltr</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">StackBarPlotter</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">rechosp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="o">**</span><span class="n">barargs</span><span class="p">)</span>
        <span class="n">pltr</span><span class="p">(</span>
            <span class="n">rechosp</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"ICU"</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rechosp</span><span class="p">[</span><span class="s2">"FZICU_a7"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
        <span class="n">pltr</span><span class="p">(</span>
            <span class="n">rechosp</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"Normalstation"</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rechosp</span><span class="p">[</span><span class="s2">"FZHospAlle_a7"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">rechosp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showday</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"PatientInnen"</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">rechosp</span><span class="p">[</span><span class="s1">'FZHospAlle'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    
<span class="k">def</span> <span class="nf">plt_per_bl_hosp_free</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"COVID-PatientInnen &amp; verfügbare Betten im Krankenhaus"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">hbl</span> <span class="o">=</span> <span class="n">hospfz</span><span class="p">[</span><span class="n">hospfz</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
        <span class="n">rechosp</span> <span class="o">=</span> <span class="n">hbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">SHORTRANGE_NDAYS</span><span class="p">:]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">pad</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="s2">"x-small"</span><span class="p">)</span>
        <span class="n">barargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">snap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">aa</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">pltr</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">StackBarPlotter</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">rechosp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="o">**</span><span class="n">barargs</span><span class="p">)</span>
        <span class="n">pltr</span><span class="p">(</span>
            <span class="n">rechosp</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"Belegt"</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">)</span>
        <span class="n">pltr</span><span class="p">(</span>
            <span class="n">rechosp</span><span class="p">[</span><span class="s2">"FZHospFree"</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"Weiters Verfügbar"</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"C2"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">rechosp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"PatientInnen"</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">rechosp</span><span class="p">[</span><span class="s1">'FZHosp'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">rechosp</span><span class="p">[[</span><span class="s1">'FZHosp'</span><span class="p">,</span><span class="w"> </span><span class="s1">'FZHospFree'</span><span class="p">]]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt_per_bl_hosp_bars</span><span class="p">()</span>
    <span class="n">plt_per_bl_hosp_free</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=04a3889a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [143]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">drawhospbl</span><span class="p">():</span>
    <span class="n">hd</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">hd</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hospfz</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ew_by_bundesland</span><span class="p">)</span>
    <span class="n">stamp</span> <span class="o">=</span> <span class="n">AGES_STAMP</span>
    <span class="n">hd</span><span class="p">[</span><span class="s2">"FZHospAlle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hd</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span> <span class="o">+</span> <span class="n">hd</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">hd</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
        <span class="n">hd</span><span class="p">[</span><span class="s2">"hosp_a7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hd</span><span class="p">[</span><span class="s2">"FZHospAlle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">/</span> <span class="n">hd</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
    <span class="n">hd0</span> <span class="o">=</span> <span class="n">hd</span><span class="c1">#[hd["Datum"] &gt;= hd.iloc[-1]["Datum"] - timedelta(MIDRANGE_NDAYS)]</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">hd0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"hosp_a7"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hd0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hd</span><span class="p">,</span> <span class="s2">"hosp_a7"</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s2">.3n</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Hospitalisierte / 100.000 EW"</span><span class="p">)</span>
    <span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hd</span><span class="p">,</span> <span class="s2">"hosp_a7"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"CoV-PatientInnen/100.000 EW je Bundesland im 7-Tage-Schnitt"</span> <span class="o">+</span> <span class="n">stamp</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">drawhospbl</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_166_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=db753efb">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [144]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">print_hosp</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">"FZHospAlle"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">enrich_inz</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">"FZHospAlle"</span><span class="p">,</span> <span class="n">catcol</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">dailycol</span><span class="o">=</span><span class="s2">"FZHospAlle"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Hospitalisierte #Covid19at-PatientInnen"</span> <span class="o">+</span> <span class="p">(</span><span class="n">AGES_STAMP</span> <span class="k">if</span> <span class="n">havehosp</span> <span class="k">else</span> <span class="n">MMS_STAMP</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="o">*</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"‒"</span><span class="p">,</span> <span class="n">record</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m:"</span><span class="p">),</span> <span class="nb">format</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"FZHospAlle"</span><span class="p">],</span> <span class="s2">".0f"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">","</span><span class="p">,</span> <span class="n">pctc</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"FZHospAlle_g7"</span><span class="p">],</span> <span class="n">emoji</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
              <span class="s2">"in 7 Tagen"</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">""</span><span class="p">)</span>
<span class="n">print_hosp</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Hospitalisierte #Covid19at-PatientInnen (AGES Fr. 30.06.23)
‒ 30.06: 43, ‒19% ↘ in 7 Tagen
‒ 23.06: 53, ‒29% ⏬ 
‒ 16.06: 75, ‒37% ⏬ 
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=81dc4876">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [145]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plthospchart</span><span class="p">(</span><span class="n">nhosp</span><span class="p">,</span> <span class="n">icuhosp</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">selbl</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">nhosp</span> <span class="o">=</span> <span class="n">nhosp</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">nhosp</span><span class="o">.</span><span class="n">first_valid_index</span><span class="p">():]</span>
    <span class="n">nhosp</span> <span class="o">=</span> <span class="n">nhosp</span><span class="p">[</span><span class="n">nhosp</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-07-15"</span><span class="p">)]</span>
    <span class="n">icuhosp</span> <span class="o">=</span> <span class="n">icuhosp</span><span class="p">[</span><span class="n">icuhosp</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">nhosp</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
    <span class="c1">#nhosp[hosp.iloc[-1]["Datum"]] = hosp.iloc[-1]["NormalBettenBelCovid19"]</span>
    <span class="n">msize</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">mshift</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">ahosp</span> <span class="o">=</span> <span class="n">nhosp</span> <span class="o">+</span> <span class="n">icuhosp</span>
    <span class="n">ahosp_a</span> <span class="o">=</span> <span class="n">ahosp</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">msize</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">pltr</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">StackBarPlotter</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">nhosp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">snap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">aa</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">pltr</span><span class="p">(</span><span class="n">icuhosp</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Auf ICU"</span><span class="p">)</span>
    <span class="n">pltr</span><span class="p">(</span><span class="n">nhosp</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Auf Normalstation"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">ahosp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"PatientInnen"</span><span class="p">)</span>
    <span class="c1">#ax.plot(nhosp_a)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">nhosp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Änderung pro Woche"</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">+.0%</span><span class="si">}</span><span class="s2">"</span><span class="p">))</span>
        <span class="c1">#ax2.plot(nhosp_a3 / nhosp_a3.shift(msize), color="C1")</span>
        <span class="n">growth</span> <span class="o">=</span> <span class="n">ahosp_a</span> <span class="o">/</span> <span class="n">ahosp_a</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">mshift</span><span class="p">)</span>
        <span class="c1">#print(growth.tail(8))</span>
        <span class="n">plot_colorful_gcol</span><span class="p">(</span>
            <span class="n">ax2</span><span class="p">,</span> <span class="n">ahosp_a</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">growth</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"Belastung"</span><span class="p">,</span> <span class="n">draw1</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">mec</span><span class="o">=</span><span class="s2">"w"</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ax2</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">growth</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">:</span><span class="s2">+.0%</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="p">(</span><span class="n">growth</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">growth</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s2">"offset points"</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">"center"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">ahosp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="p">(</span><span class="n">nhosp</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ahosp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="o">+</span><span class="mi">2</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s2">"offset points"</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">"bottom"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">selbl</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">": COVID-Krankenhaus-PatientInnen inkl. ICU</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">nhosp</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">nhosp</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">nhosp</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.04</span><span class="p">)</span>
    <span class="c1">#display(growth.iloc[-1])</span>
    <span class="c1">#fig.text(</span>
    <span class="c1">#    0.5, 0.91,</span>
    <span class="c1">#    "* Änderung berechnet als Verhältnis des aktuellen Tages zu 7 Tagen vorher",</span>
    <span class="c1">#    va="top",</span>
    <span class="c1">#    ha="center",</span>
    <span class="c1">#    fontsize="small");</span>
<span class="n">hosp_at</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
<span class="n">plthospchart</span><span class="p">(</span><span class="n">hosp_at</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">],</span>
             <span class="n">hosp_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">],</span>
             <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="s2">"Österreich"</span><span class="p">)</span>

<span class="c1">#mms_oo = hospfz.query("Bundesland == 'Oberösterreich'")</span>
<span class="c1">#plthospchart(mms_oo.set_index("Datum")["FZHosp"],  mms_oo.set_index("Datum")["FZICU"], AGES_STAMP, "Oberösterreich")</span>

<span class="n">mms_oo</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span>
<span class="n">plthospchart</span><span class="p">(</span><span class="n">mms_oo</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"FZHosp"</span><span class="p">],</span> <span class="n">mms_oo</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"FZICU"</span><span class="p">],</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="s2">"Wien"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_168_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_168_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=53527a78">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [146]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">progn</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/cov-prognose-nst.csv"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">)</span>
<span class="n">progn</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">progn</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">AGES_DATE_FMT</span><span class="p">)</span>
<span class="n">progn</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">progn</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">AGES_DATE_FMT</span><span class="p">)</span>
<span class="n">progn</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"FileDate"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">hdr</span> <span class="o">=</span> <span class="n">progn</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"^(.)$"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">"\1.0"</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"."</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">hdr</span> <span class="o">=</span> <span class="n">hdr</span><span class="o">.</span><span class="n">set_levels</span><span class="p">(</span>
    <span class="p">[</span><span class="n">hdr</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
        <span class="p">{</span><span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME_BY_BUNDESLAND</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="o">|</span> <span class="p">{</span><span class="s2">"Ö"</span><span class="p">:</span> <span class="s2">"Österreich"</span><span class="p">,</span> <span class="s2">"S"</span><span class="p">:</span> <span class="s2">"Salzburg"</span><span class="p">})</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span>
    <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">84</span><span class="p">]])</span>
<span class="n">progn</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">hdr</span>
<span class="n">progn</span> <span class="o">=</span> <span class="n">progn</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">ignore_index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s2">"VorHosp"</span><span class="p">,</span>
    <span class="n">var_name</span><span class="o">=</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"percentile"</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"percentile"</span><span class="p">],</span>
    <span class="n">append</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()[</span><span class="s2">"VorHosp"</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=b396d333">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [147]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_progn</span><span class="p">(</span><span class="n">selbl</span><span class="p">,</span> <span class="n">logscale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">progn_at</span> <span class="o">=</span> <span class="n">progn</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">selbl</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)</span>
    <span class="n">progn_at</span> <span class="o">=</span> <span class="n">progn_at</span><span class="p">[</span><span class="n">progn_at</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"FileDate"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2023-01-01"</span><span class="p">)]</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">fd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">progn_at</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"FileDate"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
        <span class="n">progn_at0</span> <span class="o">=</span> <span class="n">progn_at</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"FileDate"</span><span class="p">)</span>
        <span class="c1">#display(progn_at0.index.levels[progn_at0.index.names.index("Datum")])</span>
        <span class="c1">#display(progn_at0.xs(16, level="percentile"))</span>
        <span class="n">p16</span> <span class="o">=</span>  <span class="n">progn_at0</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"percentile"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
           <span class="n">p16</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="n">p16</span><span class="p">,</span>
            <span class="n">progn_at0</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"percentile"</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">.3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"68%-Konfidenzintervall"</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">progn_at0</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"percentile"</span><span class="p">),</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">"Prognosemittelwert"</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">progn_at_dt</span> <span class="o">=</span> <span class="n">progn_at</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">hospfz_at</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">hospfz_at</span><span class="p">[</span><span class="n">hospfz_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">progn_at_dt</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"FZHosp"</span><span class="p">],</span>
        <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"Tatsächlich gemeldet"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">logscale</span><span class="p">:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">lognote</span> <span class="o">=</span> <span class="s2">" (logarithmisch)"</span> <span class="k">if</span> <span class="n">logscale</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"PatientInnen"</span> <span class="o">+</span> <span class="n">lognote</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">: COVID-PatientInnen auf Normalstation: Real vs. Prognosekonsortium</span><span class="si">{</span><span class="n">lognote</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">))</span>
<span class="n">plt_progn</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span>
<span class="n">plt_progn</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">logscale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_170_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_170_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=56ee58fc">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [148]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">active_cases</span><span class="p">(</span><span class="n">fs_at</span><span class="p">):</span>
    <span class="n">ngeheilt</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlGeheiltSum"</span><span class="p">]</span>
    <span class="n">aktiv</span> <span class="o">=</span> <span class="n">ngeheilt</span> <span class="o">-</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">aktiv</span>

<span class="k">def</span> <span class="nf">plt_hosprate</span><span class="p">(</span><span class="n">fs_at</span><span class="p">,</span> <span class="n">stamp</span><span class="p">):</span>
    <span class="n">shift</span> <span class="o">=</span> <span class="o">-</span><span class="mi">0</span><span class="c1">#-19</span>
    <span class="n">hosp_sum</span> <span class="o">=</span> <span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">])</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">shift</span><span class="p">)</span>
    <span class="n">inz14</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">hosprate</span> <span class="o">=</span> <span class="n">hosp_sum</span> <span class="o">/</span> <span class="n">active_cases</span><span class="p">(</span><span class="n">fs_at</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">rwidth</span> <span class="o">=</span> <span class="mi">14</span>
    <span class="n">gencnt</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlGeheiltSum"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="c1">#dcnt = erase_outliers(fs_at["AnzahlTot"]).rolling(rwidth).sum()</span>
    <span class="c1">#deathrate = dcnt / (gencnt + dcnt)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">hosprate</span><span class="o">.</span><span class="n">var</span><span class="p">())</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="c1">#ax2.set_facecolor("none")</span>
    <span class="c1">#ax.set_facecolor("none")</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">hosprate</span><span class="p">,</span>
             <span class="n">label</span><span class="o">=</span><span class="s2">"Anteil Hospitalisierter an aktiven Fällen: "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">hosprate</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">".2n"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"%"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1">#ax2.plot(fs_at["Datum"], deathrate, label="Geschätzte Fallsterblichkeit", lw=1, color="k")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">hosp_sum</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Hospitalisierte: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">hosp_sum</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])))</span>
    <span class="n">active</span> <span class="o">=</span> <span class="n">active_cases</span><span class="p">(</span><span class="n">fs_at</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">active</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C4"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Aktive  Fälle: "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">active</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">","</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">"."</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inz14</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C5"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"14-T-Inz.: "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">inz14</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">","</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">"."</span><span class="p">))</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=0.1)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">": Hospitalisierungsanteil an aktiven Fällen, logarithmisch"</span> <span class="o">+</span> <span class="n">stamp</span><span class="p">,</span>
                 <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Personen"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Hospitalisierungsrate"</span><span class="p">)</span>

<span class="c1">#plt_hosprate(fs[fs["Datum"] &gt;= mms.iloc[0]["Datum"]].query("Bundesland == 'Österreich'"), AGES_STAMP)</span>
<span class="n">fsh0</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">plt_hosprate</span><span class="p">(</span><span class="n">fsh0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">),</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
<span class="c1">#print(fsh0.iloc[-1])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>0.001983372360859888
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_171_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e3c861f0">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [149]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_hosprate2</span><span class="p">(</span><span class="n">fs_at</span><span class="p">,</span> <span class="n">stamp</span><span class="p">):</span>
    <span class="n">rwidth</span> <span class="o">=</span> <span class="mi">14</span>
    <span class="n">hosp_sum</span> <span class="o">=</span> <span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">])</span>
    <span class="c1">#hamin = hosp_sum.iloc[-100:].argmin()</span>
    <span class="n">halflife</span><span class="o">=</span><span class="mi">8</span>
    <span class="n">inz14</span> <span class="o">=</span> <span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">halflife</span><span class="o">=</span><span class="n">halflife</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
             <span class="c1">#.rolling(20, win_type="exponential").sum(tau=1)</span>
            <span class="p">)</span>
             <span class="c1">#.rolling(7).mean() #sym=False, center=8, tau=-(rwidth-1) / np.log(0.01)</span>
    <span class="c1">#iamin = inz14.iloc[-100:].argmin()</span>
    <span class="n">shift</span> <span class="o">=</span> <span class="mi">0</span><span class="c1">#7#iamin - hamin</span>
    <span class="n">hosp_sum</span> <span class="o">=</span> <span class="n">hosp_sum</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">shift</span><span class="p">)</span>
    <span class="n">hosprate</span> <span class="o">=</span> <span class="n">hosp_sum</span> <span class="o">/</span> <span class="n">inz14</span>
    <span class="c1">#dcnt = erase_outliers(fs_at["AnzahlTot"]).rolling(rwidth).sum()</span>
    <span class="c1">#deathrate = dcnt / (gencnt + dcnt)</span>
    <span class="c1">#print(shift, hosprate.var(), fs_at.iloc[-100:].iloc[hamin]["Datum"], fs_at.iloc[-100:].iloc[iamin]["Datum"])</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="c1">#ax2.set_facecolor("none")</span>
    <span class="c1">#ax.set_facecolor("none")</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">hosprate</span><span class="p">,</span>
             <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Geschätzte Fallhospitalisierungsrate: "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">hosprate</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hosprate</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">".2n"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"%"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1">#ax2.plot(fs_at["Datum"], deathrate, label="Geschätzte Fallsterblichkeit", lw=1, color="k")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">hosp_sum</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Hospitalisierte: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">hosp_sum</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">hosp_sum</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()])))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_at</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"r"</span><span class="p">)</span>

    <span class="n">active</span> <span class="o">=</span> <span class="n">active_cases</span><span class="p">(</span><span class="n">fs_at</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inz14</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C4"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Inzidenz-7T, ewm(halflife=</span><span class="si">{</span><span class="n">halflife</span><span class="si">}</span><span class="s2">): "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">inz14</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">","</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">"."</span><span class="p">))</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=0.1)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">": Geschätzte Fall-Hospitalisierungsrate, logarithmisch"</span> <span class="o">+</span> <span class="n">stamp</span><span class="p">,</span>
                 <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Personen"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Hospitalisierungsrate"</span><span class="p">)</span>
<span class="c1">#plt_hosprate(fs[fs["Datum"] &gt;= mms.iloc[0]["Datum"]].query("Bundesland == 'Österreich'"), AGES_STAMP)</span>
<span class="n">plt_hosprate2</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">),</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_172_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=5f37718b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [150]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_rate</span><span class="p">(</span><span class="n">n_num</span><span class="p">,</span> <span class="n">s_num</span><span class="p">,</span> <span class="n">n_denom</span><span class="p">,</span> <span class="n">s_denom</span><span class="p">,</span> <span class="n">stamp</span><span class="p">):</span>
    <span class="n">shift</span> <span class="o">=</span> <span class="o">-</span><span class="mi">0</span><span class="c1">#-19</span>
    
    <span class="c1">#inz14 = fs_at["AnzahlFaelle"].rolling(14).sum()</span>
    <span class="n">rate</span> <span class="o">=</span> <span class="n">s_num</span> <span class="o">/</span> <span class="n">s_denom</span>
    <span class="c1">#dcnt = erase_outliers(fs_at["AnzahlTot"]).rolling(rwidth).sum()</span>
    <span class="c1">#deathrate = dcnt / (gencnt + dcnt)</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="c1">#ax2.set_facecolor("none")</span>
    <span class="c1">#ax.set_facecolor("none")</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rate</span><span class="p">,</span>
             <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">n_num</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">n_denom</span><span class="si">}</span><span class="s2">: "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">rate</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">rate</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">".2n"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"%"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1">#ax2.plot(fs_at["Datum"], deathrate, label="Geschätzte Fallsterblichkeit", lw=1, color="k")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">s_denom</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">n_denom</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">s_denom</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">s_denom</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()])</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">s_num</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">n_num</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">s_num</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">s_num</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()])</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="c1">#active = active_cases(fs_at)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">s_num</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=0.1)</span>
    <span class="c1">#ax.set_ylim(bottom=max(20, ax.get_ylim()[0]))</span>
    <span class="c1">#ax2.set_ylim(bottom=0.03)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">n_num</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">n_denom</span><span class="si">}</span><span class="s2">"</span> <span class="o">+</span> <span class="n">stamp</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Personen"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Quote"</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">plt_rates0</span><span class="p">():</span>
    <span class="n">hosp_at</span> <span class="o">=</span> <span class="n">hospfz</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="c1">#plt_rate("Auf ICU", mms_at["FZICU"], "Hospitalisierte ges.", mms_at["FZHosp"] + mms_at["FZICU"], mms_stamp)</span>
    
    <span class="n">plt_rate</span><span class="p">(</span><span class="s2">"Auf ICU 7-T-Schnitt"</span><span class="p">,</span> <span class="n">hosp_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> 
             <span class="s2">"Hospitalisierte 7-T-Schnitt"</span><span class="p">,</span> <span class="p">(</span><span class="n">hosp_at</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+</span> <span class="n">hosp_at</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">])</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
    <span class="c1">#plt_rate("Tote (14 Tage-Schnitt)", mms_at["AnzahlTot"].rolling(14).mean(), "Hospitalisierte", mms_at["FZICU"] + mms_at["FZHosp"], mms_stamp)</span>
    
    <span class="c1">#plt_hosprate(fs[fs["Datum"] &gt;= mms.iloc[0]["Datum"]].query("Bundesland == 'Österreich'"), AGES_STAMP)</span>
    
<span class="n">plt_rates0</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_173_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=632d9d90">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [151]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_icu_stack_bl</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hbl</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">showmin</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">bltitle</span><span class="p">(</span><span class="n">bl</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span>
        <span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">],</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">],</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">"Belegt (Nicht-COVID)"</span><span class="p">,</span> <span class="s2">"Mit COVID-PatientIn belegt"</span><span class="p">],</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">baseline</span><span class="o">=</span><span class="s2">"zero"</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="s2">"post"</span><span class="p">,</span>
        <span class="n">zorder</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(*ax.get_ylim())</span>
    <span class="n">mval</span> <span class="o">=</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">bl</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"Salzburg"</span><span class="p">,</span> <span class="s2">"Österreich"</span><span class="p">):</span>
        <span class="n">lval</span> <span class="o">=</span> <span class="n">hbl</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">"2021-12-25"</span><span class="p">]),</span> <span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">lval</span> <span class="o">=</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="c1">#hbl["_m"] = mval</span>
    <span class="c1">#hbl["_l"] = lval</span>
    <span class="c1">#display(hbl.tail(5))</span>
    <span class="n">nccolor</span> <span class="o">=</span> <span class="s2">"C9"</span>
    <span class="n">mcolor</span> <span class="o">=</span> <span class="s2">"C3"</span>
    <span class="k">if</span> <span class="n">showmin</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">lval</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">nccolor</span><span class="p">,</span>
                   <span class="n">label</span><span class="o">=</span><span class="s2">"Bisheriger Tiefpunkt Nicht-Covid seit "</span> <span class="o">+</span> <span class="n">bdate</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">minreached</span> <span class="o">=</span> <span class="n">hbl</span><span class="p">[</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">lval</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">minreached</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">nccolor</span><span class="p">,</span>
                 <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Tiefpunkt Nicht-Covid erreicht"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
    <span class="n">maxreached</span> <span class="o">=</span> <span class="n">hbl</span><span class="p">[</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">mval</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">mval</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">mcolor</span><span class="p">,</span>
              <span class="n">label</span><span class="o">=</span><span class="s2">"Bisherige Maximalauslastung seit "</span> <span class="o">+</span> <span class="n">bdate</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">maxreached</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">mcolor</span><span class="p">,</span>
             <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Maximalauslastung erreicht"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
    <span class="c1">#display(hbl["IntensivBettenKapGes"].append(</span>
    <span class="c1">#    pd.Series([hbl["IntensivBettenKapGes"].iloc[-1]], index=[hbl.index[-1] + timedelta(1)], copy=True)</span>
    <span class="c1">#    ).tail(5))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span>
        <span class="c1">#.append(</span>
        <span class="c1">#pd.Series([hbl["IntensivBettenKapGes"].iloc[-1]], index=[hbl.index[-1] + timedelta(1)], copy=True))</span>
            <span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="s2">"steps-post"</span><span class="p">,</span>
            <span class="n">dash_joinstyle</span><span class="o">=</span><span class="s2">"miter"</span><span class="p">,</span>
            <span class="n">solid_joinstyle</span><span class="o">=</span><span class="s2">"miter"</span><span class="p">,</span>
           <span class="n">label</span><span class="o">=</span><span class="s2">"Not-Maximalkapazität lt. Bundesland"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.01</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span> <span class="o">+</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"FZICUFree"</span><span class="p">],</span>
           <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Ges.-Belegung + FZICUFree"</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="s2">"steps-post"</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
            <span class="n">dash_joinstyle</span><span class="o">=</span><span class="s2">"miter"</span><span class="p">,</span>
            <span class="n">solid_joinstyle</span><span class="o">=</span><span class="s2">"miter"</span><span class="p">,</span>
           <span class="p">)</span>
    <span class="c1">#ax.plot(hbl["IntensivBettenKapGes"] - hbl["FZICUFree"], color="grey", scalex=False, scaley=False)</span>
    <span class="c1">#ax.plot(hbl.index, (hbl["IntensivBettenKapGes"] - hbl["FZICUFree"]).rolling(7).mean(), color="k")</span>
    <span class="c1">#ax.set_axisbelow(False)</span>
    <span class="c1">#ax.legend(loc="upper right", ncol=2, frameon=False, bbox_to_anchor=(1, 1.2), columnspacing=1.1)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span>
        <span class="c1">#left=hbl.index[0],</span>
        <span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">ndays</span><span class="p">),</span>
        <span class="c1">#left=hbl.index[0],</span>
        <span class="n">right</span><span class="o">=</span><span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="c1">#ax.xaxis.set_minor_locator(matplotlib.dates.MonthLocator(interval=1))</span>
    <span class="c1">#ax.grid(axis="x", which="minor")</span>
    <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.dates.DateFormatter("%b"))</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Intensivstationen: Zusammensetzung der Belegung (ohne Wien)"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">bdate</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
    <span class="n">hbl</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#display(hbl)</span>
    <span class="c1">#fig = plt.figure()</span>
    <span class="c1">#fig.suptitle(bl)</span>
    <span class="c1">#ax.set_title(cov.SHORTNAME2_BY_BUNDESLAND[bl], x=0, fontsize=14)</span>
    <span class="n">plt_icu_stack_bl</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hbl</span><span class="p">,</span> <span class="n">bl</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Intensivbetten"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span><span class="c1">#figsize=(18, 9))</span>
<span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Österreich"</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">selbl</span> <span class="o">+</span> <span class="s2">": Intensivstationen: Zusammensetzung der Belegung"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt_icu_stack_bl</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">selbl</span><span class="p">),</span> <span class="n">selbl</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">selbl</span><span class="p">)),</span> <span class="n">showmin</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_174_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_174_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=4d176eb3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [152]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Intensivstationen: Anteilige Zusammensetzung der Belegung (ohne Wien)"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">hbl</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span>
        <span class="c1">#display(hbl)</span>
        <span class="c1">#fig = plt.figure()</span>
        <span class="c1">#fig.suptitle(bl)</span>
        <span class="c1">#ax.set_title(cov.SHORTNAME2_BY_BUNDESLAND[bl], x=-0.01, fontsize=14)</span>
        <span class="n">ges</span> <span class="o">=</span> <span class="n">hbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'IntensivBettenBelCovid19'</span><span class="p">]</span> <span class="o">/</span> <span class="n">hbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bltitle</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">hbl</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">'AnteilCov'</span><span class="p">]</span><span class="si">:</span><span class="s2">.0%</span><span class="si">}</span><span class="s2"> des Belags CoV (</span><span class="si">{</span><span class="n">ges</span><span class="si">:</span><span class="s2">.0%</span><span class="si">}</span><span class="s2"> ges.)"</span><span class="p">)</span>
        <span class="c1">#print(hbl.index)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span>
            <span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="n">hbl</span><span class="p">[</span><span class="s2">"AnteilCov"</span><span class="p">],</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"AnteilNichtCov"</span><span class="p">],</span>
            <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">"CoV-belegt"</span><span class="p">,</span> <span class="s2">"Anders genutzt"</span><span class="p">],</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="mi">2</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="s2">"post"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1">#ax.legend(loc="upper right", ncol=2, frameon=False, bbox_to_anchor=(1, 1.1), columnspacing=1.1)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="c1">#ax.set_ylabel("Intensivbetten")</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anteil an belegten Intensivbetten"</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">MonthLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span> <span class="n">right</span><span class="o">=</span><span class="n">hbl</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="c1">#ax.xaxis.set_minor_locator(matplotlib.dates.MonthLocator(interval=1))</span>
        <span class="c1">#ax.grid(axis="x", which="minor")</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">"%b"</span><span class="p">))</span>
        <span class="c1">#ax.axhline(hbl.iloc[-1]["AnteilCov"], ls="-", color="k", lw=2, zorder=20, snap=True, aa=False)</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">],</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper left"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_175_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=0c9f9e4b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [153]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fix</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1">#ax.plot(hosp.query("Bundesland == 'Österreich'").groupby("Datum")["IntensivBettenBelNichtCovid19"].sum())</span>
<span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Nicht-Covid-ICU-Belegung für Wien"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[153]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Text(0.5, 1.0, 'Nicht-Covid-ICU-Belegung für Wien (AGES Fr. 30.06.23)')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_176_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c487b32e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [154]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">qr</span> <span class="o">=</span> <span class="s2">"Bundesland not in ('Österreich', 'Wien')"</span>
<span class="c1">#qr = "Bundesland == 'Niederösterreich'"</span>
<span class="n">icufree</span> <span class="o">=</span> <span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">qr</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">icufree</span> <span class="o">-=</span> <span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">qr</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="c1">#icufree -= hosp.query(qr).groupby("Datum")["IntensivBettenBelNichtCovid19"].sum()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1">#ax.plot(icufree, label="Angeblich freie Betten", color="C2")</span>
<span class="c1">#ax.plot(hx.query("Bundesland == 'Österreich'")["IntensivBettenKapGes"].groupby("Datum").sum())</span>
<span class="c1">#ax.plot(hosp.query(qr).groupby("Datum")["IntensivBettenBelCovid19"].sum(), label="Belegt ‒ COVID-19", color="C1")</span>
<span class="c1">#ax.plot(hosp.query(qr).groupby("Datum")["IntensivBettenBelNichtCovid19"].sum(), label="Belegt ‒ Andere", color="C0")</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">qr</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Belegt ‒ Summe"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C4"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">qr</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">icufree</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="c1">#fig.legend(ncol=4, loc="upper center", bbox_to_anchor=(0.5, 0.95), frameon=False)</span>
<span class="c1">#fig.suptitle("Insgesamt belegte Intensivbetten in Niederösterreich" + AGES_STAMP, y=0.95)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Insgesamt belegte Intensivbetten in Österreich ohne Wien"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"(Y-Achse beginnt nicht bei 0!)"</span><span class="p">)</span>
<span class="c1">#ax.set_ylim(bottom=800, top=1300)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[154]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Text(0.5, 1.0, '(Y-Achse beginnt nicht bei 0!)')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_177_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=30eabe04">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [155]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">lasticu</span> <span class="o">=</span> <span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">qr</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lasticu</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">hosp</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">qr</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"IntensivBettenBelGes &gt; </span><span class="si">{</span><span class="n">lasticu</span><span class="si">}</span><span class="s2">"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>1015
</pre>
</div>
</div>
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[155]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>753</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c8090557">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [156]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)[</span><span class="s2">"IntensivBettenBelGes"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="o">/</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">"Verhältnis Nicht-Covid : Kapazität"</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich ohne Wien: Nicht-Covid-ICU-Auslastung in %"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[156]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>&lt;matplotlib.legend.Legend at 0x19880b9e150&gt;</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_179_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=9b8dbc21">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [157]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
    <span class="s2">"Intensivstationen: Mit CoV belegte Betten / Insgesamt belegte (ohne Wien; 7-Tage-Schnitt)"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>

<span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">hx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Bundesland"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
    <span class="n">hbl</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span>
    <span class="c1">#display(hbl)</span>
    <span class="c1">#fig = plt.figure()</span>
    <span class="c1">#fig.suptitle(bl)</span>
    <span class="c1">#ax.set_title(cov.SHORTNAME2_BY_BUNDESLAND[bl], x=-0.01, fontsize=14)</span>
    <span class="c1">#ges = hbl.iloc[-1]['IntensivBettenBelCovid19'] / hbl.iloc[-1]["IntensivBettenKapGes"]</span>
    <span class="n">use</span> <span class="o">=</span> <span class="p">(</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span> <span class="o">+</span> <span class="n">hbl</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]))</span>
    <span class="n">use7</span> <span class="o">=</span> <span class="n">use</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="mi">2000</span>
    <span class="n">use7</span> <span class="o">=</span> <span class="n">use7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:]</span>
    <span class="n">use</span> <span class="o">=</span> <span class="n">use</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bltitle</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span><span class="si">}</span><span class="s2">: zuletzt </span><span class="si">{</span><span class="n">use</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.0%</span><span class="si">}</span><span class="s2"> CoV"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.96</span><span class="p">)</span>
    <span class="c1">#print(hbl.index)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">use7</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">use</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">use7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"skyblue"</span><span class="p">)</span>
    <span class="c1">#ax.set_axisbelow(False)</span>
    <span class="c1">#ax.legend(loc="upper right", ncol=2, frameon=False, bbox_to_anchor=(1, 1.1), columnspacing=1.1)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"% Belegung CoV"</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">MonthLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">1</span> <span class="k">if</span> <span class="n">ndays</span> <span class="o">&lt;</span> <span class="mi">400</span> <span class="k">else</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">use</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">right</span><span class="o">=</span><span class="n">use</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
    <span class="c1">#ax.xaxis.set_minor_locator(matplotlib.dates.MonthLocator(interval=1))</span>
    <span class="c1">#ax.grid(axis="x", which="minor")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">"%b %y"</span><span class="p">))</span>
    <span class="c1">#ax.axhline(hbl.iloc[-1]["AnteilCov"], ls="--", color="skyblue")</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1">#ax.set_yticks([0.15, 0.25], minor=True)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="c1">#if ax is axs.flat[0]:</span>
    <span class="c1">#    fig.legend(loc="upper left", frameon=False, bbox_to_anchor=(0.8, 0.94));</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"green"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"yellow"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"orange"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="c1">#axs.flat[-1].set_ylim(*ylim)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_180_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=6bcadfd5">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [158]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">hospfs</span> <span class="o">=</span> <span class="n">hx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">hospfs</span> <span class="o">=</span> <span class="n">hospfs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)</span>
<span class="n">hospfs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hospfs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">bltitle</span><span class="p">)</span>

<span class="c1">#hosp_corr["Datum"] -= timedelta(1)</span>
<span class="c1">#hospfs = (hosp_corr.reset_index(drop=True).set_index(["Datum", "Bundesland", "BundeslandID"])</span>
<span class="c1">#                          .drop(columns=["TestGesamt"])</span>
<span class="c1">#                          .join(fs.reset_index(drop=True).set_index(["Datum", "Bundesland", "BundeslandID"]))</span>
<span class="c1">#                           .reset_index()</span>
<span class="c1">#          .copy())</span>
<span class="c1">#hospfs = cov.filterlatest(hospfs) #hospfs[hospfs["Datum"] == "2021-07-20"]</span>
<span class="n">hospfs</span><span class="p">[</span><span class="s2">"icu"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hospfs</span><span class="p">[</span><span class="s2">"IntensivBettenBelCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hospfs</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
<span class="n">hospfs</span><span class="p">[</span><span class="s2">"nc_icu"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hospfs</span><span class="p">[</span><span class="s2">"IntensivBettenBelNichtCovid19"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hospfs</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
<span class="n">hospfs</span><span class="p">[</span><span class="s2">"icu_cap"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hospfs</span><span class="p">[</span><span class="s2">"IntensivBettenKapGes"</span><span class="p">]</span> <span class="o">/</span> <span class="n">hospfs</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
<span class="n">l_hospfs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">hospfs</span><span class="p">)</span>

<span class="c1">#display(cov.filterlatest(fs)[["Datum", "Bundesland", "BundeslandID", "icu", "FZICU", "AnzEinwohner"]])</span>
<span class="c1">#display(cov.filterlatest(hosp)[["Datum", "Bundesland", "BundeslandID", "AnteilCov"]])</span>
<span class="c1">#hospfs["AnteilCov"] = hospfs["IntensivBettenBelCovid19"] / hospfs["IntensivBettenBelGes"]</span>

<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">l_hospfs</span><span class="p">,</span>
                     <span class="n">x</span><span class="o">=</span><span class="s2">"nc_icu"</span><span class="p">,</span>
                     <span class="n">y</span><span class="o">=</span><span class="s2">"icu"</span><span class="p">,</span>
                     <span class="n">scatter</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">MARKER_SEQ</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">l_hospfs</span><span class="p">,</span>
                         <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
                         <span class="n">style</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
                         <span class="n">markers</span><span class="o">=</span><span class="n">markers</span><span class="p">[:</span><span class="n">l_hospfs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()],</span>
                         <span class="n">x</span><span class="o">=</span><span class="s2">"nc_icu"</span><span class="p">,</span>
                         <span class="n">y</span><span class="o">=</span><span class="s2">"icu"</span><span class="p">,</span>
                         <span class="n">s</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
                         <span class="n">zorder</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="n">bl</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">markers</span><span class="p">,</span> <span class="n">l_hospfs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())):</span>
        <span class="n">bhospfs</span> <span class="o">=</span> <span class="n">hospfs</span><span class="p">[</span><span class="n">hospfs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span>
        <span class="n">nrechist</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bhospfs</span><span class="p">[</span><span class="s2">"nc_icu"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">nrechist</span><span class="p">:],</span> <span class="n">bhospfs</span><span class="p">[</span><span class="s2">"icu"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">nrechist</span><span class="p">:],</span>
                <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span>
                <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">markeredgewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="sa">f</span><span class="s2">"C</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">nbackhist</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bhospfs</span><span class="p">[</span><span class="s2">"nc_icu"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">nrechist</span> <span class="o">-</span> <span class="n">nbackhist</span><span class="p">:</span><span class="o">-</span><span class="n">nrechist</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
                <span class="n">bhospfs</span><span class="p">[</span><span class="s2">"icu"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">nrechist</span> <span class="o">-</span> <span class="n">nbackhist</span><span class="p">:</span><span class="o">-</span><span class="n">nrechist</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
            <span class="n">lw</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sa">f</span><span class="s2">"C</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#lims = ax.get_ylim()</span>



    <span class="c1">#minlim = min(ax.get_xlim()[0], ax.get_ylim()[0])</span>
    <span class="c1">#maxlim = max(ax.get_xlim()[1], ax.get_ylim()[1])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1">#ax.set_xlim(minlim, maxlim)</span>
    <span class="c1">#ax.set_ylim(minlim, maxlim)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="c1">#ax.plot([0, 100], [0, 100], color="grey")</span>
    <span class="c1">#ax.plot([0, 100], [0, 150], color="grey")</span>
    <span class="c1">#ax.plot([0, 100/3], [0, 100*2/3], color="grey")</span>
    <span class="c1">#ax.plot([0, 100/10], [0, 100*9/10], color="grey")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"orange"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"yellow"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"lightgreen"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="c1">#cov.set_percent_opts(ax, freq=0.05)</span>
    <span class="c1">#ax.set_ylabel("Anteil mit COVID-Patienten belegter Betten an belegten Betten")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Ohne COVID auf der Intensivstation pro 100.000 Einwohner"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Mit COVID auf der Intensivstation pro 100.000 Einwohner"</span><span class="p">);</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Intensivstation: Belag ohne vs. mit COVID"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.02</span><span class="p">,</span> <span class="s2">"(Für Wien hat die AGES keine Daten zur Nicht-Covid-Belegung)"</span><span class="p">,</span>
                   <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"center right"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.16</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=28fce84d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Todesf%C3%A4lle">Todesfälle<a class="anchor-link" href="#Todesf%C3%A4lle">¶</a></h1>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=9df24162">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [159]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">stat_at_yr_d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/statat_yearly_covid_deaths_pr.csv"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s2">","</span><span class="p">,</span>
                           <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="s2">"Jahr"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">plt_d_yrcmp_1</span><span class="p">():</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">2022</span>
    <span class="n">bl</span> <span class="o">=</span> <span class="s2">"Österreich"</span>
    <span class="n">emsd</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">' and Datum.dt.year == </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">SRC_EMS</span> <span class="o">=</span> <span class="s2">"EMS</span><span class="se">\n</span><span class="s2">"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span>
    <span class="n">SRC_STAT</span> <span class="o">=</span> <span class="s2">"Todesursachenstatistik</span><span class="se">\n</span><span class="s2">(Statistik Austria)"</span>
    <span class="n">pltfdata</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="n">emsd</span><span class="p">,</span> <span class="n">SRC_EMS</span><span class="p">,</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">an oder mit</span><span class="se">\"</span><span class="s2">"</span><span class="p">],</span>
            <span class="p">[</span><span class="n">stat_at_yr_d</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">y</span><span class="p">,</span> <span class="n">bl</span><span class="p">),</span> <span class="s2">"AnzahlTot"</span><span class="p">],</span> <span class="n">SRC_STAT</span><span class="p">,</span> <span class="s2">"Grundleiden (</span><span class="se">\"</span><span class="s2">an</span><span class="se">\"</span><span class="s2">)"</span><span class="p">],</span>
            <span class="p">[</span><span class="n">stat_at_yr_d</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">y</span><span class="p">,</span> <span class="n">bl</span><span class="p">),</span> <span class="s2">"AnzahlTotMit"</span><span class="p">],</span> <span class="n">SRC_STAT</span><span class="p">,</span> <span class="s2">"Begleiterkrankung (relevantes </span><span class="se">\"</span><span class="s2">mit</span><span class="se">\"</span><span class="s2">)"</span><span class="p">]]</span>
    <span class="n">pltf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="n">pltfdata</span><span class="p">,</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"n"</span><span class="p">,</span> <span class="s2">"src"</span><span class="p">,</span> <span class="s2">"cat"</span><span class="p">])</span>
    <span class="n">display</span><span class="p">(</span><span class="n">pltf</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">pltf</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">"src"</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">"cat"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">"n"</span><span class="p">)[[</span><span class="s2">"Grundleiden (</span><span class="se">\"</span><span class="s2">an</span><span class="se">\"</span><span class="s2">)"</span><span class="p">,</span> <span class="s2">"Begleiterkrankung (relevantes </span><span class="se">\"</span><span class="s2">mit</span><span class="se">\"</span><span class="s2">)"</span><span class="p">,</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">an oder mit</span><span class="se">\"</span><span class="s2">"</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Verstorbene Personen"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">: COVID-Tote im Jahr </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> aus verschiedenen Quellen"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">plt_d_yrcmp_1</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>n      float64
src     object
cat     object
dtype: object</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_183_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c471e63c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [160]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># https://www.statistik.at/fileadmin/announcement/2022/05/20220303Todesursachen2021.pdf</span>
<span class="c1"># https://www.statistik.at/fileadmin/announcement/2023/03/20230315Todesursachen2022vorl.pdf</span>

<span class="k">def</span> <span class="nf">plt_d_yrcmp</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">bl</span><span class="p">):</span>
    <span class="n">pltargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">blq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">bl</span><span class="si">}</span><span class="s2">' and Datum.dt.year &lt; 2023"</span>
    <span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">blq</span> <span class="o">+</span> <span class="s2">" and Datum.dt.year &lt; 2022"</span><span class="p">)</span>
    <span class="n">agescnt</span> <span class="o">=</span> <span class="n">fs_oo</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"EMS Letzter Stand"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
    <span class="c1">#and FileDate.dt.month == 4 and FileDate.dt.day == 16' +</span>
        <span class="c1">#' and Datum.dt.year + 1 == FileDate.dt.year</span>
    <span class="n">ages_hist_oo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span>
        <span class="n">ages_hist</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">blq</span> <span class="o">+</span> <span class="s1">' and Datum.dt.year &lt;= 2021 and FileDate == "2022-4-19"'</span><span class="p">),</span>
        <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">blq</span> <span class="o">+</span> <span class="s2">"and Datum.dt.year &gt; 2021"</span><span class="p">)</span>
    <span class="p">])</span>
    <span class="n">ages1cnt</span> <span class="o">=</span> <span class="p">(</span><span class="n">ages_hist_oo</span>
                <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">ages_hist_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
                <span class="p">[</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">]</span>
                <span class="o">.</span><span class="n">sum</span><span class="p">()</span>
                <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"Letzter EMS-Stand vor Datenabgleich"</span><span class="p">))</span>
    <span class="n">agesstat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">ages1cnt</span><span class="p">,</span> <span class="n">agescnt</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'columns'</span><span class="p">)</span>
    
    <span class="c1">#agesdiff = (agesstat[agesstat.columns[1]] - agesstat[agesstat.columns[0]]).rename("diff")</span>
    <span class="c1">#agespdiff = (agesstat[agesstat.columns[1]] / agesstat[agesstat.columns[0]]).rename("pdiff")</span>
    <span class="c1">#display(agesdiff, agespdiff)</span>
    <span class="n">colors</span> <span class="o">=</span>  <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"Blues"</span><span class="p">,</span> <span class="n">n_colors</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">agesstat</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">agesstat</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="o">**</span><span class="n">pltargs</span><span class="p">)</span>
    <span class="n">agesstat</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">agesstat</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">**</span><span class="n">pltargs</span><span class="p">)</span>
    <span class="c1">#display(agesstat)</span>

    <span class="c1">#ax.set_title("Todesursachenstatistik (Statistik Austria)")</span>
    <span class="n">atstat0</span> <span class="o">=</span> <span class="n">stat_at_yr_d</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">bl</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)[[</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="s2">"AnzahlTotMit"</span><span class="p">]]</span>
    <span class="n">atstat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">atstat0</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'Todesursache: Grundleiden ("an")'</span><span class="p">,</span> <span class="s1">'Todesursache: Begleiterkrankung ("u.a. auch wegen")'</span><span class="p">],</span>
        <span class="n">index</span><span class="o">=</span><span class="n">atstat0</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Jahr"</span><span class="p">))</span>
    <span class="n">atstat</span><span class="p">[</span><span class="s1">'Todesursache: Grundleiden + relevante Begleiterkrankung'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">atstat</span><span class="p">[</span><span class="n">atstat</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="n">atstat</span><span class="p">[</span><span class="n">atstat</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
    <span class="n">atstat</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">atstat</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">bl</span><span class="p">,</span> <span class="n">atstat</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">agesstat</span><span class="p">))</span>
    <span class="n">atstat</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"Reds"</span><span class="p">,</span> <span class="n">n_colors</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="o">**</span><span class="n">pltargs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">agesstat</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">atstat</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">())</span> <span class="o">*</span> <span class="mf">1.125</span><span class="p">)</span>
    
    <span class="c1">#display(agescnt)</span>
    <span class="c1">#display(ages1cnt)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Jährliche COVID-19-Todesfälle in Österreich (separate Skala pro Bundesland)"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.05</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">,</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
    <span class="n">plt_d_yrcmp</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">bl</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelleft</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pad</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl Todesfälle"</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="s2">"AGES, Statistik Austria"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Burgenland'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>241.0</td>
<td>NaN</td>
<td>116</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>281.0</td>
<td>NaN</td>
<td>230</td>
<td>312.0</td>
</tr>
<tr>
<th>2020</th>
<td>189.0</td>
<td>NaN</td>
<td>174</td>
<td>204.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Kärnten'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>466.0</td>
<td>NaN</td>
<td>302</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>678.0</td>
<td>NaN</td>
<td>567</td>
<td>768.0</td>
</tr>
<tr>
<th>2020</th>
<td>635.0</td>
<td>NaN</td>
<td>532</td>
<td>644.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Niederösterreich'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>1364.0</td>
<td>NaN</td>
<td>1262</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>1735.0</td>
<td>NaN</td>
<td>1579</td>
<td>2079.0</td>
</tr>
<tr>
<th>2020</th>
<td>941.0</td>
<td>NaN</td>
<td>935</td>
<td>1067.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Oberösterreich'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>1005.0</td>
<td>NaN</td>
<td>680</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>1243.0</td>
<td>NaN</td>
<td>1167</td>
<td>1478.0</td>
</tr>
<tr>
<th>2020</th>
<td>1165.0</td>
<td>NaN</td>
<td>1187</td>
<td>1335.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Salzburg'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>357.0</td>
<td>NaN</td>
<td>237</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>500.0</td>
<td>NaN</td>
<td>449</td>
<td>567.0</td>
</tr>
<tr>
<th>2020</th>
<td>365.0</td>
<td>NaN</td>
<td>348</td>
<td>414.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Steiermark'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>968.0</td>
<td>NaN</td>
<td>628</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>1135.0</td>
<td>NaN</td>
<td>1096</td>
<td>1346.0</td>
</tr>
<tr>
<th>2020</th>
<td>1204.0</td>
<td>NaN</td>
<td>1391</td>
<td>1563.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Tirol'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>425.0</td>
<td>NaN</td>
<td>315</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>409.0</td>
<td>NaN</td>
<td>352</td>
<td>483.0</td>
</tr>
<tr>
<th>2020</th>
<td>593.0</td>
<td>NaN</td>
<td>522</td>
<td>673.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Vorarlberg'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>223.0</td>
<td>NaN</td>
<td>149</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>224.0</td>
<td>NaN</td>
<td>205</td>
<td>244.0</td>
</tr>
<tr>
<th>2020</th>
<td>270.0</td>
<td>NaN</td>
<td>233</td>
<td>286.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Wien'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>1267.0</td>
<td>NaN</td>
<td>1223</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>1652.0</td>
<td>NaN</td>
<td>1670</td>
<td>1934.0</td>
</tr>
<tr>
<th>2020</th>
<td>1115.0</td>
<td>NaN</td>
<td>1134</td>
<td>1344.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>'Österreich'</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Todesursache: Grundleiden ("an")</th>
<th>Todesursache: Grundleiden + relevante Begleiterkrankung</th>
<th>Letzter EMS-Stand vor Datenabgleich</th>
<th>EMS Letzter Stand (AGES Fr. 30.06.23)</th>
</tr>
<tr>
<th>Jahr</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2022</th>
<td>6316.0</td>
<td>8055.0</td>
<td>4912</td>
<td>NaN</td>
</tr>
<tr>
<th>2021</th>
<td>7857.0</td>
<td>9049.0</td>
<td>7315</td>
<td>9211.0</td>
</tr>
<tr>
<th>2020</th>
<td>6477.0</td>
<td>7859.0</td>
<td>6456</td>
<td>7530.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_184_20.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=3a1a5808">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [161]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt;= '2023-01-01' and Bundesland == 'Österreich'"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[161]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>889</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=d92c3d92">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [162]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">draw_simple_dead_by_mdate</span><span class="p">(</span><span class="n">bl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">make_wowg_diag</span><span class="p">(</span>
            <span class="n">ages1m</span><span class="p">[</span><span class="n">ages1m</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s2">"Verstorbene nach Meldedatum"</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span>
        <span class="n">ccol</span><span class="o">=</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"COVID-Tote"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span><span class="p">,</span> <span class="n">pltdg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltg7</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mmx</span><span class="p">[</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">MIDRANGE_NDAYS</span><span class="p">:],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"_"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">bl</span> <span class="o">+</span> <span class="s2">": COVID-Tote nach Meldedatum"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">draw_simple_dead_by_mdate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=ee9edad6">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [163]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">AT_DEAD_PERIOD_STARTS</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">"Wildtyp bis Herbst"</span><span class="p">:</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">],</span>
   <span class="s2">"Wildtyp ab Herbst"</span><span class="p">:</span>  <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">'2020-09-01'</span><span class="p">),</span>
   <span class="s2">"Alpha"</span><span class="p">:</span>  <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">'2021-03-01'</span><span class="p">),</span>
   <span class="s2">"Delta"</span><span class="p">:</span>  <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">'2021-08-01'</span><span class="p">),</span>
   <span class="s2">"Omikron BA.1&amp;2 (unvollst.)"</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">'2022-01-15'</span><span class="p">),</span>
   <span class="s2">"Omikron BA.5 (unvollst.)"</span><span class="p">:</span>  <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">'2022-06-20'</span><span class="p">),</span>
   <span class="s2">"Suppe, XBB (unvollst.)"</span><span class="p">:</span>  <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">'2022-11-15'</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=caa4c274">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [164]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">sharey</span><span class="o">=</span><span class="kc">False</span>
<span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span>

<span class="n">mms0</span> <span class="o">=</span> <span class="n">mms</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="c1">#.query("Datum &lt; '2022-10-01'")</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">mms0</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="mi">14</span><span class="p">):</span>
    <span class="n">mms0</span><span class="p">[</span><span class="s2">"Tote_s14"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">mms0</span><span class="p">[</span><span class="s2">"Tote_s14c"</span><span class="p">]</span> <span class="o">=</span> <span class="n">erase_outliers</span><span class="p">(</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"zero"</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">mms0</span><span class="p">[</span><span class="s2">"Tote_pp100k"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="s2">"Tote_s14"</span><span class="p">]</span> <span class="o">/</span> <span class="n">mms0</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
<span class="n">mms0</span><span class="p">[</span><span class="s2">"Tote_pp100kc"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="s2">"Tote_s14c"</span><span class="p">]</span> <span class="o">/</span> <span class="n">mms0</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
<span class="n">mms0</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">mmx</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">ndays</span><span class="p">)]</span>


<span class="k">def</span> <span class="nf">pltdeadtab</span><span class="p">(</span><span class="n">cleaned</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="n">sharey</span><span class="p">)</span>
    <span class="c1">#display(g.axes)</span>
    <span class="c1">#ndays =  len(mms0.query("Bundesland == 'Österreich'"))</span>
    <span class="n">style</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span> <span class="k">if</span> <span class="n">ndays</span> <span class="o">&lt;</span> <span class="mi">60</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="c1">#print(k)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote/100.000"</span> <span class="k">if</span> <span class="n">sharey</span> <span class="k">else</span> <span class="s2">"COVID-Tote"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
        <span class="n">ages1m_oo</span> <span class="o">=</span> <span class="n">ages1m</span><span class="p">[</span><span class="n">ages1m</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">k</span><span class="p">]</span><span class="c1">#.query("Datum &lt; '2022-10-01'")</span>
        <span class="n">mms0_oo</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">k</span><span class="p">]</span><span class="c1">#.query("Datum &lt; '2022-10-01'")</span>
        <span class="n">mmx_oo</span> <span class="o">=</span> <span class="n">mmx</span><span class="p">[</span><span class="n">mmx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">k</span><span class="p">]</span><span class="c1">#.query("Datum &lt; '2022-10-01'")</span>
        <span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">k</span><span class="p">]</span><span class="c1">#.query("Datum &lt; '2022-10-01'")</span>

        <span class="c1">#if ax in axs.T[0] or not sharey:</span>
            <span class="c1">#ax.set_ylim(top=fs_oo["AnzahlTot"].rolling(14).sum()[-100:].max() * 2)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sharey</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">pad</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">min_n_ticks</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
            
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">fs_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span>
            <span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span>
             <span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100_000</span> <span class="k">if</span> <span class="n">sharey</span> <span class="k">else</span> <span class="mi">1</span><span class="p">))</span>
            <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"AGES nach Todesdatum"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"s"</span> <span class="k">if</span> <span class="n">style</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"marker"</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
            
        <span class="n">col</span> <span class="o">=</span> <span class="s2">"Tote_pp100k"</span> <span class="k">if</span> <span class="n">sharey</span> <span class="k">else</span> <span class="s2">"Tote_s14"</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">col</span> <span class="o">+</span> <span class="s2">"c"</span> <span class="k">if</span> <span class="n">cleaned</span> <span class="k">else</span> <span class="n">col</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">mms0_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span>
            <span class="n">mms0_oo</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"9:30-Bundesländermeldung"</span><span class="p">,</span> <span class="o">**</span><span class="n">style</span><span class="p">)</span>
        
        <span class="n">basedead</span> <span class="o">=</span> <span class="n">ages1m_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">cleaned</span><span class="p">:</span>
            <span class="n">basedead</span> <span class="o">=</span> <span class="n">erase_outliers</span><span class="p">(</span><span class="n">basedead</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"zero"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">ages1m_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span>
            <span class="p">(</span><span class="n">basedead</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span>
             <span class="p">(</span><span class="n">ages1m_oo</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100_000</span> <span class="k">if</span> <span class="n">sharey</span> <span class="k">else</span> <span class="mi">1</span><span class="p">))</span>
            <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"AGES-Meldung"</span><span class="p">,</span> <span class="o">**</span><span class="n">style</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">haveages</span><span class="p">:</span>
            <span class="n">basedead</span> <span class="o">=</span> <span class="n">mmx_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">mmx_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span>
                <span class="p">(</span><span class="n">basedead</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span>
                 <span class="p">(</span><span class="n">mmx_oo</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100_000</span> <span class="k">if</span> <span class="n">sharey</span> <span class="k">else</span> <span class="mi">1</span><span class="p">))</span>
                <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:],</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"AGES-Meldung ohne Alt-Nachmeldungen"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="o">**</span><span class="n">style</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
        <span class="c1">#labelend2(ax, mms0, "Tote_pp100k")</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mmx_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:])</span>
            <span class="c1">#ax.tick_params(labelsize="x-small", axis="x")</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">sharey</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">min_n_ticks</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1">#ax.set_title("Tote pro Woche pro 100.000 Einwohner je Bundesland lt. Morgenmeldung bis " + mms["Datum"].iloc[-1].strftime("%a %x"))</span>
        <span class="c1">#cov.remove_labels_after(ax, "AnzEinwohner")</span>
        <span class="c1">#ax.legend(*sortedlabels(ax, mms0, "Tote_pp100k"))</span>
        <span class="c1">#ax.set_ylim(bottom=0)</span>
        <span class="c1">#ax.set_xlim(right=ax.get_xlim()[1] + 1)</span>
        <span class="c1">#cov.stampit(ax.figure, cov.DS_BMG)</span>
        <span class="c1">#display(cov.filterlatest(mms0).set_index("Bundesland")[["Tote_s7"]])</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.03</span> <span class="k">if</span> <span class="n">sharey</span> <span class="k">else</span> <span class="mf">0.15</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"COVID-Tote, 14-Tage-Summen"</span> <span class="o">+</span> <span class="p">(</span><span class="s2">", ausreißerbereinigt"</span> <span class="k">if</span> <span class="n">cleaned</span> <span class="k">else</span> <span class="s2">""</span><span class="p">))</span>
    
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="c1">#pltdeadtab()</span>
    <span class="n">pltdeadtab</span><span class="p">(</span><span class="n">cleaned</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=786e061a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [165]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">mark_periods</span><span class="p">(</span><span class="n">axs</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-08-01"</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-01-15"</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="n">MIDRANGE_NDAYS</span><span class="c1">#len(fs_at)</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="n">ages_old</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">)</span><span class="c1">#, vcol="AnzahlFaelle", name="Fälle")</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelrotation</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: COVID-Tote je Bundesland"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="c1">#ages_oldx = ages_hist[ages_hist["FileDate"] == ages_hist.iloc[-1]["FileDate"] - timedelta(21)].copy()</span>
    <span class="c1">#ages_oldx.rename(columns={"AnzahlTotTaeglich": "AnzahlTot"}, inplace=True)</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="n">ages_old7</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">)</span><span class="c1">#, vcol="AnzahlFaelle", name="Fälle")</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelrotation</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: COVID-Tote je Bundesland in 7 Tagen"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    
    <span class="c1">#mark_periods(axs.flat)</span>
    <span class="n">selbl</span> <span class="o">=</span> <span class="s1">'Österreich'</span>
    <span class="n">ag_q</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Altersgruppe != 'Alle' and Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff</span><span class="p">(</span>
        <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ag_q</span><span class="p">),</span>
        <span class="n">agd_sums_old</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ag_q</span><span class="p">),</span>
        <span class="s2">"Altersgruppe"</span><span class="p">,</span>
        <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">rwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">selbl</span> <span class="o">+</span> <span class="s2">": COVID-Tote je Altersgruppe"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff</span><span class="p">(</span>
        <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ag_q</span><span class="p">),</span>
        <span class="n">agd_sums_old7</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ag_q</span><span class="p">),</span>
        <span class="s2">"Altersgruppe"</span><span class="p">,</span>
        <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">rwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">selbl</span> <span class="o">+</span> <span class="s2">": COVID-Tote je Altersgruppe in 7 Tagen"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="c1">#agd_prebig = agd_hist[agd_hist["FileDate"] == pd.to_datetime("2022-04-19")].copy()</span>
    <span class="c1">#agd_postbig = agd_hist[agd_hist["FileDate"] == pd.to_datetime("2022-04-21")].copy()</span>
    <span class="c1">#agd_sums_prebig = enrich_agd(agd_prebig, None)</span>
    <span class="c1">#agd_sums_postbig = enrich_agd(agd_postbig, None)</span>
    <span class="c1">#plt_mdiff(agd_sums.query(ag_q), agd_sums_old.query(ag_q),</span>
    <span class="c1">#          "Altersgruppe",</span>
    <span class="c1">#          sharey=False, rwidth=1, logview=False, vcol="AnzahlFaelle", name="Fälle")</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=0c646663">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [166]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">ndays</span> <span class="o">=</span> <span class="mi">480</span>
    <span class="n">rwidth</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Österreich"</span>
    <span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">fs_oo</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs_oo</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs_oo</span><span class="c1">#.query("Datum &lt;= '2023-01-01'")</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">plt_mdiff1</span><span class="p">(</span>
        <span class="n">ax</span><span class="p">,</span>
        <span class="n">fs_oo</span><span class="p">,</span>
        <span class="c1">#ages_hist.query(f"Bundesland == '{selbl}' and FileDate == '2023-01-02'").rename(columns={"AnzahlTotTaeglich": "AnzahlTot"}).set_index("Datum"),</span>
        <span class="c1">#ages_old.query(f"Bundesland == '{selbl}' and Datum &lt;= '2023-01-01'").rename(columns={"AnzahlTotTaeglich": "AnzahlTot"}).set_index("Datum"),</span>
        <span class="n">ages_old7</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">})</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">),</span>
        <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlTot"</span><span class="p">,</span>
        <span class="n">rwidth</span><span class="o">=</span><span class="n">rwidth</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">ndays</span><span class="p">,</span> <span class="n">logview</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="c1">#, vcol="AnzahlFaelle", name="Fälle")</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs_oo</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="n">ndays</span><span class="p">:]</span> <span class="k">if</span> <span class="n">ndays</span> <span class="k">else</span> <span class="n">fs_oo</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#cov.set_logscale(ax)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"COVID-Tote in </span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2"> in 7 Tagen, </span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2">-Tage-Summen"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper right"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"COVID-Tote"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=005a99aa">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [167]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Österreich"</span>
<span class="n">pltcol</span> <span class="o">=</span> <span class="s2">"AnzahlTotSum"</span>
<span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
<span class="n">ages_old_oo</span> <span class="o">=</span> <span class="n">ages_old</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">#ax.plot(ages_old_oo["AnzahlTotSum"], label="Tote nach Todesdatum, AGES gestern", color="C4", ls="--")</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="n">pltcol</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Nach Meldedatum, 9:30-Krisenstabmeldung"</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ages1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="n">pltcol</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Nach Meldedatum, AGES"</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="n">pltcol</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Nach Todesdatum, AGES"</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
<span class="c1">#ax.plot(ems[ems["Bundesland"] == selbl].set_index("Datum")[pltcol], label="Nach Meldedatum, EMS", **args)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ages1m</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">: Insgesamt gezählte COVID-Tote"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="c1">#ax.set_ylabel("Anzahl")</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="c1">#ax.set_ylim(bottom=0)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="n">ages1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)[</span><span class="n">pltcol</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.96</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_191_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=58f5912c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [168]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">pltmdelay</span><span class="p">(</span><span class="n">selbl</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="mi">2000</span><span class="p">):</span>
    <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="c1">#" and Datum &lt;= '2023-01-01'"</span>
    <span class="c1">#ages40_at = ages_hist[ages_hist["FileDate"] == ages_hist["Datum"] + timedelta(22)].query(query)</span>
    <span class="n">ages9_at</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">ages1_at</span> <span class="o">=</span> <span class="n">ages1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">mms_at</span> <span class="o">=</span> <span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">mmx_at</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">ages1m_at</span> <span class="o">=</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">fsq</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">pltdata</span><span class="p">(</span><span class="n">xs</span><span class="p">):</span>
        <span class="n">xs</span> <span class="o">=</span> <span class="n">xs</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">"AnzahlTot7Tage"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">xs</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="s2">"AnzahlTot7Tage"</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="n">res</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">mmx_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">ndays</span><span class="p">)]</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">with_palette</span><span class="p">(</span><span class="s2">"plasma_r"</span><span class="p">,</span> <span class="n">n_colors</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pltdata</span><span class="p">(</span><span class="n">ages1_at</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Am Ende der jeweiligen Woche aktueller Stand"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span> <span class="k">if</span> <span class="n">ndays</span> <span class="o">&lt;=</span> <span class="mi">400</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pltdata</span><span class="p">(</span><span class="n">ages9_at</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Stand neun Tage nach Ende jeweiliger Woche"</span><span class="p">)</span>
        <span class="c1">#ax.plot(ages40_at["Datum"], ages40_at["AnzahlTot7Tage"], label="Stand 21 Tage nach dem Ende der jeweiligen Woche")</span>
        <span class="c1">#ax.plot(ages40_at["Datum"], ages40_at["AnzahlTot7Tage"], label="40 Tage nach dem Ende der jeweiligen Woche")</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pltdata</span><span class="p">(</span><span class="n">fsq</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Letzter Stand"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
        <span class="c1">#ax.plot(mms_at["Datum"], mms_at["AnzahlTot"].rolling(7).sum(), color=(0.2,)*3, lw=0.8,</span>
        <span class="c1">#        label="9:30-Meldung (nach Meldedatum)", ls="--")</span>
        <span class="c1">#cov.set_logscale(ax)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pltdata</span><span class="p">(</span><span class="n">ages1m_at</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">AnzahlTot7Tage</span><span class="o">=</span><span class="n">ages1m_at</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())),</span>
                <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,)</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">"AGES-Meldung (nach Meldedatum)"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">)</span>
        <span class="c1">#ax.plot(mmx_at["Datum"], mmx_at["AnzahlTot"].rolling(7).sum(), color=(0.6,)*3,</span>
        <span class="c1">#        label="Für Kennzahlen", ls=":")</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pltdata</span><span class="p">(</span><span class="n">fsq</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">autoyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
                          <span class="c1">#week_always=True</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1">#fig.autofmt_xdate()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote pro 7 Tage"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">fsq</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">": Meldeverzug bei Todesfällen (7-Tage-Summen)"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span>
                 <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
    <span class="c1">#ax.legend(fontsize="small", loc="upper right", bbox_to_anchor=(1.02, 1.02))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="c1">#ax.set_xlim(left=ages1_at["Datum"].iloc[0])</span>
    <span class="c1">#ax.set_xlim(left=pd.to_datetime("2022-01-01"), right=fs_at["Datum"].iloc[-1] + timedelta(7))</span>
    <span class="c1">#ax.set_ylim(top=500)</span>
    <span class="c1">#ax.set_ylim(bottom=9)</span>
    <span class="c1">#cov.set_logscale(ax)</span>
    <span class="k">return</span> <span class="n">ax</span>

<span class="n">pltmdelay</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span>
<span class="c1">#ax = pltmdelay("Tirol")</span>
<span class="c1">#ax.set_ylim(bottom=0.7, top=30)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">pltmdelay</span><span class="p">(</span><span class="s2">"Niederösterreich"</span><span class="p">)</span>
<span class="c1">#ax.set_ylim(bottom=0.7, top=200)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">pltmdelay</span><span class="p">(</span><span class="s2">"Wien"</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">pltmdelay</span><span class="p">(</span><span class="s2">"Oberösterreich"</span><span class="p">)</span>
<span class="c1">#ax.set_ylim(bottom=2, top=150)</span>
<span class="c1">#ax = pltmdelay("Vorarlberg")</span>
<span class="c1">#ax.set_ylim(bottom=0.7, top=30)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_192_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_192_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_192_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_192_3.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a3b2c34b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [169]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">calendar</span>

<span class="k">def</span> <span class="nf">plt_completeness_avg_by_delay</span><span class="p">(</span><span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">):</span>
    
    <span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Österreich"</span> <span class="c1"># Welches Bundesland wird betrachtet?</span>
    <span class="n">enddelay</span> <span class="o">=</span> <span class="mi">120</span> <span class="c1"># Wie viele Tage Nachmeldungen werden berücksichtigt?</span>
    <span class="n">weekday</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># Soll die Betrachtung auf einen bestimmten Berichts-Wochentag eingeschränkt werden?</span>
    <span class="n">mindead</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># Wie viele Tote müssen am Enddatum (enddelay) mindestens gezählt sein?</span>
    
    <span class="n">pi</span> <span class="o">=</span> <span class="mi">80</span> <span class="c1"># Wie viel Prozent der Daten soll die eingezeichnete Fläche einschließen?</span>

    
    <span class="n">hist_at</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Datum &gt;= '2022-05-01'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">hist_at</span> <span class="o">=</span> <span class="n">hist_at</span><span class="p">[</span>
        <span class="p">(</span><span class="n">hist_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">hist_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">])</span> <span class="o">&amp;</span>
        <span class="p">(</span><span class="n">hist_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">enddelay</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">hist_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"FileDate"</span><span class="p">])]</span>
    <span class="n">hist_at</span><span class="p">[</span><span class="s2">"delay"</span><span class="p">]</span> <span class="o">=</span> <span class="n">hist_at</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">hist_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span>

    <span class="n">curdead</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">hist_at</span><span class="p">[</span><span class="n">hist_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">enddelay</span><span class="p">)</span> <span class="o">==</span> <span class="n">hist_at</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]]</span>
        <span class="c1">#hist_at[hist_at["FileDate"] == hist_at.iloc[-1]["FileDate"]]</span>
        <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlTot7Tage"</span><span class="p">])</span>
    <span class="c1">#print(curdead.loc[pd.to_datetime("2021-07-23")])</span>
    <span class="c1">#delay = hist_at.index.get_level_values("FileDate") - hist_at.index.get_level_values("FileDate")[-1]</span>
    <span class="n">hist_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"FileDate"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#fs_at.set_index("Datum")["AnzahlTot"]</span>
    <span class="n">completeness</span> <span class="o">=</span> <span class="p">(</span><span class="n">hist_at</span><span class="p">[</span><span class="s2">"AnzahlTot7Tage"</span><span class="p">]</span> <span class="o">/</span> <span class="n">curdead</span><span class="p">)</span>
    <span class="n">hist_at</span><span class="p">[</span><span class="s2">"completeness"</span><span class="p">]</span> <span class="o">=</span> <span class="n">completeness</span>
    <span class="n">idxfrm</span> <span class="o">=</span> <span class="n">completeness</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="c1">#completeness = completeness[]</span>
        <span class="c1">#&amp; (idxfrm["Datum"] &gt;= pd.to_datetime("2022-01-01"))</span>
        <span class="c1">#&amp; (idxfrm.iloc[-1]["FileDate"] - idxfrm["FileDate"] &gt; timedelta(60))]</span>
    <span class="c1">#mcompl = completeness.groupby(hist_at["delay"]).mean()</span>
    <span class="n">sel</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">completeness</span><span class="p">)</span> <span class="o">&amp;</span>
        <span class="p">(</span><span class="n">hist_at</span><span class="p">[</span><span class="s2">"delay"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">enddelay</span><span class="p">))</span> <span class="o">&amp;</span>
        <span class="p">(</span><span class="n">hist_at</span><span class="p">[</span><span class="s2">"delay"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&amp;</span>
        <span class="p">((</span><span class="n">idxfrm</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">weekday</span> <span class="o">==</span> <span class="n">weekday</span><span class="p">)</span> <span class="k">if</span> <span class="n">weekday</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">True</span><span class="p">))</span>
    <span class="n">sel2</span> <span class="o">=</span> <span class="n">sel</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">curdead</span> <span class="o">&gt;=</span> <span class="n">mindead</span><span class="p">)</span>
    <span class="c1">#set(sel[sel].index.get_level_values("Datum")) - set(sel2[sel2].index.get_level_values("Datum"))</span>
    <span class="n">sel</span> <span class="o">=</span> <span class="n">sel2</span>
    <span class="c1">#display(completeness[sel].groupby("Datum").count().describe())</span>
    
    <span class="c1">#print(idxfrm["Datum"][sel].nunique(), idxfrm["FileDate"][sel].nunique())</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="n">hist_at</span><span class="p">[</span><span class="s2">"delay"</span><span class="p">][</span><span class="n">sel</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">days</span>
    <span class="c1">#dy = -np.log(1 - completeness[sel].clip(upper=1))</span>
    <span class="c1">#dy = 1 - completeness[sel].clip(upper=1)</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="n">completeness</span><span class="p">[</span><span class="n">sel</span><span class="p">]</span>
    <span class="n">hue</span> <span class="o">=</span> <span class="n">idxfrm</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">][</span><span class="n">sel</span><span class="p">]</span>
    <span class="c1">#display(hist_at[sel][(completeness &lt;= 0.65) &amp; (hist_at["delay"] &gt;= timedelta(85))].reset_index()["Datum"].dt.strftime("%x").unique())</span>

    <span class="n">pirem</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span> <span class="o">-</span> <span class="n">pi</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">dx</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">dy</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">errorbar</span><span class="o">=</span><span class="p">(</span><span class="s2">"pi"</span><span class="p">,</span> <span class="n">pi</span><span class="p">),</span> <span class="n">estimator</span><span class="o">=</span><span class="s2">"median"</span><span class="p">,</span>
        <span class="n">err_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">))</span>
    <span class="c1">#ax.set_ylim(*ax.get_ylim())</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">dx</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">dy</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">hue</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C4"</span><span class="p">,</span>
                 <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mf">0.05</span><span class="p">))</span>
    <span class="c1">#ax.set_ylim(bottom=0.44, top=1.06)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"both"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="c1">#cov.set_logscale(ax)</span>
    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.MultipleLocator(0.1))</span>
    <span class="c1">#cov.set_logscale(ax, axis="x")</span>
    <span class="c1">#ax.set_ylim(bottom=0.001)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Vollständigkeit 7-Tage-Summe COVID-Toter"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Tage nach Todesdatum"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">[</span><span class="n">selbl</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">": Meldevollständigkeit 7-Tage-Todesfälle im Vergleich zu </span><span class="si">{</span><span class="n">enddelay</span><span class="si">}</span><span class="s2"> Tage nach Todesdatum"</span>
        <span class="o">+</span> <span class="p">(</span><span class="s2">""</span> <span class="k">if</span> <span class="n">weekday</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">", nur "</span> <span class="o">+</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="n">weekday</span><span class="p">]),</span>
        <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ddrange</span> <span class="o">=</span> <span class="n">dy</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">nddate</span> <span class="o">=</span> <span class="n">ddrange</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
    <span class="c1">#display(</span>
    <span class="c1">#    hist_at.loc[sel &amp; (completeness &gt;= 0.85)][["AnzahlTot7Tage", "delay"]]</span>
    <span class="c1">#    #.query("Datum == '2021-11-15'")</span>
    <span class="c1">#    .groupby("Datum")["delay"].min().quantile(0.85 + 0.15/2)</span>
    <span class="c1">#)</span>
    <span class="n">mdat</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">hist_at</span><span class="p">[</span><span class="n">sel</span><span class="p">][</span><span class="s2">"completeness"</span><span class="p">]</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">upper</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">#display(mdat.to_numpy())</span>
    
    <span class="c1">#print(weibull_min.fit(mdat, floc=-1/enddelay, fscale=1/enddelay))</span>
    
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"Es werden nur 7-Tage-Abschnitte (inkl. überlappender) betrachtet,"</span>
        <span class="sa">f</span><span class="s2">" deren Endsumme nach </span><span class="si">{</span><span class="n">enddelay</span><span class="si">}</span><span class="s2"> Tagen mindestens </span><span class="si">{</span><span class="n">mindead</span><span class="si">}</span><span class="s2"> beträgt."</span>
        <span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Die Fläche markiert den Bereich, in den </span><span class="si">{</span><span class="n">pi</span><span class="si">:</span><span class="s2">n</span><span class="si">}</span><span class="s2">% aller 7-Tage-Abschnitte fallen (d.h. je </span><span class="si">{</span><span class="n">pirem</span><span class="si">:</span><span class="s2">n</span><span class="si">}</span><span class="s2">% sind darunter/darüber), die Linie den Median.</span><span class="se">\n</span><span class="s2">"</span>
        <span class="sa">f</span><span class="s2">"Inkludiert: </span><span class="si">{</span><span class="n">nddate</span><span class="si">}</span><span class="s2"> Todesdaten </span><span class="si">{</span><span class="n">ddrange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">‒</span><span class="si">{</span><span class="n">ddrange</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2"> zu je </span><span class="si">{</span><span class="n">enddelay</span><span class="si">}</span><span class="s2"> Datenständen"</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
    
    <span class="c1">#ax.plot(mcompl.index.days, mcompl)</span>
<span class="n">plt_completeness_avg_by_delay</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_193_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=759880e0">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [170]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">selbl</span> <span class="o">=</span> <span class="s2">"Österreich"</span>
<span class="k">def</span> <span class="nf">get_nachm</span><span class="p">(</span><span class="n">selbl</span><span class="p">):</span>
    <span class="n">d23e</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Datum == '2022-12-31'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"FileDate"</span><span class="p">)[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
    <span class="c1">#d23b = ages_hist.query(</span>
    <span class="c1">#    f"Bundesland == '{selbl}' and Datum == '2021-12-31'").set_index("FileDate")["AnzahlTotSum"]</span>
    <span class="c1">#d23e -= d23b</span>
    <span class="n">d23e</span> <span class="o">-=</span> <span class="n">d23e</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">d23e</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="k">def</span> <span class="nf">plt_nachm</span><span class="p">(</span><span class="n">selbl</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">get_nachm</span><span class="p">(</span><span class="n">selbl</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">selbl</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt_nachm</span><span class="p">(</span><span class="s2">"Niederösterreich"</span><span class="p">)</span>
<span class="p">(</span><span class="n">get_nachm</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span> <span class="o">-</span> <span class="n">get_nachm</span><span class="p">(</span><span class="s2">"Niederösterreich"</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Rest von Österreich"</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Nachgemeldete COVID-Tote bis inkl. Todesdatum 31.12.2022 je Meldedatum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">.93</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl Todesfälle (kumulativ)"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Meldedatum"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[170]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>&lt;matplotlib.legend.Legend at 0x1990f5ee150&gt;</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_194_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=16c2a850">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [171]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">ages_hist0</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#ages_hist0["AnzahlTot7Tage"] = ages_hist0["AnzahlTot7Tage"].astype(int)</span>
    <span class="p">(</span>
        <span class="n">ages_hist0</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">"FileDate"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])</span>
        <span class="p">[[</span><span class="s2">"FileDate"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"BundeslandID"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AnzahlTotSum"</span><span class="p">,</span> <span class="s2">"AnzahlTotTaeglich"</span><span class="p">,</span> <span class="s2">"AnzahlTot7Tage"</span><span class="p">]]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"TodesfaelleHist.csv.zip"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=24e1123e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [172]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">sub</span><span class="p">,</span> <span class="n">truediv</span>
<span class="n">rwidth</span> <span class="o">=</span> <span class="mi">21</span>

<span class="k">def</span> <span class="nf">plt_dmdiff_ax</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">selbl</span><span class="o">=</span><span class="s2">"Niederösterreich"</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">ages1m_oo</span> <span class="o">=</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">mms_oo</span> <span class="o">=</span> <span class="n">mms</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">base</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">relative</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">op</span> <span class="o">=</span> <span class="n">truediv</span> <span class="k">if</span> <span class="n">relative</span> <span class="k">else</span> <span class="n">sub</span>
    <span class="n">agesrate</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">ages1m_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"D"</span><span class="p">),</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
    <span class="n">fsrate</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"D"</span><span class="p">),</span> <span class="n">mms_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">fromdate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">agesrate</span> <span class="o">=</span> <span class="n">agesrate</span><span class="p">[</span><span class="n">agesrate</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">fromdate</span><span class="p">]</span>
        <span class="n">fsrate</span> <span class="o">=</span> <span class="n">fsrate</span><span class="p">[</span><span class="n">fsrate</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">fromdate</span><span class="p">]</span>
    <span class="c1">#print(fsrate.iloc[-1:])</span>
    <span class="c1">#display(fsrate)</span>
    <span class="c1">#display(agesrate.describe())</span>
    <span class="c1">#fig, ax = plt.subplots()</span>
    <span class="c1">#ax.plot(agesrate, color="k")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fsrate</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"grey"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"AGES nach Todesdatum"</span><span class="p">)</span>
    <span class="c1">#kwargs=dict(alpha=0.8, width=timedelta(1), aa=True, snap=False, lw=0)</span>
    <span class="c1">#ax.bar(agesrate.index, bottom=base, height=(agesrate - base).where(agesrate &gt; base), label="AGES meldet mehr", **kwargs)</span>
    <span class="c1">#ax.bar(agesrate.index, bottom=base, height=(agesrate - base).where(agesrate &lt; base), color="r", label="AGES meldet weniger", **kwargs)</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">agesrate</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">agesrate</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">agesrate</span> <span class="o">&gt;</span> <span class="n">base</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"AGES meldet mehr"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">agesrate</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">agesrate</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">agesrate</span> <span class="o">&lt;</span> <span class="n">base</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"r"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"AGES meldet weniger"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1">#ax.legend()</span>
    <span class="c1">#cov.set_date_opts(ax, showyear=True)</span>
    <span class="c1">#fig.autofmt_xdate()</span>
    <span class="c1">#cov.set_percent_opts(ax)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span>
            <span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">agesrate</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)),</span>
            <span class="n">top</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">max</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">agesrate</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">agesrate</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">plt_dmdiff</span><span class="p">(</span><span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="n">relative</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"Todesfälle </span><span class="si">{</span><span class="s1">'als Anteil'</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">'i.Vgl. zur'</span><span class="si">}</span><span class="s2"> der 9:30-Meldung, </span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2">-Tage-Summen"</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">bl</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">plt_dmdiff_ax</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">200</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">bl</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
        <span class="c1">#break</span>
    <span class="k">if</span> <span class="n">relative</span><span class="p">:</span>
        <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">relative</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">min_n_ticks</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
            <span class="c1">#ax.relim()</span>
            <span class="c1">#ax.autoscale_view()</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">plt_dmdiff</span><span class="p">(</span><span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plt_dmdiff</span><span class="p">(</span><span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=63273673">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [173]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">make_wowg_dead_fig</span><span class="p">(</span><span class="n">bl</span><span class="p">):</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="o">*</span><span class="mf">0.7</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span><span class="c1">#figsize=(16/2, 8))</span>
    <span class="n">axs</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">axs2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.35</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ccol</span><span class="o">=</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"COVID-Tote"</span><span class="p">,</span> <span class="n">ndays</span><span class="o">=</span><span class="n">MIDRANGE_NDAYS</span><span class="p">,</span> <span class="n">pltdg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltg7</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span>
        <span class="n">ages1m</span><span class="p">[</span><span class="n">ages1m</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s2">"Verstorbene nach Meldedatum"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">))</span>
    <span class="c1">#axs2.append(make_wowg_diag(</span>
    <span class="c1">#    mms[mms["Bundesland"] == bl], f"Verstorbene nach Meldedatum (9:30-Krisenstabmeldung {mms['Datum'].iloc[-1].strftime('%a %x')})",</span>
    <span class="c1">#    axs[len(axs2)], **kwargs))</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span>
        <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s2">"Verstorbene nach Todesdatum"</span><span class="p">,</span> <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">ages2</span> <span class="o">=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"AnzahlTotTaeglich"</span><span class="p">:</span> <span class="s2">"AnzahlTot"</span><span class="p">})</span>
    <span class="n">axs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_wowg_diag</span><span class="p">(</span>
        <span class="n">ages2</span><span class="p">[</span><span class="n">ages2</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">],</span> <span class="s2">"Verstorbene nach Todesdatum ‒ Nur Zweitmeldung"</span><span class="p">,</span>
        <span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">axs2</span><span class="p">)],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">same_axlims</span><span class="p">(</span><span class="n">axs</span><span class="p">[:],</span> <span class="n">axs2</span><span class="p">[:]</span> <span class="k">if</span> <span class="n">axs2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">minbottom</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1">#same_axlims(axs[-2:], axs2[-2:])</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">bl</span> <span class="o">+</span> <span class="s2">": COVID-Tote"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">[:</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">max</span><span class="p">(</span><span class="mf">10.5</span><span class="p">,</span>
                            <span class="n">mms</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">bl</span><span class="p">][</span><span class="s2">"AnzahlTot"</span><span class="p">]</span>
                            <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">SHORTRANGE_NDAYS</span><span class="p">:]</span>
                            <span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">"higher"</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)),</span>
                   <span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">axs2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs2</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">),</span> <span class="n">bottom</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">make_wowg_dead_fig</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=2b3c7ebd">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [174]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">make_wowg_dead_fig</span><span class="p">(</span><span class="s2">"Niederösterreich"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=59f6dde9">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [175]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">drawdbl</span><span class="p">():</span>
    <span class="n">fs0</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">fs0</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">]):</span>
        <span class="n">fs0</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">fs0</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
    <span class="n">fs0</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">9</span><span class="p">))]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">fsc</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">9</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fs0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"dead28"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">fsc</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"dead28"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs0</span><span class="p">,</span> <span class="s2">"dead28"</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s2">.2n</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"x-small"</span><span class="p">)</span>
    <span class="c1">#ax.set_yscale("log")</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">fs0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fsc</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]]),</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">StrMethodFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">{x:n}</span><span class="s2">"</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.5, 0.7, 1]))</span>
    <span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
    <span class="c1">#ax.set_ylim(bottom=0.5, top=30)</span>
    <span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs0</span><span class="p">,</span> <span class="s2">"dead28"</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Tote pro 4 Wochen pro 100.000 Einwohner je Bundesland, logarithmisch"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Letzte 9 Tage strichliert, da meist noch sehr unvollständig (fehlende Nachmeldungen)"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Summe Tote pro 4 Wochen pro 100.000 Einwohner"</span><span class="p">);</span>
    <span class="c1">#ax.set_xlim(left=date(2021, 9, 1), right=date(2021, 11, 20))</span>
    <span class="c1">#ax.set_ylim(top=10)</span>
<span class="n">drawdbl</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_199_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=37a032d0">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [176]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plt_drates</span><span class="p">(</span><span class="n">agd_sums_at0</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">calc_shifted</span><span class="p">(</span><span class="n">agd_sums_at0</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="n">newcols</span><span class="o">=</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">]):</span>
        <span class="n">agd_sums_at0</span><span class="p">[</span><span class="s2">"dead14"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums_at0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">agd_sums_at0</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span>
    <span class="n">agd_sums_at0</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">agd_sums_at0</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">agd_sums_at</span> <span class="o">=</span> <span class="n">agd_sums_at0</span><span class="p">[</span><span class="n">agd_sums_at0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">agd_sums_at0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">9</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">agd_sums_cont</span> <span class="o">=</span> <span class="n">agd_sums_at0</span><span class="p">[</span><span class="n">agd_sums_at0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">agd_sums_at0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#display(agd_sums_cont)</span>
    <span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">with_age_palette</span><span class="p">():</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">agd_sums_at</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"dead14"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">agd_sums_cont</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"dead14"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                     <span class="n">lw</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">agd_sums_at</span><span class="p">,</span> <span class="s2">"dead14"</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s2">.2n</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper left"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"x-small"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">reduced</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">StrMethodFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">{x:n}</span><span class="s2">"</span><span class="p">))</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.051</span><span class="p">)</span>
    <span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">agd_sums_at</span><span class="p">,</span> <span class="s2">"dead14"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">shorten</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ag</span><span class="p">:</span> <span class="n">ag</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"COVID-Tote pro 2 Wochen pro 100.000 Einwohner je Altersgruppe, logarithmisch"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Summe Tote pro 2 Wochen pro 100.000 Einwohner"</span><span class="p">);</span>

    <span class="c1">#ax.set_xlim(left=date(2021, 9, 1), right=date(2021, 11, 20))</span>
    <span class="c1">#ax.set_ylim(top=10)</span>
    
<span class="c1">#agd_sums_at0 = agd_sums.query("Bundesland != 'Österreich' and Bundesland != 'Niederösterreich' and Altersgruppe != 'Alle'").copy()</span>
<span class="c1">#agd_sums_at0 = agd_sums_at0.groupby(["AltersgruppeID", "Datum"]).agg({"AnzahlTot": "sum", "Altersgruppe": "first", "AnzEinwohner": "sum"}).reset_index()</span>
<span class="c1">#plt_drates(agd_sums_at0)</span>
<span class="c1">#plt.gcf().suptitle("COVID-Tote/2 Wochen/100.000 EW ohne NÖ")</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">agd_sums_at0</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe != 'Alle'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">plt_drates</span><span class="p">(</span><span class="n">agd_sums_at0</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">agd_sums_at0</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Niederösterreich' and Altersgruppe != 'Alle'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">plt_drates</span><span class="p">(</span><span class="n">agd_sums_at0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Niederösterreich: COVID-Tote/2 Wochen/100.000 EW"</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">agd_sums_at0</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien' and Altersgruppe != 'Alle'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">plt_drates</span><span class="p">(</span><span class="n">agd_sums_at0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Wien: COVID-Tote/2 Wochen/100.000 EW"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[176]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Text(0.5, 0.98, 'Wien: COVID-Tote/2 Wochen/100.000 EW')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_200_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_200_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_200_3.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=2f088da8">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Erfasste-Omikron-Tote-nach-Alter-&amp;-Geschlecht">Erfasste Omikron-Tote nach Alter &amp; Geschlecht<a class="anchor-link" href="#Erfasste-Omikron-Tote-nach-Alter-&amp;-Geschlecht">¶</a></h1>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=de6b5c57">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [177]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">write_d_tex</span><span class="p">():</span>
    <span class="n">fromdate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-01-01"</span><span class="p">)</span><span class="c1"># list(AT_DEAD_PERIOD_STARTS.values())[-1]# "2022-01-15"</span>
    <span class="n">todate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2023-01-01"</span><span class="p">)</span> <span class="c1">#fs_at.iloc[-1]["Datum"] + timedelta(1) #list(AT_DEAD_PERIOD_STARTS.values())[3]</span>
    <span class="n">data0</span> <span class="o">=</span> <span class="p">(</span><span class="n">agd</span><span class="p">[(</span><span class="n">agd</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">fromdate</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">agd</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">todate</span><span class="p">)]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"AnzahlTot &gt; 0 and Bundesland != 'Österreich'"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"AgeFrom"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">])</span>
               <span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span>
                <span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>

    <span class="n">extra</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">gt1</span> <span class="o">=</span> <span class="n">data0</span> <span class="o">&gt;</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">gt1</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
            <span class="k">break</span>
        <span class="n">data0</span><span class="p">[</span><span class="n">gt1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">gt1rs</span> <span class="o">=</span> <span class="n">data0</span><span class="p">[</span><span class="n">gt1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">gt1rs</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">extra</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gt1rs</span><span class="p">)</span>
    <span class="n">data0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">data0</span><span class="p">]</span> <span class="o">+</span> <span class="n">extra</span><span class="p">)</span>
    <span class="n">data0</span> <span class="o">=</span> <span class="n">data0</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span>
    <span class="n">data0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data0</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">)</span>


    <span class="n">data0</span><span class="p">[</span><span class="s2">"sum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">data0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="n">mtot</span> <span class="o">=</span> <span class="n">data0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">data0</span> <span class="o">=</span> <span class="n">data0</span><span class="p">[[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"AgeFrom"</span><span class="p">,</span> <span class="s2">"sum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">]]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"d.tex"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">r</span><span class="s2">"\newcommand*\rptstartdt{"</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">fromdate</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%d</span><span class="s2">.%m.%Y"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"}</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">r</span><span class="s2">"\newcommand*\rptenddt{"</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">todate</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%d</span><span class="s2">.%m.%Y"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"}</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">r</span><span class="s2">"\newcommand*\rptdatadt{"</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">ages_vdate</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%d</span><span class="s2">.%m.%Y"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"}</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="n">data0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
            <span class="n">rows</span> <span class="o">=</span> <span class="n">data0</span><span class="p">[</span><span class="n">data0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">dt</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span>
            <span class="c1">#print(type(rows))</span>
            <span class="c1">#if len(rows) &lt;= 0:</span>
            <span class="c1">#    continue</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\</span><span class="s2">rptdayhead</span><span class="se">{{</span><span class="si">{</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="se">}}\n</span><span class="s2">"</span><span class="p">)</span>
            <span class="c1">#print(type(rows))</span>
            <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rows</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">formatters</span><span class="o">=</span><span class="p">{</span>
                    <span class="s2">"Altersgruppe"</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">ag</span><span class="p">:</span> <span class="n">ag</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                    <span class="s2">"Bundesland"</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">bl</span><span class="p">:</span> <span class="n">bl</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                    <span class="s2">"Geschlecht"</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">gs</span><span class="p">:</span> <span class="n">gs</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="s2">"sum"</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
                <span class="p">},</span> <span class="n">sparsify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"</span><span class="se">\\</span><span class="s2">begin</span><span class="si">{tabbing}</span><span class="se">\\</span><span class="s2">rptdaytabs</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
                <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
                    <span class="n">cellmark</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="se">\\</span><span class="s2">rptnextrow</span><span class="se">{{</span><span class="si">{</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">AgeFrom</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">85</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">}</span><span class="se">}}</span><span class="s2"> "</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">((</span>
                        <span class="s2">"</span><span class="se">\\\\\n</span><span class="s2">"</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">isfirst</span> <span class="k">else</span> <span class="s2">""</span><span class="p">,</span>
                        <span class="n">cellmark</span><span class="p">,</span> <span class="sa">r</span><span class="s2">"\makebox[\rptidxw][r]{"</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">sum</span><span class="p">),</span> <span class="s2">" } </span><span class="se">\\</span><span class="s2">&gt; "</span><span class="p">,</span> <span class="n">cellmark</span><span class="p">,</span>
                        <span class="p">(</span><span class="s2">" </span><span class="se">\\</span><span class="s2">&gt; "</span> <span class="o">+</span> <span class="n">cellmark</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">:])),</span>
                    <span class="p">))</span>
                    <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="c1">#f.write("\n".join(r"\rptnextrow{" +  + r"} \&gt;" + ln.replace("&amp;", "\\'", 1) for ln in</span>
                <span class="c1">#        rows.to_csv(sep="&amp;", header=False, index=False, line_terminator="\n").rstrip()</span>
                <span class="c1">#            .replace("\n", " \\\\\n").split("\n")).replace("&amp;", " \\&gt; "))</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"</span><span class="se">\n\\</span><span class="s2">end</span><span class="si">{tabbing}</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"</span><span class="se">\n\n</span><span class="s2">"</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">write_d_tex</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=b13bd619">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [178]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#sterbe_o = pd.read_csv("sterbe_ag_kw.csv", encoding="cp1252", skiprows=6, sep=";")</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=fa41585e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [179]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">sterbe</span> <span class="o">=</span> <span class="n">sterbe_o</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">sterbe</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span>
        <span class="n">sterbe</span><span class="p">[</span><span class="s2">"Kalenderwoche des Sterbedatums"</span><span class="p">]</span>
        <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">".+ bis (.+)\)"</span><span class="p">,</span> <span class="sa">r</span><span class="s2">"\1"</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">sterbe</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">(</span><span class="n">sterbe</span><span class="p">[</span><span class="n">sterbe</span><span class="p">[</span><span class="s2">"Anzahl"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"-"</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">sterbe</span><span class="p">[</span><span class="s2">"AnzahlTotAllCause"</span><span class="p">]</span> <span class="o">=</span> <span class="n">sterbe</span><span class="p">[</span><span class="s2">"Anzahl"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">sterbe</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"Werte"</span><span class="p">,</span> <span class="s2">"Unnamed: 5"</span><span class="p">,</span> <span class="s2">"Kalenderwoche des Sterbedatums"</span><span class="p">,</span> <span class="s2">"Anmerkungen"</span><span class="p">,</span> <span class="s2">"Anzahl"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">agidmap</span> <span class="o">=</span> <span class="p">{</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="si">}</span><span class="s2"> bis </span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="si">}</span><span class="s2"> Jahre"</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">19</span><span class="p">)}</span>
    <span class="n">agidmap</span><span class="p">[</span><span class="s1">'bis 4 Jahre'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">agidmap</span><span class="p">[</span><span class="s1">'95 Jahre und älter'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">sterbe</span><span class="p">[</span><span class="s2">"AltersgruppeID"</span><span class="p">]</span> <span class="o">=</span> <span class="n">sterbe</span><span class="p">[</span><span class="s2">"Altersgruppe des Verstorbenen"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">agidmap</span><span class="p">)</span>
    <span class="n">sterbe</span> <span class="o">=</span> <span class="n">sterbe</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=311a9cd3">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [180]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">agd_sums_at_e</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
        <span class="n">sterbe</span><span class="p">[[</span><span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"AnzahlTotAllCause"</span><span class="p">]],</span>
        <span class="n">how</span><span class="o">=</span><span class="s2">"left"</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">validate</span><span class="o">=</span><span class="s2">"many_to_one"</span><span class="p">)</span>
    <span class="n">agd_sums_at_e</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=ec6576d5">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [181]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plt_deads_cases</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">agyoung</span><span class="p">,</span> <span class="n">bymdat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltcases</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pltrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showincomplete</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="c1">#display(agyoung["Altersgruppe"].unique())</span>
    <span class="n">agyoung_s</span> <span class="o">=</span> <span class="n">agyoung</span><span class="p">[[</span><span class="s2">"AnzahlTotSum"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="c1">#agyoung_s["AnzahlTotAllCause"].fillna(0, inplace=True)</span>
    <span class="c1">#display(agyoung["Altersgruppe"].unique())</span>
    <span class="c1">#display(agyoung)</span>
    <span class="n">agyoung_s</span><span class="p">[</span><span class="s2">"ToteNeu"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agyoung_s</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
    <span class="n">monthly</span> <span class="o">=</span> <span class="n">agyoung_s</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Grouper</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s2">"W"</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
        <span class="s2">"AnzahlTotSum"</span><span class="p">:</span> <span class="s2">"last"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span> <span class="s2">"ToteNeu"</span><span class="p">:</span> <span class="s2">"sum"</span>
        <span class="c1">#"AnzahlTotAllCause": "sum"</span>
        <span class="p">})</span>
    <span class="c1">#monthly["ToteNeu"] = monthly["AnzahlTotSum"].diff()</span>
    <span class="c1">#monthly.loc[monthly.index[0], "ToteNeu"] = monthly.iloc[0]["AnzahlTotSum"]</span>
    <span class="c1">#print(monthly.index[0], monthly.iloc[0]["AnzahlTotSum"], monthly.loc[monthly.index[0], "ToteNeu"])</span>
    <span class="c1">#monthly.drop(monthly[monthly["ToteNeu"] &gt; monthly["AnzahlTotAllCause"]].index, inplace=True)</span>
    <span class="n">monthly</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">week_complete</span> <span class="o">=</span> <span class="n">agyoung</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">monthly</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">agyoung</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">monthly</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
        <span class="c1">#print("dropping",  monthly.index[0], agyoung["Datum"].iloc[0])</span>
        <span class="n">monthly</span> <span class="o">=</span> <span class="n">monthly</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">bymdat</span><span class="p">:</span>
        <span class="n">cutlatest</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">week_complete</span> <span class="k">else</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cutlatest</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">agyoung</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">monthly</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="k">else</span> <span class="mi">2</span>
    <span class="c1">#print(week_complete, agyoung["Datum"].iloc[-1], monthly.index[-1], cutlatest)</span>
    <span class="c1">#monthly.loc[monthly["AnzahlTotAllCause"] == 0, "AnzahlTotAllCause"] = monthly["ToteNeu"]</span>
    <span class="c1">#display(monthly["AnzahlTotAllCause"])</span>
    <span class="c1">#display(monthly)</span>
    <span class="n">dtfmt</span> <span class="o">=</span> <span class="s2">"</span><span class="si">%x</span><span class="s2"> %y"</span>
    <span class="c1">#ax.bar(monthly.index, monthly["AnzahlTotAllCause"],</span>
    <span class="c1">#       #bottom=monthly["ToteNeu"],</span>
    <span class="c1">#       color="k", lw=0, width=-5, align="edge")</span>
    <span class="n">barargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">width</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s2">"edge"</span><span class="p">,</span>
        <span class="n">snap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">aa</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">bs</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
        <span class="n">monthly</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">monthly</span><span class="p">[</span><span class="s2">"ToteNeu"</span><span class="p">],</span>
        <span class="c1">#bottom=monthly["AnzahlTotAllCause"] - monthly["ToteNeu"].fillna(0),</span>
        <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
       <span class="o">**</span><span class="n">barargs</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">cutlatest</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">bs</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">drolling</span> <span class="o">=</span> <span class="n">agyoung_s</span><span class="p">[</span><span class="s2">"ToteNeu"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">pltrolling</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">drolling</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">interp</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">week_complete</span> <span class="ow">and</span> <span class="n">showincomplete</span> <span class="ow">and</span> <span class="n">monthly</span><span class="p">[</span><span class="s2">"ToteNeu"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">drolling</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">interp</span><span class="p">:</span>
        <span class="c1">#xc = np.array([monthly.index[-1].date() - timedelta(5), monthly.index[-1].date()])</span>
        <span class="c1">#print(xc, drolling.iloc[-1])</span>
        <span class="c1">#print("at^", monthly.index[-1:], drolling.iloc[-1:] - monthly["ToteNeu"].iloc[-1:])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">monthly</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:],</span>
            <span class="n">drolling</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="o">-</span> <span class="n">monthly</span><span class="p">[</span><span class="s2">"ToteNeu"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
            <span class="n">bottom</span><span class="o">=</span><span class="n">monthly</span><span class="p">[</span><span class="s2">"ToteNeu"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:],</span>
            <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="o">**</span><span class="n">barargs</span><span class="p">)</span>
    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.MultipleLocator(2))</span>
    
    <span class="n">ax2</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">pltcases</span><span class="p">:</span>
        <span class="n">cases</span> <span class="o">=</span> <span class="n">agyoung_s</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">cases</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">7500</span><span class="p">:</span>
            <span class="n">div</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">div</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl positiv Getestete"</span> <span class="o">+</span> <span class="p">(</span><span class="sa">f</span><span class="s2">" (</span><span class="si">{</span><span class="n">div</span><span class="si">}</span><span class="s2">)"</span> <span class="k">if</span> <span class="n">div</span> <span class="o">!=</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">""</span><span class="p">))</span>
        <span class="c1">#ax2.yaxis.set_major_locator(matplotlib.ticker.LinearLocator(int(monthly["ToteNeu"].max() + 1)))</span>
        <span class="n">oldidx</span> <span class="o">=</span> <span class="n">monthly</span><span class="o">.</span><span class="n">index</span>
        <span class="c1">#monthly.index -= timedelta(2.5)</span>
        <span class="c1">#print("cases", cases.index[-1])</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cases</span> <span class="o">/</span> <span class="n">div</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"darkgrey"</span><span class="p">)</span>
        <span class="n">complcases</span> <span class="o">=</span> <span class="n">monthly</span> <span class="k">if</span> <span class="n">week_complete</span> <span class="k">else</span> <span class="n">monthly</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cases</span><span class="p">[</span><span class="n">cases</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">dayofweek</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">div</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">"darkgrey"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mec</span><span class="o">=</span><span class="s2">"white"</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
        <span class="c1">#if not week_complete:</span>
        <span class="c1">#    ax2.plot(monthly[-1:]["AnzahlFaelle"] / 1000, color="grey", marker="o", lw=0, mew=0.5, mec="white")</span>
        <span class="c1">#ls[-1].set_alpha(0.5)</span>
        <span class="c1">#monthly.index = oldidx</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">monthly</span><span class="o">.</span><span class="n">index</span> <span class="k">if</span> <span class="n">showincomplete</span> <span class="k">else</span> <span class="n">monthly</span><span class="o">.</span><span class="n">index</span><span class="p">[:</span><span class="o">-</span><span class="n">cutlatest</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">locator</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="n">nbins</span><span class="o">=</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">integer</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">locator</span><span class="p">)</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">tick_values</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>
    <span class="c1">#import pdb; pdb.set_trace()</span>
    <span class="k">if</span> <span class="mi">1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ticks</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">(</span><span class="mi">4</span> <span class="k">if</span> <span class="n">ticks</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">5</span> <span class="k">if</span> <span class="n">ticks</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl Verstorbene"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ax2</span>
<span class="c1">#ax.set_ylim(bottom=0);</span>
<span class="c1">#display(agyoung.query("ToteNeu &lt; 0")[["AnzahlTot", "Altersgruppe", "Datum", "ToteNeu"]])</span>
<span class="c1">#display(agyoung.query("Datum == '2020-02-26'")[["AnzahlTot", "Altersgruppe", "Datum", "ToteNeu"]])</span>

<span class="k">def</span> <span class="nf">plt_agesep_death</span><span class="p">(</span><span class="n">agd_sums_at</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="o">*</span><span class="mf">0.8</span><span class="p">,</span> <span class="mi">9</span><span class="o">*</span><span class="mf">0.9</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">agesep</span> <span class="o">=</span> <span class="mi">65</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">agd_sums_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">": Wöchentliche Tote (Balken) und Fälle (Linie) ‒ separate Skalen"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">.94</span><span class="p">)</span>
    <span class="n">showincomplete</span><span class="o">=</span><span class="kc">True</span>
    <span class="n">plt_deads_cases</span><span class="p">(</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">agd_sums_at</span><span class="p">[</span><span class="n">agd_sums_at</span><span class="p">[</span><span class="s2">"AgeTo"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">agesep</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">),</span>
        <span class="n">showincomplete</span><span class="o">=</span><span class="n">showincomplete</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">agesep</span><span class="si">}</span><span class="s2"> Jahre alt und älter"</span><span class="p">)</span>
    <span class="n">plt_deads_cases</span><span class="p">(</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">agd_sums_at</span><span class="p">[</span><span class="n">agd_sums_at</span><span class="p">[</span><span class="s2">"AgeFrom"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">agesep</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">),</span>
        <span class="n">showincomplete</span><span class="o">=</span><span class="n">showincomplete</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Jünger als </span><span class="si">{</span><span class="n">agesep</span><span class="si">}</span><span class="s2"> Jahre"</span><span class="p">);</span>
    <span class="c1">#l = cov.filterlatest(agd_sums_at_e[agd_sums_at_e["AgeFrom"] &gt;= 54])[["AnzahlTot", "AnzahlFaelleSum"]].sum()</span>
    <span class="c1">#l["AnzahlTot"]</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">);</span>

<span class="k">def</span> <span class="nf">print_mms_ages_cmp</span><span class="p">(</span><span class="n">selbl</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="o">*</span><span class="mf">0.8</span><span class="p">,</span> <span class="mi">9</span><span class="o">*</span><span class="mf">0.9</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">selbl</span> <span class="o">+</span> <span class="s2">": Wöchentliche COVID-Tote (Balken) und Fälle (Linie) nach Meldedatum"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">selbl</span> <span class="o">+</span> <span class="s2">": Wöchentliche COVID-Tote"</span><span class="p">)</span>
    <span class="n">begdate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-12-26"</span><span class="p">)</span>
    <span class="n">fsdata</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">begdate</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
    <span class="n">ax21</span> <span class="o">=</span> <span class="n">plt_deads_cases</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fsdata</span><span class="p">,</span> <span class="n">bymdat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltcases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltrolling</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">AGES_STAMP</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">" ()"</span><span class="p">))</span>
    <span class="n">mms0</span> <span class="o">=</span> <span class="n">mms</span><span class="p">[</span><span class="n">mms</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">begdate</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">mms0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span> <span class="n">erase_outliers</span><span class="p">(</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">])</span>
    <span class="n">mms0</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="n">mms0</span> <span class="o">=</span> <span class="n">mms0</span><span class="p">[</span><span class="n">mms0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]]</span>

    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"9:30 Krisenstabmeldung "</span> <span class="o">+</span> <span class="n">mms</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">))</span>
    <span class="n">ax22</span> <span class="o">=</span> <span class="n">plt_deads_cases</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">mms0</span><span class="p">,</span> <span class="n">bymdat</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pltcases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltrolling</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#for ax2 in (ax21, ax22):</span>
    <span class="c1">#    ax2.set_ylim(bottom=0, top=max(ax21.get_ylim()[1], ax22.get_ylim()[1]))</span>

<span class="n">plt_agesep_death</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">))</span>
<span class="n">plt_agesep_death</span><span class="p">(</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == 'Niederösterreich'"</span><span class="p">))</span>

<span class="c1">#axs[0].set_ylim(top=350)#min(mms0["AnzahlTot"].rolling(7).sum().max() * 1.2, axs[0].get_ylim()[1]))</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"9:30 Krisenstabmeldung "</span> <span class="o">+</span> <span class="n">mms0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="n">plt_deads_cases</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mms0</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt;= '2021-08-01'"</span><span class="p">),</span> <span class="n">bymdat</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pltcases</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pltrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#ax.set_ylim(top=300)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">selag</span> <span class="o">=</span> <span class="s2">"75-84"</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">: Wöchentliche COVID-Tote (Balken) und Fälle (Linie), Altersgruppe </span><span class="si">{</span><span class="n">selag</span><span class="si">}{</span><span class="n">AGES_STAMP</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">plt_deads_cases</span><span class="p">(</span>
    <span class="n">ax</span><span class="p">,</span>
    <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Datum &gt;= '2019-08-01' and Altersgruppe == '</span><span class="si">{</span><span class="n">selag</span><span class="si">}</span><span class="s2">'"</span><span class="p">),</span>
    <span class="n">bymdat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltcases</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pltrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showincomplete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#ax.set_ylim(top=300)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Wöchentliche Tote</span><span class="si">{</span><span class="n">AGES_STAMP</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">plt_deads_cases</span><span class="p">(</span>
    <span class="n">ax</span><span class="p">,</span>
    <span class="n">fs_at</span><span class="p">,</span>
    <span class="n">bymdat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltcases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pltrolling</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">showincomplete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_206_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_206_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_206_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_206_3.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e9bc4a07">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [182]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#pdata = (fs.set_index(</span>
<span class="c1">#    ["Datum", "Bundesland"])["AnzahlTot"].groupby("Bundesland",).rolling(365, min_periods=1).sum().reset_index(0, drop=True)).dropna()</span>
<span class="n">pdata</span> <span class="o">=</span> <span class="p">(</span><span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])[</span><span class="s2">"AnzahlTote1J"</span><span class="p">]</span>
         <span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])[</span><span class="s2">"AnzahlTote1J"</span><span class="p">]))</span><span class="c1">#.dropna()</span>
<span class="n">pdata</span> <span class="o">/=</span> <span class="n">fs</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">pdata</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"AnzahlTote1J"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: Tote pro 365 Tage, jeweils historische Datenstände"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
<span class="c1">#ax.axvspan(matplotlib.dates.date2num(date(2022, 1, 1)), ax.get_xlim()[1], color="k", alpha=0.1, zorder=3,</span>
<span class="c1">#           label="Unvollständige Daten")</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anteil an Gesamtbevölkerung"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[182]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Text(0, 0.5, 'Anteil an Gesamtbevölkerung')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_207_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=9a9fa57c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [183]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#pdata = (fs.set_index(</span>
<span class="c1">#    ["Datum", "Bundesland"])["AnzahlTot"].groupby("Bundesland",).rolling(365, min_periods=1).sum().reset_index(0, drop=True)).dropna()</span>
<span class="n">pdata</span> <span class="o">=</span> <span class="p">(</span><span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
         <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
         <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">])[</span><span class="s2">"AnzahlTote1J"</span><span class="p">]</span>
         <span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">ages_hist</span><span class="p">[</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span>
                        <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">])[</span><span class="s2">"AnzahlTote1J"</span><span class="p">]))</span><span class="c1">#.dropna()</span>
<span class="c1">#pdata /= fs.set_index(["Datum", "Bundesland"])["AnzEinwohner"]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">pdata</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"AnzahlTote1J"</span><span class="p">,</span> <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: Tote pro 365 Tage, jeweils historische Datenstände"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">pdata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="c1">#ax.axvspan(matplotlib.dates.date2num(date(2022, 1, 1)), ax.get_xlim()[1], color="k", alpha=0.1, zorder=3,</span>
<span class="c1">#           label="Unvollständige Daten")</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anteil an Gesamtbevölkerung"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[183]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Text(0, 0.5, 'Anteil an Gesamtbevölkerung')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_208_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=2dc47280">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [184]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
    <span class="s2">"Altersgruppe == 'Alle' and Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">,</span> <span class="s2">"AnzahlTotSum"</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s2">"C1"</span><span class="p">,</span> <span class="s2">"k"</span><span class="p">])</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">reduced</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">100</span><span class="p">);</span>
<span class="n">fmt</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">ScalarFormatter</span><span class="p">(</span><span class="n">useLocale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_209_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=3d5a0c1b">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [185]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fs2</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="c1">#agd_sums.query("Altersgruppe == '&gt;84'").copy() #fs.copy()</span>
<span class="n">fs2</span><span class="p">[</span><span class="s2">"dead_p100k_cum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span> <span class="o">/</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
<span class="c1">#display(fs2.query("Bundesland == 'Österreich'")[["Datum", "AnzahlTotSum", "AnzEinwohner"]])</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fs2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"dead_p100k_cum"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s2">"AnzEinwohnerFixed"</span><span class="p">,</span>
                  <span class="n">size_norm</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="n">fs2</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Wien'"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzEinwohner"</span><span class="p">]),</span>
                 <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs2</span><span class="p">,</span> <span class="s2">"dead_p100k_cum"</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">n</span><span class="si">:</span><span class="s2">.3n</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">#ax.set_yscale("log")</span>
<span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
<span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.5, 0.7, 1]))</span>
<span class="c1">#ax.set_ylim(bottom=1)</span>
<span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs2</span><span class="p">,</span> <span class="s2">"dead_p100k_cum"</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">colorize</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote je 100.000 Einwohner"</span><span class="p">);</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"COVID-Tote pro 100.000 Einwohner je Bundesland"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_210_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=6b2593a0">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [186]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plt_ags_std</span><span class="p">():</span>
    <span class="n">agd2</span> <span class="o">=</span> <span class="p">(</span><span class="n">agd</span>
            <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe != 'Alle'"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])</span>
            <span class="o">.</span><span class="n">sort_index</span><span class="p">())</span>
    <span class="c1">#display(agd2.dtypes)</span>
    <span class="n">agd2</span><span class="p">[</span><span class="s2">"dead_28s"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd2</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
    <span class="n">agd2</span><span class="p">[</span><span class="s2">"dead_pp_cum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd2</span><span class="p">[</span><span class="s2">"dead_28s"</span><span class="p">]</span> <span class="o">/</span> <span class="n">agd2</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="c1">#display(agd2.dtypes)</span>
    <span class="c1">#display(agd2)</span>
    <span class="n">ewat</span> <span class="o">=</span> <span class="n">agd2</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s1">'Österreich'</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">)[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span>
    <span class="c1">#display(agd2)</span>
    <span class="n">agd2</span><span class="p">[</span><span class="s2">"dead_cum_norm"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd2</span><span class="p">[</span><span class="s2">"dead_pp_cum"</span><span class="p">]</span> <span class="o">*</span> <span class="n">ewat</span>
    <span class="n">agd2sum</span> <span class="o">=</span> <span class="n">agd2</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])[[</span><span class="s2">"dead_cum_norm"</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="c1">#display(agd2sum.query("Bundesland == 'Österreich'")["dead_cum_norm"])</span>
    <span class="c1">#display(ewat.groupby("Datum").sum())</span>
    <span class="c1">#display(agd2["dead_cum_norm"])</span>
    <span class="n">agd2sum</span><span class="p">[</span><span class="s2">"dead_pp_cum_norm"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd2sum</span><span class="p">[</span><span class="s2">"dead_cum_norm"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100_000</span> <span class="o">/</span> <span class="n">ewat</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="c1">#display(ewat.groupby("Datum").sum())</span>
    <span class="n">pdata</span> <span class="o">=</span> <span class="n">agd2sum</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &gt;= '2020-01-15'"</span><span class="p">)</span>
    <span class="n">pdata</span> <span class="o">=</span> <span class="n">pdata</span><span class="p">[</span><span class="n">pdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">pdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">9</span><span class="p">)]</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">pdata</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"dead_pp_cum_norm"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Bundesland"</span><span class="p">,</span>
                      <span class="c1">#size_norm=matplotlib.colors.Normalize(vmax=fs.query("Bundesland == 'Wien'").iloc[-1]["AnzEinwohner"]),</span>
                     <span class="n">err_style</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">sortedlabels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pdata</span><span class="p">,</span> <span class="s2">"dead_pp_cum_norm"</span><span class="p">,</span> <span class="n">fmtval</span><span class="o">=</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">n</span><span class="si">:</span><span class="s2">.3n</span><span class="si">}</span><span class="s2">"</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
              <span class="n">title</span><span class="o">=</span><span class="s2">"Daten bis "</span> <span class="o">+</span> <span class="n">pdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">))</span>
    <span class="c1">#ax.set_yscale("log")</span>
    <span class="c1">#ax.yaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())</span>
    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.5, 0.7, 1]))</span>
    <span class="c1">#ax.set_ylim(bottom=1)</span>
    <span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pdata</span><span class="p">,</span> <span class="s2">"dead_pp_cum_norm"</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">colorize</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote pro 100.000 Einwohner"</span><span class="p">);</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pdata</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"COVID-Tote pro 100.000 Einwohner in 28 Tagen je Bundesland, altersstandadisiert"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">);</span>
    
<span class="n">plt_ags_std</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_211_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=aa07e110">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [187]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">DT_SCHULBEG</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">drawd</span><span class="p">(</span><span class="n">fromdate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">basecol</span><span class="o">=</span><span class="s2">"AnzEinwohner"</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basedata</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">):</span>
    <span class="n">fsbase</span> <span class="o">=</span> <span class="n">basedata</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe != 'Alle'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">query</span><span class="p">:</span>
        <span class="n">fsbase</span> <span class="o">=</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">zerofirst</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">fromdate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fromdate</span> <span class="o">=</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">zerofirst</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fsbase</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">fromdate</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">zerofirst</span><span class="p">:</span>
        <span class="n">fs2</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-=</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">fromdate</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span><span class="c1">#fsbase.index.get_level_values("Datum") == fromdate]</span>
    
    <span class="c1"># [(0.4, 0.4, 0.4), (0, 0, 0), (0.6, 0.6, 0.6)]</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">"bone"</span><span class="p">,</span> <span class="n">n_colors</span><span class="o">=</span><span class="mi">4</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span>
              <span class="p">)[:</span><span class="n">fsbase</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Altersgruppe"</span><span class="p">)</span><span class="o">.</span><span class="n">nunique</span><span class="p">()]</span> <span class="c1">#* 2</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"dead_p100k_cum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">basecol</span><span class="p">:</span>
        <span class="n">fs2</span><span class="p">[</span><span class="s2">"dead_p100k_cum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fs2</span><span class="p">[</span><span class="n">basecol</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span><span class="o">.</span><span class="n">bfill</span><span class="p">())</span> <span class="o">*</span> <span class="mi">100_000</span>
    <span class="c1">#fs2["Gruppe"] = fs2["Altersgruppe"] + " " + fs2["Geschlecht"]</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fs2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"dead_p100k_cum"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="c1">#size="AnzEinwohner",</span>
                      <span class="c1">#size=40,</span>
                      <span class="c1">#lw=2.5,</span>
                      <span class="c1">#palette=sns.color_palette("Paired", desat=0.5, n_colors=10)</span>
                      <span class="c1">#palette="prism",</span>
                      <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                      <span class="n">size</span><span class="o">=</span><span class="s2">"AnzEinwohnerFixed"</span><span class="p">,</span>
                      <span class="n">ds</span><span class="o">=</span><span class="s2">"steps-mid"</span><span class="p">,</span>
                      <span class="n">solid_joinstyle</span><span class="o">=</span><span class="s2">"miter"</span><span class="p">,</span>
                      <span class="n">snap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">aa</span><span class="o">=</span><span class="kc">False</span>
                     <span class="p">)</span>
    <span class="c1">#ax.legend(*sortedlabels(ax, fs2, "dead_p100k_cum", "Altersgruppe"), ncol=1)</span>
    <span class="k">if</span> <span class="n">basecol</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s2">"log"</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>

    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.5, 0.7, 1]))</span>
    <span class="c1">#labelend2(ax, fs2, "dead_p100k_cum", 100)</span>
    <span class="n">prev_y</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="nf">sort_grps</span><span class="p">(</span><span class="n">cl_ag</span><span class="p">):</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">ag</span> <span class="o">=</span> <span class="n">cl_ag</span>
        <span class="k">return</span> <span class="n">fs2</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">ag</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"dead_p100k_cum"</span><span class="p">]</span>
    <span class="n">grps</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Altersgruppe"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()),</span> <span class="n">key</span><span class="o">=</span><span class="n">sort_grps</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">cl</span><span class="p">,</span> <span class="n">ag</span> <span class="ow">in</span> <span class="n">grps</span><span class="p">:</span>
        <span class="n">ag0</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">ag</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">)</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">ag0</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">"dead_p100k_cum"</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">prev_y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">prev_y</span> <span class="o">/</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">:</span>
            <span class="c1">#print(ag, "adjusted!")</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">prev_y</span> <span class="o">*</span> <span class="mf">1.5</span>
        <span class="c1">#print(prev_y, y, prev_y is not None and prev_y / y)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">ag</span> <span class="o">+</span> <span class="p">(</span><span class="s2">":</span><span class="se">\n</span><span class="s2">"</span> <span class="k">if</span> <span class="n">mline</span> <span class="k">else</span> <span class="s2">": "</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">])</span> <span class="o">+</span> <span class="s2">" Tote"</span>
                    <span class="o">+</span> <span class="p">(</span><span class="s2">"/r"</span> <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">""</span><span class="p">),</span>
            <span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span>
            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span> <span class="k">if</span> <span class="n">ag</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"5-14"</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">),</span>
                    <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">)</span>
        <span class="n">prev_y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="k">if</span> <span class="n">annot</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">,</span> <span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="n">DT_SCHULBEG</span><span class="p">,</span> <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">))):</span>
                <span class="k">if</span> <span class="n">dt</span> <span class="o">&lt;</span> <span class="n">fromdate</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">record</span> <span class="o">=</span> <span class="n">ag0</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">dt</span><span class="p">)]</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]),</span>
                    <span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">record</span><span class="p">[</span><span class="s2">"dead_p100k_cum"</span><span class="p">]),</span>
                    <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span> <span class="k">if</span> <span class="n">record</span><span class="p">[</span><span class="s2">"AgeFrom"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">15</span> <span class="k">else</span> <span class="mi">8</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">)</span>


    <span class="k">if</span> <span class="n">basecol</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote pro 100.000"</span> <span class="o">+</span> <span class="p">(</span><span class="s2">" Einwohner"</span> <span class="k">if</span> <span class="n">basecol</span> <span class="o">==</span> <span class="s2">"AnzEinwohner"</span> <span class="k">else</span> <span class="s2">" Fälle"</span> <span class="k">if</span> <span class="s2">"AnzahlFaelleSum"</span> <span class="k">else</span> <span class="s2">""</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote"</span><span class="p">)</span>
    <span class="n">fromstr</span> <span class="o">=</span> <span class="s2">"Insgesamt"</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">zerofirst</span> <span class="k">else</span> <span class="s2">"Seit "</span> <span class="o">+</span> <span class="n">fromdate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="n">fs2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">": </span><span class="si">{</span><span class="n">fromstr</span><span class="si">}</span><span class="s2"> direkt an/mit COVID Verstorbene je Altersgruppe, logarithmisch"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">),</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>
<span class="n">drawd</span><span class="p">(</span><span class="n">mline</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">drawd</span><span class="p">(</span><span class="n">mline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">basecol</span><span class="o">=</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">100_000</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">drawd</span><span class="p">(</span><span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-09-01"</span><span class="p">),</span> <span class="n">mline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#fig, ax = drawd(fromdate=pd.to_datetime("2022-01-01"), mline=False, basecol=None, query="AgeTo &lt; 50", basedata=agd1m_sums);</span>
    <span class="c1">#fdate = agd_sums.query("Altersgruppe != 'Alle'")["Datum"].min() + timedelta(1)</span>
    <span class="n">fdate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-01-01"</span><span class="p">)</span> <span class="c1">#fs["Datum"].iloc[0] + timedelta(1)# pd.to_datetime("2022-01-01")</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">drawd</span><span class="p">(</span><span class="n">fromdate</span><span class="o">=</span><span class="n">fdate</span><span class="p">,</span> <span class="n">mline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">basecol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="s2">"AgeTo &lt; 45"</span><span class="p">,</span> <span class="n">basedata</span><span class="o">=</span><span class="n">agd_sums</span><span class="p">);</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Todesdatum"</span><span class="p">)</span>
    <span class="c1">#ax.set_yscale("linear")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: COVID-Tote unter 45 seit "</span> <span class="o">+</span> <span class="n">fdate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_212_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_212_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=1968b51a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [188]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fsx</span> <span class="o">=</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="p">(</span><span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">12</span><span class="p">)</span> <span class="o">/</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.0005</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=58701d4e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [189]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fsx</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="p">(</span><span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">21</span><span class="p">)</span> <span class="o">/</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">300</span><span class="p">:]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.0005</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=76ad193c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [190]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">## $$CFR</span>
<span class="c1">#ax = (fsx["AnzahlTot"].rolling(14).sum().shift(20) / fsx["AnzahlFaelle"].rolling(14).sum()).plot()</span>
<span class="n">rwidth</span><span class="o">=</span><span class="mi">35</span>
<span class="n">selag</span> <span class="o">=</span> <span class="s2">"&gt;84"</span>
<span class="n">selsex</span> <span class="o">=</span> <span class="s2">"M"</span>
<span class="c1">#selag = "65+" #  and AgeFrom &gt;= 64</span>
<span class="n">fsx</span> <span class="o">=</span> <span class="n">agd</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe == '</span><span class="si">{</span><span class="n">selag</span><span class="si">}</span><span class="s2">' and Geschlecht == '</span><span class="si">{</span><span class="n">selsex</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">"Bundesland"</span><span class="p">:</span> <span class="s2">"first"</span><span class="p">,</span>
    <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="s2">"AnzahlTot"</span><span class="p">:</span> <span class="s2">"sum"</span>
<span class="p">})</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">14</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="c1">#</span>
<span class="n">cs</span> <span class="o">=</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="c1">#</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Tote, logarithmisch"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Fälle, +14 Tage verschoben, logarithmisch"</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">cfr</span> <span class="o">=</span> <span class="n">ds</span> <span class="o">/</span> <span class="n">cs</span>
<span class="n">cfr</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Fallsterblichkeit (rechte Skala)"</span><span class="p">)</span>
<span class="c1">#print(cfr.loc[cfr.last_valid_index()])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">#cov.set_logscale(ax2)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="c1">#ax2.grid(False)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">locale</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">grouping</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
    <span class="n">fsx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">", Altersgruppe </span><span class="si">{</span><span class="n">selag</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">selsex</span><span class="si">}</span><span class="s2">: COVID-Tote und Fälle im Verhältnis, </span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2">-Tage-Summen"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Ereignisse/100.000 EW/</span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2"> Tage (log)"</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Geschätzte Fallsterblichkeit"</span><span class="p">);</span>
<span class="c1">#for dt in map(pd.to_datetime, ["2020-09-01", "2021-03-01", "2021-08-01", "2022-01-15"]):</span>
<span class="c1">#    ax.axvline(dt, color="k", zorder=1)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_215_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a18df846">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [191]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#ax = (fsx["AnzahlTot"].rolling(14).sum().shift(20) / fsx["AnzahlFaelle"].rolling(14).sum()).plot()</span>
<span class="n">rwidth</span><span class="o">=</span><span class="mi">35</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">selag</span> <span class="o">=</span> <span class="s2">"65+"</span>
    <span class="n">fsx</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == 'Österreich' and AgeFrom &gt;= 64 and Altersgruppe != 'Alle'"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
        <span class="s2">"Bundesland"</span><span class="p">:</span> <span class="s2">"first"</span><span class="p">,</span>
        <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzahlTot"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzahlGeheilt"</span><span class="p">:</span> <span class="s2">"sum"</span>
    <span class="p">})</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">selag</span> <span class="o">=</span> <span class="s2">"&gt;84"</span>
    <span class="n">selsex</span> <span class="o">=</span> <span class="s2">"M"</span>
    <span class="n">fsx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">agd</span>
        <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe == '</span><span class="si">{</span><span class="n">selag</span><span class="si">}</span><span class="s2">' and Geschlecht == '</span><span class="si">{</span><span class="n">selsex</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">))</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="c1">#.shift(-14)#</span>
<span class="n">cs0</span> <span class="o">=</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlGeheilt"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">ds</span><span class="c1">#</span>
<span class="n">cs14</span> <span class="o">=</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<span class="n">cs</span> <span class="o">=</span> <span class="n">cs0</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="n">cs14</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Tote"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
<span class="n">cs0</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Genesene+Tote"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">)</span>
<span class="n">cs14</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C3"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Fälle vor 14 T"</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"max(Gen+Tot, F vor 14 T)"</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">cfr</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span> <span class="o">/</span> <span class="n">cs</span><span class="p">)</span>
<span class="n">cfr</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C0"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Fallsterblichkeit (rechts): "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">cfr</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cfr</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()],</span> <span class="s2">".2%"</span><span class="p">))</span>
<span class="c1">#print(cfr.loc[cfr.last_valid_index()])</span>
<span class="c1">#ax2.set_ylim(bottom=0)</span>
<span class="c1">#cov.set_logscale(ax2)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="c1">#ax2.grid(False)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="n">locale</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">grouping</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
    <span class="n">fsx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">", Altersgruppe </span><span class="si">{</span><span class="n">selag</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">selsex</span><span class="si">}</span><span class="s2">: COVID-Tote und Fälle im Verhältnis, </span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2">-Tage-Summen, logarithmisch"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Ereignisse/100.000 EW/</span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2"> Tage (log)"</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Geschätzte Fallsterblichkeit (log)"</span><span class="p">);</span>

<span class="c1">#for dt in map(pd.to_datetime, ["2020-09-01", "2021-03-01", "2021-08-01", "2022-01-15"]):</span>
<span class="c1">#    ax.axvline(dt, color="k", zorder=1)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_216_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=8e54e4d5">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [192]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">ls</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">shift</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">):</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">shift</span><span class="p">)</span> <span class="o">/</span> <span class="n">fsx</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">40</span><span class="p">:]</span>
        <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ds</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">ds</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.95</span><span class="p">)))</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">ls</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=9f443baa">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [193]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">pairwise</span><span class="p">,</span> <span class="n">chain</span>
<span class="c1">#NS_PER_DAY = 1e9 * 60 * 60 * 24</span>
<span class="c1">#def pd_timedelta_fmt(val, x):</span>
<span class="c1">#    return int(val / NS_PER_DAY)</span>
    
<span class="k">def</span> <span class="nf">add_arrow</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">to_position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">'right'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    add an arrow to a line.</span>

<span class="sd">    line:       Line2D object</span>
<span class="sd">    position:   x-position of the arrow. If None, mean of xdata is taken</span>
<span class="sd">    direction:  'left' or 'right'</span>
<span class="sd">    size:       size of the arrow in fontsize points</span>
<span class="sd">    color:      if None, line color is taken.</span>
<span class="sd">    """</span>
    
    <span class="c1"># https://stackoverflow.com/a/34018322/2128694</span>
    
    <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_color</span><span class="p">()</span>

    <span class="n">xdata</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">()</span>
    <span class="n">ydata</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">xdata</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="c1"># find closest index</span>
    <span class="n">start_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">xdata</span> <span class="o">-</span> <span class="n">position</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">to_position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">end_ind</span> <span class="o">=</span> <span class="n">to_position</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">'right'</span><span class="p">:</span>
            <span class="n">end_ind</span> <span class="o">=</span> <span class="n">start_ind</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">end_ind</span> <span class="o">=</span> <span class="n">start_ind</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="n">line</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span>
        <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="n">xdata</span><span class="p">[</span><span class="n">start_ind</span><span class="p">],</span> <span class="n">ydata</span><span class="p">[</span><span class="n">start_ind</span><span class="p">]),</span>
        <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">xdata</span><span class="p">[</span><span class="n">end_ind</span><span class="p">],</span> <span class="n">ydata</span><span class="p">[</span><span class="n">end_ind</span><span class="p">]),</span>
        <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s2">"-|&gt;"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">size</span><span class="o">=</span><span class="n">size</span>
    <span class="p">)</span>
    
<span class="k">def</span> <span class="nf">drawwavedead</span><span class="p">(</span><span class="n">fs_at</span><span class="p">,</span> <span class="n">vcol</span><span class="o">=</span><span class="s2">"AnzahlTotSum"</span><span class="p">,</span> <span class="n">vcolname</span><span class="o">=</span><span class="s2">"Tote"</span><span class="p">):</span>
    <span class="n">waves</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">name</span><span class="p">:</span> <span class="p">(</span><span class="n">wavebeg</span><span class="p">,</span> <span class="n">fs_at</span><span class="p">[(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">wavebeg</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nextbeg</span><span class="p">)])</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">wavebeg</span><span class="p">),</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">nextbeg</span><span class="p">)</span>
        <span class="ow">in</span> <span class="n">pairwise</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span>
            <span class="n">AT_DEAD_PERIOD_STARTS</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
            <span class="p">[(</span><span class="kc">None</span><span class="p">,</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">))]))</span>
    <span class="p">}</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">": </span><span class="si">{</span><span class="n">vcolname</span><span class="si">}</span><span class="s2"> je COVID-19-Periode"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.96</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Periodenbeginn: Ca. Minimum der Todeszahlen zwischen den Wellen"</span><span class="p">)</span>
    
    <span class="n">colors</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">waves</span><span class="p">))</span>
    <span class="n">annots</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">wavebeg</span><span class="p">,</span> <span class="n">waverange</span><span class="p">))</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">waves</span><span class="p">)),</span> <span class="n">colors</span><span class="p">,</span> <span class="n">waves</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">vcol</span><span class="p">]</span>
        <span class="n">waveend</span> <span class="o">=</span> <span class="n">waverange</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">waverange</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">==</span> <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">]:</span>
            <span class="n">wave</span> <span class="o">=</span> <span class="n">waverange</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">wave</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">-=</span> <span class="n">wave</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wave</span> <span class="o">=</span> <span class="n">waverange</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span> <span class="o">-</span> <span class="n">waverange</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">cols</span><span class="p">]</span>
            <span class="n">wave</span><span class="p">[</span><span class="n">vcol</span><span class="p">]</span> <span class="o">+=</span> <span class="n">waverange</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"AnzahlTot"</span><span class="p">]</span>
        <span class="c1">#display(wave.dtypes)</span>
        <span class="n">wave</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">wave</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">dt</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
        <span class="n">wave</span> <span class="o">=</span> <span class="n">wave</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">])</span>
        <span class="n">lastline</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wave</span><span class="p">[</span><span class="n">vcol</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"-"</span> <span class="k">if</span> <span class="n">waveend</span> <span class="o">&lt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-01-15"</span><span class="p">)</span> <span class="k">else</span> <span class="s2">"--"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">lastval</span> <span class="o">=</span> <span class="n">wave</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">vcol</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">lastval</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">annots</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
            <span class="n">lastval</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">, ab </span><span class="si">{</span><span class="n">wavebeg</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%d</span><span class="s1">.%m.%y'</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">  </span><span class="si">{</span><span class="n">lastval</span><span class="si">:</span><span class="s2">n</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">vcolname</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">wave</span><span class="p">)</span><span class="si">}</span><span class="s2"> Tagen"</span><span class="p">,</span>
            <span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)))</span>
    <span class="c1">#ax.plot(wave.iloc[-1:], color=color, marker="&gt;", lw=0, markersize=8)</span>
    <span class="n">add_arrow</span><span class="p">(</span><span class="n">lastline</span><span class="p">,</span> <span class="n">wave</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">wave</span><span class="p">))],</span> <span class="n">to_position</span><span class="o">=</span><span class="n">wave</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span>
               <span class="c1"># , top=4500</span>
               <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="n">dodgeannot</span><span class="p">(</span><span class="n">annots</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
    <span class="c1">#ax.xaxis.set_major_formatter(matplotlib.ticker.FuncFormatter(pd_timedelta_fmt))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"minor"</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">30</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Verstrichene Tage"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">vcolname</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="c1">#ax.legend()</span>
    
<span class="n">drawwavedead</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">))</span>
<span class="c1">#drawwavedead(fs.query("Bundesland == 'Österreich'"), vcol="AnzahlFaelleSum", vcolname="Fälle")</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="application/vnd.jupyter.stderr" tabindex="0">
<pre>...\AppData\Local\Temp\ipykernel_33144\1746487939.py:65: PerformanceWarning: Adding/subtracting object-dtype array to DatetimeArray not vectorized.
  wave = waverange[cols] - waverange.iloc[0][cols]
...\AppData\Local\Temp\ipykernel_33144\1746487939.py:65: PerformanceWarning: Adding/subtracting object-dtype array to DatetimeArray not vectorized.
  wave = waverange[cols] - waverange.iloc[0][cols]
...\AppData\Local\Temp\ipykernel_33144\1746487939.py:65: PerformanceWarning: Adding/subtracting object-dtype array to DatetimeArray not vectorized.
  wave = waverange[cols] - waverange.iloc[0][cols]
...\AppData\Local\Temp\ipykernel_33144\1746487939.py:65: PerformanceWarning: Adding/subtracting object-dtype array to DatetimeArray not vectorized.
  wave = waverange[cols] - waverange.iloc[0][cols]
...\AppData\Local\Temp\ipykernel_33144\1746487939.py:65: PerformanceWarning: Adding/subtracting object-dtype array to DatetimeArray not vectorized.
  wave = waverange[cols] - waverange.iloc[0][cols]
...\AppData\Local\Temp\ipykernel_33144\1746487939.py:65: PerformanceWarning: Adding/subtracting object-dtype array to DatetimeArray not vectorized.
  wave = waverange[cols] - waverange.iloc[0][cols]
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_218_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=2a6d90c0">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [194]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fs_at</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">200</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"AnzahlTotSum"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=1a1c8c3e">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [195]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">drawcfr</span><span class="p">(</span><span class="n">selbl</span><span class="p">):</span>
    <span class="n">rwidth</span><span class="o">=</span><span class="mi">35</span>
    <span class="n">fsbase</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Altersgruppe != 'Alle'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fsbase</span>
    <span class="n">fs2</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fsg</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsg</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsg</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">])]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">])]</span>
    <span class="c1">#fs2["Gruppe"] = fs2["Altersgruppe"] + " " + fs2["Geschlecht"]</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="n">fsbase</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span><span class="o">.</span><span class="n">nunique</span><span class="p">())</span>
    <span class="n">splitat</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fs2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"cfr"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                      <span class="n">hue_order</span><span class="o">=</span><span class="n">fsbase</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">fs2</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AgeTo &lt;= 40 and AnzahlTot &gt; 0"</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"cfr"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                      <span class="n">hue_order</span><span class="o">=</span><span class="n">fsbase</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1">#ax.legend(*sortedlabels(ax, fs2, "dead_p100k_cum", "Altersgruppe"), ncol=1)</span>
    <span class="c1">#ax.set_yscale("log")</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">))</span>
    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.5, 0.7, 1]))</span>
    <span class="c1">#ax.set_ylim(bottom=0.05)</span>
    <span class="c1">#labelend2(ax, fs2, "dead_p100k_cum", 100)</span>
    <span class="n">mline</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">cl</span><span class="p">,</span> <span class="n">agid</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">agid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"AltersgruppeID"</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">ag0</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">agid</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">ag0</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ag0</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span>
        <span class="n">ag</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">ag</span> <span class="o">+</span> <span class="p">(</span><span class="s2">":</span><span class="se">\n</span><span class="s2">"</span> <span class="k">if</span> <span class="n">mline</span> <span class="k">else</span> <span class="s2">": "</span><span class="p">)</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">".2n"</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">"."</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" %"</span><span class="p">,</span>
            <span class="p">(</span><span class="n">fs2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">record</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]),</span>
            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span> <span class="k">if</span> <span class="n">ag</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"5-14"</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">),</span>
                    <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fallsterblichkeit"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
        <span class="n">fs2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">": COVID-Fallsterblichkeit je Altersgruppe, logarithmisch"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="mi">1</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"Berechnet als Verhältnis von nachlaufenden </span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2">-Tage-Summen, Tote 14 Tage in die Vergangenheit verschoben."</span>
        <span class="s2">"Das ist eine sehr grobe Näherung."</span>
        <span class="s2">"</span><span class="se">\n</span><span class="s2">Vor allem in den jüngeren Altersgruppen ist die Sterblichkeit eher überschätzt, "</span>
        <span class="sa">f</span><span class="s2">"da nur die Fälle der letzten </span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2"> Tage berücksichtig werden."</span>
        <span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">V.a. am Beginn &amp; Ende von Wellen verfälscht der fix angenommene 14-Tage-Abstand zusätzlich."</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">),</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.0000051</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">with_age_palette</span><span class="p">():</span>
    <span class="n">drawcfr</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span>
    <span class="c1">#drawcfr("Wien")</span>
    <span class="c1">#drawcfr("Niederösterreich")</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_220_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=26615980">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [196]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">calc_cfr2</span><span class="p">(</span><span class="n">selbl</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">sex</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fsbase</span> <span class="o">=</span> <span class="n">agd</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Altersgruppe != 'Alle' and Geschlecht == '</span><span class="si">{</span><span class="n">sex</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fsbase</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">' and Altersgruppe != 'Alle'"</span><span class="p">)</span>
    <span class="n">fsbase</span> <span class="o">=</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"AltersgruppeID"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fsbase</span>
    <span class="n">fs2</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fsg</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span>
    <span class="n">cutoff</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsg</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="n">cutoff</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="n">cutoff</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">rwidth</span><span class="p">))</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">][</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsg</span><span class="p">[</span><span class="s2">"AnzahlGeheilt"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">rwidth</span><span class="p">))</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span>
        <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">lower</span><span class="o">=</span><span class="n">fsg</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">14</span><span class="p">)))</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span>
    <span class="c1">#fs2.loc[fs2["AnzahlTot"] &gt; 0, "cfr"] = fs2["deadsum"] / fs2["casesum"]</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">])]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">])]</span>
    <span class="k">return</span> <span class="n">fs2</span><span class="p">,</span> <span class="n">fsbase</span>

<span class="k">def</span> <span class="nf">drawcfr2</span><span class="p">(</span><span class="n">selbl</span><span class="p">,</span> <span class="n">sex</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">rwidth</span><span class="o">=</span><span class="mi">35</span>
    <span class="n">fs2</span><span class="p">,</span> <span class="n">fsbase</span> <span class="o">=</span> <span class="n">calc_cfr2</span><span class="p">(</span><span class="n">selbl</span><span class="p">,</span> <span class="n">rwidth</span><span class="p">,</span> <span class="n">sex</span><span class="p">)</span>
    <span class="c1">#fs2["Gruppe"] = fs2["Altersgruppe"] + " " + fs2["Geschlecht"]</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">n_ag</span> <span class="o">=</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
    <span class="c1">#print(f"{n_ag=}")</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="n">n_ag</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fs2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"cfr"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="c1">#size="AnzEinwohner",</span>
                      <span class="c1">#size=40,</span>
                      <span class="c1">#lw=2.5,</span>
                      <span class="c1">#palette=sns.color_palette("Paired", desat=0.5, n_colors=10),</span>
                      <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                      <span class="n">hue_order</span><span class="o">=</span><span class="n">fsbase</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
                      <span class="c1">#palette="prism",</span>
                      <span class="c1">#palette=[(0.6, 0.6, 0.6), (0, 0, 0)] * 5, #* 2</span>
                      <span class="c1">#size="AnzEinwohner",</span>
                      <span class="c1">#ds="steps-mid",</span>
                      <span class="c1">#solid_joinstyle="miter",</span>
                      <span class="c1">#snap=True,</span>
                      <span class="c1">#aa=False</span>
                     <span class="p">)</span>
    <span class="c1">#sns.lineplot(ax=ax, data=fs2.query("AgeTo &lt;= 50 and AnzahlTot &gt; 0"), x="Datum", y="cfr", hue="Altersgruppe", legend=False,</span>
    <span class="c1">#              palette=palette,</span>
    <span class="c1">#              hue_order=fsbase["Altersgruppe"].unique(), marker="o", mew=0, lw=0)</span>
    <span class="c1">#ax.legend(*sortedlabels(ax, fs2, "dead_p100k_cum", "Altersgruppe"), ncol=1)</span>
    <span class="c1">#ax.set_yscale("log")</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">))</span>
    <span class="c1">#ax.yaxis.set_major_locator(matplotlib.ticker.LogLocator(base=10, subs=[0.15, 0.2, 0.3, 0.5, 0.7, 1]))</span>
    <span class="c1">#ax.set_ylim(bottom=0.05)</span>
    <span class="c1">#labelend2(ax, fs2, "dead_p100k_cum", 100)</span>
    <span class="n">mline</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">cl</span><span class="p">,</span> <span class="n">agid</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">fsbase</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">agid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"AltersgruppeID"</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">ag0</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">agid</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">"AltersgruppeID"</span><span class="p">)</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">ag0</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ag0</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()]</span>
        <span class="n">ag</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">&gt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">35</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">ag</span> <span class="o">+</span> <span class="p">(</span><span class="s2">":</span><span class="se">\n</span><span class="s2">"</span> <span class="k">if</span> <span class="n">mline</span> <span class="k">else</span> <span class="s2">": "</span><span class="p">)</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">".2n"</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">"."</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" %"</span><span class="p">,</span>
            <span class="p">(</span><span class="n">fs2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">record</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]),</span>
            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span> <span class="k">if</span> <span class="n">ag</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"5-14"</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">),</span>
                    <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cl</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fallsterblichkeit"</span><span class="p">)</span>
    <span class="n">sexlabel</span> <span class="o">=</span> <span class="s2">""</span> <span class="k">if</span> <span class="n">sex</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">" (</span><span class="si">{</span><span class="n">sex</span><span class="si">}</span><span class="s2">)"</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
        <span class="n">fs2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">": COVID-Fallsterblichkeit je Altersgruppe</span><span class="si">{</span><span class="n">sexlabel</span><span class="si">}</span><span class="s2">, logarithmisch"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"Berechnet als Verhältnis von nachlaufenden </span><span class="si">{</span><span class="n">rwidth</span><span class="si">}</span><span class="s2">-Tage-Summen"</span>
        <span class="s2">" Verstorbene/max(Genesene+Verstorbene, Fälle vor 14 Tagen)."</span>
        <span class="s2">" Das ist eine sehr grobe Näherung."</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">),</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Todes- bzw. Genesungsdatum"</span><span class="p">)</span>
    <span class="c1">#ax.axhline(1, color="k", zorder=1, lw=0.5)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.0000051</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>
<span class="k">with</span> <span class="n">cov</span><span class="o">.</span><span class="n">with_age_palette</span><span class="p">():</span>
    <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Österreich"</span><span class="p">)</span>
    <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Wien"</span><span class="p">)</span>
    <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Niederösterreich"</span><span class="p">)</span>
    <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Niederösterreich"</span><span class="p">,</span> <span class="s2">"M"</span><span class="p">)</span>
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Niederösterreich"</span><span class="p">,</span> <span class="s2">"W"</span><span class="p">)</span> 
        <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Tirol"</span><span class="p">)</span>
        <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Oberösterreich"</span><span class="p">)</span>
        <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Salzburg"</span><span class="p">)</span>    
        <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Kärnten"</span><span class="p">)</span>
        <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Steiermark"</span><span class="p">)</span>
        <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Burgenland"</span><span class="p">)</span>
        <span class="n">drawcfr2</span><span class="p">(</span><span class="s2">"Vorarlberg"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_221_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_221_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_221_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_221_3.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=1af03bad">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Prognose-Todesf%C3%A4lle">Prognose Todesfälle<a class="anchor-link" href="#Prognose-Todesf%C3%A4lle">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=e873cdbf">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [197]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">calc_cfr_all</span><span class="p">(</span><span class="n">cutoff</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mi">35</span><span class="p">):</span>
    <span class="n">calcby</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">]</span>
    <span class="n">fsbase</span> <span class="o">=</span> <span class="n">agd</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland != 'Österreich' and Altersgruppe != 'Alle'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span>
        <span class="n">calcby</span> <span class="o">+</span> <span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fsbase</span>
    <span class="n">fs2</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fsg</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">calcby</span><span class="p">)</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsg</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="n">cutoff</span><span class="p">]</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="n">cutoff</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">rwidth</span><span class="p">))</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">][</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fsg</span><span class="p">[</span><span class="s2">"AnzahlGeheilt"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">rwidth</span><span class="p">))</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span>
        <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">lower</span><span class="o">=</span><span class="n">fsg</span><span class="p">[</span><span class="s2">"AnzahlFaelle"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">14</span><span class="p">)))</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span>
    <span class="c1">#fs2.loc[fs2["AnzahlTot"] &gt; 0, "cfr"] = fs2["deadsum"] / fs2["casesum"]</span>
    <span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">]</span> <span class="o">=</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"deadsum"</span><span class="p">]</span> <span class="o">/</span> <span class="n">fs2</span><span class="p">[</span><span class="s2">"casesum"</span><span class="p">]</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="n">fs2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">])]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span>
    <span class="n">fs2</span> <span class="o">=</span> <span class="n">fs2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">fs2</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">])]</span>
    <span class="k">return</span> <span class="n">fs2</span><span class="p">,</span> <span class="n">fsbase</span>

<span class="n">cfr</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">calc_cfr_all</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">))</span>
<span class="c1">#display(cfr.query("Bundesland == 'Wien'"))</span>
<span class="n">cfrs</span> <span class="o">=</span> <span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">*</span> <span class="n">cfr</span><span class="p">[</span><span class="s2">"cfr"</span><span class="p">])</span>
<span class="n">cfrs</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="c1">#, cfrs.loc[np.isfinite(cfrs)]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[197]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>2.2765</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=dba49b5d">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [198]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">calc_forecast</span><span class="p">(</span><span class="n">selbl</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tilldate</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">hcfr</span> <span class="o">=</span> <span class="n">calc_cfr_all</span><span class="p">(</span><span class="n">cutoff</span><span class="o">=</span><span class="n">cutoff</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">calc_forecast_from_cfr</span><span class="p">(</span><span class="n">hcfr</span><span class="p">,</span> <span class="n">selbl</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">,</span> <span class="n">tilldate</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">calc_forecast_from_cfr</span><span class="p">(</span><span class="n">hcfr</span><span class="p">,</span> <span class="n">selbl</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tilldate</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tilldate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">hcfr</span> <span class="o">=</span> <span class="n">hcfr</span><span class="p">[</span><span class="n">hcfr</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tilldate</span><span class="p">]</span>
    <span class="n">fromdate</span> <span class="o">=</span> <span class="s2">"2022-04-19"</span>
    <span class="n">hcase</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">agd</span><span class="o">.</span><span class="n">query</span><span class="p">((</span><span class="s2">"Bundesland != 'Österreich'"</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">selbl</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
                  <span class="o">+</span> <span class="s2">" and Altersgruppe != 'Alle'"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Datum"</span><span class="p">])[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">])</span>
    <span class="c1">#display("forecast with", cov.filterlatest(hcfr.reset_index("Datum"))[["Datum", "cfr"]])</span>
    <span class="n">forecast</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span>
        <span class="c1">#(hcfr.query("Bundesland != 'Österreich'")["AnzahlFaelle7Tage"] * hcfr["cfr"]).groupby("Datum").sum(),</span>
        <span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">hcfr</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">))[</span><span class="s2">"cfr"</span><span class="p">]</span> <span class="o">*</span> <span class="n">hcase</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="p">])</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"D"</span><span class="p">)</span><span class="c1">#.iloc[-MIDRANGE_NDAYS:]</span>
    <span class="n">forecast</span> <span class="o">=</span> <span class="n">forecast</span><span class="p">[</span><span class="n">forecast</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">fromdate</span><span class="p">)]</span>
    <span class="c1">#print(forecast.index[-1], forecast.iloc[-1])</span>
    <span class="k">return</span> <span class="n">forecast</span>

<span class="k">def</span> <span class="nf">drawforecast</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">selbl</span><span class="p">,</span> <span class="n">cfr_all</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="c1">#selbl = "Burgenland"</span>
    <span class="n">selblname</span> <span class="o">=</span> <span class="n">selbl</span>
    <span class="k">if</span> <span class="n">selbl</span> <span class="o">==</span> <span class="s2">"Österreich"</span><span class="p">:</span>
        <span class="n">selbl</span> <span class="o">=</span> <span class="kc">None</span><span class="c1">#if selbl is None else selbl</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">selbl</span> <span class="o">=</span> <span class="n">selblname</span>
    <span class="n">maxcfr</span> <span class="o">=</span> <span class="n">cfr_all</span>
    <span class="n">maxfc</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">maxcfr</span><span class="p">[</span><span class="s2">"AnzEinwohner"</span><span class="p">]</span> <span class="o">*</span>
         <span class="n">maxcfr</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
             <span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland != 'Österreich'"</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">selbl</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>
             <span class="o">+</span> <span class="s2">" and Altersgruppe != 'Alle'"</span><span class="p">)[</span><span class="s2">"cfr"</span><span class="p">])</span>
        <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
    <span class="n">maxdt</span> <span class="o">=</span> <span class="n">maxfc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">90</span><span class="p">:]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
    <span class="n">mindt</span> <span class="o">=</span> <span class="n">maxfc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">90</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">idxmin</span><span class="p">()</span>
    <span class="c1">#ax.plot(fs[fs["Bundesland"] == selblname].set_index("Datum")["AnzahlTot"])</span>
    <span class="c1">#print(f"{maxdt=}", maxfc.iloc[-21:].max())</span>
    
    <span class="n">forecast</span> <span class="o">=</span> <span class="n">calc_forecast_from_cfr</span><span class="p">(</span><span class="n">cfr_all</span><span class="p">,</span> <span class="n">selbl</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tilldate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-06-02"</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">get_actual_d1</span><span class="p">(</span><span class="n">fs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">forecast</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selblname</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="n">get_actual_d1</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span>
    <span class="n">d7</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">pfx</span> <span class="o">=</span> <span class="s2">"Schätzung aus Infektionsfällen, "</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'single'</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="n">forecast</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"CFR vom 1. Juni"</span><span class="p">,</span>
                       <span class="c1">#marker="o", mew=0, markersize=3</span>
                 <span class="p">)</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"single"</span><span class="p">:</span>
        <span class="n">bs</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">d1</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">snap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">aa</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">bi</span> <span class="ow">in</span> <span class="n">bs</span><span class="p">[</span><span class="o">-</span><span class="mi">9</span> <span class="o">-</span> <span class="mi">4</span><span class="p">:]:</span>
            <span class="n">bi</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="c1">#calc_forecast(cutoff=9, tilldate=pd.to_datetime("2022-04-11")).plot(</span>
    <span class="c1">#    ax=ax, ls="--",label="Schätzung aus Infektionsfällen, CFR vom 10. April")</span>
    <span class="c1">#calc_forecast(cutoff=1).iloc[-16:].plot(</span>
    <span class="c1">#ax=ax, ls="--", label="Schätzung aus Infektionsfällen, CFR vor 1 T")</span>
    <span class="c1">#calc_forecast(cutoff=16).iloc[-16:].plot(ax=ax, ls="--", label="Schätzung aus Infektionsfällen, CFR vor 16 T")</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'single'</span><span class="p">:</span>
        <span class="n">max_suf</span> <span class="o">=</span> <span class="s2">", d.h. "</span> <span class="o">+</span> <span class="n">maxdt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m."</span><span class="p">)</span>
        <span class="n">min_suf</span> <span class="o">=</span> <span class="s2">", d.h. "</span> <span class="o">+</span> <span class="n">mindt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m."</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_suf</span> <span class="o">=</span> <span class="n">min_suf</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="n">calc_forecast_from_cfr</span><span class="p">(</span><span class="n">cfr_all</span><span class="p">,</span> <span class="n">selbl</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tilldate</span><span class="o">=</span><span class="n">maxdt</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mf">0.1</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">pfx</span> <span class="o">+</span> <span class="s2">"max(CFR letzte 90 T)"</span> <span class="o">+</span> <span class="n">max_suf</span><span class="p">)</span>
    <span class="n">calc_forecast_from_cfr</span><span class="p">(</span><span class="n">cfr_all</span><span class="p">,</span> <span class="n">selbl</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tilldate</span><span class="o">=</span><span class="n">mindt</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mf">0.1</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">pfx</span> <span class="o">+</span> <span class="s2">"min(CFR letzte 90 T)"</span> <span class="o">+</span> <span class="n">min_suf</span><span class="p">)</span>
    
    <span class="c1">#lim = ax.get_xlim()</span>
    <span class="c1">#hcase.groupby("Datum")["AnzahlTotTaeglich"].rolling(7).sum().plot()</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="s2">"."</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"single"</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">get_actual_d1</span><span class="p">(</span><span class="n">ages_old7</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"brown"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Stand vor 7 T"</span><span class="p">)</span>
    <span class="n">d7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Gemeldet"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">d7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">9</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">forecast</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">),</span> <span class="n">week_always</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#ax.figure.autofmt_xdate()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">14</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"single"</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"COVID-19-Todesfälle pro Woche, </span><span class="si">{</span><span class="n">selblname</span><span class="si">}</span><span class="s2">; Datenstand "</span> <span class="o">+</span> <span class="n">ages_vdate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span>
            <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">selblname</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Tote/7-Tage"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Todesdatum"</span><span class="p">)</span>
    <span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="c1">#ax.legend(fontsize="x-small", ncol=2)</span>

    <span class="c1">#print(hcfr.index.names, hcase.index.names)</span>
    <span class="c1">#death_forecast.plot()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="n">cfr_all</span> <span class="o">=</span> <span class="n">calc_cfr_all</span><span class="p">(</span><span class="n">cutoff</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
    <span class="n">drawforecast</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="n">cfr_all</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"multi"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.92</span><span class="p">),</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"COVID-19-Todesfälle pro Woche, je Bundesland; Datenstand "</span> <span class="o">+</span> <span class="n">ages_vdate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span>
            <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">drawforecast</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">cfr_all</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"single"</span><span class="p">)</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">drawforecast</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"Niederösterreich"</span><span class="p">,</span> <span class="n">cfr_all</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"single"</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">drawforecast</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s2">"Steiermark"</span><span class="p">,</span> <span class="n">cfr_all</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"single"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_224_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_224_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=839a6bce">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [199]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">DT_SCHULBEG</span><span class="p">)</span>
<span class="n">ag_schuljahr</span> <span class="o">=</span> <span class="n">agd_sums_at</span><span class="p">[</span><span class="n">agd_sums_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">DT_SCHULBEG</span><span class="p">)]</span><span class="c1">#pd.to_datetime("2022-01-08")]</span>

<span class="k">def</span> <span class="nf">agagg</span><span class="p">(</span><span class="n">ags</span><span class="p">):</span>
    <span class="c1">#assert ags["Altersgruppe"].nunique() &gt;= 3</span>
    <span class="k">return</span> <span class="n">ags</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
        <span class="s2">"AnzahlTotSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">})</span>
<span class="n">ag_eltern</span> <span class="o">=</span> <span class="n">agagg</span><span class="p">(</span><span class="n">ag_schuljahr</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe in ('25-34', '35-44', '45-54')"</span><span class="p">))</span>
<span class="n">ag_geltern</span> <span class="o">=</span> <span class="n">agagg</span><span class="p">(</span><span class="n">ag_schuljahr</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AgeFrom &gt;= 55"</span><span class="p">))</span>
<span class="c1">#ag_eltern["AnzahlTot"].sum()</span>
<span class="n">agk</span> <span class="o">=</span> <span class="n">agagg</span><span class="p">(</span><span class="n">ag_schuljahr</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe in ('&lt;5', '5-14', '15-24')"</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Verstorbene seit Schulbeginn / Ges 0-24:"</span><span class="p">,</span>
      <span class="nb">int</span><span class="p">(</span><span class="n">agk</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">agk</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]),</span> <span class="s2">"/"</span><span class="p">,</span>
      <span class="nb">int</span><span class="p">(</span><span class="n">agk</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Verstorbene seit Schulbeginn / Ges 25-54:"</span><span class="p">,</span>
      <span class="nb">int</span><span class="p">(</span><span class="n">ag_eltern</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">ag_eltern</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]),</span> <span class="s2">"/"</span><span class="p">,</span>
      <span class="nb">int</span><span class="p">(</span><span class="n">ag_eltern</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Verstorbene seit Schulbeginn / Ges 55+:"</span><span class="p">,</span>
      <span class="nb">int</span><span class="p">(</span><span class="n">ag_geltern</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">ag_geltern</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]),</span> <span class="s2">"/"</span><span class="p">,</span>
      <span class="nb">int</span><span class="p">(</span><span class="n">ag_geltern</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlTotSum"</span><span class="p">]))</span>

<span class="n">agk2</span> <span class="o">=</span> <span class="n">agagg</span><span class="p">(</span><span class="n">ag_schuljahr</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe in ('5-14',)"</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Fälle seit Schulbeginn / Ges 5-14:"</span><span class="p">,</span>
      <span class="nb">int</span><span class="p">(</span><span class="n">agk2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">agk2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]),</span> <span class="s2">"/"</span><span class="p">,</span>
      <span class="nb">int</span><span class="p">(</span><span class="n">agk2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>2021-09-06
Verstorbene seit Schulbeginn / Ges 0-24: 16 / 30
Verstorbene seit Schulbeginn / Ges 25-54: 301 / 602
Verstorbene seit Schulbeginn / Ges 55+: 9069 / 21909
Fälle seit Schulbeginn / Ges 5-14: 647756 / 704498
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=8059a7ec">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [200]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '&lt;5'"</span><span class="p">)</span> <span class="c1">#.query("Bundesland == 'Österreich'")</span>
    <span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
        <span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"AnzEinwohner"</span><span class="p">,</span> <span class="s2">"AnzahlFaelleSum"</span><span class="p">,</span>  <span class="s2">"AnzahlFaelleSumProEW"</span><span class="p">,</span> <span class="s2">"AnzahlTotSum"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">]</span>
    <span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c4c2cb18">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [201]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">deaths</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd1m</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">deaths</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span> <span class="n">deaths</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">"## Summe Änderungen gemeldeter Toter in Altersgruppendaten"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">deaths</span><span class="p">[[</span><span class="s2">"AnzahlTot"</span><span class="p">]]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AnzahlTot != 0 and Bundesland != 'Österreich'"</span><span class="p">))</span> <span class="c1">#and Altersgruppe == '&gt;84'</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">"**Summe Änderungen aus Altersgruppendaten: "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd1m_sums</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe != 'Alle'"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span> <span class="s2">"+d"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"**"</span><span class="p">))</span>
<span class="n">deathsb</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">bez1m</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"AnzahlTot != 0"</span><span class="p">)</span>
<span class="n">deathsb</span> <span class="o">=</span> <span class="n">deathsb</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">deathsb</span><span class="p">[</span><span class="s2">"GKZ"</span><span class="p">])]</span>
<span class="n">deathsb</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span> <span class="n">deathsb</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">"## Summe Änderungen gemeldeter Toter in Bezirksdaten"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">deathsb</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()[[</span><span class="s2">"AnzahlTot"</span><span class="p">]])</span>
<span class="c1">#display(Markdown("**Summe Änderungen aus Bundesländerdaten: " + format(cov.filterlatest(ages1m).query("Bundesland == 'Österreich'")["AnzahlTot"].iloc[-1].astype(int), "+d") + "**"))</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">"**Summe Änderungen aus Bundesländerdaten: "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">ages1m</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span> <span class="s2">"+d"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"**"</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">"**Summe Änderungen aus Bezirksdaten: "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">bez1m</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"GKZ &gt; 0"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span> <span class="s2">"+d"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"**"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<h2 id="Summe-%C3%84nderungen-gemeldeter-Toter-in-Altersgruppendaten-(AGES-Fr.-30.06.23)">Summe Änderungen gemeldeter Toter in Altersgruppendaten (AGES Fr. 30.06.23)<a class="anchor-link" href="#Summe-%C3%84nderungen-gemeldeter-Toter-in-Altersgruppendaten-(AGES-Fr.-30.06.23)">¶</a></h2>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th></th>
<th></th>
<th></th>
<th>AnzahlTot</th>
</tr>
<tr>
<th>Datum</th>
<th>Altersgruppe</th>
<th>Geschlecht</th>
<th>Bundesland</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan="2" valign="top">2023-06-30</th>
<th rowspan="2" valign="top">&gt;84</th>
<th rowspan="2" valign="top">W</th>
<th>Burgenland</th>
<td>1</td>
</tr>
<tr>
<th>Niederösterreich</th>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<p><strong>Summe Änderungen aus Altersgruppendaten: +2</strong></p>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<h2 id="Summe-%C3%84nderungen-gemeldeter-Toter-in-Bezirksdaten-(AGES-Fr.-30.06.23)">Summe Änderungen gemeldeter Toter in Bezirksdaten (AGES Fr. 30.06.23)<a class="anchor-link" href="#Summe-%C3%84nderungen-gemeldeter-Toter-in-Bezirksdaten-(AGES-Fr.-30.06.23)">¶</a></h2>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th></th>
<th></th>
<th>AnzahlTot</th>
</tr>
<tr>
<th>Datum</th>
<th>Bundesland</th>
<th>Bezirk</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan="2" valign="top">2023-06-30</th>
<th>Burgenland</th>
<th>Neusiedl am See</th>
<td>1</td>
</tr>
<tr>
<th>Niederösterreich</th>
<th>Melk</th>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<p><strong>Summe Änderungen aus Bundesländerdaten: +2</strong></p>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<p><strong>Summe Änderungen aus Bezirksdaten: +2</strong></p>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=72a8811c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [202]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">idxkeys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Altersgruppe"</span><span class="p">,</span> <span class="s2">"Geschlecht"</span><span class="p">]</span>
<span class="n">diffdt_ag</span> <span class="o">=</span> <span class="n">agd</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">idxkeys</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">agd_old</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">idxkeys</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">],</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">#diffdt["AnzahlTot"] = diffdt["AnzahlTot"].astype(int)</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">"## Änderungen gemeldeter Toter in Altersgruppendaten"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">))</span>
<span class="n">diffdt_ag</span> <span class="o">=</span> <span class="n">diffdt_ag</span><span class="p">[(</span><span class="n">diffdt_ag</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">diffdt_ag</span><span class="p">)]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">)</span>

<span class="n">idxkeys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"Bundesland"</span><span class="p">,</span> <span class="s2">"Bezirk"</span><span class="p">]</span>
<span class="n">diffdt_bez</span> <span class="o">=</span> <span class="n">bez</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">idxkeys</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"GKZ &gt; 0"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">bez_old</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">idxkeys</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"GKZ &gt; 0"</span><span class="p">)[</span><span class="s2">"AnzahlTot"</span><span class="p">],</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">diffdt_bez</span> <span class="o">=</span> <span class="n">diffdt_bez</span><span class="p">[(</span><span class="n">diffdt_bez</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">diffdt_bez</span><span class="p">)]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<h2 id="%C3%84nderungen-gemeldeter-Toter-in-Altersgruppendaten-(AGES-Fr.-30.06.23)">Änderungen gemeldeter Toter in Altersgruppendaten (AGES Fr. 30.06.23)<a class="anchor-link" href="#%C3%84nderungen-gemeldeter-Toter-in-Altersgruppendaten-(AGES-Fr.-30.06.23)">¶</a></h2>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=a37686cd">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [203]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=18ddcfba">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [204]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">print_d</span><span class="p">():</span>
    <span class="n">bezopen</span> <span class="o">=</span> <span class="n">diffdt_bez</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"#Covid19at-Todesfälle, gemeldet am "</span> <span class="o">+</span> <span class="n">ages_vdate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%x</span><span class="s2">"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
    <span class="n">tod</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">diffdt_ag</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
        <span class="n">ddate</span><span class="p">,</span> <span class="n">bl</span><span class="p">,</span> <span class="n">ag</span><span class="p">,</span> <span class="n">sex</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bezmatch</span> <span class="o">=</span> <span class="n">diffdt_bez</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ddate</span><span class="p">,</span> <span class="n">bl</span><span class="p">)]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">bezmatch</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">def</span> <span class="nf">print_row</span><span class="p">(</span><span class="n">loc</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">AnzahlTot</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">AnzahlTot</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">" "</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ddate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2">"</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">tod</span> <span class="o">-</span> <span class="n">ddate</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">&lt;</span> <span class="mi">7</span>
                  <span class="k">else</span> <span class="n">ddate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m"</span><span class="p">)</span> <span class="k">if</span> <span class="n">ddate</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="n">tod</span><span class="o">.</span><span class="n">year</span>
                  <span class="k">else</span> <span class="n">ddate</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span> <span class="n">sex</span><span class="p">,</span> <span class="n">ag</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bezmatch</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">#print(bezmatch, bezmatch.index[0])</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">shorten_bezname</span><span class="p">(</span><span class="n">bezmatch</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">soft</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">bezopen</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ddate</span><span class="p">,</span> <span class="n">bl</span><span class="p">)]</span> <span class="o">=</span> <span class="n">bezopen</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ddate</span><span class="p">,</span> <span class="n">bl</span><span class="p">)]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="o">-</span> <span class="n">row</span><span class="o">.</span><span class="n">AnzahlTot</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bezmatch</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">bezmatch</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="n">row</span><span class="o">.</span><span class="n">AnzahlTot</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="p">(</span><span class="n">cov</span><span class="o">.</span><span class="n">shorten_bezname</span><span class="p">(</span><span class="n">bezm0</span><span class="p">,</span> <span class="n">soft</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">bezm0</span> <span class="ow">in</span> <span class="n">bezmatch</span><span class="o">.</span><span class="n">index</span><span class="p">):</span>
                <span class="n">print_row</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
            <span class="n">bezopen</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ddate</span><span class="p">,</span> <span class="n">bl</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">SHORTNAME2_BY_BUNDESLAND</span><span class="p">[</span><span class="n">bl</span><span class="p">]</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">AnzahlTot</span><span class="p">)):</span>
            <span class="n">print_row</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
        <span class="c1">#print(row, len(bezmatch), bezmatch.index.get_level_values("Bezirk")[0])</span>
    <span class="n">bezbad</span> <span class="o">=</span> <span class="n">bezopen</span><span class="p">[</span><span class="n">bezopen</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bezbad</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">display</span><span class="p">(</span><span class="n">bezbad</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"*** overbooked or unused Bezirke"</span><span class="p">)</span>

<span class="c1">#diffdt["AnzahlTot"] = diffdt["AnzahlTot"].astype(int)</span>
<span class="n">print_d</span><span class="p">()</span>

<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">"## Änderungen gemeldeter Toter in Bezirksdaten"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">))</span>

<span class="n">display</span><span class="p">(</span><span class="n">diffdt_ag</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">diffdt_bez</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland != 'Österreich'"</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>#Covid19at-Todesfälle, gemeldet am Fr. 30.06.2023:

23.06 W &gt;84 Neusiedl/See
27.06 W &gt;84 Melk
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-OutputArea-output" data-mime-type="text/markdown" tabindex="0">
<h2 id="%C3%84nderungen-gemeldeter-Toter-in-Bezirksdaten-(AGES-Fr.-30.06.23)">Änderungen gemeldeter Toter in Bezirksdaten (AGES Fr. 30.06.23)<a class="anchor-link" href="#%C3%84nderungen-gemeldeter-Toter-in-Bezirksdaten-(AGES-Fr.-30.06.23)">¶</a></h2>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th></th>
<th></th>
<th></th>
<th>AnzahlTot</th>
</tr>
<tr>
<th>Datum</th>
<th>Bundesland</th>
<th>Altersgruppe</th>
<th>Geschlecht</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2023-06-23</th>
<th>Burgenland</th>
<th>&gt;84</th>
<th>W</th>
<td>1</td>
</tr>
<tr>
<th>2023-06-27</th>
<th>Niederösterreich</th>
<th>&gt;84</th>
<th>W</th>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th></th>
<th></th>
<th>AnzahlTot</th>
</tr>
<tr>
<th>Datum</th>
<th>Bundesland</th>
<th>Bezirk</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2023-06-23</th>
<th>Burgenland</th>
<th>Neusiedl am See</th>
<td>1</td>
</tr>
<tr>
<th>2023-06-27</th>
<th>Niederösterreich</th>
<th>Melk</th>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=3c7837f2">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [205]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">DISPLAY_SHORTRANGE_DIAGS</span><span class="p">:</span>
    <span class="n">deaths_s</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">filterlatest</span><span class="p">(</span><span class="n">agd1m_sums</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Altersgruppe"</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="p">(</span><span class="n">deaths_s</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">/</span> <span class="n">deaths_s</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"rows"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">ag_to_id</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Prozentuale Änderung insgesamt gemeldeter Toter je Altersgruppe"</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=08fa847c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Aus-der-O%C3%96-Landeskorrespondenz">Aus der OÖ Landeskorrespondenz<a class="anchor-link" href="#Aus-der-O%C3%96-Landeskorrespondenz">¶</a></h1><p>Details zu OÖ basierend auf <a href="https://www.land-oberoesterreich.gv.at/lksuche.htm">https://www.land-oberoesterreich.gv.at/lksuche.htm</a></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=7dee00fd">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [206]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ooch_o</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">COLLECTROOT</span> <span class="o">/</span> <span class="s2">"covid/extractlk.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">)</span>
<span class="n">ooch_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">ooch_o</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_SP_TIME_FMT</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=af74f10a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [207]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ooch</span> <span class="o">=</span> <span class="n">ooch_o</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="s2">"last"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">verify_integrity</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">lastloc</span> <span class="o">=</span> <span class="n">ooch</span><span class="p">[</span><span class="s2">"chlocs"</span><span class="p">]</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span>
<span class="n">OO_STAMP</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">" (OÖ Landeskorrespondenzen bis </span><span class="si">{</span><span class="n">lastloc</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%a</span><span class="s1"> </span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">)"</span>

<span class="k">def</span> <span class="nf">plt_ltcf</span><span class="p">(</span><span class="n">ooch</span><span class="o">=</span><span class="n">ooch</span><span class="p">):</span>
    <span class="n">ooch</span> <span class="o">=</span> <span class="n">ooch</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chlocs"</span><span class="p">])]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#display(ooch)</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chlocs"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Anzahl Altenheime"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C2"</span><span class="p">)</span>   

    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chstaff"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Altenheim-MitarbeiterInnen"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chres"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Altenheim-BewohnerInnen"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">aargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"fontsize"</span><span class="p">:</span><span class="s2">"larger"</span><span class="p">}</span>
    <span class="n">annots</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chlocs"</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lastloc</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chlocs"</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lastloc</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">" Heime"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"color"</span><span class="p">:</span><span class="s2">"C2"</span><span class="p">,</span> <span class="o">**</span><span class="n">aargs</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chres"</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lastloc</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chres"</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lastloc</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">" BewohnerInnen"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"color"</span><span class="p">:</span><span class="s2">"C1"</span><span class="p">,</span> <span class="o">**</span><span class="n">aargs</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chstaff"</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lastloc</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"chstaff"</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">lastloc</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">" MitarbeiterInnen"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"color"</span><span class="p">:</span><span class="s2">"C0"</span><span class="p">,</span> <span class="o">**</span><span class="n">aargs</span><span class="p">}),</span>
    <span class="p">]</span>
    <span class="c1">#annots = [(matplotlib.dates.date2num(dt), *xs) for dt, *xs in annots]</span>
    <span class="c1">#ax.set_xlim(</span>
    <span class="c1">#    left=date(2022, 1, 1),</span>
    <span class="c1">#    right=ooch.index[-1] + timedelta(7))</span>
    <span class="c1">#dodgeannot(annots, ax)</span>
    <span class="c1">#ax.annotate(</span>
    <span class="c1">#        , xytext=(3, 0), textcoords="offset points", va="center")</span>
    <span class="c1">#ax.annotate(,</span>
    <span class="c1">#        (ooch.index[-1], ooch["chres"].iloc[-1]), xytext=(3, 0), textcoords="offset points", va="center")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
    <span class="c1">#ax.plot(ooch["chlocs"])</span>
    <span class="n">agd_sums_oo</span> <span class="o">=</span> <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich' and AgeFrom &gt;= 5 and AgeFrom &lt;= 35"</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
        <span class="s2">"Bundesland"</span><span class="p">:</span> <span class="s2">"first"</span><span class="p">,</span>
        <span class="s2">"AnzEinwohner"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzahlFaelle"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzahlFaelleSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzahlTotSum"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
        <span class="s2">"AnzahlGeheilt"</span><span class="p">:</span> <span class="s2">"sum"</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="n">agd_sums_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span> <span class="o">=</span> <span class="n">agd_sums_oo</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
    <span class="n">agd_sums_oo</span><span class="p">[</span><span class="s2">"AnzAktiv"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">agd_sums_oo</span><span class="p">[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span> <span class="o">-</span> <span class="n">agd_sums_oo</span><span class="p">[</span><span class="s2">"AnzahlGeheilt"</span><span class="p">]</span> <span class="o">-</span> <span class="n">agd_sums_oo</span><span class="p">[</span><span class="s2">"AnzahlTotSum"</span><span class="p">])</span>
    <span class="n">agd_sums_oo</span> <span class="o">=</span> <span class="n">agd_sums_oo</span><span class="p">[</span><span class="n">agd_sums_oo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">ooch</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">"none"</span><span class="p">)</span>
    <span class="c1">#ax2 = ax.twinx()</span>
    <span class="c1">#ax2.yaxis.set_major_locator(matplotlib.ticker.MaxNLocator(5))</span>
    <span class="c1">#ax2.plot(agd_sums_oo["AnzAktiv"], color="C4", mew=0, label="Altersgruppe 5-44" + AGES_STAMP, zorder=0)</span>
    <span class="c1">#ax2.annotate(str(int(agd_sums_oo["AnzAktiv"].iloc[-1])),</span>
    <span class="c1">#        (agd_sums_oo.index[-1], agd_sums_oo["AnzAktiv"].iloc[-1]), xytext=(3, 0), textcoords="offset points", va="center")</span>
    <span class="c1">#ax2.grid(False)</span>
    <span class="c1">#ax2.set_zorder(-10)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Aktive Fälle in Altenheimen"</span><span class="p">)</span>
    <span class="c1">#ax2.set_ylim(bottom=0, top=ax.get_ylim()[1] * 10)</span>
    <span class="c1">#ax2.yaxis.set_major_locator(matplotlib.ticker.MultipleLocator(1000))</span>
    <span class="c1">#ax2.set_ylabel("Aktive Fälle 5-44")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span><span class="c1">#loc="upper left")</span>
    <span class="c1">#ax2.legend(loc="upper right")</span>
    <span class="c1">#ax2.set_ylim(bottom=0, top=60_000)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">integer</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="c1">#display(agd_sums_oo)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Aktive Fälle in Oberösterreichs Alten- und Pflegeheimen"</span> <span class="o">+</span> <span class="n">OO_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">"large"</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="c1">#fig.autofmt_xdate()</span>
<span class="n">plt_ltcf</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_234_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=c772dd6c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [208]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cov</span><span class="o">=</span><span class="n">reload</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span><span class="n">ooch</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                 <span class="n">ooch</span><span class="p">[</span><span class="s2">"hospunvax"</span><span class="p">],</span> <span class="n">ooch</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">-</span> <span class="n">ooch</span><span class="p">[</span><span class="s2">"hospunvax"</span><span class="p">],</span>
                 <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">"Nicht vollständig Immunisierte"</span><span class="p">,</span> <span class="s2">"Vollständig Immunisierte"</span><span class="p">],</span>
                 <span class="n">step</span><span class="o">=</span><span class="s2">"pre"</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">()[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1">#ax.axhline(0, color="k")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"PatientInnen auf OÖ Normalstationen nach Immunisierung"</span> <span class="o">+</span> <span class="n">OO_STAMP</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span><span class="n">ooch</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                 <span class="n">ooch</span><span class="p">[</span><span class="s2">"icuunvax"</span><span class="p">],</span> <span class="n">ooch</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">]</span> <span class="o">-</span> <span class="n">ooch</span><span class="p">[</span><span class="s2">"icuunvax"</span><span class="p">],</span>
                 <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">"Nicht vollständig Immunisierte"</span><span class="p">,</span> <span class="s2">"Vollständig Immunisierte"</span><span class="p">],</span>
                 <span class="n">step</span><span class="o">=</span><span class="s2">"pre"</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">()[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1">#ax.axhline(0, color="k")</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"PatientInnen auf OÖ Intensivstationen nach Immunisierung"</span> <span class="o">+</span> <span class="n">OO_STAMP</span><span class="p">)</span>

<span class="n">ooch_wk</span> <span class="o">=</span> <span class="n">ooch</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">ooch</span><span class="p">[</span><span class="s2">"FZHospnew"</span><span class="p">])]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="c1">#idxs = ooch_wk.index.to_series()</span>
<span class="c1">#idxs[idxs.dayofweek != matplotlib.dates.SUNDAY] = idxs.</span>
<span class="n">ooch_wk</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">ooch_wk</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">snap</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Week</span><span class="p">(</span><span class="n">weekday</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">ooch_wk</span><span class="p">[</span><span class="s2">"dt"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ooch_wk</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m.%y"</span><span class="p">)</span>
<span class="c1">#ooch_wk["FZICUvnew"] = ooch_wk["FZICUnew"] - ooch_wk["icuunvaxnew"] </span>
<span class="c1">#ooch_wk["FZHospvnew"] = ooch_wk["FZHospnew"] - ooch_wk["hospunvaxnew"] </span>
<span class="n">ooch_wk</span><span class="p">[</span><span class="s2">"FZHospnewTotal"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ooch_wk</span><span class="p">[</span><span class="s2">"FZHospnew"</span><span class="p">]</span> <span class="o">+</span> <span class="n">ooch_wk</span><span class="p">[</span><span class="s2">"FZICUnew"</span><span class="p">]</span> 
<span class="c1">#ax.set_xlim(left=ax.get_xlim()[0])</span>
<span class="n">hosp_oo</span> <span class="o">=</span> <span class="n">hospfz</span><span class="p">[</span><span class="n">hospfz</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">ooch_wk</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">)</span>
<span class="n">hosp_oo</span> <span class="o">=</span> <span class="n">hosp_oo</span><span class="p">[</span><span class="o">~</span><span class="n">hosp_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">weekday</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])]</span>
<span class="n">hospa_oo</span> <span class="o">=</span> <span class="n">hosp</span><span class="p">[</span><span class="n">hosp</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">ooch_wk</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plt_oo_hosp</span><span class="p">(</span><span class="n">logscale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hosp_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">hosp_oo</span><span class="p">[</span><span class="s2">"FZHosp"</span><span class="p">]</span> <span class="o">+</span> <span class="n">hosp_oo</span><span class="p">[</span><span class="s2">"FZICU"</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">"Belegung (AGES)"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">)</span>
    <span class="c1">#ax.plot(hospa_oo["Datum"], hospa_oo["NormalBettenBelCovid19"] + hospa_oo["IntensivBettenBelCovid19"],</span>
    <span class="c1">#        label="Belegung (AGES)", color="C1", marker="o")</span>
    <span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">)</span> <span class="k">if</span> <span class="n">logscale</span> <span class="k">else</span> <span class="nb">dict</span><span class="p">(</span><span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">snap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">aa</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span> <span class="k">if</span> <span class="n">logscale</span> <span class="k">else</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">)(</span>
        <span class="n">ooch_wk</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">ooch_wk</span><span class="p">[</span><span class="s2">"FZHospnewTotal"</span><span class="p">],</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"Neuaufnahmen/Woche (OÖ Landeskorrespondenz)"</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
    <span class="c1">#ax.tick_params(rotation=0)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hosp_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Woche bis"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Stationäre PatientInnen"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logscale</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"x"</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Stationäre COVID-Krankenhaus-PatientInnen in OÖ"</span> <span class="o">+</span> <span class="p">(</span><span class="s2">", logarithmisch"</span> <span class="k">if</span> <span class="n">logscale</span> <span class="k">else</span> <span class="s2">""</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">logscale</span><span class="p">:</span>
        <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        
<span class="n">plt_oo_hosp</span><span class="p">()</span>
<span class="n">plt_oo_hosp</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_235_0.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_235_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=adeccba5">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [209]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">oodead_o</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">COLLECTROOT</span> <span class="o">/</span> <span class="s2">"covid/extractlk.dead.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">)</span>
<span class="n">oodead_o</span><span class="p">[</span><span class="s2">"pubdate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">oodead_o</span><span class="p">[</span><span class="s2">"pubdate"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_SP_TIME_FMT</span><span class="p">)</span>
<span class="n">oodead_o</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="o">.</span><span class="n">parseutc_at</span><span class="p">(</span><span class="n">oodead_o</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="n">cov</span><span class="o">.</span><span class="n">ISO_DATE_FMT</span><span class="p">)</span>
<span class="n">oodead</span> <span class="o">=</span> <span class="n">oodead_o</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">fmask</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">])</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fmask</span><span class="p">,</span> <span class="s2">"deathdate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">oodead</span><span class="p">[</span><span class="s2">"pubdate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"deathdate"</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">oodead</span><span class="p">[</span><span class="s2">"pubdate"</span><span class="p">]</span> <span class="o">=</span> <span class="n">oodead</span><span class="p">[</span><span class="s2">"pubdate"</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">oodead</span><span class="p">[</span><span class="s2">"deathloc"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">oodead</span><span class="p">[</span><span class="s2">"deathlockind"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">""</span>
<span class="n">locs</span> <span class="o">=</span> <span class="n">oodead</span><span class="p">[</span><span class="s2">"deathloc"</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
<span class="n">medothermarker</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">"MVE |Therapiezentrum "</span>

<span class="n">khmarker</span> <span class="o">=</span> <span class="p">(</span><span class="sa">r</span><span class="s2">"[Kk]linikum\b|\b[UL]?KH\b|Landesklinik|Ordensklinik|PEK\b|hospital"</span>
            <span class="sa">r</span><span class="s2">"|Barmherzige Schwestern Linz|Elisabethinen Linz|SK Bad Ischl|LK Zwettl|St. Josef Braunau am Inn"</span>
            <span class="sa">r</span><span class="s2">"|OKL\b|Universitätsklinik|Uniklinik|KUM Med Campus"</span>
            <span class="sa">r</span><span class="s2">"|KUK(?:[, ]|$)|[Kk]rankenh?aus|^Barmherzige (?:Schwestern|Brüder) \S+"</span>
            <span class="sa">r</span><span class="s2">"|\bSalzkammergut Klinik\b"</span>
            <span class="sa">r</span><span class="s2">"|\bBHB\b"</span>
           <span class="o">+</span> <span class="s2">"|"</span> <span class="o">+</span> <span class="n">medothermarker</span><span class="p">)</span>
<span class="n">aphmarker</span> <span class="o">=</span> <span class="p">(</span><span class="sa">r</span><span class="s2">"BSH |BHS |[Aa]ltenheim|[Ss]enioren|BAH |\bB?APH\b"</span>
            <span class="sa">r</span><span class="s2">"|Pflegestation, Gesellenhausstraße|[Aa]lten\b|\b[Pp]flege|pflegeheim|SENIORium|Seniorium"</span>
            <span class="sa">r</span><span class="s2">"|^Haus |Sozialzentrum |St. Josef Wohnen Sierning"</span><span class="p">)</span>
<span class="n">unkmarker</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">"unbekannt|Obduktion|nicht gemeldet|^$"</span>
<span class="n">homemarker</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">"\b[Zz]uhause|zu Hause"</span>
<span class="n">oodead</span><span class="p">[</span><span class="s2">"hascond"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Vorerkrankung unbekannt"</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"cond"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">r</span><span class="s2">"mit "</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="kc">False</span><span class="p">),</span> <span class="s2">"hascond"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Vorerkrankt"</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"cond"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">r</span><span class="s2">"ohne "</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
           <span class="o">|</span> <span class="n">oodead</span><span class="p">[</span><span class="s2">"cond"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">r</span><span class="s2">"keine "</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="kc">False</span><span class="p">),</span> <span class="s2">"hascond"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Nicht vorerkrankt"</span>
<span class="n">display</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"hascond"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">locs</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">khmarker</span><span class="p">),</span> <span class="s2">"deathlockind"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Krankenhaus"</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">locs</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">aphmarker</span><span class="p">),</span> <span class="s2">"deathlockind"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Altenheim"</span>
<span class="c1">#oodead.loc[locs.str.contains(medothermarker), "deathlockind"] = "Andere Med. Einrichtung"</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">locs</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">unkmarker</span><span class="p">),</span> <span class="s2">"deathlockind"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Unbekannt"</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">locs</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">homemarker</span><span class="p">),</span> <span class="s2">"deathlockind"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Zuhause"</span>
<span class="n">oodead</span><span class="p">[</span><span class="s2">"deathlockind"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathlockind"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">oodead</span><span class="p">))</span>
<span class="n">uncat</span> <span class="o">=</span> <span class="n">locs</span><span class="p">[(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathlockind"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">""</span><span class="p">)</span> <span class="o">|</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathlockind"</span><span class="p">])]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">uncat</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">uncat</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

<span class="n">loc_order</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Krankenhaus"</span><span class="p">,</span> <span class="s2">"Unbekannt"</span><span class="p">,</span> <span class="s2">"Altenheim"</span><span class="p">,</span> <span class="s2">"Zuhause"</span><span class="p">]</span>
<span class="n">age_bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">oodead</span><span class="p">[</span><span class="s2">"age"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">mindate</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
<span class="n">maxdate</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>

<span class="n">binwidth</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">"COVID-Tote in OÖ bis </span><span class="si">{</span><span class="n">oodead</span><span class="p">[</span><span class="s1">'deathdate'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2"> nach Sterbeort und Sterbedatum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
<span class="n">fs_oo</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Oberösterreich'"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">binwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"14-Tage-Summe-Tote AGES"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">oodead</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"deathdate"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"deathlockind"</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="s2">"stack"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                  <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">mindate</span><span class="p">,</span> <span class="n">maxdate</span> <span class="o">+</span> <span class="n">binwidth</span><span class="p">,</span> <span class="n">binwidth</span><span class="p">),</span> <span class="c1">#hue_order=[None, 'Unbekannt', 'Altenheim', 'Zuhause']</span>
            <span class="n">hue_order</span><span class="o">=</span><span class="n">loc_order</span><span class="p">)</span>
<span class="c1">#aphdead.iloc[aphdead["age"].argmin()]</span>
<span class="c1">#ax.legend()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl"</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

<span class="n">ttlbase</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"COVID-Tote in OÖ bis </span><span class="si">{</span><span class="n">oodead</span><span class="p">[</span><span class="s1">'deathdate'</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">ttlbase</span> <span class="o">+</span> <span class="s2">" nach Vorerkrankung und Sterbedatum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_oo</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_oo</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">binwidth</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">binwidth</span><span class="si">}</span><span class="s2">-Tage-Summe-Tote AGES"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">oodead</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"deathdate"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"hascond"</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="s2">"stack"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">mindate</span><span class="p">,</span> <span class="n">maxdate</span> <span class="o">+</span> <span class="n">binwidth</span> <span class="p">,</span> <span class="n">binwidth</span><span class="p">))</span>
<span class="c1">#aphdead.iloc[aphdead["age"].argmin()]</span>
<span class="c1">#ax.legend()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl"</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">pltdeadage</span><span class="p">(</span><span class="n">partitions</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">partitions</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"COVID-Tote in Oberösterreich je Welle und Sterbeort"</span> <span class="o">+</span> <span class="n">OO_STAMP</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
    <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">oodead</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flat</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">partitions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">(</span><span class="n">axs</span><span class="p">,),</span> <span class="n">partitions</span><span class="p">):</span>
        <span class="n">ddate</span> <span class="o">=</span> <span class="n">oodead</span><span class="p">[</span><span class="s1">'deathdate'</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">ddate</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2"> ‒ </span><span class="si">{</span><span class="n">ddate</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'</span><span class="si">%x</span><span class="s1">'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="n">mindate</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">weekday</span><span class="p">()))</span>
        <span class="n">maxdate</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>

        <span class="n">xisage</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">if</span> <span class="n">xisage</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">oodead</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"age"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"deathlockind"</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="s2">"stack"</span><span class="p">,</span>
                              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="n">loc_order</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">age_bins</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="n">isfirst</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">oodead</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="n">sns</span><span class="o">.</span><span class="n">rugplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">oodead</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"age &lt; 45"</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"age"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="c1">#aphdead.iloc[aphdead["age"].argmin()]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Alter"</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="s1">'auto'</span><span class="p">,</span> <span class="n">min_n_ticks</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">integer</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">oodead</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"deathlockind"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"deathlockind"</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="s2">"stack"</span><span class="p">,</span>
                  <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">hue_order</span><span class="o">=</span><span class="n">loc_order</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">age_bins</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Sterbeort"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isfirst</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">xisage</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Sterbeort"</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl"</span><span class="p">)</span>
            <span class="n">isfirst</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">ttlbase</span> <span class="o">+</span> <span class="s2">" nach Alter und Vorerkrankung"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">oodead</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"age"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"hascond"</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="s2">"stack"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">age_bins</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="c1">#aphdead.iloc[aphdead["age"].argmin()]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Alter"</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl"</span><span class="p">)</span>
            <span class="c1">#oodead["deathlockind"].unique()</span>

            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">ttlbase</span> <span class="o">+</span> <span class="s2">" nach Sterbeort und Vorerkrankung"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">oodead</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"deathlockind"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"hascond"</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="mf">.8</span><span class="p">)</span>
            <span class="c1">#aphdead.iloc[aphdead["age"].argmin()]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Todesort"</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anzahl"</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">xisage</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    
<span class="n">pltdeadage</span><span class="p">([</span><span class="n">oodead</span><span class="p">])</span>
<span class="n">pltdeadage</span><span class="p">([</span>
    <span class="c1">#oodead.query("deathdate &gt; '2020-09-01' and deathdate &lt;= '2021-09-01'"),</span>
    <span class="n">oodead</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"deathdate &gt; '2021-03-01' and deathdate &lt;= '2021-07-01'"</span><span class="p">),</span>
    <span class="n">oodead</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"deathdate &gt; '2021-07-01' and deathdate &lt;= '2022-01-15'"</span><span class="p">),</span>
    <span class="n">oodead</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"deathdate &gt; '2022-01-15' and deathdate &lt;= '2022-06-12'"</span><span class="p">),</span>
    <span class="n">oodead</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"deathdate &gt; '2022-06-12'"</span><span class="p">)]);</span>

<span class="c1">#display(oodead))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>hascond
Vorerkrankt                2446
Vorerkrankung unbekannt     527
Nicht vorerkrankt            81
Name: count, dtype: int64</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>deathlockind
Krankenhaus    2270
Unbekannt       453
Altenheim       296
Zuhause          35
Name: count, dtype: int64</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>3054</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>array([], dtype=object)</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_236_4.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_236_5.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_236_6.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_236_7.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a202d886">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [210]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">oodead</span><span class="p">[</span><span class="s2">"mdelay"</span><span class="p">]</span> <span class="o">=</span> <span class="n">oodead</span><span class="p">[</span><span class="s2">"pubdate"</span><span class="p">]</span> <span class="o">-</span> <span class="n">oodead</span><span class="p">[</span><span class="s2">"deathdate"</span><span class="p">]</span>
<span class="n">oodead</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">"pubdate"</span><span class="p">,</span> <span class="s2">"deathdate"</span><span class="p">])</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">200</span><span class="p">)[</span><span class="s2">"mdelay"</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[210]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Timedelta('6 days 02:23:59.999999999')</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=3c37e33c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [211]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">oodead</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">"pubdate"</span><span class="p">,</span> <span class="s2">"deathdate"</span><span class="p">])</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">30</span><span class="p">)[[</span><span class="s2">"pubdate"</span><span class="p">,</span> <span class="s2">"deathdate"</span><span class="p">,</span> <span class="s2">"label"</span><span class="p">,</span> <span class="s2">"age"</span><span class="p">,</span> <span class="s2">"district"</span><span class="p">,</span> <span class="s2">"deathloc"</span><span class="p">,</span> <span class="s2">"cond"</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[211]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>pubdate</th>
<th>deathdate</th>
<th>label</th>
<th>age</th>
<th>district</th>
<th>deathloc</th>
<th>cond</th>
</tr>
</thead>
<tbody>
<tr>
<th>3024</th>
<td>2023-01-24</td>
<td>2023-01-22</td>
<td>Patient</td>
<td>89</td>
<td>Gmunden</td>
<td>Salzkammergut Klinikum, Gmunden</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3025</th>
<td>2023-01-27</td>
<td>2023-01-25</td>
<td>Mann</td>
<td>90</td>
<td>Linz</td>
<td>Sterbeort unbekannt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3026</th>
<td>2023-01-31</td>
<td>2023-01-29</td>
<td>Patient</td>
<td>62</td>
<td>Schärding</td>
<td>Klinikum Schärding</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3027</th>
<td>2023-02-05</td>
<td>2023-01-31</td>
<td>Patient</td>
<td>79</td>
<td>Steyr-Stadt</td>
<td>Pyhrn-Eisenwurzenklinikum, Standort Steyr.</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3028</th>
<td>2023-02-07</td>
<td>2023-01-27</td>
<td>Patientin</td>
<td>85</td>
<td>Linz</td>
<td>Krankenhaus der Barmherzigen Brüder, Linz</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3029</th>
<td>2023-02-07</td>
<td>2023-02-04</td>
<td>Mann</td>
<td>59</td>
<td>Linz</td>
<td>Sterbeort unbekannt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3030</th>
<td>2023-02-08</td>
<td>2023-01-05</td>
<td>Patient</td>
<td>83</td>
<td>Perg</td>
<td>Krankenhaus der Barmherzigen Schwestern, Linz</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3031</th>
<td>2023-02-09</td>
<td>2023-01-31</td>
<td>Mann</td>
<td>78</td>
<td>Steyr</td>
<td>Sterbeort unbekannt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3032</th>
<td>2023-02-09</td>
<td>2023-02-07</td>
<td>Patientin</td>
<td>96</td>
<td>Rohrbach</td>
<td>Klinikum Rohrbach</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3033</th>
<td>2023-02-11</td>
<td>2023-01-14</td>
<td>Mann</td>
<td>88</td>
<td>Linz</td>
<td>Sterbeort unbekannt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3034</th>
<td>2023-02-11</td>
<td>2023-02-09</td>
<td>Patient</td>
<td>81</td>
<td>Rohrbach</td>
<td>Klinikum Freistadt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3035</th>
<td>2023-02-11</td>
<td>2023-02-09</td>
<td>Mann</td>
<td>86</td>
<td>Steyr-Land</td>
<td>Sterbeort unbekannt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3036</th>
<td>2023-02-14</td>
<td>2023-02-11</td>
<td>Frau</td>
<td>76</td>
<td>Freistadt</td>
<td>Sterbeort unbekannt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3037</th>
<td>2023-02-14</td>
<td>2023-02-11</td>
<td>Patientin</td>
<td>65</td>
<td>Gmunden</td>
<td>Salzkammergut Klinikum Vöcklabruck</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3038</th>
<td>2023-02-14</td>
<td>2023-02-12</td>
<td>Frau</td>
<td>72</td>
<td>Wels-Land</td>
<td>Sterbeort unbekannt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3039</th>
<td>2023-02-17</td>
<td>2023-02-15</td>
<td>Patient</td>
<td>89</td>
<td>Freistadt</td>
<td>Klinikum Freistadt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3040</th>
<td>2023-02-17</td>
<td>2023-02-15</td>
<td>Mann</td>
<td>91</td>
<td>Gmunden</td>
<td>Sterbeort unbekannt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3041</th>
<td>2023-02-17</td>
<td>2023-02-15</td>
<td>Mann</td>
<td>89</td>
<td>Linz-Land</td>
<td>Sterbeort unbekannt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3042</th>
<td>2023-02-17</td>
<td>2023-02-16</td>
<td>Patient</td>
<td>87</td>
<td>Vöcklabruck</td>
<td>Salzkammergut Klinikum Vöcklabruck</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3043</th>
<td>2023-02-19</td>
<td>2023-02-17</td>
<td>Mann</td>
<td>86</td>
<td>Grieskirchen</td>
<td>Sterbeort unbekannt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3044</th>
<td>2023-02-21</td>
<td>2023-02-18</td>
<td>Mann</td>
<td>79</td>
<td>Vöcklabruck</td>
<td>Sterbeort unbekannt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3045</th>
<td>2023-02-23</td>
<td>2023-02-13</td>
<td>Mann</td>
<td>85</td>
<td>Linz</td>
<td>Sterbeort unbekannt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3046</th>
<td>2023-02-24</td>
<td>2023-02-20</td>
<td>Frau</td>
<td>82</td>
<td>Gmunden</td>
<td>Sterbeort unbekannt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3047</th>
<td>2023-02-24</td>
<td>2023-02-22</td>
<td>Mann</td>
<td>86</td>
<td>Linz</td>
<td>Sterbeort unbekannt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3048</th>
<td>2023-02-25</td>
<td>2023-02-23</td>
<td>Mann</td>
<td>91</td>
<td>Gmunden</td>
<td>Sterbeort unbekannt</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3049</th>
<td>2023-02-25</td>
<td>2023-02-24</td>
<td>Mann</td>
<td>83</td>
<td>Linz-Land</td>
<td>Sterbeort unbekannt</td>
<td>Vorerkrankungen unbekannt</td>
</tr>
<tr>
<th>3050</th>
<td>2023-03-02</td>
<td>2023-02-27</td>
<td>Patientin</td>
<td>73</td>
<td>Linz-Land</td>
<td>Krankenhaus der Barmherzigen Schwestern, Linz</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3051</th>
<td>2023-03-02</td>
<td>2023-02-27</td>
<td>Patient</td>
<td>76</td>
<td>der Stadt Linz</td>
<td>Krankenhaus der Barmherzigen Schwestern, Linz</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3052</th>
<td>2023-03-03</td>
<td>2023-02-28</td>
<td>Patientin</td>
<td>95</td>
<td>Kirchdorf</td>
<td>PEK, Kirchdorf</td>
<td>mit Vorerkrankungen</td>
</tr>
<tr>
<th>3053</th>
<td>2023-03-03</td>
<td>2023-03-01</td>
<td>Patient</td>
<td>61</td>
<td>Braunau</td>
<td>Krankenhaus Sankt Josef, Braunau</td>
<td>mit Vorerkrankungen</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=336de29a">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="L%C3%BCcken-in-O%C3%96-Landeskorrespondenz-Zeitreihe">Lücken in OÖ Landeskorrespondenz-Zeitreihe<a class="anchor-link" href="#L%C3%BCcken-in-O%C3%96-Landeskorrespondenz-Zeitreihe">¶</a></h2><p>An einigen Tagen wurde keine Landeskorrespondenz zur aktuellen COVID-19 Situation publiziert.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=d9083968">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [212]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="n">ooch_o</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"dt"</span><span class="p">)</span>
<span class="n">dfs</span><span class="p">[</span><span class="n">dfs</span> <span class="o">!=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[212]:</div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>dt</th>
</tr>
<tr>
<th>Datum</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2020-04-01</th>
<td>NaT</td>
</tr>
<tr>
<th>2020-04-13</th>
<td>3 days</td>
</tr>
<tr>
<th>2020-04-19</th>
<td>3 days</td>
</tr>
<tr>
<th>2020-04-26</th>
<td>3 days</td>
</tr>
<tr>
<th>2020-05-10</th>
<td>3 days</td>
</tr>
<tr>
<th>2020-07-24</th>
<td>0 days</td>
</tr>
<tr>
<th>2020-09-01</th>
<td>2 days</td>
</tr>
<tr>
<th>2020-09-03</th>
<td>2 days</td>
</tr>
<tr>
<th>2021-12-06</th>
<td>0 days</td>
</tr>
<tr>
<th>2021-12-08</th>
<td>2 days</td>
</tr>
<tr>
<th>2022-11-18</th>
<td>2 days</td>
</tr>
<tr>
<th>2023-03-10</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-03-17</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-03-24</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-03-31</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-04-07</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-04-14</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-04-21</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-04-28</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-05-05</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-05-12</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-05-19</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-05-26</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-06-02</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-06-09</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-06-16</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-06-23</th>
<td>7 days</td>
</tr>
<tr>
<th>2023-06-30</th>
<td>7 days</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a25424a4">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Verschiedenes">Verschiedenes<a class="anchor-link" href="#Verschiedenes">¶</a></h1>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=b6294775">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [213]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">dtm</span> <span class="o">=</span> <span class="n">ages1m</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">dtm</span><span class="p">[</span><span class="s2">"d14"</span><span class="p">]</span> <span class="o">=</span> <span class="n">dtm</span><span class="p">[</span><span class="s2">"AnzahlTot"</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">dtm</span><span class="p">[[</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="s2">"d14"</span><span class="p">]]</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>AnzahlTot</th>
<th>d14</th>
</tr>
<tr>
<th>Datum</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>2023-06-16</th>
<td>1.0</td>
<td>9.0</td>
</tr>
<tr>
<th>2023-06-17</th>
<td>0.0</td>
<td>9.0</td>
</tr>
<tr>
<th>2023-06-18</th>
<td>0.0</td>
<td>9.0</td>
</tr>
<tr>
<th>2023-06-19</th>
<td>0.0</td>
<td>9.0</td>
</tr>
<tr>
<th>2023-06-20</th>
<td>3.0</td>
<td>12.0</td>
</tr>
<tr>
<th>2023-06-21</th>
<td>1.0</td>
<td>14.0</td>
</tr>
<tr>
<th>2023-06-22</th>
<td>5.0</td>
<td>16.0</td>
</tr>
<tr>
<th>2023-06-23</th>
<td>1.0</td>
<td>17.0</td>
</tr>
<tr>
<th>2023-06-24</th>
<td>1.0</td>
<td>17.0</td>
</tr>
<tr>
<th>2023-06-25</th>
<td>0.0</td>
<td>17.0</td>
</tr>
<tr>
<th>2023-06-26</th>
<td>0.0</td>
<td>17.0</td>
</tr>
<tr>
<th>2023-06-27</th>
<td>4.0</td>
<td>20.0</td>
</tr>
<tr>
<th>2023-06-28</th>
<td>1.0</td>
<td>19.0</td>
</tr>
<tr>
<th>2023-06-29</th>
<td>1.0</td>
<td>18.0</td>
</tr>
<tr>
<th>2023-06-30</th>
<td>2.0</td>
<td>19.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=28d41470">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [214]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mreinf</span> <span class="o">=</span> <span class="n">reinf</span><span class="p">[</span><span class="s2">"N Reinfektionen"</span><span class="p">]</span> <span class="o">/</span> <span class="n">reinf</span><span class="p">[</span><span class="s2">"N Infektionen"</span><span class="p">]</span>
<span class="n">creinf</span> <span class="o">=</span> <span class="n">reinf</span><span class="p">[</span><span class="s2">"N Reinfektionen"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span> <span class="o">/</span> <span class="n">reinf</span><span class="p">[</span><span class="s2">"N Infektionen"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">mreinf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Anteil Reinfektionen monatlich, zuletzt "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">mreinf</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s2">".0%"</span><span class="p">))</span>
<span class="n">creinf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Anteil Reinfektionen gesamt, zuletzt "</span> <span class="o">+</span> <span class="nb">format</span><span class="p">(</span><span class="n">creinf</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s2">".0%"</span><span class="p">))</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anteil an allen bestätigten Fällen"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: Anteil von Reinfektionen an bestätigten COVID-Fällen (Quelle: AGES)"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-01-01"</span><span class="p">))</span>
<span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">mreinf</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Datum
2020-05-01    0.0000
2020-06-01    0.0000
2020-07-01    0.0006
2020-08-01    0.0003
2020-09-01    0.0001
2020-10-01    0.0002
2020-11-01    0.0001
2020-12-01    0.0002
2021-01-01    0.0007
2021-02-01    0.0023
2021-03-01    0.0038
2021-04-01    0.0043
2021-05-01    0.0095
2021-06-01    0.0165
2021-07-01    0.0149
2021-08-01    0.0156
2021-09-01    0.0146
2021-10-01    0.0130
2021-11-01    0.0178
2021-12-01    0.0318
2022-01-01    0.0990
2022-02-01    0.1054
2022-03-01    0.1169
2022-04-01    0.1296
2022-05-01    0.1453
2022-06-01    0.1836
2022-07-01    0.2181
2022-08-01    0.2549
2022-09-01    0.2962
2022-10-01    0.2864
NaT           0.1181
dtype: float64</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_243_1.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a4b86827">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [215]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">reinf</span><span class="p">[</span><span class="s2">"N Reinfektionen"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Reinfektionen"</span><span class="p">)</span>
<span class="n">fs_at</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Datum &lt; '2021-12-25'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"AnzahlFaelleSum"</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"Infektionen vor Omikron"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Bestätigte Fälle &amp; Reinfektionen"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2021-01-01"</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">set_useLocale</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#dir(ax.yaxis.get_major_formatter()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_244_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=b18e5787">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [216]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">drawcmp</span><span class="p">(</span><span class="n">valcol</span><span class="p">,</span> <span class="n">valname</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
            <span class="n">usemean</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">agg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">usemmx</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">rstrip</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">showstripped</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
            <span class="n">wholeyear</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">usemean</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">agg</span><span class="p">:</span>
        <span class="n">agg</span> <span class="o">=</span> <span class="s1">'mean'</span>
    <span class="c1">#mms_at = mms.query(f"Bundesland == '{selbl}'").copy()</span>
    <span class="c1">#mms_at["AnzahlTot"] = erase_outliers(mms_at["AnzahlTot"])</span>
    <span class="c1">#mms_at["AnzahlFaelle7Tage"] = mms_at["AnzahlFaelle"].rolling(7).sum()</span>
    <span class="k">if</span> <span class="n">usemmx</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">dsrc</span> <span class="o">=</span> <span class="n">mmx</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Bundesland == '</span><span class="si">{</span><span class="n">selbl</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="c1">#if valcol == "AnzahlTot":</span>
        <span class="c1">#dsrc["AnzahlTot"] = erase_outliers(dsrc["AnzahlTot"])</span>
        <span class="n">tdiff</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">valcol</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"FZHosp"</span><span class="p">,</span> <span class="s2">"FZICU"</span><span class="p">,</span> <span class="s2">"FZHospAlle"</span><span class="p">)</span> <span class="k">else</span> <span class="mi">1</span>
        <span class="n">hist</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">tdiff</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">mmx</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Datum"</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbl</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">tdiff</span><span class="p">:</span>
            <span class="n">hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">tdiff</span><span class="p">)</span>
        <span class="n">dsrc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">hist</span><span class="p">,</span> <span class="n">dsrc</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">usemmx</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">or</span> <span class="n">usemmx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dsrc</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="n">fs</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbl</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dsrc</span> <span class="o">=</span> <span class="n">usemmx</span><span class="p">[</span><span class="n">usemmx</span><span class="p">[</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">==</span> <span class="n">selbl</span><span class="p">]</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="c1">#valcol, valname = "AnzahlFaelle", "Fälle"</span>
    <span class="c1">#valcol, valname = "AnzahlTot", "Tote"</span>
    <span class="c1">#valcol, valname = "FZHospAlle", "Hospitalisierte"</span>
    <span class="n">vals</span> <span class="o">=</span> <span class="n">dsrc</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="n">valcol</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">usemmx</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">valcol</span> <span class="o">==</span> <span class="s2">"AnzahlTot"</span><span class="p">:</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="n">erase_outliers</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">agg</span><span class="p">:</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">rwidth</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">agg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rstrip</span><span class="p">:</span>
        <span class="n">cvals</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="n">rstrip</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="n">rstrip</span><span class="p">]</span>
         <span class="c1">#.rolling(7).mean() if usemean else vs</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">2019</span><span class="p">,</span> <span class="s2">"C7"</span><span class="p">),</span> <span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="s2">"C4"</span><span class="p">),</span> <span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="s2">"C0"</span><span class="p">),</span> <span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="s2">"C3"</span><span class="p">),</span> <span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="s2">"C1"</span><span class="p">)]</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[(</span><span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="n">fromdate</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">vals</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="n">thisyearstart</span> <span class="o">=</span> <span class="n">fromdate</span>
    <span class="n">thisyearlen</span> <span class="o">=</span> <span class="p">(</span><span class="n">vals</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">fromdate</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">datalen</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">wholeyear</span> <span class="k">else</span> <span class="nb">sum</span><span class="p">(</span><span class="n">vals</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">thisyearstart</span><span class="p">)</span>
    <span class="n">margin</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">wholeyear</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">datalen</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">)),</span> <span class="n">rstrip</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">mixedyear</span> <span class="o">=</span> <span class="n">fromdate</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2022</span><span class="p">)</span> <span class="o">!=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-01-01"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">yearidx</span><span class="p">,</span> <span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
        <span class="n">thatyearstart</span> <span class="o">=</span> <span class="n">thisyearstart</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">)</span>
        <span class="n">thatyearlen</span> <span class="o">=</span> <span class="n">datalen</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">wholeyear</span> <span class="k">else</span> <span class="mi">365</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span>
            <span class="mi">1</span> <span class="k">if</span> <span class="p">(</span><span class="n">thatyearstart</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">365</span><span class="p">))</span><span class="o">.</span><span class="n">is_leap_year</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">yeardata</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="n">vals</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">thatyearstart</span><span class="p">]</span>
        <span class="n">hl_idx</span> <span class="o">=</span> <span class="n">thisyearlen</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">yeardata</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">thatyearstart</span><span class="p">:</span>
            <span class="n">off</span> <span class="o">=</span> <span class="p">(</span><span class="n">thatyearstart</span> <span class="o">-</span> <span class="n">yeardata</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">days</span>
            <span class="n">thatyearlen</span> <span class="o">+=</span> <span class="n">off</span>
            <span class="n">hl_idx</span> <span class="o">+=</span> <span class="n">off</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">off</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">yeardata</span> <span class="o">=</span> <span class="n">yeardata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="n">thatyearlen</span> <span class="o">+</span> <span class="n">margin</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">thatyearlen</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">yeardata</span><span class="p">),</span> <span class="n">thatyearlen</span><span class="p">)</span>
        <span class="c1">#print(thatyearlen, year)</span>
        <span class="k">if</span> <span class="n">thatyearlen</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="s2">"No data"</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">wholeyear</span><span class="p">:</span>
            <span class="n">datalen</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">datalen</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">thatyearlen</span><span class="p">)</span>
        <span class="n">lastval</span> <span class="o">=</span> <span class="n">yeardata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">hl_idx</span><span class="p">]</span> <span class="k">if</span> <span class="n">hlcur</span> <span class="ow">and</span> <span class="n">hl_idx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">lastval_s</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">lastval</span><span class="p">,</span> <span class="s2">".0f"</span><span class="p">)</span> <span class="k">if</span> <span class="n">lastval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">"N/A"</span>
        <span class="c1">#lastyear = mms_at.query("Datum &gt;= '2021-05-01'").iloc[:len(thisyear)].copy()</span>
        <span class="c1">#lastyear2 = fs_at.query("Datum &gt;= '2020-05-01'").iloc[:len(thisyear)].copy()</span>
        <span class="n">dts</span> <span class="o">=</span> <span class="n">thisyearstart</span> <span class="o">+</span> <span class="p">(</span><span class="n">yeardata</span><span class="o">.</span><span class="n">index</span> <span class="o">-</span> <span class="n">yeardata</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">off</span><span class="p">))</span>
        <span class="c1">#lastyear2["Datum"] = thisyear.iloc[0]["Datum"] + (lastyear2["Datum"] - lastyear2.iloc[0]["Datum"])</span>
        <span class="c1">#ax.plot(lastyear2["Datum"], _tseries(lastyear2), label="2020: " + lastval(lastyear2), color="C4")</span>
        <span class="c1">#display(yeardata)</span>
        <span class="n">valsuffix</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="k">if</span> <span class="n">valcol</span> <span class="o">==</span> <span class="s2">"AnzahlTot"</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lastval_s</span> <span class="o">==</span> <span class="s2">"1"</span><span class="p">:</span>
                <span class="n">valsuffix</span> <span class="o">=</span> <span class="s2">"/r"</span>
        <span class="k">if</span> <span class="n">mixedyear</span><span class="p">:</span>
            <span class="n">yearsuffix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">100</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">yearsuffix</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dts</span><span class="p">,</span> <span class="n">yeardata</span><span class="p">,</span>
                        <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">year</span><span class="si">}{</span><span class="n">yearsuffix</span><span class="si">}</span><span class="s2">"</span> <span class="o">+</span> <span class="p">(</span><span class="sa">f</span><span class="s2">": </span><span class="si">{</span><span class="n">lastval_s</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">valname</span><span class="si">}{</span><span class="n">valsuffix</span><span class="si">}</span><span class="s2">"</span> <span class="k">if</span> <span class="n">hlcur</span> <span class="k">else</span> <span class="s2">""</span><span class="p">),</span>
                        <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">thatyearstart</span> <span class="o">==</span> <span class="n">thisyearstart</span> <span class="ow">and</span> <span class="n">rstrip</span> <span class="ow">and</span> <span class="n">showstripped</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cvals</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">":"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">hlcur</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dts</span><span class="p">[</span><span class="n">hl_idx</span><span class="p">:</span><span class="n">hl_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">yeardata</span><span class="p">[</span><span class="n">hl_idx</span><span class="p">:</span><span class="n">hl_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1">#ax.annotate("foo", (dts[-1], yeardata.iloc[-1]))</span>
        <span class="c1">#ax.plot(thisyear["Datum"], _tseries(thisyear), lw=2, label="2022: " + lastval(thisyear), color="C3")</span>
    <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">showyear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">thisyearstart</span><span class="p">,</span>
                <span class="n">right</span><span class="o">=</span><span class="n">thisyearstart</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">((</span><span class="n">datalen</span> <span class="o">+</span> <span class="n">margin</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">wholeyear</span> <span class="k">else</span> <span class="mi">367</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">meanlbl</span> <span class="o">=</span> <span class="s2">" (7-Tage-Schnitt)"</span> <span class="k">if</span> <span class="n">usemean</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span>
        <span class="n">dsrc</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">"Bundesland"</span><span class="p">]</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">": COVID-</span><span class="si">{</span><span class="n">valname</span><span class="si">}{</span><span class="n">meanlbl</span><span class="si">}</span><span class="s2"> 2020 ‒ "</span>
        <span class="o">+</span> <span class="n">vals</span><span class="o">.</span><span class="n">last_valid_index</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="s2">.%m.%Y"</span><span class="p">)</span> <span class="o">+</span> <span class="n">AGES_STAMP</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">valname</span> <span class="o">+</span> <span class="n">meanlbl</span><span class="p">)</span>
<span class="c1">#drawcmp("AnzahlFaelle", "Fälle", usemean=True)</span>
<span class="c1">#drawcmp("FZHospAlle", "Hospitalisierte", usemean=False, usemmx=True)</span>
<span class="c1">#drawcmp("FZHospAlle", "Hospitalisierte", usemean=False, usemmx=True, selbl="Oberösterreich")</span>
<span class="c1">#drawcmp("AnzahlTot", "Tote/14 Tage", agg='sum', rwidth=14, usemmx=False, rstrip=9, selbl="Österreich")</span>
<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="s2">"Tote/14 Tage"</span><span class="p">,</span> <span class="n">agg</span><span class="o">=</span><span class="s1">'sum'</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-06-15"</span><span class="p">),</span>
        <span class="n">rwidth</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">usemmx</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rstrip</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showstripped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"AnzahlTot"</span><span class="p">,</span> <span class="s2">"Todesfallmeldungen*/7 Tage"</span><span class="p">,</span> <span class="n">agg</span><span class="o">=</span><span class="s2">"sum"</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-06-15"</span><span class="p">),</span>
        <span class="n">usemmx</span><span class="o">=</span><span class="n">mmx</span><span class="p">,</span><span class="c1">#ages1m[ages1m["Datum"] &gt;= ages1m.iloc[0]["Datum"]],</span>
        <span class="n">rstrip</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showstripped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"*Todesfallmeldungen ohne Nachmeldungen die mehr als 21 Tage in Vergangenheit reichen"</span><span class="p">,</span>
                    <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">900</span><span class="p">)</span>
<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"AnzahlTot7Tage"</span><span class="p">,</span> <span class="s2">"Tote*/7 Tage"</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-06-15"</span><span class="p">),</span>
        <span class="n">usemmx</span><span class="o">=</span><span class="n">ages_hist</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
                            <span class="o">|</span> <span class="p">((</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
                            <span class="o">&amp;</span> <span class="p">(</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
                            <span class="o">|</span> <span class="p">((</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span> <span class="o">==</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
                            <span class="o">&amp;</span> <span class="p">(</span><span class="n">ages_hist</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">10</span><span class="p">)))],</span>
        <span class="n">rstrip</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showstripped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
    <span class="s2">"*Todesfälle je historischer Datenstand 10 Tage nach letztem Todesdatum bzw. mindestens Stand "</span> 
    <span class="o">+</span> <span class="n">ages_hist</span><span class="p">[</span><span class="s2">"FileDate"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%x</span><span class="s2">"</span><span class="p">),</span>
    <span class="n">fontsize</span><span class="o">=</span><span class="s2">"small"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
<span class="c1">#plt.gca().set_ylim(bottom=10)</span>
<span class="c1">#cov.set_logscale(plt.gca())</span>
<span class="c1">#cov.set_logscale(plt.gca())</span>
<span class="c1">#plt.gca().set_ylim(bottom=10)</span>
<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"FZHospAlle"</span><span class="p">,</span> <span class="s2">"Hospitalisierte"</span><span class="p">,</span> <span class="n">selbl</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">,</span> <span class="n">usemmx</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-06-15"</span><span class="p">),</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"FZICU"</span><span class="p">,</span> <span class="s2">"PatientInnen auf ICU"</span><span class="p">,</span> <span class="n">usemmx</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-06-15"</span><span class="p">),</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1">#drawcmp("FZHospAlle", "Hospitalisierte", selbl="Burgenland", usemmx=True, wholeyear=True, fromdate=pd.to_datetime("2022-06-15"), hlcur=False)</span>

<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"7-Tage-Inzidenz/100.000"</span><span class="p">,</span> <span class="n">usemean</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-05-15"</span><span class="p">),</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>

<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"7-Tage-Inzidenz/100.000, Altersgruppe 5-14"</span><span class="p">,</span> <span class="n">usemean</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-05-15"</span><span class="p">),</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">usemmx</span><span class="o">=</span><span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Altersgruppe == '5-14'"</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>


<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"7-Tage-Inzidenz/100.000, Altersgruppe 65+"</span><span class="p">,</span> <span class="n">usemean</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2022-05-15"</span><span class="p">),</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="c1">#usemmx=agd_sums.query("Altersgruppe == '&lt;5'")</span>
        <span class="n">usemmx</span><span class="o">=</span><span class="n">agg_casedata</span><span class="p">(</span>
            <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe in ('65-74', '75-84', '&gt;84')"</span><span class="p">),</span>
            <span class="s2">"Altersgruppe"</span><span class="p">,</span>
            <span class="s2">"65+"</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">Bundesland</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">)</span>
       <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>

<span class="n">drawcmp</span><span class="p">(</span><span class="s2">"inz"</span><span class="p">,</span> <span class="s2">"7-Tage-Inzidenz/100.000, Altersgruppe 25-54"</span><span class="p">,</span> <span class="n">usemean</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wholeyear</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">fromdate</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2023-01-01"</span><span class="p">),</span> <span class="n">hlcur</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="c1">#usemmx=agd_sums.query("Altersgruppe == '&lt;5'")</span>
        <span class="n">usemmx</span><span class="o">=</span><span class="n">agg_casedata</span><span class="p">(</span>
            <span class="n">agd_sums</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich' and Altersgruppe in ('25-34', '35-44', '45-54')"</span><span class="p">),</span>
            <span class="s2">"Altersgruppe"</span><span class="p">,</span>
            <span class="s2">"25-54"</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">Bundesland</span><span class="o">=</span><span class="s2">"Österreich"</span><span class="p">)</span>
       <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>2019 No data
2019 No data
</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_1.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_3.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_4.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_5.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_6.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_7.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_8.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_245_9.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=ab5ae08c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Varianten">Varianten<a class="anchor-link" href="#Varianten">¶</a></h1>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=bc7da751">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [217]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">email.utils</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timezone</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/ages-varianten/Varianten_Verteilung_lasthdr.txt"</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">hdrf</span><span class="p">:</span>
    <span class="n">seqdate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span>
        <span class="n">email</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">parsedate_to_datetime</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">parse_headers</span><span class="p">(</span><span class="n">hdrf</span><span class="p">)[</span><span class="s2">"Last-Modified"</span><span class="p">])</span>
    <span class="p">)</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s2">"Europe/Vienna"</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"</span><span class="si">%a</span><span class="s2"> </span><span class="si">%d</span><span class="s2">.%m.%Y"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">seqdate</span><span class="si">=}</span><span class="s2">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">map_seqkw</span><span class="p">(</span><span class="n">xs</span><span class="p">):</span>
    <span class="n">xs</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="s2">"Kalenderwoche"</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">kw</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">fromisocalendar</span><span class="p">(</span><span class="mi">2022</span> <span class="k">if</span> <span class="n">kw</span> <span class="o">&gt;=</span> <span class="mi">45</span> <span class="k">else</span> <span class="mi">2023</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span>
<span class="n">seqcount</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/ages-varianten/Varianten_gesamt_KW_latest.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span>
<span class="n">map_seqkw</span><span class="p">(</span><span class="n">seqcount</span><span class="p">)</span>
<span class="n">seqcount_n</span> <span class="o">=</span> <span class="n">seqcount</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"Sequenzierung pro KW"</span><span class="p">]</span>
<span class="n">seqdistr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">DATAROOT</span> <span class="o">/</span> <span class="s2">"covid/ages-varianten/Varianten_Verteilung_latest.csv"</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="s2">"Kalenderwoche"</span><span class="p">,</span> <span class="n">var_name</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">"share"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Distr bis KW"</span><span class="p">,</span> <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"Kalenderwoche"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">nseqvars</span> <span class="o">=</span> <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"variant"</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">seqdistr</span><span class="p">[</span><span class="s2">"share"</span><span class="p">]</span> <span class="o">/=</span> <span class="mi">100</span>
<span class="n">map_seqkw</span><span class="p">(</span><span class="n">seqdistr</span><span class="p">)</span>

<span class="n">blv_at_last_y</span> <span class="o">=</span> <span class="n">blverlauf_last</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"Bundesland == 'Österreich'"</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"y"</span><span class="p">]</span>
<span class="n">dt_end</span> <span class="o">=</span> <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">seqdistr</span> <span class="o">=</span> <span class="n">seqdistr</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">blv_at_last_y</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"load"</span><span class="p">),</span>
    <span class="n">left_on</span><span class="o">=</span><span class="n">dt_end</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">"key_0"</span><span class="p">)</span>
<span class="n">seqdistr</span><span class="p">[</span><span class="s2">"load"</span><span class="p">]</span> <span class="o">*=</span> <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"share"</span><span class="p">]</span>
<span class="c1">#display(seqdistr)</span>

<span class="n">dt_end</span> <span class="o">=</span> <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># Need to recalc b/c of index change</span>
<span class="n">seqdistr</span> <span class="o">=</span> <span class="n">seqdistr</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">fs_at</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"inz"</span><span class="p">]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"case_inz"</span><span class="p">),</span>
    <span class="n">left_on</span><span class="o">=</span><span class="n">dt_end</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">"left"</span><span class="p">)</span><span class="c1">#.drop(columns="key_0")</span>
<span class="c1">#display(seqdistr)</span>
<span class="n">seqdistr</span><span class="p">[</span><span class="s2">"case_inz"</span><span class="p">]</span> <span class="o">*=</span> <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"share"</span><span class="p">]</span>

<span class="n">seqdistr</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># Week center (last date is start of last day)</span>
<span class="n">seqcount_n</span><span class="o">.</span><span class="n">index</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1">#display(seqdistr)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">seqdistr</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"share"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_percent_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
<span class="n">cov</span><span class="o">.</span><span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">seqdistr</span><span class="p">,</span> <span class="s2">"share"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">shorten</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">,</span>
              <span class="n">colorize</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="n">nseqvars</span><span class="p">),</span> <span class="n">ends</span><span class="o">=</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: SARS-CoV-2-Variantenverteilung lt. AGES, logarithmisch, Stand "</span> <span class="o">+</span> <span class="n">seqdate</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Anteil"</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">'height_ratios'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">]})</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">seqdistr</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"load"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">blv_at_last_y</span><span class="p">[</span><span class="n">blv_at_last_y</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()],</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">"Summe"</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">seqdistr</span><span class="p">,</span> <span class="s2">"load"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">shorten</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">,</span>
              <span class="n">colorize</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="n">nseqvars</span><span class="p">),</span> <span class="n">ends</span><span class="o">=</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: SARS-CoV-2-Varianten-Abwasserlast, logarithmisch, Stand Varianten: "</span> <span class="o">+</span> <span class="n">seqdate</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Genkopien pro Tag / EW * 10⁶"</span><span class="p">)</span>

<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">seqcount_n</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
<span class="n">h50</span> <span class="o">=</span> <span class="n">seqcount_n</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">seqcount_n</span><span class="p">)):</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">seqcount_n</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span>
        <span class="p">(</span><span class="n">seqcount_n</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">v</span><span class="p">),</span>
        <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">h50</span> <span class="k">else</span> <span class="o">-</span><span class="mi">8</span><span class="p">),</span> <span class="n">textcoords</span><span class="o">=</span><span class="s1">'offset points'</span><span class="p">,</span>
        <span class="n">va</span><span class="o">=</span><span class="s2">"baseline"</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">h50</span> <span class="k">else</span> <span class="s2">"top"</span><span class="p">,</span>
        <span class="n">ha</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="s2">"medium"</span> <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">seqcount_n</span><span class="p">)</span> <span class="k">else</span> <span class="s2">"x-small"</span><span class="p">,)</span>
<span class="c1">#axs[1].set_ylim(bottom=0)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reduced</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Probedatum"</span><span class="p">)</span>
<span class="c1">#axs[1].yaxis.set_major_locator(matplotlib.ticker.MaxNLocator('auto', integer=True, min_n_ticks=3))</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">"Anzahl sequenzierter Proben (inkl. nicht auswertbarer) pro KW (logarithmisch; Achse beginnt nicht bei 0)"</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Sequenzen"</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Probedatum (oberer Teil) bzw. unklares Datum (Probe oder Sequenzierung) (unterer)"</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">stampit</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">cov</span><span class="o">.</span><span class="n">DS_BOTH</span><span class="p">)</span>

<span class="c1">###########</span>

<span class="c1">#display([pdata[c] for c in pdata.columns])</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span>
    <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span>
    <span class="o">*</span><span class="p">[</span><span class="n">seqdistr</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">seqdistr</span><span class="p">[</span><span class="s2">"variant"</span><span class="p">]</span> <span class="o">==</span> <span class="n">c</span><span class="p">,</span> <span class="s2">"load"</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">seqdistr</span><span class="p">[</span><span class="s2">"variant"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()],</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">seqdistr</span><span class="p">[</span><span class="s2">"variant"</span><span class="p">],</span>
    <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">seqdistr</span><span class="p">[</span><span class="s2">"cs"</span><span class="p">]</span> <span class="o">=</span> <span class="n">seqdistr</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"load"</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="n">seqdistr</span><span class="p">[</span><span class="s2">"cc"</span><span class="p">]</span> <span class="o">=</span> <span class="n">seqdistr</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="s2">"cs"</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">cs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">]),</span> <span class="n">cs</span><span class="p">])</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="c1">#display(seqdistr)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="c1">#cov.set_logscale(ax)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">))</span>
<span class="c1">#ax.get_legend().remove()</span>
<span class="n">cov</span><span class="o">.</span><span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">seqdistr</span><span class="p">,</span> <span class="s2">"cc"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">shorten</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">,</span>
              <span class="n">colorize</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="n">nseqvars</span><span class="p">),</span> <span class="n">ends</span><span class="o">=</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: SARS-CoV-2-Varianten-Abwasserlast, Stand Varianten: "</span> <span class="o">+</span> <span class="n">seqdate</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Genkopien pro Tag / EW * 10⁶"</span><span class="p">)</span>


<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">seqdistr</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"case_inz"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"."</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_date_opts</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
<span class="n">cov</span><span class="o">.</span><span class="n">labelend2</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">seqdistr</span><span class="p">,</span> <span class="s2">"case_inz"</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">shorten</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">,</span>
              <span class="n">colorize</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">n_colors</span><span class="o">=</span><span class="n">nseqvars</span><span class="p">),</span> <span class="n">ends</span><span class="o">=</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper center"</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Österreich: SARS-CoV-2-Varianten-Fall-Inzidenz, logarithmisch, Stand Varianten: "</span> <span class="o">+</span> <span class="n">seqdate</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Fälle pro Woche / 100.000 EW"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>seqdate='Di. 11.07.2023'
Distr bis KW 26
</pre>
</div>
</div>
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[217]:</div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain" tabindex="0">
<pre>Text(0, 0.5, 'Fälle pro Woche / 100.000 EW')</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_247_2.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_247_3.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_247_4.png"/>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output" tabindex="0">
<img alt="No description has been provided for this image" class="" src="covidat-old_files/covidat-old_247_5.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=48a4076c">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [218]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Alter Code für:</span>
<span class="c1"># Quelle: Gesamt-Fallzahlen der AGES, Anteile aus grober Pixelzählung von </span>
<span class="c1"># * https://twitter.com/EllingUlrich/status/1532750801164197889</span>
<span class="c1"># * https://twitter.com/EllingUlrich/status/1535259206655295488</span>
<span class="c1"># (Meine variants.csv habe ich nie veröffentlicht, war auch sehr unvollständig)</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">variants</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"variants.csv"</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">";"</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">])</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">fs_at</span><span class="p">[[</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]],</span> <span class="n">on</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">)</span>
    <span class="n">variants</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">*=</span> <span class="n">variants</span><span class="p">[</span><span class="s2">"rel_freq"</span><span class="p">]</span>
    <span class="n">variants</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"variant"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">variants</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">variants</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span>
        <span class="n">variants</span><span class="p">,</span>
        <span class="n">variants</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"variant != 'BA.2'"</span><span class="p">)[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span>
            <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">sum</span><span class="p">()</span>
            <span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
            <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">variant</span><span class="o">=</span><span class="s2">"Nicht-BA.2"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"variant"</span><span class="p">])])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
    <span class="n">variants</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">]</span> <span class="o">=</span> <span class="n">variants</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s2">"variant"</span><span class="p">])</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="o">/</span> <span class="n">s</span><span class="o">.</span><span class="n">shift</span><span class="p">())</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">variants</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fs_at0</span> <span class="o">=</span> <span class="n">fs_at</span><span class="p">[</span><span class="n">fs_at</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">variants</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_at0</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Gesamt"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">WeekdayLocator</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Fallzahlen je SARS-CoV-2-Variante, logarithmisch"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>

    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">variants</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"inz_g7"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_at0</span><span class="p">[</span><span class="s2">"inz_g7"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Gesamt"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"7-Tage-Wachstumsrate je SARS-CoV-2-Variante"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>

    <span class="n">lastdate</span> <span class="o">=</span> <span class="n">variants</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s2">"Datum"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">nextdate</span> <span class="o">=</span> <span class="n">lastdate</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">nextc</span> <span class="o">=</span> <span class="p">(</span><span class="n">variants</span>
                <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s2">"variant"</span><span class="p">])</span>
                <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">"inz_g7"</span><span class="p">])</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">())</span>
    <span class="n">nextc</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">]</span> <span class="o">=</span> <span class="n">nextdate</span>
    <span class="n">nextc</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">nextc</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="s2">"variant"</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">nextc</span><span class="p">)</span>
    <span class="n">variants</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">variants</span><span class="p">,</span> <span class="n">nextc</span><span class="p">])</span>
    <span class="n">display</span><span class="p">(</span><span class="n">variants</span><span class="p">)</span>


    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">variants</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Datum"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">"variant"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"o"</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fs_at0</span><span class="p">[</span><span class="s2">"Datum"</span><span class="p">],</span> <span class="n">fs_at0</span><span class="p">[</span><span class="s2">"AnzahlFaelle7Tage"</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"Gesamt"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">WeekdayLocator</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Fallzahlen je SARS-CoV-2-Variante, logarithmisch"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">nextdate</span><span class="p">],</span> <span class="p">[</span><span class="n">variants</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"variant != 'Nicht-BA.2'"</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">nextdate</span><span class="p">,</span> <span class="s2">"AnzahlFaelle7Tage"</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()],</span> <span class="n">marker</span><span class="o">=</span><span class="s2">"X"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"r"</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">cov</span><span class="o">.</span><span class="n">set_logscale</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">lastdate</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">num2date</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"k"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</main>
</body>
</html>
